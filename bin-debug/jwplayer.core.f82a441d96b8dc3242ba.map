{"version":3,"sources":["webpack:///./src/js/controller/controller.js","webpack:///./src/js/utils/ui.js","webpack:///./src/js/parsers/captions/srt.js","webpack:///./src/js/utils/cancelable.js","webpack:///./src/js/controller/model.js","webpack:///./src/js/utils/request-animation-frame.js","webpack:///./src/js/view/utils/breakpoint.js","webpack:///./node_modules/css-loader/lib/css-base.js","webpack:///./src/js/program/program-controller.js","webpack:///./src/js/utils/eventable.js","webpack:///./src/js/program/program-listeners.js","webpack:///./src/js/events/change-state-event.js","webpack:///./src/js/utils/active-tab.js","webpack:///./src/js/controller/tracks-loader.js","webpack:///./src/js/controller/tracks-helper.js","webpack:///./src/js/providers/utils/play-promise.js","webpack:///./src/js/parsers/captions/vttcue.js","webpack:///./src/js/parsers/captions/dfxp.js","webpack:///./src/js/api/set-config.js","webpack:///./src/js/controller/instream-adapter.js","webpack:///./src/js/program/ad-program-controller.js","webpack:///./src/js/program/media-controller.js","webpack:///./src/js/program/background-media.js","webpack:///./src/js/controller/captions.js","webpack:///./src/js/view/view.js","webpack:///./src/templates/player.js","webpack:///./src/js/view/utils/audio-mode.js","webpack:///./src/js/view/utils/views-manager.js","webpack:///./src/js/view/utils/visibility.js","webpack:///./src/js/view/utils/skin.js","webpack:///./src/js/view/utils/request-fullscreen-helper.js","webpack:///./src/js/view/utils/flag-no-focus.js","webpack:///./src/js/view/utils/clickhandler.js","webpack:///./src/js/view/captionsrenderer.js","webpack:///./src/js/view/logo.js","webpack:///./src/templates/logo.js","webpack:///./src/js/view/preview.js","webpack:///./src/js/view/title.js","webpack:///./src/css/jwplayer.less?586a","webpack:///./src/css/jwplayer.less","webpack:///./src/js/view/view-model.js","webpack:///./src/js/controller/events-middleware.js","webpack:///./src/js/utils/can-autoplay.js","webpack:///./src/js/providers/utils/stream-type.js","webpack:///./src/js/controller/qoe.js"],"names":["normalizeState","newstate","Controller","prototype","setup","config","_api","originalContainer","eventListeners","commandQueue","mediaPool","_this","_model","_view","_captions","_beforePlay","_actionOnAttach","_stopPlaylist","_interruptPlay","checkAutoStartCancelable","_checkAutoStart","updatePlaylistCancelable","primeBeforePlay","currentContainer","_events","trigger","type","args","data","call","eventsReadyQueue","_trigger","event","viewModel","on","_programController","updateProgramSoundSettings","addProgramControllerListeners","triggerError","model","isBlocked","set","undefined","throttled","get","errorEvent","message","evt","bool","fullscreen","vol","volume","mute","getMute","rate","playbackRate","position","state","_pause","_play","reason","captionsList","tracks","track","mediaModel","change","changedMediaModel","duration","minDvrWindow","setStreamType","index","recsAuto","oncomplete","item","backgroundLoading","onPosition","daiSetting","off","backgroundLoad","viewElement","playerReady","related","getPlugin","nextUp","Object","sources","once","_playerReadyNotify","init","_updateViewable","setupTime","playlist","length","eventData","feedData","eventFeedData","playlistItem","flush","destroy","viewableChange","_checkPlayOnViewable","visibility","isUndefined","Math","round","apiQueue","_autoStart","viewable","preloadVideo","mobile","pause","_load","instream","_instreamAdapter","noResume","_stop","cancel","_inInteraction","window","primeMediaElements","loadPromise","attributes","itemReady","loadPlaylistPromise","_loadPlaylist","catch","error","updatePlaylist","then","async","_setItem","toLoad","resolve","reject","loader","load","_getAdState","getState","_getState","adState","isString","meta","playReason","_getReason","startTime","pauseAd","playVideo","adConfig","cancelable","muted","allowMuted","autoplayadsmuted","result","cancelled","internal","empty","fromApi","stopVideo","pauseReason","_isIdle","_seek","pos","play","_item","parseInt","setActiveItem","_prev","_next","_completeHandler","idx","iOS","_setFullscreen","triggerAdvanceEvent","_setCurrentQuality","quality","_getCurrentQuality","_getConfig","getConfiguration","_getVisualQuality","_getQualityLevels","qualities","_setCurrentAudioTrack","audioTrack","_getCurrentAudioTrack","_getAudioTracks","audioTracks","_setCurrentCaptions","persistVideoSubtitleTrack","subtitles","_getCaptionsList","_getCurrentCaptions","getCurrentIndex","getCaptionsList","_detachMedia","backgroundActiveMedia","attached","_attachMedia","restoreBackgroundMedia","isBoolean","_adModel","_nextUp","next","cb","mode","ui","target","itemsShown","e","setSubtitlesTracks","defaultCaptionsIndex","seek","stop","playlistNext","playlistPrev","setCurrentCaptions","setCurrentQuality","setFullscreen","detachMedia","attachMedia","getCurrentQuality","getQualityLevels","setCurrentAudioTrack","getCurrentAudioTrack","getAudioTracks","getCurrentCaptions","getVisualQuality","getConfig","setConfig","newConfig","setItemIndex","castVideo","castProvider","stopCast","preloadNextItem","backgroundMedia","isBeforeComplete","beforeComplete","setVolume","setMute","setPlaybackRate","getProvider","getWidth","getHeight","getItemQoe","_qoeItem","addButton","img","tooltip","callback","id","btnClass","customButtons","replaced","newButton","reduce","buttons","button","push","unshift","removeButton","filter","resize","getSafeRegion","setCaptions","checkBeforePlay","setControls","controls","setCues","cues","filteredPlaylist","playerDestroy","instreamDestroy","isBeforePlay","createInstream","skipAd","queue","apply","property","getContainer","test","getPointerType","TouchEvent","PointerEvent","_supportsPointerEvents","android","_supportsTouchEvents","_useMouseEvents","_isOSXFirefox","firefox","mac","getCoord","c","originalEvent","changedTouches","isRightClick","MouseEvent","which","isEnterKey","KeyboardEvent","keyCode","stopPropagation","normalizeUIEvent","srcEvent","source","touches","sourceEvent","currentTarget","pageX","pageY","preventDefault","preventManipulation","UI","elem","options","_elem","_hasMoved","_startX","_startY","_lastClickTime","_doubleClickDelay","_touchListenerTarget","_pointerId","listenerOptions","passiveEvents","passive","preventScrolling","interactEndDelegate","interactEndHandler","addEventListener","interactStartHandler","useHover","overHandler","pointerOutHandler","useMove","moveHandler","outHandler","keyHandler","useFocus","pointerType","triggerEvent","x","y","overElement","document","elementFromPoint","contains","setEventListener","element","eventName","removeEventListener","isPrimary","pointerId","setPointerCapture","interactDragHandler","nodeName","toLowerCase","movementThreshold","endX","endY","moveX","moveY","isPointerEvent","releasePointerCapture","directSelect","indexOf","self","enableDoubleTap","doubleType","Srt","list","split","i","entry","_entry","text","array","line","begin","substr","end","slice","join","arguments","Model","providers","_provider","MediaModel","setAutoStart","clone","mediaModelAttributes","keys","forEach","key","persistQualityLevel","levels","currentLevel","label","resetItem","setMediaModel","syncPlayerWithMediaModel","_destroyed","getVideo","getProviders","max","streamType","setProvider","provider","syncProviderProperties","resetProvider","isNumber","min","persistCaptionsTrack","name","setVideoSubtitleTrack","trackIndex","autoStart","autoStartOnMobile","starttime","itemMeta","getName","instreamMode","supportsPlaybackRate","getPlaybackRate","renderNatively","mediaState","srcReset","started","preloaded","visualQuality","buffer","currentTime","requestAnimationFrame","setTimeout","cancelAnimationFrame","clearTimeout","getBreakpoint","setBreakpoint","width","breakpoint","playerElement","breakpointNumber","breakpointClass","ProgramController","adPlaying","background","mediaController","mediaControllerListener","getPrimedElement","getSource","Error","isNext","_destroyActiveMedia","_activateBackgroundMedia","_destroyBackgroundMedia","casting","_providerCanPlay","activeItem","_setActiveMedia","mediaModelContext","_setupMediaController","nextMediaController","err","playPromise","thenPlayPromise","media","currentMedia","preload","castMediaController","_destroyMediaController","backgroundMediaController","setNext","clearNext","prime","assignMediaContainer","mediaElement","forwardEvents","detach","_destroyBackgroundLoadingMedia","recycle","makeMediaController","ProviderConstructor","primedElement","choose","nextLoadPromise","shouldAttach","attach","syncMute","beforeLoad","syncVolume","container","changedModel","changedContainer","programController","Eventable","ProviderListener","MediaControllerListener","mediaType","previousState","_playbackComplete","bufferPercent","currentQuality","currentTrack","metadata","ChangeStateEvent","normalizeApiState","oldstate","eventType","replace","hidden","webkitHidden","loadFile","cancelXhr","convertToVTTCues","successHandler","errorHandler","xhr","ajax","file","xhrSuccess","onload","onreadystatechange","onerror","abort","map","cue","xmlRoot","responseXML","firstChild","vttCues","nextSibling","nodeType","COMMENT_NODE","responseText","loadVttParser","parser","VTTParser","oncue","onflush","parse","require","default","createId","createLabel","tracksCount","trackId","prefix","kind","defaulttrack","_id","unknownCount","language","createPlayPromise","video","paused","removeEventListeners","listener","VTTCue","findDirectionSetting","value","directionSetting","lr","rl","dir","findAlignSetting","alignSetting","start","middle","left","right","align","autoKeyword","endTime","hasBeenReset","_pauseOnExit","_startTime","_endTime","_text","_region","_vertical","_snapToLines","_line","_lineAlign","_position","_size","_align","defineProperty","enumerable","TypeError","setting","SyntaxError","displayState","getCueAsHTML","WebVTT","convertCueToDOMTree","Dfxp","xmlDoc","validate","paragraphs","getElementsByTagName","frameRate","tt","parsedFrameRate","parseFloat","getAttribute","isNaN","p","breaks","j","b","parentNode","replaceChild","createTextNode","rawText","innerHTML","textContent","dur","parseError","object","supportedFields","controller","size","newValue","field","_defaultOptions","skipoffset","tag","InstreamAdapter","_controller","_mediaPool","_adProgram","_array","_arrayOptions","_arrayIndex","_options","_skipAd","_instreamItemNext","_backgroundLoadTriggered","_oldpos","_skipOffset","_backgroundLoadStart","_inited","_clickHandler","hasControls","_doubleClickHandler","addAdProgramTimeListener","_instreamTime","clickHandler","setAlternateClickHandlers","_instreamForward","triggerPlayRejected","_instreamItemComplete","_instreamMeta","mediaContainer","appendChild","setText","loadingAd","_loadNextItem","loadItem","isArray","adModel","addClickHandler","setupSkipButton","customNext","skipMessage","skipText","skipButton","applyProviderListeners","usePsuedoProvider","skipAdType","height","resizeMedia","replacePlaylistItem","revertAlternateClickHandlers","setAltText","hide","getMediaElement","setSkipOffset","skipOffset","AdProgramController","playerModel","getAdElement","mediaSrc","src","srcResetListener","defaultPlaybackRate","playerAttributes","edition","mediaContext","autostartMuted","autostart","advertising","sdkplatform","_nativeFullscreenHandler","_setProvider","isVpaidProvider","adMediaModelContext","changeAdModel","_stateHandler","clean","removeChild","jwstate","MediaController","providerListener","addProviderListeners","eventQueue","_loadAndPlay","_playAttempt","remove","videoTagPaused","setState","providerSetupPromise","shouldBackground","setContainer","mediaModelState","setSubtitlesTrack","BackgroundMedia","nextMedia","defineProperties","JSON","stringify","Captions","_tracks","_tracksById","_unknownCount","captionsIndex","_captionsMenu","len","_kindSupported","_addTrack","_addVTTCuesToTrack","_setCaptionsList","captionsMenuIndex","_setSubtitlesTracks","labelInfo","_selectDefaultIndex","autoselect","_setCurrentIndex","listIdentity","ControlsLoader","ControlsModule","_isMobile","_isIE","ie","View","isSetup","api","_playerElement","player","_videoLayer","querySelector","_preview","_title","_captionsRenderer","_logo","_lastWidth","_lastHeight","_resizeMediaTimeout","_resizeContainerRequestId","_stateClassRequestId","displayClickHandler","fullscreenHelpers","focusHelper","_breakpoint","_controls","reasonInteraction","updateBounds","inDOM","body","rect","containerWidth","containerHeight","_responsiveListener","observe","updateStyles","updateContainerStyles","_resizeMedia","checkResized","_responsiveUpdate","audioMode","smallPlayer","_logoClickHandler","insertBefore","clickHandlerHelper","_fullscreenChangeHandler","val","playerViewModel","_errorHandler","onStretchChange","onFlashBlockedChange","_resizePlayer","onAspectRatioChange","skin","skinColors","iframe","add","updateVisibility","_fullscreen","redraw","setupInstream","destroyInstream","changeControls","_setLiveMode","_onMediaTypeChange","onPlaylistItem","enable","controlsEvent","module","Controls","enabledState","addControls","removeControls","lastVisibility","videoLayer","click","settingsMenuVisible","settingsMenu","close","playToggle","tap","renderCues","showing","userActive","userInactive","doubleClick","mouseMove","relatedTarget","newVal","aspectratio","aspectRatioContainer","paddingTop","link","open","linktarget","disable","unmuteAutoplay","supportsDomFullscreen","requestFullscreen","exitFullscreen","_toggleDOMFullscreen","playerWidth","playerHeight","resetAspectMode","widthSet","heightSet","playerStyle","_isNativeFullscreen","fsElement","fullscreenElement","getFullScreen","modelState","newState","fullscreenState","overflowY","live","isAudioFile","isFlash","el","errorContainer","cloneIcon","oldState","_stateUpdate","show","setMediaTitleAttribute","videotag","dummyDiv","createElement","title","setAttribute","setPosterImage","setImage","image","visible","controlsContainer","excludeControlbar","safeRegion","controlbarHeight","captionsStyle","clear","unobserve","ariaLabel","CONTROLBAR_ONLY_HEIGHT","isAudioMode","verticalPixels","NaN","views","observed","intersectionObserver","responsiveRepaintRequestId","lazyInitIntersectionObserver","IntersectionObserver","entries","view","intersectionRatio","threshold","scheduleResponsiveRedraw","responsiveRepaint","onVisibilityChange","splice","getVisibility","computeVisibility","html","documentElement","rootRect","top","clientWidth","bottom","clientHeight","getComputedStyle","display","targetRect","getBoundingClientRect","intersectionRect","parent","atRoot","parentRect","overflow","computeRectIntersection","targetArea","intersectionArea","rect1","rect2","normalizeSkin","handleColorOverrides","skinConfig","active","inactive","colors","controlbar","getControlBar","timeslider","getTimeSlider","menus","getMenus","tooltips","getTooltips","controlBarConfig","iconsActive","icons","timesliderConfig","progress","rail","menusConfig","textActive","tooltipsConfig","playerId","addStyle","elements","attr","extendParent","o","styleControlbar","styleTimeslider","styleMenus","styleTooltips","insertGlobalColorClasses","activeColorSet","color","borderColor","stroke","inactiveColorSet","elementContext","documentContext","changeCallback","webkitRequestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen","webkitExitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen","DOCUMENT_FULLSCREEN_EVENTS","events","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement","_focusFromClick","onBlur","onMouseDown","onFocus","ClickHandler","domElement","alternateDoubleClickHandler","alternateClickHandler","doubleClickHandler","_WebVTT","_defaults","back","backgroundOpacity","edgeStyle","fontSize","fontOpacity","fontScale","preprocessor","identity","windowOpacity","CaptionsRenderer","_captionsTrack","_currentCues","_timeEvent","_display","_captionsWindow","_textContainer","_fontScale","_windowStyle","className","populate","captions","selectCues","_setFontSize","updateBoxPosition","processCues","timeEvent","getAlignmentPosition","getCurrentCues","updateCurrentCues","allCues","difference","playerElementId","_setFontScale","windowColor","textStyle","_addTextStyle","backgroundColor","_addEdgeStyle","_setupCaptionStyles","captionsTrack","isFinite","_setShadowDOMFontSize","_styleNativeCaptions","_stylePlayerCaptions","safari","bgColor","bgOpacity","fontFamily","fontStyle","fontWeight","textDecoration","option","styles","textShadow","_timeChange","_captionsListHandler","loadWebVttPolyfill","Logo","LogoDefaults","margin","_settings","_img","Image","toString","backgroundImage","positions","exec","maxHeight","maxWidth","logoAR","videoAR","logoInteractHandler","jwhide","Preview","validState","stretching","playerAspectRatio","backgroundSize","imageAspectRatio","abs","Title","titleEl","arr","description","update","titleStyle","logo","padding","paddingLeft","paddingRight","updateText","SimpleModelExtendable","changeEventRegEx","dispatchDiffChangeEvents","newAttributes","oldAttributes","removeListeners","instance","PlayerViewModel","eventFilter","_mediaModel","altText","logoWidth","scrubbing","objectOrEvent","previousValue","previousMediaModel","ViewModel","instreamModel","_instreamModel","match","_playerViewModel","previousInstream","mergedAttributes","middleware","currentState","canAutoplay","VIDEO","Blob","Uint8Array","startPlayback","URL","createObjectURL","AUTOPLAY_ENABLED","AUTOPLAY_MUTED","AUTOPLAY_DISABLED","autoplayPagePromises","timeout","getTestElement","timeoutId","promise","timer","race","isDvr","_minDvrWindow","Infinity","TAB_HIDDEN","TAB_VISIBLE","onTimeIncreasesGenerator","lastVal","unbindFirstFrameEvents","_onPlayAttempt","_triggerFirstFrame","_onTime","_onTabVisible","trackFirstFrame","qoeItem","tick","time","getFirstFrame","loadTime","modelChanged","activeTab","initQoe","initialModel","onMediaModel","oldMediaModel","between","timeActive","changeMediaModel"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;AAIA;;;;AACA;;;;AACA;;AACA;;;;;;AAEA;AACA,SAASA,cAAT,CAAwBC,QAAxB,EAAkC;AAC9B,QAAIA,sCAA8BA,kCAAlC,EAA8D;AAC1D;AACH;AACD,WAAOA,QAAP;AACH;;AAED,IAAMC,aAAa,SAAbA,UAAa,GAAW,CAAE,CAAhC;;AAEA,SAAcA,WAAWC,SAAzB,EAAoC;AAChCC,SADgC,iBAC1BC,MAD0B,EAClBC,IADkB,EACZC,iBADY,EACOC,cADP,EACuBC,YADvB,EACqCC,SADrC,EACgD;AAAA;;AAC5E,YAAMC,QAAQ,IAAd;AACA,YAAMC,SAASD,MAAMC,MAAN,GAAe,qBAA9B;;AAEA,YAAIC,cAAJ;AACA,YAAIC,kBAAJ;AACA,YAAIC,cAAc,KAAlB;AACA,YAAIC,wBAAJ;AACA,YAAIC,gBAAgB,KAApB;AACA,YAAIC,uBAAJ;AACA,YAAIC,2BAA2B,0BAAWC,eAAX,CAA/B;AACA,YAAIC,2BAA2B,0BAAW,YAAW,CAAE,CAAxB,CAA/B;AACA,YAAIC,kBAAkB,IAAtB;;AAEAX,cAAMJ,iBAAN,GAA0BI,MAAMY,gBAAN,GAAyBhB,iBAAnD;AACAI,cAAMa,OAAN,GAAgBhB,cAAhB;;AAEA;AACAG,cAAMc,OAAN,GAAgB,UAAUC,IAAV,EAAgBC,IAAhB,EAAsB;AAClC,gBAAMC,OAAO,gCAAiBhB,MAAjB,EAAyBc,IAAzB,EAA+BC,IAA/B,CAAb;AACA,mBAAO,mBAAOF,OAAP,CAAeI,IAAf,CAAoB,IAApB,EAA0BH,IAA1B,EAAgCE,IAAhC,CAAP;AACH,SAHD;;AAKA,YAAIE,mBAAmB,uBAAsBnB,KAAtB,EAA6B,CAChD,SADgD,CAA7B,EAEpB;AAAA,mBAAM,IAAN;AAAA,SAFoB,CAAvB;;AAIA,YAAMoB,WAAW,SAAXA,QAAW,CAACL,IAAD,EAAOM,KAAP,EAAiB;AAC9BrB,kBAAMc,OAAN,CAAcC,IAAd,EAAoBM,KAApB;AACH,SAFD;;AAIApB,eAAOR,KAAP,CAAaC,MAAb;;AAEA,YAAM4B,YAAY,wBAAcrB,MAAd,CAAlB;;AAEAC,gBAAQ,KAAKA,KAAL,GAAa,mBAASP,IAAT,EAAe2B,SAAf,CAArB;AACApB,cAAMqB,EAAN,CAAS,KAAT,EAAgBH,QAAhB,EAA0BpB,KAA1B;;AAEA,YAAMwB,qBAAqB,gCAAsBvB,MAAtB,EAA8BF,SAA9B,CAA3B;AACA0B;AACAC;AACA,2BAAQzB,MAAR,EAAgBuB,kBAAhB;;AAEAvB,eAAOsB,EAAP,gBAAiBvB,MAAM2B,YAAvB,EAAqC3B,KAArC;;AAEA;AACAC,eAAOsB,EAAP,CAAU,qBAAV,EAAiC,UAASK,KAAT,EAAgBC,SAAhB,EAA2B;AACxD,gBAAI,CAACA,SAAL,EAAgB;AACZ,qBAAK5B,MAAL,CAAY6B,GAAZ,CAAgB,YAAhB,EAA8BC,SAA9B;AACA;AACH;AACD;AACA,gBAAMC,YAAY,CAAC,CAACJ,MAAMK,GAAN,CAAU,eAAV,CAApB;AACA,gBAAMC,aAAa;AACfC,yBAASH,YAAY,oBAAZ,GAAmC;AAD7B,aAAnB;AAGA;AACA,gBAAI,CAACA,SAAL,EAAgB;AACZ,qBAAKlB,OAAL,gBAAoBoB,UAApB;AACH;AACD,iBAAKjC,MAAL,CAAY6B,GAAZ,CAAgB,YAAhB,EAA8BI,UAA9B;AACH,SAfD,EAeG,IAfH;;AAiBAjC,eAAOsB,EAAP,CAAU,cAAV,8BAA4C,IAA5C;;AAEAtB,eAAOsB,EAAP,CAAU,kBAAV,EAA8B,UAASK,KAAT,EAAgBQ,GAAhB,EAAqB;AAC/CpC,kBAAMc,OAAN,uBAA4BsB,GAA5B;AACH,SAFD;;AAIAnC,eAAOsB,EAAP,CAAU,mBAAV,EAA+B,UAASK,KAAT,EAAgBS,IAAhB,EAAsB;AACjDrC,kBAAMc,OAAN,qBAA0B;AACtBwB,4BAAYD;AADU,aAA1B;AAGA,gBAAIA,IAAJ,EAAU;AACN;AACAT,sBAAME,GAAN,CAAU,gBAAV,EAA4B,KAA5B;AACH;AACJ,SARD;;AAUA7B,eAAOsB,EAAP,CAAU,eAAV,EAA2B,UAASK,KAAT,EAAgBW,GAAhB,EAAqB;AAC5CvC,kBAAMc,OAAN,uBAA4B;AACxB0B,wBAAQD;AADgB,aAA5B;AAGH,SAJD;;AAMAtC,eAAOsB,EAAP,CAAU,aAAV,EAAyB,UAASK,KAAT,EAAgB;AACrC5B,kBAAMc,OAAN,qBAA0B;AACtB2B,sBAAMb,MAAMc,OAAN;AADgB,aAA1B;AAGH,SAJD;;AAMAzC,eAAOsB,EAAP,CAAU,qBAAV,EAAiC,UAASK,KAAT,EAAgBe,IAAhB,EAAsB;AACnD3C,kBAAMc,OAAN,gCAAqC;AACjC8B,8BAAcD,IADmB;AAEjCE,0BAAUjB,MAAMK,GAAN,CAAU,UAAV;AAFuB,aAArC;AAIH,SALD;;AAOAhC,eAAOsB,EAAP,CAAU,kBAAV,EAA8B,UAASK,KAAT,EAAgBkB,KAAhB,EAAuB;AACjD,gBAAIA,KAAJ,EAAW;AACPC;AACH,aAFD,MAEO;AACHC,sBAAM,EAAEC,QAAQ,aAAV,EAAN;AACH;AACJ,SAND;;AAQA;AACAhD,eAAOsB,EAAP,CAAU,qBAAV,EAAiC,UAASK,KAAT,EAAgBsB,YAAhB,EAA8B;AAC3DlD,kBAAMc,OAAN,wBAA6B;AACzBqC,wBAAQD,YADiB;AAEzBE,uBAAOnD,OAAOgC,GAAP,CAAW,eAAX,KAA+B;AAFb,aAA7B;AAIH,SALD;;AAOAhC,eAAOsB,EAAP,CAAU,mBAAV,EAA+B,UAASK,KAAT,EAAgByB,UAAhB,EAA4B;AAAA;;AACvDzB,kBAAME,GAAN,CAAU,YAAV,EAAwBC,SAAxB;AACAsB,uBAAWC,MAAX,CAAkB,YAAlB,EAAgC,UAAUC,iBAAV,EAA6BT,KAA7B,EAAoC;AAChE,oBAAI,CAAClB,MAAMK,GAAN,CAAU,YAAV,CAAL,EAA8B;AAC1BL,0BAAME,GAAN,uBAAwBzC,eAAeyD,KAAf,CAAxB;AACH;AACJ,aAJD,EAIG,IAJH;AAKAO,uBAAWC,MAAX,CAAkB,UAAlB,EAA8B,UAAUC,iBAAV,EAA6BC,QAA7B,EAAuC;AACjE,oBAAIA,aAAa,CAAjB,EAAoB;AAChB;AACH;AACD,oBAAMC,eAAe7B,MAAMK,GAAN,CAAU,cAAV,CAArB;AACA,oBAAMlB,OAAO,4BAAWyC,QAAX,EAAqBC,YAArB,CAAb;AACA7B,sBAAM8B,aAAN,CAAoB3C,IAApB;AACH,aAPD,EAOG,IAPH;;AASA,gBAAM4C,QAAQ/B,MAAMK,GAAN,CAAU,MAAV,IAAoB,CAAlC;AACA,gBAAM2B,WAAW,CAAChC,MAAMK,GAAN,CAAU,SAAV,KAAwB,EAAzB,EAA6B4B,UAA7B,KAA4C,UAA7D;AACA,gBAAIC,OAAOlC,MAAMK,GAAN,CAAU,UAAV,EAAsB0B,KAAtB,CAAX;AACA,gBAAI,CAACG,QAAQF,QAAT,KAAsB,sBAASG,iBAAnC,EAAsD;AAClD,oBAAMC,aAAa,SAAbA,UAAa,CAACT,iBAAD,EAAoBV,QAApB,EAAiC;AAChD;AACA,wBAAKiB,QAAQ,CAACA,KAAKG,UAAf,IAA8BpB,YAAYQ,WAAWpB,GAAX,CAAe,UAAf,4CAA9C,EAAmG;AAC/FoB,mCAAWa,GAAX,CAAe,iBAAf,EAAkCF,UAAlC;AACAxC,2CAAmB2C,cAAnB,CAAkCL,IAAlC;AACH,qBAHD,MAGO,IAAIF,QAAJ,EAAc;AACjBE,+BAAO7D,OAAOgC,GAAP,CAAW,QAAX,CAAP;AACH;AACJ,iBARD;AASAoB,2BAAW9B,EAAX,CAAc,iBAAd,EAAiCyC,UAAjC,EAA6C,IAA7C;AACH;AACJ,SA/BD;;AAiCA;AACA7D,oBAAY,uBAAaF,MAAb,CAAZ;AACAE,kBAAUoB,EAAV,CAAa,KAAb,EAAoBH,QAApB,EAA8BpB,KAA9B;;AAEAsB,kBAAUC,EAAV,CAAa,WAAb,EAA0B,UAAC6C,WAAD,EAAiB;AACvC,4CAAeA,WAAf;AACH,SAFD;;AAIA,aAAKC,WAAL,GAAmB,YAAW;AAC1B,gBAAMC,UAAU3E,KAAK4E,SAAL,CAAe,SAAf,CAAhB;AACA,gBAAID,OAAJ,EAAa;AACTA,wBAAQ/C,EAAR,CAAW,QAAX,EAAqB,UAACiD,MAAD,EAAY;AAC7B,wBAAIV,OAAO,IAAX;AACA,wBAAIU,WAAWC,OAAOD,MAAP,CAAf,EAA+B;AAC3B;AACAV,+BAAO,oBAAKU,MAAL,CAAP;AACAV,6BAAKY,OAAL,GAAe,0BAAWZ,IAAX,EAAiB7D,MAAjB,CAAf;AACH;AACDA,2BAAO6B,GAAP,CAAW,QAAX,EAAqBgC,IAArB;AACH,iBARD;AASH;;AAED;AACA;AACA5D,kBAAMyE,IAAN,iBAAmBC,kBAAnB;;AAEA1E,kBAAM2E,IAAN;AACH,SAnBD;;AAqBA,iBAASD,kBAAT,GAA8B;AAC1B3E,mBAAOqD,MAAP,CAAc,YAAd,EAA4BwB,eAA5B;AACA3D,6BAAiB+C,GAAjB;;AAEA;AACAlE,kBAAMc,OAAN,gBAAqB;AACjB;AACAiE,2BAAW;AAFM,aAArB;;AAKA9E,mBAAOqD,MAAP,CAAc,UAAd,EAA0B,UAAS1B,KAAT,EAAgBoD,QAAhB,EAA0B;AAChD,oBAAIA,SAASC,MAAb,EAAqB;AACjB,wBAAMC,YAAY;AACdF,kCAAUA;AADI,qBAAlB;AAGA,wBAAMG,WAAWlF,OAAOgC,GAAP,CAAW,UAAX,CAAjB;AACA,wBAAIkD,QAAJ,EAAc;AACV,4BAAMC,gBAAgB,SAAc,EAAd,EAAkBD,QAAlB,CAAtB;AACA,+BAAOC,cAAcJ,QAArB;AACAE,kCAAUC,QAAV,GAAqBC,aAArB;AACH;AACDpF,0BAAMc,OAAN,0BAA+BoE,SAA/B;AACH;AACJ,aAbD;;AAeAjF,mBAAOqD,MAAP,CAAc,cAAd,EAA8B,UAAS1B,KAAT,EAAgByD,YAAhB,EAA8B;AACxD,oBAAIA,YAAJ,EAAkB;AACdrF,0BAAMc,OAAN,wBAA6B;AACzB6C,+BAAO1D,OAAOgC,GAAP,CAAW,MAAX,CADkB;AAEzB6B,8BAAMuB;AAFmB,qBAA7B;AAIH;AACJ,aAPD;;AASAlE,6BAAiBmE,KAAjB;AACAnE,6BAAiBoE,OAAjB;AACApE,+BAAmB,IAAnB;;AAEAlB,mBAAOqD,MAAP,CAAc,UAAd,EAA0BkC,cAA1B;AACAvF,mBAAOqD,MAAP,CAAc,UAAd,EAA0BmC,oBAA1B;AACAxF,mBAAO0E,IAAP,CAAY,oCAAZ,EAAkD,UAAS/C,KAAT,EAAgB;AAC9DA,sBAAMsC,GAAN,CAAU,iBAAV,EAA6BuB,oBAA7B;AACH,aAFD;;AAIA;AACA;AACAhF;AACH;;AAED,iBAASqE,eAAT,CAAyBlD,KAAzB,EAAgC8D,UAAhC,EAA4C;AACxC,gBAAI,CAAC,qBAAEC,WAAF,CAAcD,UAAd,CAAL,EAAgC;AAC5BzF,uBAAO6B,GAAP,CAAW,UAAX,EAAuB8D,KAAKC,KAAL,CAAWH,UAAX,CAAvB;AACH;AACJ;;AAED,iBAASjF,eAAT,GAA2B;AACvB,gBAAI,CAACqF,QAAL,EAAe;AACX;AACA;AACH;;AAED;AACA,gBAAI7F,OAAOgC,GAAP,CAAW,WAAX,MAA4B,IAA5B,IAAoC,CAAChC,OAAOgC,GAAP,CAAW,gBAAX,CAAzC,EAAuE;AACnE8D;AACH;AACDD,qBAASR,KAAT;AACH;;AAED,iBAASE,cAAT,CAAwB5D,KAAxB,EAA+BoE,QAA/B,EAAyC;AACrChG,kBAAMc,OAAN,CAAc,UAAd,EAA0B;AACtBkF,0BAAUA;AADY,aAA1B;;AAIA;AACA,gBAAI,kBAAU,CAAV,MAAiBrG,IAAjB,IAAyBqG,aAAa,CAA1C,EAA6C;AACzC;AACH;AACD,gBAAI/F,OAAOgC,GAAP,CAAW,OAAX,MAAwB,MAAxB,IAAkChC,OAAOgC,GAAP,CAAW,WAAX,MAA4B,KAAlE,EAAyE;AACrET,mCAAmByE,YAAnB;AACH;AACJ;;AAED,iBAASR,oBAAT,CAA8B7D,KAA9B,EAAqCoE,QAArC,EAA+C;AAC3C,gBAAIpE,MAAMK,GAAN,CAAU,gBAAV,CAAJ,EAAiC;AAC7B,oBAAI+D,QAAJ,EAAc;AACVD;AACH,iBAFD,MAEO,IAAI,gBAAGG,MAAP,EAAe;AAClBlG,0BAAMmG,KAAN,CAAY,EAAElD,QAAQ,WAAV,EAAZ;AACH;AACJ;AACJ;;AAED,iBAASmD,KAAT,CAAetC,IAAf,EAAqBqB,QAArB,EAA+B;;AAE3B,gBAAMkB,WAAWrG,MAAMsG,gBAAvB;AACA,gBAAID,QAAJ,EAAc;AACVA,yBAASE,QAAT,GAAoB,IAApB;AACH;AACDvG,kBAAMc,OAAN,CAAc,eAAd,EAA+B,EAA/B;AACA0F,kBAAM,IAAN;;AAEAhG,qCAAyBiG,MAAzB;AACAjG,uCAA2B,0BAAWC,eAAX,CAA3B;AACAC,qCAAyB+F,MAAzB;;AAEA,gBAAIC,eAAeC,OAAOtF,KAAtB,CAAJ,EAAkC;AAC9BG,mCAAmBoF,kBAAnB;AACH;;AAED,gBAAIC,oBAAJ;;AAEA,2BAAe/C,IAAf,yCAAeA,IAAf;AACI,qBAAK,QAAL;AAAe;AACX7D,+BAAO6G,UAAP,CAAkBhD,IAAlB,GAAyB,CAAzB;AACA7D,+BAAO6G,UAAP,CAAkBC,SAAlB,GAA8B,KAA9B;AACA,4BAAMC,sBAAsBC,cAAcnD,IAAd,EAAoBoD,KAApB,CAA0B,iBAAS;AAC3DlH,kCAAM2B,YAAN,CAAmB;AACfQ,sEAAoCgF,MAAMhF;AAD3B,6BAAnB;AAGH,yBAJ2B,CAA5B;AAKAzB,mDAA2B,0BAAW,UAACO,IAAD,EAAU;AAC5C,gCAAIA,IAAJ,EAAU;AACN,uCAAOjB,MAAMoH,cAAN,CAAqB,wBAASnG,KAAK+D,QAAd,CAArB,EAA8C/D,IAA9C,CAAP;AACH;AACJ,yBAJ0B,CAA3B;AAKA4F,sCAAcG,oBAAoBK,IAApB,CAAyB3G,yBAAyB4G,KAAlD,CAAd;AACA;AACH;AACD,qBAAK,QAAL;AACIrH,2BAAO6G,UAAP,CAAkBhD,IAAlB,GAAyB,CAAzB;AACA+C,kCAAc7G,MAAMoH,cAAN,CAAqB,wBAAStD,IAAT,CAArB,EAAqCqB,YAAY,EAAjD,CAAd;AACA;AACJ,qBAAK,QAAL;AACI0B,kCAAcU,SAASzD,IAAT,CAAd;AACA;AACJ;AACI;AAzBR;AA2BA+C,wBAAYK,KAAZ,CAAkB,iBAAS;AACvBlH,sBAAM2B,YAAN,CAAmB;AACfQ,kDAA4BgF,MAAMhF;AADnB,iBAAnB;AAGH,aAJD;;AAMA0E,wBAAYQ,IAAZ,CAAiB7G,yBAAyB8G,KAA1C,EAAiDJ,KAAjD,CAAuD,YAAW,CAAE,CAApE;AACH;;AAED,iBAASD,aAAT,CAAuBO,MAAvB,EAA+B;AAAA;;AAC3B,mBAAO,sBAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,oBAAMC,SAAS,sBAAf;AACAA,uBAAOpG,EAAP,0BAA2B,UAASN,IAAT,EAAe;AACtCwG,4BAAQxG,IAAR;AACH,iBAFD;AAGA0G,uBAAOpG,EAAP,gBAAiB,UAAS4F,KAAT,EAAgB;AAC7BO,2BAAOP,KAAP;AACH,iBAFD;AAGAQ,uBAAOC,IAAP,CAAYJ,MAAZ;AACH,aATM,CAAP;AAUH;;AAED,iBAASK,WAAT,GAAuB;AACnB,mBAAO7H,MAAMsG,gBAAN,IAA0BtG,MAAMsG,gBAAN,CAAuBwB,QAAvB,EAAjC;AACH;;AAED,iBAASC,SAAT,GAAqB;AACjB,gBAAMC,UAAUH,aAAhB;AACA,gBAAI,qBAAEI,QAAF,CAAWD,OAAX,CAAJ,EAAyB;AACrB,uBAAOA,OAAP;AACH;AACD,mBAAO/H,OAAOgC,GAAP,CAAW,OAAX,CAAP;AACH;;AAED,iBAASe,KAAT,CAAekF,IAAf,EAAqB;AACjB1H,qCAAyBiG,MAAzB;;AAEA,gBAAIxG,OAAOgC,GAAP,CAAW,OAAX,yBAAJ,EAAyC;AACrC;AACH;;AAED,gBAAMkG,aAAaC,WAAWF,IAAX,CAAnB;AACA,gBAAMG,YAAYH,OAAOA,KAAKG,SAAZ,GAAwB,IAA1C;AACApI,mBAAO6B,GAAP,CAAW,YAAX,EAAyBqG,UAAzB;AACA;AACA,gBAAIA,eAAe,aAAf,IAAgCA,eAAe,UAAnD,EAA+D;AAC3DlI,uBAAO6B,GAAP,CAAW,gBAAX,EAA6B,KAA7B;AACH;;AAED,gBAAMkG,UAAUH,aAAhB;AACA,gBAAI,qBAAEI,QAAF,CAAWD,OAAX,CAAJ,EAAyB;AACrB;AACArI,qBAAK2I,OAAL,CAAa,KAAb;AACA;AACH;;AAED,gBAAIrI,OAAOgC,GAAP,CAAW,OAAX,4BAAJ,EAA4C;AACxCuE,sBAAM,IAAN;AACAe,yBAAS,CAAT;AACH;;AAED,gBAAI,CAACnH,WAAL,EAAkB;AACdA,8BAAc,IAAd;AACAJ,sBAAMc,OAAN,2BAAgC;AAC5BqH,0CAD4B;AAE5BE;AAF4B,iBAAhC;AAIAjI,8BAAc,KAAd;;AAEA,oBAAIsG,eAAeC,OAAOtF,KAAtB,KAAgCV,eAApC,EAAqD;AACjDa,uCAAmBoF,kBAAnB;AACAjG,sCAAkB,KAAlB;AACH;;AAED,oBAAIJ,cAAJ,EAAoB;AAChB;AACA;AACA,wBAAImG,eAAeC,OAAOtF,KAAtB,KAAgC,CAAC,sBAAS0C,iBAA9C,EAAiE;AAC7D9D,+BAAOgC,GAAP,CAAW,cAAX,EAA2B2F,IAA3B;AACH;AACDrH,qCAAiB,KAAjB;AACAF,sCAAkB,IAAlB;AACA;AACH;AACJ;;AAED,mBAAOmB,mBAAmB+G,SAAnB,CAA6BJ,UAA7B,EACFd,IADE,CACG,YAAM;AACR;AACA;AACA1G,kCAAkB,KAAlB;AACH,aALE,CAAP;AAMH;;AAED,iBAASyH,UAAT,CAAoBF,IAApB,EAA0B;AACtB,gBAAIA,QAAQA,KAAKjF,MAAjB,EAAyB;AACrB,uBAAOiF,KAAKjF,MAAZ;AACH;AACD,gBAAIyD,eAAeC,OAAOtF,KAAtB,CAAJ,EAAkC;AAC9B,uBAAO,aAAP;AACH;AACD,mBAAO,UAAP;AACH;;AAED,iBAAS0E,UAAT,GAAsB;AAClB,gBAAMjD,QAAQ7C,OAAOgC,GAAP,CAAW,OAAX,CAAd;AACA,gBAAIa,gCAAwBA,8BAA5B,EAAoD;AAChD;AACH;;AAED;AACAtC,uCAA2B,0BAAWC,eAAX,CAA3B;;AAEA;AACA,gBAAM+H,WAAWvI,OAAOgC,GAAP,CAAW,aAAX,CAAjB;AACA,0CAAYlC,SAAZ,EAAuB;AACnB0I,4BAAYjI,wBADO;AAEnBkI,uBAAO1I,MAAM0C,OAAN,EAFY;AAGnBiG,4BAAYH,WAAWA,SAASI,gBAApB,GAAuC;AAHhC,aAAvB,EAIGvB,IAJH,CAIQ,kBAAU;AACdpH,uBAAO6B,GAAP,CAAW,aAAX,EAA0B+G,MAA1B;;AAEA;AACA,oBAAIA,0CAA6B,CAAC7I,MAAM0C,OAAN,EAAlC,EAAmD;AAC/CzC,2BAAO6B,GAAP,CAAW,gBAAX,EAA6B,IAA7B;AACAL;;AAEAxB,2BAAO0E,IAAP,CAAY,uBAAZ,EAAqC,UAAS/C,KAAT,EAAgB;AACjDA,8BAAMsC,GAAN,CAAU,iBAAV,EAA6BuB,oBAA7B;AACH,qBAFD;AAGH;;AAED,uBAAOzC,MAAM,EAAEC,QAAQ,WAAV,EAAN,EAA+BiE,KAA/B,CAAqC,YAAM;AAC9C,wBAAI,CAAClH,MAAMsG,gBAAX,EAA6B;AACzBrG,+BAAO6B,GAAP,CAAW,iBAAX,EAA8B,IAA9B;AACH;AACDzB,sCAAkB,IAAlB;AACH,iBALM,CAAP;AAMH,aAvBD,EAuBG6G,KAvBH,CAuBS,iBAAS;AACdjH,uBAAO6B,GAAP,CAAW,aAAX;AACA7B,uBAAO6B,GAAP,CAAW,WAAX,EAAwB,KAAxB;;AAEA;AACA,oBAAI,CAACtB,yBAAyBsI,SAAzB,EAAL,EAA2C;AAAA,wBAC/B7F,MAD+B,GACpBkE,KADoB,CAC/BlE,MAD+B;;AAEvCjD,0BAAMc,OAAN,gCAAqC;AACjCmC,sCADiC;AAEjCkE;AAFiC,qBAArC;AAIH;AACJ,aAnCD;AAoCH;;AAED,iBAASX,KAAT,CAAeuC,QAAf,EAAyB;AACrBvI,qCAAyBiG,MAAzB;AACAX,qBAASkD,KAAT;;AAEA,gBAAMhB,UAAUH,aAAhB;AACA,gBAAI,qBAAEI,QAAF,CAAWD,OAAX,CAAJ,EAAyB;AACrB;AACH;;AAED,gBAAMiB,UAAU,CAACF,QAAjB;;AAEA1I,8BAAkB,IAAlB;;AAEA,gBAAI4I,OAAJ,EAAa;AACT3I,gCAAgB,IAAhB;AACH;;AAED,gBAAIF,WAAJ,EAAiB;AACbG,iCAAiB,IAAjB;AACH;;AAEDN,mBAAO6B,GAAP,CAAW,YAAX,EAAyBC,SAAzB;AACAP,+BAAmB0H,SAAnB;AACH;;AAED,iBAASnG,MAAT,CAAgBmF,IAAhB,EAAsB;AAClB7H,8BAAkB,IAAlB;AACAG,qCAAyBiG,MAAzB;;AAEA,gBAAM0C,cAAcf,WAAWF,IAAX,CAApB;AACAjI,mBAAO6B,GAAP,CAAW,aAAX,EAA0BqH,WAA1B;AACA;AACA,gBAAIA,gBAAgB,aAAhB,IAAiCA,gBAAgB,UAArD,EAAiE;AAC7DlJ,uBAAO6B,GAAP,CAAW,gBAAX,EAA6B,KAA7B;AACH;;AAED,gBAAMkG,UAAUH,aAAhB;AACA,gBAAI,qBAAEI,QAAF,CAAWD,OAAX,CAAJ,EAAyB;AACrBrI,qBAAK2I,OAAL,CAAa,IAAb;AACA;AACH;;AAED,oBAAQrI,OAAOgC,GAAP,CAAW,OAAX,CAAR;AACI;AACI;AACJ;AACA;AAAsB;AAClBT,2CAAmB2E,KAAnB;AACA;AACH;AACD;AACI,wBAAI/F,WAAJ,EAAiB;AACbG,yCAAiB,IAAjB;AACH;AAXT;AAaH;;AAED,iBAAS6I,OAAT,GAAmB;AACf,gBAAMtG,QAAQ7C,OAAOgC,GAAP,CAAW,OAAX,CAAd;AACA,mBAAQa,gCAAwBA,gCAAxB,IAAoDA,6BAA5D;AACH;;AAED,iBAASuG,KAAT,CAAeC,GAAf,EAAoBpB,IAApB,EAA0B;AACtB,gBAAIjI,OAAOgC,GAAP,CAAW,OAAX,yBAAJ,EAAyC;AACrC;AACH;AACDT,+BAAmBqB,QAAnB,GAA8ByG,GAA9B;AACA,gBAAI,CAACrJ,OAAOgC,GAAP,CAAW,WAAX,CAAD,IAA4BhC,OAAOgC,GAAP,CAAW,OAAX,2BAAhC,EAAuE;AACnEiG,uBAAOA,QAAQ,EAAf;AACAA,qBAAKG,SAAL,GAAiBiB,GAAjB;AACA,qBAAKC,IAAL,CAAUrB,IAAV;AACH;AACJ;;AAED,iBAASsB,KAAT,CAAe7F,KAAf,EAAsBuE,IAAtB,EAA4B;AACxB1B,kBAAM,IAAN;AACAe,qBAAS5D,KAAT;AACAX,kBAAMkF,IAAN,EAAYhB,KAAZ,CAAkB,YAAM;AACpB;AACH,aAFD;AAGH;;AAED,iBAASK,QAAT,CAAkB5D,KAAlB,EAAyB;AACrBnC,+BAAmB0H,SAAnB;;AAEA,gBAAMlE,WAAW/E,OAAOgC,GAAP,CAAW,UAAX,CAAjB;AACA,gBAAMgD,SAASD,SAASC,MAAxB;;AAEA;AACAtB,oBAAQ,CAAC8F,SAAS9F,KAAT,EAAgB,EAAhB,KAAuB,CAAxB,IAA6BsB,MAArC;AACA,gBAAItB,QAAQ,CAAZ,EAAe;AACXA,yBAASsB,MAAT;AACH;;AAED,mBAAOzD,mBAAmBkI,aAAnB,CAAiC/F,KAAjC,CAAP;AACH;;AAED,iBAASgG,KAAT,CAAezB,IAAf,EAAqB;AACjBsB,kBAAMvJ,OAAOgC,GAAP,CAAW,MAAX,IAAqB,CAA3B,EAA8BiG,IAA9B;AACH;;AAED,iBAAS0B,KAAT,CAAe1B,IAAf,EAAqB;AACjBsB,kBAAMvJ,OAAOgC,GAAP,CAAW,MAAX,IAAqB,CAA3B,EAA8BiG,IAA9B;AACH;;AAED,iBAAS2B,gBAAT,GAA4B;AACxB,gBAAI,CAACT,SAAL,EAAgB;AACZ;AACA;AACH,aAHD,MAGO,IAAI9I,aAAJ,EAAmB;AACtB;AACAA,gCAAgB,KAAhB;AACA;AACH;;AAEDD,8BAAkBwJ,gBAAlB;;AAEA,gBAAMC,MAAM7J,OAAOgC,GAAP,CAAW,MAAX,CAAZ;AACA,gBAAI6H,QAAQ7J,OAAOgC,GAAP,CAAW,UAAX,EAAuBgD,MAAvB,GAAgC,CAA5C,EAA+C;AAC3C;AACA,oBAAIhF,OAAOgC,GAAP,CAAW,QAAX,CAAJ,EAA0B;AACtB2H,0BAAM,EAAE3G,QAAQ,QAAV,EAAN;AACH,iBAFD,MAEO;AACH;AACA,wBAAI,gBAAG8G,GAAP,EAAY;AACRC,uCAAe,KAAf;AACH;AACD;AACA;AACA/J,2BAAO6B,GAAP,CAAW,gBAAX,EAA6B,KAA7B;AACA7B,2BAAO6B,GAAP,CAAW,OAAX;AACA9B,0BAAMc,OAAN,4BAAiC,EAAjC;AACH;AACD;AACH;;AAED;AACA;AACA,gBAAMwD,UAAU3E,KAAK4E,SAAL,CAAe,SAAf,CAAhB;AACA0F,gCAAoB3F,OAApB,EAA6B,iBAA7B;AACAsF,kBAAM,EAAE3G,QAAQ,UAAV,EAAN;AACH;;AAED,iBAASiH,kBAAT,CAA4BvG,KAA5B,EAAmC;AAC/BnC,+BAAmB2I,OAAnB,GAA6BxG,KAA7B;AACH;;AAED,iBAASyG,kBAAT,GAA8B;AAC1B,mBAAO5I,mBAAmB2I,OAA1B;AACH;;AAED,iBAASE,UAAT,GAAsB;AAClB,mBAAO,KAAKpK,MAAL,GAAc,KAAKA,MAAL,CAAYqK,gBAAZ,EAAd,GAA+CvI,SAAtD;AACH;;AAED,iBAASwI,iBAAT,GAA6B;AACzB,gBAAMlH,aAAa,KAAKpD,MAAL,CAAYgC,GAAZ,CAAgB,YAAhB,CAAnB;AACA,gBAAIoB,UAAJ,EAAgB;AACZ,uBAAOA,WAAWpB,GAAX,8BAAP;AACH;AACD,mBAAO,IAAP;AACH;;AAED,iBAASuI,iBAAT,GAA6B;AACzB,mBAAOhJ,mBAAmBiJ,SAA1B;AACH;;AAED,iBAASC,qBAAT,CAA+B/G,KAA/B,EAAsC;AAClCnC,+BAAmBmJ,UAAnB,GAAgChH,KAAhC;AACH;;AAED,iBAASiH,qBAAT,GAAiC;AAC7B,mBAAOpJ,mBAAmBmJ,UAA1B;AACH;;AAED,iBAASE,eAAT,GAA2B;AACvB,mBAAOrJ,mBAAmBsJ,WAA1B;AACH;;AAED,iBAASC,mBAAT,CAA6BpH,KAA7B,EAAoC;AAChCA,oBAAQ8F,SAAS9F,KAAT,EAAgB,EAAhB,KAAuB,CAA/B;;AAEA1D,mBAAO+K,yBAAP,CAAiCrH,KAAjC;AACAnC,+BAAmByJ,SAAnB,GAA+BtH,KAA/B;;AAEA3D,kBAAMc,OAAN,2BAAgC;AAC5BqC,wBAAQ+H,kBADoB;AAE5B9H,uBAAOO;AAFqB,aAAhC;AAIH;;AAED,iBAASwH,mBAAT,GAA+B;AAC3B,mBAAOhL,UAAUiL,eAAV,EAAP;AACH;;AAED,iBAASF,gBAAT,GAA4B;AACxB,mBAAO/K,UAAUkL,eAAV,EAAP;AACH;;AAED;AACA,iBAASC,YAAT,GAAwB;AACpB,gBAAIlL,WAAJ,EAAiB;AACbG,iCAAiB,IAAjB;AACH;;AAED,gBAAI,sBAASwD,iBAAb,EAAgC;AAC5BvC,mCAAmB+J,qBAAnB;AACH,aAFD,MAEO;AACH/J,mCAAmBgK,QAAnB,GAA8B,KAA9B;AACH;AACJ;;AAED,iBAASC,YAAT,CAAsB5I,QAAtB,EAAgC;AAC5B;;AAEA,gBAAI,sBAASkB,iBAAb,EAAgC;AAC5BvC,mCAAmBkK,sBAAnB;AACH,aAFD,MAEO;AACH;AACAlK,mCAAmBqB,QAAnB,GAA8BA,YAAY,CAA1C;AACArB,mCAAmBgK,QAAnB,GAA8B,IAA9B;AACH;;AAED,gBAAI,OAAOnL,eAAP,KAA2B,UAA/B,EAA2C;AACvCA;AACH;AACJ;;AAED,iBAAS2J,cAAT,CAAwBlH,KAAxB,EAA+B;AAC3B,gBAAI,CAAC,qBAAE6I,SAAF,CAAY7I,KAAZ,CAAL,EAAyB;AACrBA,wBAAQ,CAAC7C,OAAOgC,GAAP,CAAW,YAAX,CAAT;AACH;;AAEDhC,mBAAO6B,GAAP,CAAW,YAAX,EAAyBgB,KAAzB;AACA,gBAAI9C,MAAMsG,gBAAN,IAA0BtG,MAAMsG,gBAAN,CAAuBsF,QAArD,EAA+D;AAC3D5L,sBAAMsG,gBAAN,CAAuBsF,QAAvB,CAAgC9J,GAAhC,CAAoC,YAApC,EAAkDgB,KAAlD;AACH;AACJ;;AAED,iBAAS+I,OAAT,GAAmB;AACf,gBAAMvH,UAAU3E,KAAK4E,SAAL,CAAe,SAAf,CAAhB;AACA0F,gCAAoB3F,OAApB,EAA6B,WAA7B,EAA0C;AAAA,uBAAMA,QAAQwH,IAAR,EAAN;AAAA,aAA1C;AACH;;AAED,iBAAS7B,mBAAT,CAA6B3F,OAA7B,EAAsClC,GAAtC,EAA2C2J,EAA3C,EAA+C;AAC3C,gBAAI,CAACzH,OAAL,EAAc;AACV;AACH;AACD,gBAAME,SAASvE,OAAOgC,GAAP,CAAW,QAAX,CAAf;AACA,gBAAIuC,MAAJ,EAAY;AACRxE,sBAAMc,OAAN,CAAcsB,GAAd,EAAmB;AACf4J,0BAAMxH,OAAOwH,IADE;AAEfC,wBAAI,QAFW;AAGfC,4BAAQ1H,MAHO;AAIf2H,gCAAY,CAAE3H,MAAF,CAJG;AAKfW,8BAAUX,OAAOW;AALF,iBAAnB;AAOH;AACD,gBAAI,OAAO4G,EAAP,KAAc,UAAlB,EAA8B;AAC1BA;AACH;AACJ;;AAED,iBAASrK,6BAAT,GAAyC;AACrCF,+BACKD,EADL,CACQ,KADR,EACeH,QADf,EACyBpB,KADzB,EAEKuB,EAFL,CAEQ,iBAFR,EAE2B,UAAC6K,CAAD,EAAO;AAC1BjM,0BAAUkM,kBAAV,CAA6BD,EAAEjJ,MAA/B;AACA,oBAAMmJ,uBAAuBnM,UAAUiL,eAAV,EAA7B;;AAEA;AACA,oBAAIkB,uBAAuB,CAA3B,EAA8B;AAC1BvB,wCAAoBuB,oBAApB;AACH;AACJ,aAVL,EAUOtM,KAVP,EAWKuB,EAXL,yBAWwB,YAAM;AACtB;AACA,kCAAS8F,IAAT,CAAcwC,gBAAd;AACH,aAdL,EAcO7J,KAdP,EAeKuB,EAfL,sBAeqBvB,MAAM2B,YAf3B,EAeyC3B,KAfzC;AAgBH;;AAED,iBAASyB,0BAAT,GAAsC;AAClCD,+BAAmBiB,IAAnB,GAA0BxC,OAAOyC,OAAP,EAA1B;AACAlB,+BAAmBgB,MAAnB,GAA4BvC,OAAOgC,GAAP,CAAW,QAAX,CAA5B;AACH;;AAED;AACA,aAAK2F,IAAL,GAAYxB,KAAZ;AACA,aAAKmD,IAAL,GAAYvG,KAAZ;AACA,aAAKmD,KAAL,GAAapD,MAAb;AACA,aAAKwJ,IAAL,GAAYlD,KAAZ;AACA,aAAKmD,IAAL,GAAYhG,KAAZ;AACA,aAAKnB,YAAL,GAAoBmE,KAApB;AACA,aAAKiD,YAAL,GAAoB7C,KAApB;AACA,aAAK8C,YAAL,GAAoB/C,KAApB;AACA,aAAKgD,kBAAL,GAA0B5B,mBAA1B;AACA,aAAK6B,iBAAL,GAAyB1C,kBAAzB;AACA,aAAK2C,aAAL,GAAqB7C,cAArB;AACA,aAAK8C,WAAL,GAAmBxB,YAAnB;AACA,aAAKyB,WAAL,GAAmBtB,YAAnB;AACA,aAAKuB,iBAAL,GAAyB5C,kBAAzB;AACA,aAAK6C,gBAAL,GAAwBzC,iBAAxB;AACA,aAAK0C,oBAAL,GAA4BxC,qBAA5B;AACA,aAAKyC,oBAAL,GAA4BvC,qBAA5B;AACA,aAAKwC,cAAL,GAAsBvC,eAAtB;AACA,aAAKwC,kBAAL,GAA0BlC,mBAA1B;AACA,aAAKE,eAAL,GAAuBH,gBAAvB;AACA,aAAKoC,gBAAL,GAAwB/C,iBAAxB;AACA,aAAKgD,SAAL,GAAiBlD,UAAjB;AACA,aAAKvC,QAAL,GAAgBC,SAAhB;AACA,aAAK+D,IAAL,GAAYD,OAAZ;AACA,aAAK2B,SAAL,GAAiB,UAACC,SAAD,EAAe;AAC5B,qCAAUzN,KAAV,EAAiByN,SAAjB;AACH,SAFD;AAGA,aAAKC,YAAL,GAAoBnG,QAApB;;AAEA;AACA,aAAKgB,SAAL,GAAiB,UAACJ,UAAD;AAAA,mBAAgB3G,mBAAmB+G,SAAnB,CAA6BJ,UAA7B,CAAhB;AAAA,SAAjB;AACA,aAAKe,SAAL,GAAiB;AAAA,mBAAM1H,mBAAmB0H,SAAnB,EAAN;AAAA,SAAjB;AACA,aAAKyE,SAAL,GAAiB,UAACC,YAAD,EAAe9J,IAAf;AAAA,mBAAwBtC,mBAAmBmM,SAAnB,CAA6BC,YAA7B,EAA2C9J,IAA3C,CAAxB;AAAA,SAAjB;AACA,aAAK+J,QAAL,GAAgB;AAAA,mBAAMrM,mBAAmBqM,QAAnB,EAAN;AAAA,SAAhB;AACA,aAAKtC,qBAAL,GAA6B;AAAA,mBAAM/J,mBAAmB+J,qBAAnB,EAAN;AAAA,SAA7B;AACA,aAAKG,sBAAL,GAA8B;AAAA,mBAAMlK,mBAAmBkK,sBAAnB,EAAN;AAAA,SAA9B;AACA,aAAKoC,eAAL,GAAuB,YAAM;AACzB,gBAAItM,mBAAmBuM,eAAvB,EAAwC;AACpC;AACAvM,mCAAmByE,YAAnB;AACH;AACJ,SALD;AAMA,aAAK+H,gBAAL,GAAwB;AAAA,mBAAMxM,mBAAmByM,cAAzB;AAAA,SAAxB;;AAEA;AACA,aAAKC,SAAL,GAAiB,UAAC1L,MAAD,EAAY;AACzBvC,mBAAOiO,SAAP,CAAiB1L,MAAjB;AACAf;AACH,SAHD;AAIA,aAAK0M,OAAL,GAAe,UAAC1L,IAAD,EAAU;AACrBxC,mBAAOkO,OAAP,CAAe1L,IAAf;AACAhB;AACH,SAHD;AAIA,aAAK2M,eAAL,GAAuB,UAACxL,YAAD,EAAkB;AACrC3C,mBAAOmO,eAAP,CAAuBxL,YAAvB;AACH,SAFD;AAGA,aAAKyL,WAAL,GAAmB;AAAA,mBAAMpO,OAAOgC,GAAP,CAAW,UAAX,CAAN;AAAA,SAAnB;AACA,aAAKqM,QAAL,GAAgB;AAAA,mBAAMrO,OAAOgC,GAAP,CAAW,gBAAX,CAAN;AAAA,SAAhB;AACA,aAAKsM,SAAL,GAAiB;AAAA,mBAAMtO,OAAOgC,GAAP,CAAW,iBAAX,CAAN;AAAA,SAAjB;AACA,aAAKuM,UAAL,GAAkB;AAAA,mBAAMvO,OAAOwO,QAAb;AAAA,SAAlB;AACA,aAAKC,SAAL,GAAiB,UAASC,GAAT,EAAcC,OAAd,EAAuBC,QAAvB,EAAiCC,EAAjC,EAAqCC,QAArC,EAA+C;AAC5D,gBAAIC,gBAAgB/O,OAAOgC,GAAP,CAAW,eAAX,KAA+B,EAAnD;AACA,gBAAIgN,WAAW,KAAf;AACA,gBAAMC,YAAY;AACdP,qBAAKA,GADS;AAEdC,yBAASA,OAFK;AAGdC,0BAAUA,QAHI;AAIdC,oBAAIA,EAJU;AAKdC,0BAAUA;AALI,aAAlB;;AAQAC,4BAAgBA,cAAcG,MAAd,CAAqB,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtD,oBAAIA,OAAOP,EAAP,KAAcA,EAAlB,EAAsB;AAClBG,+BAAW,IAAX;AACAG,4BAAQE,IAAR,CAAaJ,SAAb;AACH,iBAHD,MAGO;AACHE,4BAAQE,IAAR,CAAaD,MAAb;AACH;AACD,uBAAOD,OAAP;AACH,aARe,EAQb,EARa,CAAhB;;AAUA,gBAAI,CAACH,QAAL,EAAe;AACXD,8BAAcO,OAAd,CAAsBL,SAAtB;AACH;;AAEDjP,mBAAO6B,GAAP,CAAW,eAAX,EAA4BkN,aAA5B;AACH,SA1BD;AA2BA,aAAKQ,YAAL,GAAoB,UAASV,EAAT,EAAa;AAC7B,gBAAME,gBAAgB,qBAAES,MAAF,CAClBxP,OAAOgC,GAAP,CAAW,eAAX,CADkB,EAElB,UAACoN,MAAD;AAAA,uBAAYA,OAAOP,EAAP,KAAcA,EAA1B;AAAA,aAFkB,CAAtB;;AAKA7O,mBAAO6B,GAAP,CAAW,eAAX,EAA4BkN,aAA5B;AACH,SAPD;;AASA;AACA,aAAKU,MAAL,GAAcxP,MAAMwP,MAApB;AACA,aAAKC,aAAL,GAAqBzP,MAAMyP,aAA3B;AACA,aAAKC,WAAL,GAAmB1P,MAAM0P,WAAzB;;AAEA,aAAKC,eAAL,GAAuB,YAAW;AAC9B,mBAAOzP,WAAP;AACH,SAFD;;AAIA,aAAK0P,WAAL,GAAmB,UAAU9D,IAAV,EAAgB;AAC/B,gBAAI,CAAC,qBAAEL,SAAF,CAAYK,IAAZ,CAAL,EAAwB;AACpBA,uBAAO,CAAC/L,OAAOgC,GAAP,CAAW,UAAX,CAAR;AACH;AACDhC,mBAAO6B,GAAP,CAAW,UAAX,EAAuBkK,IAAvB;AACAxK,+BAAmBuO,QAAnB,GAA8B/D,IAA9B;AACH,SAND;;AAQA,aAAKgE,OAAL,GAAe,UAAUC,IAAV,EAAgB;AAC3BhQ,mBAAO6B,GAAP,CAAW,MAAX,EAAmBmO,IAAnB;AACH,SAFD;;AAIA,aAAK7I,cAAL,GAAsB,UAASpC,QAAT,EAAmBG,QAAnB,EAA6B;AAC/C,gBAAI;AACA,oBAAM+K,mBAAmB,8BAAelL,QAAf,EAAyB/E,MAAzB,EAAiCkF,QAAjC,CAAzB;;AAEA;AACA,gDAAiB+K,gBAAjB;;AAEAjQ,uBAAO6B,GAAP,CAAW,UAAX,EAAuBqD,QAAvB;AACAlF,uBAAO6B,GAAP,CAAW,UAAX,EAAuBoO,gBAAvB;AACH,aARD,CAQE,OAAO/I,KAAP,EAAc;AACZ,uBAAO,kBAAQO,MAAR,CAAeP,KAAf,CAAP;AACH;AACD,mBAAOI,SAAStH,OAAOgC,GAAP,CAAW,MAAX,CAAT,CAAP;AACH,SAbD;;AAeA,aAAKkO,aAAL,GAAqB,YAAY;AAC7B,iBAAKrP,OAAL,CAAa,eAAb,EAA8B,EAA9B;AACA,iBAAKoD,GAAL;AACA,iBAAKsI,IAAL;AACA,oCAAS,IAAT,EAAe,KAAK5M,iBAApB;AACA,gBAAIM,KAAJ,EAAW;AACPA,sBAAMqF,OAAN;AACH;AACD,gBAAItF,MAAJ,EAAY;AACRA,uBAAOsF,OAAP;AACH;AACD,gBAAIO,QAAJ,EAAc;AACVA,yBAASP,OAAT;AACH;AACD,gBAAIpF,SAAJ,EAAe;AACXA,0BAAUoF,OAAV;AACH;AACD,gBAAI/D,kBAAJ,EAAwB;AACpBA,mCAAmB+D,OAAnB;AACH;AACD,iBAAK6K,eAAL;AACH,SArBD;;AAuBA,aAAKC,YAAL,GAAoB,KAAKR,eAAzB;;AAEA,aAAKS,cAAL,GAAsB,YAAW;AAC7B,iBAAKF,eAAL;AACA,iBAAK9J,gBAAL,GAAwB,8BAAoB,IAApB,EAA0BrG,MAA1B,EAAkCC,KAAlC,EAAyCH,SAAzC,CAAxB;AACA,mBAAO,KAAKuG,gBAAZ;AACH,SAJD;;AAMA,aAAKiK,MAAL,GAAc,YAAW;AACrB,gBAAI,KAAKjK,gBAAT,EAA2B;AACvB,qBAAKA,gBAAL,CAAsBiK,MAAtB;AACH;AACJ,SAJD;;AAMA,aAAKH,eAAL,GAAuB,YAAW;AAC9B,gBAAIpQ,MAAMsG,gBAAV,EAA4B;AACxBtG,sBAAMsG,gBAAN,CAAuBf,OAAvB;AACAvF,sBAAMsG,gBAAN,GAAyB,IAAzB;AACH;AACJ,SALD;;AAOA;AACA,YAAMR,WAAW,uBAAsB,IAAtB,EAA4B,CACzC,MADyC,EAEzC,OAFyC,EAGzC,sBAHyC,EAIzC,oBAJyC,EAKzC,mBALyC,EAMzC,eANyC,CAA5B,EAOd;AAAA,mBAAM,CAAC,OAAK7F,MAAL,CAAYgC,GAAZ,CAAgB,WAAhB,CAAD,IAAiCd,gBAAvC;AAAA,SAPc,CAAjB;AAQA;AACA2E,iBAAS0K,KAAT,CAAelB,IAAf,CAAoBmB,KAApB,CAA0B3K,SAAS0K,KAAnC,EAA0C1Q,YAA1C;;AAEAI,cAAMT,KAAN;AACH,KAj7B+B;AAk7BhCwC,OAl7BgC,eAk7B5ByO,QAl7B4B,EAk7BlB;AACV,YAAIA,4CAAJ,EAAqC;AACjC,gBAAMrN,aAAa,KAAKpD,MAAL,CAAYgC,GAAZ,CAAgB,YAAhB,CAAnB;AACA,gBAAIoB,UAAJ,EAAgB;AACZ,uBAAOA,WAAWpB,GAAX,CAAeyO,QAAf,CAAP;AACH;AACD,mBAAO,iCAAoBA,QAApB,CAAP;AACH;AACD,eAAO,KAAKzQ,MAAL,CAAYgC,GAAZ,CAAgByO,QAAhB,CAAP;AACH,KA37B+B;AA47BhCC,gBA57BgC,0BA47BjB;AACX,eAAO,KAAK/P,gBAAL,IAAyB,KAAKhB,iBAArC;AACH,KA97B+B;AA+7BhC8C,WA/7BgC,qBA+7BtB;AACN,eAAO,KAAKzC,MAAL,CAAYyC,OAAZ,EAAP;AACH,KAj8B+B;AAk8BhCf,gBAl8BgC,wBAk8BnBS,GAl8BmB,EAk8Bd;AACd,aAAKnC,MAAL,CAAY6B,GAAZ,CAAgB,YAAhB,EAA8BM,GAA9B;AACA,aAAKnC,MAAL,CAAY6B,GAAZ,CAAgB,OAAhB;AACA,aAAK7B,MAAL,CAAY0E,IAAZ,CAAiB,cAAjB,EAAiC,YAAW;AACxC,iBAAK1E,MAAL,CAAY6B,GAAZ,CAAgB,YAAhB,EAA8BC,SAA9B;AACH,SAFD,EAEG,IAFH;;AAIA,aAAKjB,OAAL,gBAAoBsB,GAApB;AACH;AA18B+B,CAApC;;AA88BA,SAASsE,cAAT,CAAwBrF,KAAxB,EAA+B;AAC3B,WAAOA,SAAS,6CAA6CuP,IAA7C,CAAkDvP,MAAMN,IAAxD,CAAhB;AACH;;kBAEcxB,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QC5qBCsR,c,GAAAA,c;;AA9UhB;;AACA;;AACA;;;;AACA;;;;AAEA,IAAMC,aAAanK,OAAOmK,UAA1B;AACA,IAAMC,eAAepK,OAAOoK,YAA5B;AACA,IAAMC,yBAA0B,kBAAkBrK,MAAnB,IAA8B,CAAC,gBAAGsK,OAAjE;AACA,IAAMC,uBAAwB,kBAAkBvK,MAAhD;AACA,IAAMwK,kBAAkB,CAACH,sBAAD,IAA2B,EAAEE,wBAAwB,gBAAGhL,MAA7B,CAAnD;AACA,IAAMkL,gBAAgB,qBAAQC,OAAR,IAAmB,gBAAGC,GAA5C;;AAEA,SAASC,QAAT,CAAkBnF,CAAlB,EAAqBoF,CAArB,EAAwB;AACpB,WAAO,SAAQZ,IAAR,CAAaxE,EAAErL,IAAf,IAAuB,CAACqL,EAAEqF,aAAF,IAAmBrF,CAApB,EAAuBsF,cAAvB,CAAsC,CAAtC,EAAyC,SAASF,CAAlD,CAAvB,GAA8EpF,EAAE,SAASoF,CAAX;AAArF;AACH;;AAED,SAASG,YAAT,CAAsBvP,GAAtB,EAA2B;AACvB,QAAMgK,IAAIhK,OAAOuE,OAAOtF,KAAxB;;AAEA,QAAI,EAAEe,eAAewP,UAAjB,CAAJ,EAAkC;AAC9B,eAAO,KAAP;AACH;;AAED,QAAI,WAAWxF,CAAf,EAAkB;AACd;AACA,eAAQA,EAAEyF,KAAF,KAAY,CAApB;AACH,KAHD,MAGO,IAAI,YAAYzF,CAAhB,EAAmB;AACtB;AACA,eAAQA,EAAEiD,MAAF,KAAa,CAArB;AACH;;AAED,WAAO,KAAP;AACH;;AAED,SAASyC,UAAT,CAAoB1P,GAApB,EAAyB;AACrB,QAAMgK,IAAIhK,OAAOuE,OAAOtF,KAAxB;;AAEA,QAAK+K,aAAa2F,aAAd,IAAgC3F,EAAE4F,OAAF,KAAc,EAAlD,EAAsD;AAClD5P,YAAI6P,eAAJ;AACA,eAAO,IAAP;AACH;;AAED,WAAO,KAAP;AACH;;AAED,SAASC,gBAAT,CAA0BnR,IAA1B,EAAgCoR,QAAhC,EAA0CjG,MAA1C,EAAkD;AAC9C,QAAIkG,eAAJ;;AAEA,QAAID,oBAAoBP,UAApB,IAAmC,CAACO,SAASE,OAAV,IAAqB,CAACF,SAAST,cAAtE,EAAuF;AACnFU,iBAASD,QAAT;AACH,KAFD,MAEO,IAAIA,SAASE,OAAT,IAAoBF,SAASE,OAAT,CAAiBpN,MAAzC,EAAiD;AACpDmN,iBAASD,SAASE,OAAT,CAAiB,CAAjB,CAAT;AACH,KAFM,MAEA;AACHD,iBAASD,SAAST,cAAT,CAAwB,CAAxB,CAAT;AACH;;AAED,WAAO;AACH3Q,cAAMA,IADH;AAEHuR,qBAAaH,QAFV;AAGHjG,gBAAQiG,SAASjG,MAHd;AAIHqG,uBAAerG,MAJZ;AAKHsG,eAAOJ,OAAOI,KALX;AAMHC,eAAOL,OAAOK;AANX,KAAP;AAQH;;AAED;AACA,SAASC,cAAT,CAAwBtQ,GAAxB,EAA6B;AACzB;AACA;AACA,QAAI,EAAEA,eAAewP,UAAjB,KAAgC,EAAExP,eAAe0O,UAAjB,CAApC,EAAkE;AAC9D;AACH;AACD,QAAI1O,IAAIuQ,mBAAR,EAA6B;AACzBvQ,YAAIuQ,mBAAJ;AACH;AACD;AACA,QAAIvQ,IAAIsQ,cAAR,EAAwB;AACpBtQ,YAAIsQ,cAAJ;AACH;AACJ;;AAED,IAAME,KAAK,SAALA,EAAK,CAAUC,IAAV,EAAgBC,OAAhB,EAAyB;AAChC,QAAMC,QAAQF,IAAd;AACA,QAAIG,YAAY,KAAhB;AACA,QAAIC,UAAU,CAAd;AACA,QAAIC,UAAU,CAAd;AACA,QAAIC,iBAAiB,CAArB;AACA,QAAIC,oBAAoB,GAAxB;AACA,QAAIC,6BAAJ;AACA,QAAIC,mBAAJ;;AAEAR,cAAUA,WAAW,EAArB;;AAEA,QAAMS,kBAAkB,sBAASC,aAAT,GAAyB,EAAEC,SAAS,CAACX,QAAQY,gBAApB,EAAzB,GAAkE,KAA1F;;AAEA,QAAMC,sBAAsB,SAAtBA,mBAAsB,CAACtS,KAAD;AAAA,eAAWuS,mBAAmBvS,KAAnB,CAAX;AAAA,KAA5B;;AAEA;AACA;AACA,QAAI2P,sBAAJ,EAA4B;AACxB6B,aAAKgB,gBAAL,CAAsB,aAAtB,EAAqCC,oBAArC,EAA2DP,eAA3D;AACA,YAAIT,QAAQiB,QAAZ,EAAsB;AAClBlB,iBAAKgB,gBAAL,CAAsB,aAAtB,EAAqCG,WAArC;AACAnB,iBAAKgB,gBAAL,CAAsB,YAAtB,EAAoCI,iBAApC;AACH;AACD,YAAInB,QAAQoB,OAAZ,EAAqB;AACjBrB,iBAAKgB,gBAAL,CAAsB,aAAtB,EAAqCM,WAArC;AACH;AACJ,KATD,MASO;AACH,YAAIhD,eAAJ,EAAqB;AACjB0B,iBAAKgB,gBAAL,CAAsB,WAAtB,EAAmCC,oBAAnC,EAAyDP,eAAzD;AACA,gBAAIT,QAAQiB,QAAZ,EAAsB;AAClBlB,qBAAKgB,gBAAL,CAAsB,WAAtB,EAAmCG,WAAnC;AACAnB,qBAAKgB,gBAAL,CAAsB,UAAtB,EAAkCO,UAAlC;AACH;AACD,gBAAItB,QAAQoB,OAAZ,EAAqB;AACjBrB,qBAAKgB,gBAAL,CAAsB,WAAtB,EAAmCM,WAAnC;AACH;AACJ;;AAED;AACAtB,aAAKgB,gBAAL,CAAsB,YAAtB,EAAoCC,oBAApC,EAA0DP,eAA1D;AACH;;AAEDV,SAAKgB,gBAAL,CAAsB,SAAtB,EAAiCQ,UAAjC;AACA,QAAIvB,QAAQwB,QAAZ,EAAsB;AAClBzB,aAAKgB,gBAAL,CAAsB,OAAtB,EAA+BG,WAA/B;AACAnB,aAAKgB,gBAAL,CAAsB,MAAtB,EAA8BO,UAA9B;AACH;;AAED;AACA,aAASJ,WAAT,CAAqB5R,GAArB,EAA0B;AACtB,YAAIA,IAAImS,WAAJ,KAAoB,OAAxB,EAAiC;AAC7BC,uCAAmBpS,GAAnB;AACH;AACJ;;AAED,aAAS+R,WAAT,CAAqB/R,GAArB,EAA0B;AACtB,YAAIA,IAAImS,WAAJ,KAAoB,OAAxB,EAAiC;AAC7BC,uCAAmBpS,GAAnB;AACH;AACJ;;AAED,aAAS6R,iBAAT,CAA2B7R,GAA3B,EAAgC;AAC5B,YAAIA,IAAImS,WAAJ,KAAoB,OAApB,IAA+B,OAAOnS,GAA1C,EAA+C;AAC3C;AAD2C,gBAEnCqS,CAFmC,GAE1BrS,GAF0B,CAEnCqS,CAFmC;AAAA,gBAEhCC,CAFgC,GAE1BtS,GAF0B,CAEhCsS,CAFgC;;AAG3C,gBAAMC,cAAcC,SAASC,gBAAT,CAA0BJ,CAA1B,EAA6BC,CAA7B,CAApB;AACA,gBAAI,CAAC7B,KAAKiC,QAAL,CAAcH,WAAd,CAAL,EAAiC;AAC7BH,0CAAkBpS,GAAlB;AACH;AACJ;AACJ;;AAED,aAASgS,UAAT,CAAoBhS,GAApB,EAAyB;AACrBoS,kCAAkBpS,GAAlB;AACH;;AAED,aAASiS,UAAT,CAAoBjS,GAApB,EAAyB;AACrB,YAAI0P,WAAW1P,GAAX,CAAJ,EAAqB;AACjBoS,wCAAoBpS,GAApB;AACH;AACJ;;AAED,aAAS2S,gBAAT,CAA0BC,OAA1B,EAAmCC,SAAnC,EAA8CpG,QAA9C,EAAwD;AACpDmG,gBAAQE,mBAAR,CAA4BD,SAA5B,EAAuCpG,QAAvC;AACAmG,gBAAQnB,gBAAR,CAAyBoB,SAAzB,EAAoCpG,QAApC;AACH;;AAED,aAASiF,oBAAT,CAA8B1R,GAA9B,EAAmC;AAC/BiR,+BAAuBjR,IAAI8J,MAA3B;AACA+G,kBAAU1B,SAASnP,GAAT,EAAc,GAAd,CAAV;AACA8Q,kBAAU3B,SAASnP,GAAT,EAAc,GAAd,CAAV;;AAEA,YAAI,CAACuP,aAAavP,GAAb,CAAL,EAAwB;;AAEpB,gBAAIA,IAAIrB,IAAJ,KAAa,aAAb,IAA8BqB,IAAI+S,SAAtC,EAAiD;AAC7C,oBAAIrC,QAAQY,gBAAZ,EAA8B;AAC1BJ,iCAAalR,IAAIgT,SAAjB;AACAvC,yBAAKwC,iBAAL,CAAuB/B,UAAvB;AACH;AACDyB,iCAAiBlC,IAAjB,EAAuB,aAAvB,EAAsCyC,mBAAtC,EAA2D/B,eAA3D;AACAwB,iCAAiBlC,IAAjB,EAAuB,eAAvB,EAAwCe,kBAAxC;;AAEA;AACA,oBAAIxR,IAAImS,WAAJ,KAAoB,OAApB,IAA+BlB,qBAAqBkC,QAArB,KAAkC,QAArE,EAA+E;AAC3ER,qCAAiBH,QAAjB,EAA2B,SAA3B,EAAsCjB,mBAAtC;AACH,iBAFD,MAEO;AACHoB,qCAAiBlC,IAAjB,EAAuB,WAAvB,EAAoCe,kBAApC;AACH;AACJ,aAdD,MAcO,IAAIxR,IAAIrB,IAAJ,KAAa,WAAjB,EAA8B;AACjCgU,iCAAiBH,QAAjB,EAA2B,WAA3B,EAAwCU,mBAAxC,EAA6D/B,eAA7D;;AAEA;AACA,oBAAInC,iBAAiBhP,IAAI8J,MAAJ,CAAWqJ,QAAX,CAAoBC,WAApB,OAAsC,QAA3D,EAAqE;AACjET,qCAAiBlC,IAAjB,EAAuB,OAAvB,EAAgCe,kBAAhC;AACH,iBAFD,MAEO;AACHmB,qCAAiBH,QAAjB,EAA2B,SAA3B,EAAsCjB,mBAAtC;AACH;AACJ,aATM,MASA,IAAIvR,IAAIrB,IAAJ,KAAa,YAAjB,EAA+B;AAClCgU,iCAAiB1B,oBAAjB,EAAuC,WAAvC,EAAoDiC,mBAApD,EAAyE/B,eAAzE;AACAwB,iCAAiB1B,oBAAjB,EAAuC,aAAvC,EAAsDO,kBAAtD;AACAmB,iCAAiB1B,oBAAjB,EAAuC,UAAvC,EAAmDO,kBAAnD;AACH;;AAED;AACA,gBAAId,QAAQY,gBAAZ,EAA8B;AAC1BhB,+BAAetQ,GAAf;AACH;AACJ;AACJ;;AAED,aAASkT,mBAAT,CAA6BlT,GAA7B,EAAkC;AAC9B,YAAMqT,oBAAoB,CAA1B;;AAEA,YAAIzC,SAAJ,EAAe;AACXwB,uCAAmBpS,GAAnB;AACH,SAFD,MAEO;AACH,gBAAMsT,OAAOnE,SAASnP,GAAT,EAAc,GAAd,CAAb;AACA,gBAAMuT,OAAOpE,SAASnP,GAAT,EAAc,GAAd,CAAb;AACA,gBAAMwT,QAAQF,OAAOzC,OAArB;AACA,gBAAM4C,QAAQF,OAAOzC,OAArB;AACA,gBAAI0C,QAAQA,KAAR,GAAgBC,QAAQA,KAAxB,GAAgCJ,oBAAoBA,iBAAxD,EAA2E;AACvEjB,iDAAyBpS,GAAzB;AACA4Q,4BAAY,IAAZ;AACAwB,2CAAmBpS,GAAnB;AACH;AACJ;;AAED;AACA,YAAI0Q,QAAQY,gBAAZ,EAA8B;AAC1BhB,2BAAetQ,GAAf;AACH;AACJ;;AAED,aAASwR,kBAAT,CAA4BxR,GAA5B,EAAiC;AAC7B,YAAM0T,iBAAkB1T,IAAIrB,IAAJ,KAAa,WAAb,IAA4BqB,IAAIrB,IAAJ,KAAa,eAAjE;AACA,YAAI+U,kBAAkBhD,QAAQY,gBAA9B,EAAgD;AAC5Cb,iBAAKkD,qBAAL,CAA2BzC,UAA3B;AACH;AACDT,aAAKqC,mBAAL,CAAyB,aAAzB,EAAwCI,mBAAxC;AACAzC,aAAKqC,mBAAL,CAAyB,eAAzB,EAA0CtB,kBAA1C;AACAf,aAAKqC,mBAAL,CAAyB,WAAzB,EAAsCtB,kBAAtC;AACAgB,iBAASM,mBAAT,CAA6B,WAA7B,EAA0CI,mBAA1C;AACAV,iBAASM,mBAAT,CAA6B,SAA7B,EAAwCvB,mBAAxC;AACA,YAAIN,oBAAJ,EAA0B;AACtBA,iCAAqB6B,mBAArB,CAAyC,WAAzC,EAAsDI,mBAAtD;AACAjC,iCAAqB6B,mBAArB,CAAyC,aAAzC,EAAwDtB,kBAAxD;AACAP,iCAAqB6B,mBAArB,CAAyC,UAAzC,EAAqDtB,kBAArD;AACH;;AAED,YAAIZ,SAAJ,EAAe;AACXwB,2CAAuBpS,GAAvB;AACH,SAFD,MAEO,IAAI,CAAC,CAAC0Q,QAAQkD,YAAT,IAAyB5T,IAAI8J,MAAJ,KAAe2G,IAAzC,KAAkDzQ,IAAIrB,IAAJ,CAASkV,OAAT,CAAiB,QAAjB,MAA+B,CAAC,CAAtF,EAAyF;AAC5F,gBAAI7T,IAAIrB,IAAJ,KAAa,SAAb,IAA0BqB,IAAIrB,IAAJ,KAAa,OAAvC,IAAkD+U,kBAAkB1T,IAAImS,WAAJ,KAAoB,OAA5F,EAAqG;AACjGC,4CAAoBpS,GAApB;AACH,aAFD,MAEO;AACHoS,0CAAkBpS,GAAlB;AACA,oBAAIA,IAAIrB,IAAJ,KAAa,UAAjB,EAA6B;AACzB;AACA2R,mCAAetQ,GAAf;AACH;AACJ;AACJ;;AAEDiR,+BAAuB,IAAvB;AACAL,oBAAY,KAAZ;AACH;;AAED,QAAMkD,OAAO,IAAb;AACA,aAAS1B,YAAT,CAAsBzT,IAAtB,EAA4BoR,QAA5B,EAAsC;AAClC,YAAI/P,YAAJ;AACA,YAAI0Q,QAAQqD,eAAR,KAA4BpV,0BAAkBA,oBAA9C,CAAJ,EAAiE;AAC7D,gBAAI,mBAAQoS,cAAR,GAAyBC,iBAA7B,EAAgD;AAC5C,oBAAMgD,aAAcrV,sBAAD,4CAAnB;AAEAqB,sBAAM8P,iBAAiBkE,UAAjB,EAA6BjE,QAA7B,EAAuCY,KAAvC,CAAN;AACAmD,qBAAKpV,OAAL,CAAasV,UAAb,EAAyBhU,GAAzB;AACA+Q,iCAAiB,CAAjB;AACH,aAND,MAMO;AACHA,iCAAiB,gBAAjB;AACH;AACJ;AACD/Q,cAAM8P,iBAAiBnR,IAAjB,EAAuBoR,QAAvB,EAAiCY,KAAjC,CAAN;AACAmD,aAAKpV,OAAL,CAAaC,IAAb,EAAmBqB,GAAnB;AACH;;AAED,SAAKoS,YAAL,GAAoBA,YAApB;;AAEA,SAAKjP,OAAL,GAAe,YAAW;AACtB,aAAKrB,GAAL;AACA2O,aAAKqC,mBAAL,CAAyB,YAAzB,EAAuCpB,oBAAvC;AACAjB,aAAKqC,mBAAL,CAAyB,WAAzB,EAAsCpB,oBAAtC;AACAjB,aAAKqC,mBAAL,CAAyB,SAAzB,EAAoCb,UAApC;;AAEA,YAAIhB,oBAAJ,EAA0B;AACtBA,iCAAqB6B,mBAArB,CAAyC,WAAzC,EAAsDI,mBAAtD;AACAjC,iCAAqB6B,mBAArB,CAAyC,aAAzC,EAAwDtB,kBAAxD;AACAP,iCAAqB6B,mBAArB,CAAyC,UAAzC,EAAqDtB,kBAArD;AACAP,mCAAuB,IAAvB;AACH;;AAED,YAAIrC,sBAAJ,EAA4B;AACxB,gBAAI8B,QAAQY,gBAAZ,EAA8B;AAC1Bb,qBAAKkD,qBAAL,CAA2BzC,UAA3B;AACH;AACDT,iBAAKqC,mBAAL,CAAyB,aAAzB,EAAwClB,WAAxC;AACAnB,iBAAKqC,mBAAL,CAAyB,aAAzB,EAAwCpB,oBAAxC;AACAjB,iBAAKqC,mBAAL,CAAyB,aAAzB,EAAwCI,mBAAxC;AACAzC,iBAAKqC,mBAAL,CAAyB,aAAzB,EAAwCf,WAAxC;AACAtB,iBAAKqC,mBAAL,CAAyB,eAAzB,EAA0CtB,kBAA1C;AACAf,iBAAKqC,mBAAL,CAAyB,YAAzB,EAAuCjB,iBAAvC;AACApB,iBAAKqC,mBAAL,CAAyB,WAAzB,EAAsCtB,kBAAtC;AACH;;AAEDf,aAAKqC,mBAAL,CAAyB,OAAzB,EAAkCtB,kBAAlC;AACAf,aAAKqC,mBAAL,CAAyB,WAAzB,EAAsClB,WAAtC;AACAnB,aAAKqC,mBAAL,CAAyB,WAAzB,EAAsCf,WAAtC;AACAtB,aAAKqC,mBAAL,CAAyB,UAAzB,EAAqCd,UAArC;AACAQ,iBAASM,mBAAT,CAA6B,WAA7B,EAA0CI,mBAA1C;AACAV,iBAASM,mBAAT,CAA6B,SAA7B,EAAwCvB,mBAAxC;;AAEA,YAAIb,QAAQwB,QAAZ,EAAsB;AAClBzB,iBAAKqC,mBAAL,CAAyB,OAAzB,EAAkClB,WAAlC;AACAnB,iBAAKqC,mBAAL,CAAyB,MAAzB,EAAiCd,UAAjC;AACH;AACJ,KArCD;;AAuCA,WAAO,IAAP;AACH,CAxPD;;AA0PA;AACA;AACO,SAASvD,cAAT,CAAwBzO,GAAxB,EAA6B;AAChC,QAAK8O,wBAAwB9O,eAAe0O,UAAxC,IACCE,0BAA0B5O,eAAe2O,YAAzC,IAAyD3O,IAAImS,WAAJ,KAAoB,OADlF,EAC4F;AACxF,eAAO,OAAP;AACH;;AAED,WAAO,OAAP;AACH;;AAED,SAAc3B,GAAGpT,SAAjB;;kBAEeoT,E;;;;;;;;;;;;;;;;;;;;kBCrVSyD,G;;AAJxB;;AAEA;;AAEe,SAASA,GAAT,CAAapV,IAAb,EAAmB;AAC9B;AACA,QAAId,YAAY,EAAhB;AACAc,WAAO,mBAAKA,IAAL,CAAP;AACA,QAAIqV,OAAOrV,KAAKsV,KAAL,CAAW,UAAX,CAAX;AACA,QAAID,KAAKrR,MAAL,KAAgB,CAApB,EAAuB;AACnBqR,eAAOrV,KAAKsV,KAAL,CAAW,MAAX,CAAP;AACH;;AAED,SAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIF,KAAKrR,MAAzB,EAAiCuR,GAAjC,EAAsC;AAClC,YAAIF,KAAKE,CAAL,MAAY,QAAhB,EAA0B;AACtB;AACH;AACD;AACA,YAAIC,QAAQC,OAAOJ,KAAKE,CAAL,CAAP,CAAZ;AACA,YAAIC,MAAME,IAAV,EAAgB;AACZxW,sBAAUmP,IAAV,CAAemH,KAAf;AACH;AACJ;;AAED,WAAOtW,SAAP;AACH;;AAGD;AACA,SAASuW,MAAT,CAAgBzV,IAAhB,EAAsB;AAClB,QAAIwV,QAAQ,EAAZ;AACA,QAAIG,QAAQ3V,KAAKsV,KAAL,CAAW,MAAX,CAAZ;AACA,QAAIK,MAAM3R,MAAN,KAAiB,CAArB,EAAwB;AACpB2R,gBAAQ3V,KAAKsV,KAAL,CAAW,IAAX,CAAR;AACH;AACD,QAAIzM,MAAM,CAAV;AACA,QAAI8M,MAAM,CAAN,EAASX,OAAT,CAAiB,OAAjB,IAA4B,CAAhC,EAAmC;AAC/BnM,cAAM,CAAN;AACH;AACD,QAAI8M,MAAM3R,MAAN,GAAe6E,MAAM,CAArB,IAA0B8M,MAAM9M,MAAM,CAAZ,CAA9B,EAA8C;AAC1C;AACA,YAAI+M,OAAOD,MAAM9M,GAAN,CAAX;AACA,YAAInG,QAAQkT,KAAKZ,OAAL,CAAa,OAAb,CAAZ;AACA,YAAItS,QAAQ,CAAZ,EAAe;AACX8S,kBAAMK,KAAN,GAAc,sBAAQD,KAAKE,MAAL,CAAY,CAAZ,EAAepT,KAAf,CAAR,CAAd;AACA8S,kBAAMO,GAAN,GAAY,sBAAQH,KAAKE,MAAL,CAAYpT,QAAQ,CAApB,CAAR,CAAZ;AACA;AACA8S,kBAAME,IAAN,GAAaC,MAAMK,KAAN,CAAYnN,MAAM,CAAlB,EAAqBoN,IAArB,CAA0B,MAA1B,CAAb;AACH;AACJ;AACD,WAAOT,KAAP;AACH,C;;;;;;;;;;;;;;;;;;kBCjDuBhO,U;;AAFxB;;AAEe,SAASA,UAAT,CAAoBoG,QAApB,EAA8B;AACzC,QAAI/F,aAAY,KAAhB;;AAEA,WAAO;AACHxB,eAAO,iBAAW;AAAA;;AACd,gBAAMtG,OAAOmW,SAAb;AACA,mBAAO,kBAAS9P,IAAT,CAAc,YAAM;AACvB,oBAAIyB,UAAJ,EAAe;AACX;AACH;AACD,uBAAO+F,SAAS4B,KAAT,QAAqBzP,IAArB,CAAP;AACH,aALM,CAAP;AAMH,SATE;AAUHyF,gBAAQ,kBAAM;AACVqC,yBAAY,IAAZ;AACH,SAZE;AAaHA,mBAAW;AAAA,mBAAMA,UAAN;AAAA;AAbR,KAAP;AAeH,C;;;;;;;;;;;;;;;;;;;;;ACpBD;;AACA;;;;AACA;;AACA;;AACA;;;;AACA;;AACA;;;;;;AAEA;AACA,IAAMsO,QAAQ,SAARA,KAAQ,GAAW;AACrB,QAAMpX,QAAQ,IAAd;AACA,QAAIqX,kBAAJ;AACA,QAAIC,kBAAJ;AACA,SAAKjU,UAAL,GAAkB,IAAIkU,UAAJ,EAAlB;;AAEA,SAAKzV,GAAL,CAAS,UAAT,EAAqB,IAArB;AACA,SAAKA,GAAL,CAAS,YAAT,EAAuB,KAAKuB,UAA5B;;AAEA,SAAK5D,KAAL,GAAa,UAASC,MAAT,EAAiB;AAC1B,iBAAc,KAAKoH,UAAnB,EAA+BpH,MAA/B;AACA2X,oBAAY,wBAAc,KAAK/M,gBAAL,EAAd,CAAZ;AACA,aAAKkN,YAAL;AACA,eAAO,IAAP;AACH,KALD;;AAOA,SAAKlN,gBAAL,GAAwB,YAAW;AAC/B,YAAM5K,SAAS,KAAK+X,KAAL,EAAf;AACA,YAAMC,uBAAuBhY,OAAO2D,UAAP,CAAkByD,UAA/C;AACArC,eAAOkT,IAAP,mCAAiCC,OAAjC,CAAyC,eAAO;AAC5ClY,mBAAOmY,GAAP,IAAcH,qBAAqBG,GAArB,CAAd;AACH,SAFD;AAGA,eAAOnY,OAAO2G,QAAd;AACA,eAAO3G,OAAO2D,UAAd;AACA,eAAO3D,MAAP;AACH,KATD;;AAWA,SAAKoY,mBAAL,GAA2B,UAAS3N,OAAT,EAAkB4N,MAAlB,EAA0B;AACjD,YAAIC,eAAeD,OAAO5N,OAAP,KAAmB,EAAtC;AACA,YAAI8N,QAAQD,aAAaC,KAAzB;AACA,aAAKnW,GAAL,CAAS,cAAT,EAAyBmW,KAAzB;AACH,KAJD;;AAMA,SAAKvO,aAAL,GAAqB,UAAU/F,KAAV,EAAiB;AAClC,YAAMG,OAAO,KAAK7B,GAAL,CAAS,UAAT,EAAqB0B,KAArB,CAAb;AACA,aAAKuU,SAAL,CAAepU,IAAf;AACA,aAAKgD,UAAL,CAAgBzB,YAAhB,GAA+B,IAA/B;AACA,aAAKvD,GAAL,CAAS,MAAT,EAAiB6B,KAAjB;AACA,aAAK7B,GAAL,CAAS,cAAT,EAAyBgC,KAAKL,YAA9B;AACA,aAAK3B,GAAL,CAAS,cAAT,EAAyBgC,IAAzB;AACH,KAPD;;AASA,SAAKqU,aAAL,GAAqB,UAAU9U,UAAV,EAAsB;AACvC,YAAI,KAAKA,UAAL,IAAmB,KAAKA,UAAL,KAAoBA,UAA3C,EAAuD;AACnD,iBAAKA,UAAL,CAAgBa,GAAhB;AACH;;AAEDb,qBAAaA,cAAc,IAAIkU,UAAJ,EAA3B;AACA,aAAKlU,UAAL,GAAkBA,UAAlB;AACA,aAAKvB,GAAL,CAAS,YAAT,EAAuBuB,UAAvB;AACA+U,iCAAyB/U,UAAzB;AACH,KATD;;AAWA,SAAKkC,OAAL,GAAe,YAAW;AACtB,aAAKuB,UAAL,CAAgBuR,UAAhB,GAA6B,IAA7B;AACA,aAAKnU,GAAL;AACA,YAAIoT,SAAJ,EAAe;AACXA,sBAAUpT,GAAV,CAAc,IAAd,EAAoB,IAApB,EAA0B,IAA1B;AACAoT,sBAAU/R,OAAV;AACH;AACJ,KAPD;;AASA,SAAK+S,QAAL,GAAgB,YAAW;AACvB,eAAOhB,SAAP;AACH,KAFD;;AAIA,SAAKzK,aAAL,GAAqB,UAAS/J,KAAT,EAAgB;AACjCA,gBAAQ,CAAC,CAACA,KAAV;AACA,YAAIA,UAAU9C,MAAMiC,GAAN,CAAU,YAAV,CAAd,EAAuC;AACnCjC,kBAAM8B,GAAN,CAAU,YAAV,EAAwBgB,KAAxB;AACH;AACJ,KALD;;AAOA,SAAKyV,YAAL,GAAoB,YAAW;AAC3B,eAAOlB,SAAP;AACH,KAFD;;AAIA,SAAKnJ,SAAL,GAAiB,UAAS1L,MAAT,EAAiB;AAC9BA,iBAASoD,KAAKC,KAAL,CAAWrD,MAAX,CAAT;AACA,aAAKV,GAAL,CAAS,QAAT,EAAmBU,MAAnB;AACA,YAAIC,OAAQD,WAAW,CAAvB;AACA,YAAIC,SAAU,KAAKC,OAAL,EAAd,EAA+B;AAC3B,iBAAKyL,OAAL,CAAa1L,IAAb;AACH;AACJ,KAPD;;AASA,SAAKC,OAAL,GAAe,YAAW;AACtB,eAAO,KAAKT,GAAL,CAAS,gBAAT,KAA8B,KAAKA,GAAL,CAAS,MAAT,CAArC;AACH,KAFD;;AAIA,SAAKkM,OAAL,GAAe,UAAS1L,IAAT,EAAe;AAC1B,YAAIA,SAASV,SAAb,EAAwB;AACpBU,mBAAO,CAAE,KAAKC,OAAL,EAAT;AACH;AACD,aAAKZ,GAAL,CAAS,MAAT,EAAiBW,IAAjB;AACA,YAAI,CAACA,IAAL,EAAW;AACP,gBAAID,SAASoD,KAAK4S,GAAL,CAAS,EAAT,EAAa,KAAKvW,GAAL,CAAS,QAAT,CAAb,CAAb;AACA,iBAAKH,GAAL,CAAS,gBAAT,EAA2B,KAA3B;AACA,iBAAKoM,SAAL,CAAe1L,MAAf;AACH;AACJ,KAVD;;AAYA,SAAKkB,aAAL,GAAqB,UAAS+U,UAAT,EAAqB;AACtC,aAAK3W,GAAL,CAAS,YAAT,EAAuB2W,UAAvB;AACA,YAAIA,eAAe,MAAnB,EAA2B;AACvB,iBAAKrK,eAAL,CAAqB,CAArB;AACH;AACJ,KALD;;AAOA,SAAKsK,WAAL,GAAmB,UAAUC,QAAV,EAAoB;AACnCrB,oBAAYqB,QAAZ;AACAC,+BAAuB,IAAvB,EAA6BD,QAA7B;AACH,KAHD;;AAKA,SAAKE,aAAL,GAAqB,YAAY;AAC7BvB,oBAAY,IAAZ;AACA,aAAKxV,GAAL,CAAS,UAAT,EAAqBC,SAArB;AACH,KAHD;;AAKA,SAAKqM,eAAL,GAAuB,UAASxL,YAAT,EAAuB;AAC1C,YAAI,CAAC,qBAAEkW,QAAF,CAAWlW,YAAX,CAAL,EAA+B;AAC3B;AACH;;AAED;AACAA,uBAAegD,KAAK4S,GAAL,CAAS5S,KAAKmT,GAAL,CAASnW,YAAT,EAAuB,CAAvB,CAAT,EAAoC,IAApC,CAAf;;AAEA,YAAI,KAAKX,GAAL,CAAS,YAAT,MAA2B,MAA/B,EAAuC;AACnCW,2BAAe,CAAf;AACH;;AAED,aAAKd,GAAL,CAAS,qBAAT,EAAgCc,YAAhC;;AAEA,YAAI0U,aAAaA,UAAUlJ,eAA3B,EAA4C;AACxCkJ,sBAAUlJ,eAAV,CAA0BxL,YAA1B;AACH;AACJ,KAjBD;;AAmBA,SAAKoW,oBAAL,GAA4B,YAAW;AACnC,YAAI5V,QAAQ,KAAKnB,GAAL,CAAS,eAAT,CAAZ;;AAEA,YAAImB,KAAJ,EAAW;AACP;AACA,iBAAKtB,GAAL,CAAS,cAAT,EAAyBsB,MAAM6V,IAA/B;AACH,SAHD,MAGO;AACH,iBAAKnX,GAAL,CAAS,cAAT,EAAyB,KAAzB;AACH;AACJ,KATD;;AAYA,SAAKoX,qBAAL,GAA6B,UAASC,UAAT,EAAqBhW,MAArB,EAA6B;AACtD,aAAKrB,GAAL,CAAS,eAAT,EAA0BqX,UAA1B;AACA;;;;AAIA,YAAIA,cAAchW,MAAd,IAAwBgW,cAAchW,OAAO8B,MAA7C,IAAuD9B,OAAOgW,aAAa,CAApB,EAAuBlY,IAAlF,EAAwF;AACpF,iBAAKa,GAAL,CAAS,eAAT,EAA0BqB,OAAOgW,aAAa,CAApB,CAA1B;AACH;AACJ,KATD;;AAWA,SAAKnO,yBAAL,GAAiC,UAASmO,UAAT,EAAqBhW,MAArB,EAA6B;AAC1D,aAAK+V,qBAAL,CAA2BC,UAA3B,EAAuChW,MAAvC;AACA,aAAK6V,oBAAL;AACH,KAHD;;AAKA;AACA;AACA,SAAKxB,YAAL,GAAoB,UAAS4B,SAAT,EAAoB;AACpC,YAAIA,cAAcrX,SAAlB,EAA6B;AACzB,iBAAKD,GAAL,CAAS,WAAT,EAAsBsX,SAAtB;AACH;;AAED,YAAMC,oBAAoB,gBAAGnT,MAAH,IAAa,KAAKjE,GAAL,CAAS,WAAT,CAAvC;AACA,aAAKH,GAAL,CAAS,gBAAT,EAA2BuX,qBAAqB,KAAKpX,GAAL,CAAS,WAAT,MAA0B,UAA1E;AACH,KAPD;;AASA,SAAKiW,SAAL,GAAiB,UAAUpU,IAAV,EAAgB;AAC7B,YAAMjB,WAAWiB,OAAO,sBAAQA,KAAKwV,SAAb,CAAP,GAAiC,CAAlD;AACA,YAAM9V,WAAWM,OAAO,sBAAQA,KAAKN,QAAb,CAAP,GAAgC,CAAjD;AACA,YAAMH,aAAa,KAAKA,UAAxB;AACA,aAAKvB,GAAL,CAAS,cAAT,EAAyB,KAAzB;AACA,aAAKgF,UAAL,CAAgByS,QAAhB,GAA2B,EAA3B;AACAlW,mBAAWvB,GAAX,CAAe,UAAf,EAA2Be,QAA3B;AACAQ,mBAAWvB,GAAX,CAAe,aAAf,EAA8B,CAA9B;AACAuB,mBAAWvB,GAAX,CAAe,UAAf,EAA2B0B,QAA3B;AACH,KATD;AAUH,CA3LD;;AA6LA,IAAMoV,yBAAyB,SAAzBA,sBAAyB,CAAChX,KAAD,EAAQ+W,QAAR,EAAqB;AAChD/W,UAAME,GAAN,CAAU,UAAV,EAAsB6W,SAASa,OAAT,EAAtB;AACA,QAAI5X,MAAMK,GAAN,CAAU,cAAV,MAA8B,IAAlC,EAAwC;AACpC0W,iBAASc,YAAT,GAAwB,IAAxB;AACH;;AAED,QAAId,SAASa,OAAT,GAAmBP,IAAnB,CAAwBhD,OAAxB,CAAgC,OAAhC,MAA6C,CAAC,CAAlD,EAAqD;AACjDrU,cAAME,GAAN,CAAU,eAAV,EAA2BC,SAA3B;AACAH,cAAME,GAAN,CAAU,cAAV,EAA0B,KAA1B;AACH;;AAED;AACAF,UAAMwM,eAAN,CAAsBxM,MAAMK,GAAN,CAAU,qBAAV,CAAtB;;AAEA;AACAL,UAAME,GAAN,CAAU,sBAAV,EAAkC6W,SAASe,oBAA3C;AACA9X,UAAME,GAAN,CAAU,cAAV,EAA0B6W,SAASgB,eAAT,EAA1B;AACA/X,UAAME,GAAN,CAAU,wBAAV,EAAoC6W,SAASiB,cAA7C;AACH,CAlBD;;AAoBA,SAASxB,wBAAT,CAAkC/U,UAAlC,EAA8C;AAC1C;AACA,QAAMwW,aAAaxW,WAAWpB,GAAX,CAAe,YAAf,CAAnB;AACAoB,eAAWvC,OAAX,CAAmB,mBAAnB,EAAwCuC,UAAxC,EAAoDwW,UAApD,EAAgEA,UAAhE;AACH;;AAED;AACA,IAAMtC,aAAaH,MAAMG,UAAN,GAAmB,YAAW;AAC7C,SAAKzQ,UAAL,GAAkB;AACd+S;AADc,KAAlB;AAGH,CAJD;;AAMA,SAActC,WAAW/X,SAAzB,yBAAiD;AAC7Csa,YAD6C,sBAClC;AACP,iBAAc,KAAKhT,UAAnB,EAA+B;AAC3BrH,mBAAO,KADoB;AAE3Bsa,qBAAS,KAFkB;AAG3BC,uBAAW,KAHgB;AAI3BC,2BAAe,IAJY;AAK3BC,oBAAQ,CALmB;AAM3BC,yBAAa;AANc,SAA/B;AAQH;AAV4C,CAAjD;;AAaA,SAAc/C,MAAM5X,SAApB;;QAES+X,U,GAAAA,U;kBACMH,K;;;;;;;;;;;;;;;;;ACvPR,IAAMgD,wDAAwBzT,OAAOyT,qBAAP,IAAgC,UAAUvL,QAAV,EAAoB;AACrF,WAAOwL,WAAWxL,QAAX,EAAqB,EAArB,CAAP;AACH,CAFM;;AAIA,IAAMyL,sDAAuB3T,OAAO2T,oBAAP,IAA+BC,YAA5D,C;;;;;;;;;;;;;;;;;QCFSC,a,GAAAA,a;QAsBAC,a,GAAAA,a;;AAxBhB;;AAEO,SAASD,aAAT,CAAuBE,KAAvB,EAA8B;AACjC,QAAIC,aAAa,CAAjB;;AAEA,QAAID,SAAS,IAAb,EAAmB;AACfC,qBAAa,CAAb;AACH,KAFD,MAEO,IAAID,SAAS,GAAb,EAAkB;AACrBC,qBAAa,CAAb;AACH,KAFM,MAEA,IAAID,SAAS,GAAb,EAAkB;AACrBC,qBAAa,CAAb;AACH,KAFM,MAEA,IAAID,SAAS,GAAb,EAAkB;AACrBC,qBAAa,CAAb;AACH,KAFM,MAEA,IAAID,SAAS,GAAb,EAAkB;AACrBC,qBAAa,CAAb;AACH,KAFM,MAEA,IAAID,SAAS,GAAb,EAAkB;AACrBC,qBAAa,CAAb;AACH,KAFM,MAEA,IAAID,SAAS,GAAb,EAAkB;AACrBC,qBAAa,CAAb;AACH;;AAED,WAAOA,UAAP;AACH;;AAEM,SAASF,aAAT,CAAuBG,aAAvB,EAAsCC,gBAAtC,EAAwD;AAC3D,QAAMC,kBAAkB,mBAAmBD,gBAA3C;AACA,2BAAaD,aAAb,EAA4B,mBAA5B,EAAiDE,eAAjD;AACH,C;;;;;;;;;;;AC3BD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD,IAAI;AACJ;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,YAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,cAAc;;AAElE;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3EA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;AAEA;;AACA;;;;;;;;;;AAEA;;IAEMC,iB;;;AACF;;;;;AAKA,+BAAYnZ,KAAZ,EAAmB7B,SAAnB,EAA8B;AAAA;;AAAA;;AAG1B,cAAKib,SAAL,GAAiB,KAAjB;AACA,cAAKC,UAAL,GAAkB,gCAAlB;AACA,cAAKlb,SAAL,GAAiBA,SAAjB;AACA,cAAKmb,eAAL,GAAuB,IAAvB;AACA,cAAKC,uBAAL,GAA+B,+CAAwBvZ,KAAxB,QAA/B;AACA,cAAKA,KAAL,GAAaA,KAAb;AACA,cAAKyV,SAAL,GAAiB,wBAAczV,MAAM0I,gBAAN,EAAd,CAAjB;AACA,cAAKzD,WAAL;;AAEA,YAAI,CAAC,sBAAS9C,iBAAd,EAAiC;AAC7B;AACAnC,kBAAME,GAAN,CAAU,cAAV,EAA0B,MAAK/B,SAAL,CAAeqb,gBAAf,EAA1B;AACH;AAfyB;AAgB7B;;AAED;;;;;;;;;;;sCAOczX,K,EAAO;AAAA;;AAAA,gBACTsX,UADS,GAC8B,IAD9B,CACTA,UADS;AAAA,gBACGC,eADH,GAC8B,IAD9B,CACGA,eADH;AAAA,gBACoBtZ,KADpB,GAC8B,IAD9B,CACoBA,KADpB;;AAEjB,gBAAMkC,OAAOlC,MAAMK,GAAN,CAAU,UAAV,EAAsB0B,KAAtB,CAAb;;AAEA/B,kBAAMkF,UAAN,CAAiBC,SAAjB,GAA6B,KAA7B;AACAnF,kBAAM8H,aAAN,CAAoB/F,KAApB;AACA,gBAAMyO,SAASiJ,UAAUvX,IAAV,CAAf;AACA,gBAAI,CAACsO,MAAL,EAAa;AACT,uBAAO,kBAAQ1K,MAAR,CAAe,IAAI4T,KAAJ,CAAU,UAAV,CAAf,CAAP;AACH;;AAED;AACA,gBAAIL,WAAWM,MAAX,CAAkBzX,IAAlB,CAAJ,EAA6B;AACzB;AACA,qBAAK0X,mBAAL;AACA;AACA,qBAAK3U,WAAL,GAAmB,KAAK4U,wBAAL,EAAnB;AACA,uBAAO,KAAK5U,WAAZ;AACH;AACD;AACA,iBAAK6U,uBAAL;;AAEA,gBAAIR,eAAJ,EAAqB;AACjB,oBAAMS,UAAU/Z,MAAMK,GAAN,CAAU,YAAV,CAAhB;AACA,oBAAI0Z,WAAW,KAAKC,gBAAL,CAAsBV,gBAAgBvC,QAAtC,EAAgDvG,MAAhD,CAAf,EAAwE;AACpE;AACA,yBAAKvL,WAAL,GAAmB,kBAAQY,OAAR,CAAgByT,eAAhB,CAAnB;AACA;AACAA,oCAAgBW,UAAhB,GAA6B/X,IAA7B;AACA,yBAAKgY,eAAL,CAAqBZ,eAArB;AACA,2BAAO,KAAKrU,WAAZ;AACH;;AAED;AACA;AACA,qBAAK2U,mBAAL;AACH;;AAED,gBAAMO,oBAAoBna,MAAMyB,UAAhC;AACA,iBAAKwD,WAAL,GAAmB,KAAKmV,qBAAL,CAA2B5J,MAA3B,EACd/K,IADc,CACT,+BAAuB;AACzB;AACA;AACA,oBAAI0U,sBAAsBna,MAAMyB,UAAhC,EAA4C;AACxC4Y,wCAAoBJ,UAApB,GAAiC/X,IAAjC;AACA,2BAAKgY,eAAL,CAAqBG,mBAArB;AACA,2BAAOA,mBAAP;AACH;AACJ,aATc,EAUd/U,KAVc,CAUR,eAAO;AACV,uBAAKsU,mBAAL;AACA,sBAAMU,GAAN;AACH,aAbc,CAAnB;AAcA,mBAAO,KAAKrV,WAAZ;AACH;;AAED;;;;;;;;;kCAMUsB,U,EAAY;AAAA;;AAAA,gBACV+S,eADU,GACiB,IADjB,CACVA,eADU;AAAA,gBACOtZ,KADP,GACiB,IADjB,CACOA,KADP;;AAElB,gBAAMkC,OAAOlC,MAAMK,GAAN,CAAU,cAAV,CAAb;AACA,gBAAIka,oBAAJ;;AAEA,gBAAI,CAACrY,IAAL,EAAW;AACP,uBAAO,kBAAQ4D,MAAR,CAAe,IAAI4T,KAAJ,CAAU,UAAV,CAAf,CAAP;AACH;;AAED,gBAAI,CAACnT,UAAL,EAAiB;AACbA,6BAAavG,MAAMK,GAAN,CAAU,YAAV,CAAb;AACH;;AAED;AACA,gBAAIiZ,eAAJ,EAAqB;AACjBiB,8BAAcjB,gBAAgB3R,IAAhB,CAAqBpB,UAArB,CAAd;AACH,aAFD,MAEO;AACH;AACAvG,sBAAME,GAAN;;AAEA;AACA,oBAAMsa,kBAAkB,0BAAW,UAACH,mBAAD,EAAyB;AACxD,wBAAI,OAAKf,eAAL,IAAwB,OAAKA,eAAL,CAAqB7X,UAArB,KAAoC4Y,oBAAoB5Y,UAApF,EAAgG;AAC5F,+BAAO4Y,oBAAoB1S,IAApB,CAAyBpB,UAAzB,CAAP;AACH;AACD,0BAAM,IAAImT,KAAJ,CAAU,qBAAV,CAAN;AACH,iBALuB,CAAxB;;AAOAa,8BAAc,KAAKtV,WAAL,CACTK,KADS,CACH,iBAAS;AACZkV,oCAAgB3V,MAAhB;AACA;AACA7E,0BAAMd,OAAN,gBAAqB;AACjBqB,4DAAkCgF,MAAMhF,OADvB;AAEjBgF,+BAAOA;AAFU,qBAArB;AAIA;AACA,0BAAMA,KAAN;AACH,iBAVS,EAWTE,IAXS,CAWJ+U,gBAAgB9U,KAXZ,CAAd;AAYH;;AAED,mBAAO6U,WAAP;AACH;;AAED;;;;;;;oCAIY;AAAA,gBACAjB,eADA,GAC2B,IAD3B,CACAA,eADA;AAAA,gBACiBtZ,KADjB,GAC2B,IAD3B,CACiBA,KADjB;;;AAGR,gBAAMkC,OAAOlC,MAAMK,GAAN,CAAU,UAAV,EAAsBL,MAAMK,GAAN,CAAU,MAAV,CAAtB,CAAb;AACAL,kBAAMkF,UAAN,CAAiBzB,YAAjB,GAAgCvB,IAAhC;AACAlC,kBAAMsW,SAAN,CAAgBpU,IAAhB;;AAEA,gBAAIoX,eAAJ,EAAqB;AACjBA,gCAAgB1O,IAAhB;AACH;AACJ;;AAED;;;;;;;uCAIe;AAAA,gBACHyO,UADG,GAC6B,IAD7B,CACHA,UADG;AAAA,gBACSC,eADT,GAC6B,IAD7B,CACSA,eADT;;AAEX,gBAAMmB,QAAQnB,mBAAmBD,WAAWqB,YAA5C;AACA,gBAAI,CAACD,KAAL,EAAY;AACR;AACH;AACDA,kBAAME,OAAN;AACH;;AAED;;;;;;;gCAIQ;AAAA,gBACIrB,eADJ,GACwB,IADxB,CACIA,eADJ;;AAEJ,gBAAI,CAACA,eAAL,EAAsB;AAClB;AACH;;AAEDA,4BAAgB/U,KAAhB;AACH;;AAED;;;;;;;;;kCAMUyH,Y,EAAc9J,I,EAAM;AAAA,gBAClBlC,KADkB,GACR,IADQ,CAClBA,KADkB;;AAE1BA,kBAAMkF,UAAN,CAAiBC,SAAjB,GAA6B,KAA7B;;AAEA,gBAAM1B,eAAe,SAAc,EAAd,EAAkBvB,IAAlB,CAArB;AACAuB,yBAAaiU,SAAb,GAAyB1X,MAAMyB,UAAN,CAAiBpB,GAAjB,CAAqB,UAArB,CAAzB;;AAEA,gBAAMua,sBAAsB,8BAAoB5O,YAApB,EAAkChM,KAAlC,CAA5B;AACA4a,gCAAoBX,UAApB,GAAiCxW,YAAjC;AACA,iBAAKyW,eAAL,CAAqBU,mBAArB;AACH;;AAED;;;;;;;mCAIW;AAAA,gBACC5a,KADD,GACW,IADX,CACCA,KADD;;AAEP,gBAAM+B,QAAQ/B,MAAMK,GAAN,CAAU,MAAV,CAAd;AACA,gBAAM6B,OAAOlC,MAAMK,GAAN,CAAU,UAAV,EAAsB0B,KAAtB,CAAb;;AAEAG,iBAAKwV,SAAL,GAAiB1X,MAAMyB,UAAN,CAAiBpB,GAAjB,CAAqB,UAArB,CAAjB;;AAEA,iBAAKiH,SAAL;AACA,iBAAKQ,aAAL,CAAmB/F,KAAnB;AACH;;AAED;;;;;;;;;;gDAOwB;AACpB,iBAAKqX,SAAL,GAAiB,IAAjB;AADoB,gBAEZC,UAFY,GAEoB,IAFpB,CAEZA,UAFY;AAAA,gBAEAC,eAFA,GAEoB,IAFpB,CAEAA,eAFA;;AAGpB,gBAAI,CAACA,eAAL,EAAsB;AAClB;AACH;;AAED;AACA,gBAAID,WAAWqB,YAAf,EAA6B;AACzB,qBAAKG,uBAAL,CAA6BxB,WAAWqB,YAAxC;AACH;;AAEDpB,4BAAgBD,UAAhB,GAA6B,IAA7B;AACAA,uBAAWqB,YAAX,GAA0BpB,eAA1B;AACA,iBAAKA,eAAL,GAAuB,IAAvB;AACH;;AAED;;;;;;;;;iDAMyB;AACrB,iBAAKF,SAAL,GAAiB,KAAjB;AADqB,gBAEbC,UAFa,GAEmB,IAFnB,CAEbA,UAFa;AAAA,gBAEDC,eAFC,GAEmB,IAFnB,CAEDA,eAFC;;AAGrB,gBAAMwB,4BAA4BzB,WAAWqB,YAA7C;AACA,gBAAI,CAACI,yBAAL,EAAgC;AAC5B;AACH,aAFD,MAEO,IAAIxB,eAAJ,EAAqB;AACxB;AACA;AACA,qBAAKuB,uBAAL,CAA6BC,yBAA7B;AACAzB,2BAAWqB,YAAX,GAA0B,IAA1B;AACA;AACH;;AAEDI,sCAA0BrZ,UAA1B,CAAqCyD,UAArC,CAAgD+S,UAAhD,GAA6D,WAA7D;AACA,iBAAKiC,eAAL,CAAqBY,yBAArB;AACAA,sCAA0BzB,UAA1B,GAAuC,KAAvC;AACAA,uBAAWqB,YAAX,GAA0B,IAA1B;AACH;;AAED;;;;;;;;;uCAMexY,I,EAAM;AAAA,gBACTmX,UADS,GACM,IADN,CACTA,UADS;;AAEjB,gBAAM7I,SAASiJ,UAAUvX,IAAV,CAAf;;AAEAmX,uBAAW0B,OAAX,CAAmB7Y,IAAnB,EAAyB,KAAKkY,qBAAL,CAA2B5J,MAA3B,EACpB/K,IADoB,CACf,+BAAuB;AACzB4U,oCAAoBJ,UAApB,GAAiC/X,IAAjC;AACAmY,oCAAoBM,OAApB;AACA,uBAAON,mBAAP;AACH,aALoB,EAMpB/U,KANoB,CAMd,YAAM;AACT+T,2BAAW2B,SAAX;AACH,aARoB,CAAzB;AAUH;;AAED;;;;;;;;;6CAMqB;AACjB,iBAAK7c,SAAL,CAAe8c,KAAf;AACH;;AAED;;;;;;;kCAIU;AACN,iBAAK3Y,GAAL;AACA,iBAAKwX,uBAAL;AACA,iBAAKF,mBAAL;AACH;;AAED;;;;;;;;;;wCAOgBN,e,EAAiB;AAAA,gBACrBtZ,KADqB,GACX,IADW,CACrBA,KADqB;AAAA,gBAErByB,UAFqB,GAEI6X,eAFJ,CAErB7X,UAFqB;AAAA,gBAETsV,QAFS,GAEIuC,eAFJ,CAETvC,QAFS;;;AAI7BmE,iCAAqBlb,KAArB,EAA4BsZ,eAA5B;AACA,iBAAKA,eAAL,GAAuBA,eAAvB;;AAEAtZ,kBAAME,GAAN,CAAU,cAAV,EAA0BoZ,gBAAgB6B,YAA1C;AACAnb,kBAAMuW,aAAN,CAAoB9U,UAApB;AACAzB,kBAAM8W,WAAN,CAAkBC,QAAlB;;AAEAqE,0BAAc,IAAd,EAAoB9B,eAApB;AACAtZ,kBAAME,GAAN,CAAU,WAAV,EAAuB,IAAvB;AACH;;AAED;;;;;;;;8CAKsB;AAAA,gBACVoZ,eADU,GACiB,IADjB,CACVA,eADU;AAAA,gBACOtZ,KADP,GACiB,IADjB,CACOA,KADP;;AAElB,gBAAI,CAACsZ,eAAL,EAAsB;AAClB;AACH;;AAEDA,4BAAgB+B,MAAhB;AACA,iBAAKR,uBAAL,CAA6BvB,eAA7B;AACAtZ,kBAAMiX,aAAN;AACA,iBAAKqC,eAAL,GAAuB,IAAvB;AACH;;AAED;;;;;;;;kDAK0B;AAAA,gBACdD,UADc,GACC,IADD,CACdA,UADc;;AAEtB,iBAAKwB,uBAAL,CAA6BxB,WAAWqB,YAAxC;AACArB,uBAAWqB,YAAX,GAA0B,IAA1B;AACA,iBAAKY,8BAAL;AACH;;AAED;;;;;;;;;gDAMwBhC,e,EAAiB;AAAA,gBAC7Bnb,SAD6B,GACf,IADe,CAC7BA,SAD6B;;AAErC,gBAAI,CAACmb,eAAL,EAAsB;AAClB;AACH;AACDnb,sBAAUod,OAAV,CAAkBjC,gBAAgB6B,YAAlC;AACA7B,4BAAgB3V,OAAhB;AACH;;AAED;;;;;;;;;;;8CAQsB6M,M,EAAQ;AAAA;;AAAA,gBAClBxQ,KADkB,GACG,IADH,CAClBA,KADkB;AAAA,gBACXyV,SADW,GACG,IADH,CACXA,SADW;;AAE1B,gBAAM+F,sBAAsB,SAAtBA,mBAAsB;AAAA,uBAAuB,8BAC/C,IAAIC,mBAAJ,CAAwBzb,MAAMK,GAAN,CAAU,IAAV,CAAxB,EAAyCL,MAAM0I,gBAAN,EAAzC,EAAmE,OAAKgT,aAAxE,CAD+C,EAE/C1b,KAF+C,CAAvB;AAAA,aAA5B;;AAF0B,oCAOCyV,UAAUkG,MAAV,CAAiBnL,MAAjB,CAPD;AAAA,gBAOlBuG,QAPkB,qBAOlBA,QAPkB;AAAA,gBAORM,IAPQ,qBAORA,IAPQ;;AAQ1B,gBAAIN,QAAJ,EAAc;AACV,uBAAO,kBAAQlR,OAAR,CAAgB2V,oBAAqBzE,QAArB,CAAhB,CAAP;AACH;;AAED,mBAAOtB,UAAUzP,IAAV,CAAeqR,IAAf,EACF5R,IADE,CACG;AAAA,uBAAuB+V,oBAAoBC,mBAApB,CAAvB;AAAA,aADH,CAAP;AAEH;;AAED;;;;;;;;;;;;mDAS2B;AAAA;;AAAA,gBACfpC,UADe,GACiC,IADjC,CACfA,UADe;AAAA,gBACWuC,eADX,GACiC,IADjC,CACHvC,UADG,CACWuC,eADX;AAEvB;;AACA,iBAAKf,uBAAL,CAA6BxB,WAAWqB,YAAxC;AACArB,uBAAWqB,YAAX,GAA0B,IAA1B;AACA,mBAAOkB,gBAAgBnW,IAAhB,CAAqB,+BAAuB;AAC/C,oBAAI,CAAC4U,mBAAL,EAA0B;AACtB;AACH;AACDhB,2BAAW2B,SAAX;AACA,oBAAI,OAAK5B,SAAT,EAAoB;AAChBC,+BAAWqB,YAAX,GAA0BL,mBAA1B;AACH,iBAFD,MAEO;AACH,2BAAKH,eAAL,CAAqBG,mBAArB;AACAA,wCAAoBhB,UAApB,GAAiC,KAAjC;AACH;AACD,uBAAOgB,mBAAP;AACH,aAZM,CAAP;AAaA;AACH;;AAED;;;;;;;;;yDAMiC;AAAA;;AAAA,gBACrBhB,UADqB,GAC2B,IAD3B,CACrBA,UADqB;AAAA,gBACKuC,eADL,GAC2B,IAD3B,CACTvC,UADS,CACKuC,eADL;;AAE7B,gBAAI,CAACA,eAAL,EAAsB;AAClB;AACH;AACDA,4BAAgBnW,IAAhB,CAAqB,+BAAuB;AACxC,uBAAKoV,uBAAL,CAA6BR,mBAA7B;AACAhB,2BAAW2B,SAAX;AACH,aAHD;AAIH;;;yCAEgBtF,S,EAAWlF,M,EAAQ;AAAA,qCACX,KAAKiF,SAAL,CAAekG,MAAf,CAAsBnL,MAAtB,CADW;AAAA,gBACxBuG,QADwB,sBACxBA,QADwB;;AAEhC,mBAAOA,YAAarB,aAAaA,qBAAqBqB,QAAtD;AACH;;AAED;;;;;;;4BAIiB;AAAA,gBACLuC,eADK,GACe,IADf,CACLA,eADK;;AAEb,gBAAI,CAACA,eAAL,EAAsB;AAClB,uBAAO,CAAC,CAAR;AACH;;AAED,mBAAOA,gBAAgBvQ,UAAvB;AACH;;AAED;;;;;;;AAqFA;;;;;0BAKehH,K,EAAO;AAAA,gBACVuX,eADU,GACU,IADV,CACVA,eADU;;AAElB,gBAAI,CAACA,eAAL,EAAsB;AAClB;AACH;;AAEDA,4BAAgBvQ,UAAhB,GAA6BlB,SAAS9F,KAAT,EAAgB,EAAhB,KAAuB,CAApD;AACH;;AAED;;;;;;;;;4BA/FkB;AAAA,gBACNuX,eADM,GACc,IADd,CACNA,eADM;;AAEd,gBAAI,CAACA,eAAL,EAAsB;AAClB;AACH;;AAED,mBAAOA,gBAAgBpQ,WAAvB;AACH;;AAED;;;;;;;;4BAKqB;AAAA,gBACToQ,eADS,GACyC,IADzC,CACTA,eADS;AAAA,gBACsBoB,YADtB,GACyC,IADzC,CACQrB,UADR,CACsBqB,YADtB;;AAEjB,gBAAI,CAACpB,eAAD,IAAoB,CAACoB,YAAzB,EAAuC;AACnC,uBAAO,KAAP;AACH;;AAED,mBAAOpB,kBAAkBA,gBAAgBjN,cAAlC,GAAmDqO,aAAarO,cAAvE;AACH;;AAED;;;;;;;4BAIoB;AAChB,gBAAI,CAAC,sBAASlK,iBAAd,EAAiC;AAC7B;AACA;AAF6B,oBAGrBnC,KAHqB,GAGX,IAHW,CAGrBA,KAHqB;;AAI7B,uBAAOA,MAAMK,GAAN,CAAU,cAAV,CAAP;AACH;AACD,mBAAO,KAAKlC,SAAL,CAAeqb,gBAAf,EAAP;AACH;;AAED;;;;;;;4BAIc;AACV,gBAAI,CAAC,KAAKF,eAAV,EAA2B;AACvB,uBAAO,CAAC,CAAR;AACH;;AAED,mBAAO,KAAKA,eAAL,CAAqB/Q,OAA5B;AACH;;AAED;;;;;;;AAwGA;;;;;0BAKYxG,K,EAAO;AAAA,gBACPuX,eADO,GACa,IADb,CACPA,eADO;;AAEf,gBAAI,CAACA,eAAL,EAAsB;AAClB;AACH;;AAEDA,4BAAgB/Q,OAAhB,GAA0BV,SAAS9F,KAAT,EAAgB,EAAhB,KAAuB,CAAjD;AACH;;AAED;;;;;;;;4BAlHgB;AAAA,gBACJuX,eADI,GACgB,IADhB,CACJA,eADI;;AAEZ,gBAAI,CAACA,eAAL,EAAsB;AAClB,uBAAO,IAAP;AACH;;AAED,mBAAOA,gBAAgBzQ,SAAvB;AACH;;AAED;;;;;;;;0BAKagT,Y,EAAc;AAAA,gBACfvC,eADe,GACK,IADL,CACfA,eADe;;;AAGvB,gBAAI,CAACA,eAAL,EAAsB;AAClB;AACH;;AAED,gBAAIuC,YAAJ,EAAkB;AACdvC,gCAAgBwC,MAAhB;AACH,aAFD,MAEO;AACHxC,gCAAgB+B,MAAhB;AACH;AACJ;;;0BAsBYjR,I,EAAM;AAAA,gBACPkP,eADO,GACa,IADb,CACPA,eADO;;AAEf,gBAAI,CAACA,eAAL,EAAsB;AAClB;AACH;;AAEDA,4BAAgBnL,QAAhB,GAA2B/D,IAA3B;AACH;;AAED;;;;;;;;;0BAMSvJ,I,EAAM;AAAA,gBACHwY,UADG,GACwC,IADxC,CACHA,UADG;AAAA,gBACSC,eADT,GACwC,IADxC,CACSA,eADT;AAAA,gBAC0Bnb,SAD1B,GACwC,IADxC,CAC0BA,SAD1B;;;AAGX,gBAAImb,eAAJ,EAAqB;AACjBA,gCAAgBzY,IAAhB,GAAuBA,IAAvB;AACH;AACD,gBAAIwY,WAAWqB,YAAf,EAA6B;AACzBrB,2BAAWqB,YAAX,CAAwB7Z,IAAxB,GAA+BA,IAA/B;AACH;;AAED1C,sBAAU4d,QAAV,CAAmBlb,IAAnB;AACH;;AAED;;;;;;;;;;0BAOa6G,G,EAAK;AAAA,gBACN4R,eADM,GACqB,IADrB,CACNA,eADM;AAAA,gBACWtZ,KADX,GACqB,IADrB,CACWA,KADX;;AAEd,gBAAI,CAACsZ,eAAL,EAAsB;AAClB;AACH;AACD,gBAAMpY,QAAQlB,MAAMK,GAAN,sBAAd;AACA,gBAAM2b,aAAc,CAAC1C,gBAAgBnB,OAAjB,IAA4B,CAACmB,gBAAgBlB,SAA7C,IAA0DlX,4BAA9E;;AAEA,gBAAI8a,cAAc9a,gCAAlB,EAA4C;AACxCoY,gCAAgBpX,IAAhB,CAAqBwV,SAArB,GAAiChQ,GAAjC;AACH,aAFD,MAEO,IAAI4R,gBAAgB1P,QAApB,EAA8B;AACjC0P,gCAAgBrY,QAAhB,GAA2ByG,GAA3B;AACH,aAFM,MAEA;AACH4R,gCAAgBpX,IAAhB,CAAqBwV,SAArB,GAAiChQ,GAAjC;AACH;AACJ;;;0BAqBa3F,K,EAAO;AAAA,gBACTuX,eADS,GACW,IADX,CACTA,eADS;;AAEjB,gBAAI,CAACA,eAAL,EAAsB;AAClB;AACH;;AAEDA,4BAAgBjQ,SAAhB,GAA4BtH,KAA5B;AACH;;AAED;;;;;;;;;0BAMWnB,M,EAAQ;AAAA,gBACPyY,UADO,GACoC,IADpC,CACPA,UADO;AAAA,gBACKC,eADL,GACoC,IADpC,CACKA,eADL;AAAA,gBACsBnb,SADtB,GACoC,IADpC,CACsBA,SADtB;;;AAGf,gBAAImb,eAAJ,EAAqB;AACjBA,gCAAgB1Y,MAAhB,GAAyBA,MAAzB;AACH;AACD,gBAAIyY,WAAWqB,YAAf,EAA6B;AACzBrB,2BAAWqB,YAAX,CAAwB9Z,MAAxB,GAAiCA,MAAjC;AACH;;AAEDzC,sBAAU8d,UAAV,CAAqBrb,MAArB;AACH;;;;;;AAGL,SAASsa,oBAAT,CAA8Blb,KAA9B,EAAqCsZ,eAArC,EAAsD;AAClD,QAAM4C,YAAYlc,MAAMK,GAAN,CAAU,gBAAV,CAAlB;AACA,QAAI6b,SAAJ,EAAe;AACX5C,wBAAgB4C,SAAhB,GAA4BA,SAA5B;AACH,KAFD,MAEO;AACHlc,cAAM+C,IAAN,CAAW,uBAAX,EAAoC,UAACoZ,YAAD,EAAeC,gBAAf,EAAoC;AACpE9C,4BAAgB4C,SAAhB,GAA4BE,gBAA5B;AACH,SAFD;AAGH;AACJ;;AAED,SAAShB,aAAT,CAAuBiB,iBAAvB,EAA0C/C,eAA1C,EAA2D;AACvDA,oBAAgBhX,GAAhB,CAAoB,KAApB,EAA2B+Z,kBAAkB9C,uBAA7C,EAAsE8C,iBAAtE;AACA/C,oBAAgB3Z,EAAhB,CAAmB,KAAnB,EAA0B0c,kBAAkB9C,uBAA5C,EAAqE8C,iBAArE;AACH;;AAED,SAAS5C,SAAT,CAAmBvX,IAAnB,EAAyB;AACrB,WAAOA,QAAQA,KAAKY,OAAb,IAAwBZ,KAAKY,OAAL,CAAa,CAAb,CAA/B;AACH;;kBAEcqW,iB;;;;;;;;;;;;;;;;;;;;AC1rBf;;;;;;;;AAEA;IACqBmD,S;;;;kBAAAA,S;;AACrBA,UAAU1e,SAAV,GAAsB,SAAc,EAAd,qBAAtB,C;;;;;;;;;;;;;;;;;;;;QCGgB2e,gB,GAAAA,gB;QA6FAC,uB,GAAAA,uB;;AApGhB;;AACA;;AAMO,SAASD,gBAAT,CAA0BjD,eAA1B,EAA2C;AAC9C,WAAO,UAAUna,IAAV,EAAgBE,IAAhB,EAAsB;AAAA,YACjBoC,UADiB,GACF6X,eADE,CACjB7X,UADiB;;AAEzB,YAAMhC,QAAQ,SAAc,EAAd,EAAkBJ,IAAlB,EAAwB;AAClCF,kBAAMA;AAD4B,SAAxB,CAAd;;AAIA,gBAAQA,IAAR;AACI;AACI,oBAAIsC,WAAWpB,GAAX,yBAA+BhB,KAAKod,SAAxC,EAAmD;AAC/C;AACH;AACDhb,2BAAWvB,GAAX,qBAA2Bb,KAAKod,SAAhC;AACA;AACJ;AACIhb,2BAAWvB,GAAX,+BAAqC,SAAc,EAAd,EAAkBb,IAAlB,CAArC;AACA;AACJ;AAAmB;AACf,wBAAIA,KAAK3B,QAAL,uBAAJ,EAAkC;AAC9B4b,wCAAgBkB,eAAhB,CAAgC3V,MAAhC;AACApD,mCAAWyW,QAAX;AACH;AACD;AACA,wBAAMwE,gBAAgBjb,WAAWyD,UAAX,CAAsB+S,UAA5C;AACAxW,+BAAWyD,UAAX,CAAsB+S,UAAtB,GAAmC5Y,KAAK3B,QAAxC;AACA+D,+BAAWvC,OAAX,CAAmB,mBAAnB,EAAwCuC,UAAxC,EAAoDpC,KAAK3B,QAAzD,EAAmEgf,aAAnE;AACA;AACA;AACA;AACA;AACH;AACD;AACIpD,gCAAgBjN,cAAhB,GAAiC,IAAjC;AACAiN,gCAAgBpa,OAAhB,+BAA8CO,KAA9C;AACA,oBAAI6Z,gBAAgB1P,QAAhB,IAA4B,CAAC0P,gBAAgBD,UAAjD,EAA6D;AACzDC,oCAAgBqD,iBAAhB;AACH;AACD;AACJ;AACIrD,gCAAgBkB,eAAhB,CAAgC3V,MAAhC;AACApD,2BAAWyW,QAAX;AACA;AACJ;AAAiB;AACb,wBAAMtW,WAAWvC,KAAKuC,QAAtB;AACA,wBAAI,2BAAUA,QAAV,KAAuB,CAAC,wBAAOA,QAAP,CAA5B,EAA8C;AAC1CH,mCAAWvB,GAAX,CAAe,UAAf,EAA2B0B,QAA3B;AACH;AACD;AACH;AACD;AACIH,2BAAWvB,GAAX,CAAe,QAAf,EAAyBb,KAAKud,aAA9B;AACA;AACJ;AAAiB;AACbnb,+BAAWvB,GAAX,CAAe,UAAf,EAA2Bb,KAAK4B,QAAhC;AACAQ,+BAAWvB,GAAX,CAAe,aAAf,EAA8Bb,KAAKkZ,WAAnC;AACA,wBAAM3W,YAAWvC,KAAKuC,QAAtB;AACA,wBAAI,2BAAUA,SAAV,KAAuB,CAAC,wBAAOA,SAAP,CAA5B,EAA8C;AAC1CH,mCAAWvB,GAAX,CAAe,UAAf,EAA2B0B,SAA3B;AACH;AACD;AACH;AACD;AACIH,2BAAWvB,GAAX,uBAA6Bb,KAAK8W,MAAlC;AACA;AACJ;AAA0B;AAAA,wBACd0G,cADc,GACaxd,IADb,CACdwd,cADc;AAAA,wBACE1G,MADF,GACa9W,IADb,CACE8W,MADF;;AAEtB,wBAAI0G,iBAAiB,CAAC,CAAlB,IAAuB1G,OAAO9S,MAAP,GAAgB,CAA3C,EAA8C;AAC1C5B,mCAAWvB,GAAX,CAAe,cAAf,EAA+B2H,SAASgV,cAAT,CAA/B;AACH;AACD;AACH;AACD;AACIpb,2BAAWvB,GAAX,uBAA6Bb,KAAKkC,MAAlC;AACA;AACJ;AAA0B;AAAA,wBACdub,YADc,GACWzd,IADX,CACdyd,YADc;AAAA,wBACAvb,MADA,GACWlC,IADX,CACAkC,MADA;;;AAGtB,wBAAIub,eAAe,CAAC,CAAhB,IAAqBvb,OAAO8B,MAAP,GAAgB,CAArC,IAA0CyZ,eAAevb,OAAO8B,MAApE,EAA4E;AACxE5B,mCAAWvB,GAAX,CAAe,mBAAf,EAAoC2H,SAASiV,YAAT,CAApC;AACH;AACD;AACH;AACD,iBAAK,eAAL;AACIrb,2BAAWvB,GAAX,CAAe,eAAf,EAAgC,SAAc,EAAd,EAAkBb,IAAlB,CAAhC;AACA;AACJ;AACI;AA/ER;;AAkFAia,wBAAgBpa,OAAhB,CAAwBC,IAAxB,EAA8BM,KAA9B;AACH,KAzFD;AA0FH;;AAEM,SAAS+c,uBAAT,CAAiCxc,KAAjC,EAAwCqc,iBAAxC,EAA2D;AAC9D,WAAO,UAAUld,IAAV,EAAgBE,IAAhB,EAAsB;AACzB,gBAAQF,IAAR;AACI,iBAAK,eAAL;AAAsB;AAClB,wBAAMiB,YAAaf,KAAK6B,KAAL,KAAe,QAAlC;AACAlB,0BAAME,GAAN,CAAU,eAAV,EAA2BE,SAA3B;AACAJ,0BAAME,GAAN,CAAU,cAAV,EAA0BE,SAA1B;AACH;AACG;AACJ,iBAAK,cAAL;AACIJ,sBAAME,GAAN,CAAU,cAAV,EAA0B,IAA1B;AACA;AACJ,iBAAK,gBAAL;AACIF,sBAAME,GAAN,CAAU,cAAV,EAA0B,KAA1B;AACA;AACJ;AACIF,sBAAME,GAAN,CAAUf,IAAV,EAAgBE,KAAKF,IAAL,CAAhB;AACA;AACJ;AACI,oBAAI,CAACa,MAAMK,GAAN,CAAU,gBAAV,CAAL,EAAkC;AAC9B;AACAL,0BAAME,GAAN,CAAUf,IAAV,EAAgBE,KAAKF,IAAL,CAAhB;AACH;AACD;AACJ;AACIa,sBAAME,GAAN,CAAU,cAAV,EAA0Bb,KAAK2B,YAA/B;AACA;AACJ;AAAiB;AACb,6BAAchB,MAAMK,GAAN,CAAU,UAAV,CAAd,EAAqChB,KAAK0d,QAA1C;AACA;AACH;AACD;AACI/c,sBAAMkW,mBAAN,CAA0B7W,KAAKwd,cAA/B,EAA+Cxd,KAAK8W,MAApD;AACA;AACJ,iBAAK,uBAAL;AACInW,sBAAMoJ,yBAAN,CAAgC/J,KAAKyd,YAArC,EAAmDzd,KAAKkC,MAAxD;AACA;AACJ;AACA;AACA;AACA;AACA,iBAAK,iBAAL;AACA,iBAAK,qBAAL;AACIvB,sBAAMd,OAAN,CAAcC,IAAd,EAAoBE,IAApB;AACA;AACJ;AA3CJ;;AA8CAgd,0BAAkBnd,OAAlB,CAA0BC,IAA1B,EAAgCE,IAAhC;AACH,KAhDD;AAiDH,C;;;;;;;;;;;;;;;;;kBC3IuB2d,gB;;AAXxB;;AAEA;AACA;AACA,SAASC,iBAAT,CAA2Bvf,QAA3B,EAAqC;AACjC,QAAIA,uCAA+BA,gCAAnC,EAA6D;AACzD;AACH;AACD,WAAOA,QAAP;AACH;;AAEc,SAASsf,gBAAT,CAA0Bhd,KAA1B,EAAiCtC,QAAjC,EAA2Cwf,QAA3C,EAAqD;AAChExf,eAAWuf,kBAAkBvf,QAAlB,CAAX;AACAwf,eAAWD,kBAAkBC,QAAlB,CAAX;AACA;AACA,QAAIxf,aAAawf,QAAjB,EAA2B;AACvB;AACA;AACA,YAAIC,YAAYzf,SAAS0f,OAAT,CAAiB,YAAjB,EAA+B,EAA/B,CAAhB;AACA,YAAI5c,MAAM;AACNrB,kBAAMge,SADA;AAENzf,sBAAUA,QAFJ;AAGNwf,sBAAUA,QAHJ;AAIN7b,oBAAQrB,MAAMyB,UAAN,CAAiBpB,GAAjB,CAAqB,YAArB;AAJF,SAAV;AAMA;AACA,YAAI8c,cAAc,MAAlB,EAA0B;AACtB3c,gBAAI+F,UAAJ,GAAiBvG,MAAMK,GAAN,CAAU,YAAV,CAAjB;AACH,SAFD,MAEO,IAAI8c,cAAc,OAAlB,EAA2B;AAC9B3c,gBAAI+G,WAAJ,GAAkBvH,MAAMK,GAAN,CAAU,aAAV,CAAlB;AACH;AACD,aAAKnB,OAAL,CAAaie,SAAb,EAAwB3c,GAAxB;AACH;AACJ,C;;;;;;;;;;;;;;;;;;kBCjCe,YAAW;AACvB,QAAI,YAAYwS,QAAhB,EAA0B;AACtB,eAAO,YAAY;AACf,mBAAO,CAACA,SAASqK,MAAjB;AACH,SAFD;AAGH;AACD,QAAI,kBAAkBrK,QAAtB,EAAgC;AAC5B,eAAO,YAAY;AACf,mBAAO,CAACA,SAASsK,YAAjB;AACH,SAFD;AAGH;AACD;AACA,WAAO,YAAY;AACf,eAAO,IAAP;AACH,KAFD;AAGH,CAfe,E;;;;;;;;;;;;;;;;;QCOAC,Q,GAAAA,Q;QAMAC,S,GAAAA,S;QAiBAC,gB,GAAAA,gB;;AA9BhB;;;;AACA;;AACA;;;;AACA;;AACA;;;;AACA;;;;;;AAEO,SAASF,QAAT,CAAkB/b,KAAlB,EAAyBkc,cAAzB,EAAyCC,YAAzC,EAAuD;AAC1Dnc,UAAMoc,GAAN,GAAY,kBAAMC,IAAN,CAAWrc,MAAMsc,IAAjB,EAAuB,UAASF,GAAT,EAAc;AAC7CG,mBAAWH,GAAX,EAAgBpc,KAAhB,EAAuBkc,cAAvB,EAAuCC,YAAvC;AACH,KAFW,EAETA,YAFS,CAAZ;AAGH;;AAEM,SAASH,SAAT,CAAmBjc,MAAnB,EAA2B;AAC9B,QAAIA,MAAJ,EAAY;AACRA,eAAOyU,OAAP,CAAe,iBAAS;AACpB,gBAAI4H,MAAMpc,MAAMoc,GAAhB;AACA,gBAAIA,GAAJ,EAAS;AACLA,oBAAII,MAAJ,GAAa,IAAb;AACAJ,oBAAIK,kBAAJ,GAAyB,IAAzB;AACAL,oBAAIM,OAAJ,GAAc,IAAd;AACA,oBAAI,WAAWN,GAAf,EAAoB;AAChBA,wBAAIO,KAAJ;AACH;AACJ;AACD,mBAAO3c,MAAMoc,GAAb;AACH,SAXD;AAYH;AACJ;;AAEM,SAASH,gBAAT,CAA0BpP,IAA1B,EAAgC;AACnC;AACA,WAAOA,KAAK+P,GAAL,CAAS;AAAA,eAAO,qBAAWC,IAAInJ,KAAf,EAAsBmJ,IAAIjJ,GAA1B,EAA+BiJ,IAAItJ,IAAnC,CAAP;AAAA,KAAT,CAAP;AACH;;AAED,SAASgJ,UAAT,CAAoBH,GAApB,EAAyBpc,KAAzB,EAAgCkc,cAAhC,EAAgDC,YAAhD,EAA8D;AAC1D,QAAIW,UAAUV,IAAIW,WAAJ,GAAkBX,IAAIW,WAAJ,CAAgBC,UAAlC,GAA+C,IAA7D;AACA,QAAInQ,IAAJ;AACA,QAAIoQ,OAAJ;;AAEA;AACA,QAAIH,OAAJ,EAAa;AACT,YAAI,wBAAUA,OAAV,MAAuB,KAA3B,EAAkC;AAC9BA,sBAAUA,QAAQI,WAAlB;AACH;AACD;AACA,eAAOJ,QAAQK,QAAR,KAAqBL,QAAQM,YAApC,EAAkD;AAC9CN,sBAAUA,QAAQI,WAAlB;AACH;AACJ;;AAED,QAAI;AACA,YAAIJ,WAAW,wBAAUA,OAAV,MAAuB,IAAtC,EAA4C;AACxC;AACAjQ,mBAAO,oBAAKuP,IAAIW,WAAT,CAAP;AACAE,sBAAUhB,iBAAiBpP,IAAjB,CAAV;AACA,mBAAO7M,MAAMoc,GAAb;AACAF,2BAAee,OAAf;AACH,SAND,MAMO;AACH;AACA,gBAAII,eAAejB,IAAIiB,YAAvB;AACA,gBAAIA,aAAaxK,OAAb,CAAqB,QAArB,KAAkC,CAAtC,EAAyC;AACrC;AACAyK,gCAAgBrZ,IAAhB,CAAqB,qBAAa;AAC9B,wBAAIsZ,SAAS,IAAIC,SAAJ,CAAcja,MAAd,CAAb;AACA0Z,8BAAU,EAAV;AACAM,2BAAOE,KAAP,GAAe,UAASZ,GAAT,EAAc;AACzBI,gCAAQ/Q,IAAR,CAAa2Q,GAAb;AACH,qBAFD;;AAIAU,2BAAOG,OAAP,GAAiB,YAAW;AACxB,+BAAO1d,MAAMoc,GAAb;AACAF,uCAAee,OAAf;AACH,qBAHD;;AAKA;AACAM,2BAAOI,KAAP,CAAaN,YAAb;AACH,iBAdD,EAcGvZ,KAdH,CAcS,iBAAS;AACd,2BAAO9D,MAAMoc,GAAb;AACAD,iCAAapY,KAAb;AACH,iBAjBD;AAkBH,aApBD,MAoBO;AACH;AACA8I,uBAAO,mBAAIwQ,YAAJ,CAAP;AACAJ,0BAAUhB,iBAAiBpP,IAAjB,CAAV;AACA,uBAAO7M,MAAMoc,GAAb;AACAF,+BAAee,OAAf;AACH;AACJ;AACJ,KAtCD,CAsCE,OAAOlZ,KAAP,EAAc;AACZ,eAAO/D,MAAMoc,GAAb;AACAD,qBAAapY,KAAb;AACH;AACJ;;AAED,SAASuZ,aAAT,GAAyB;AACrB,WAAO,mEAA+C,UAAUM,OAAV,EAAmB;AACrE,eAAO,mBAAAA,CAAQ,oCAAR,EAAsCC,OAA7C;AACH,KAFM,2EAAP;AAGH,C;;;;;;;;;;;;;;;;;QCnGeC,Q,GAAAA,Q;QAWAC,W,GAAAA,W;AAXT,SAASD,QAAT,CAAkB9d,KAAlB,EAAyBge,WAAzB,EAAsC;AACzC,QAAIC,OAAJ;AACA,QAAIC,SAASle,MAAMme,IAAN,IAAc,IAA3B;AACA,QAAIne,MAAM6d,OAAN,IAAiB7d,MAAMoe,YAA3B,EAAyC;AACrCH,kBAAU,SAAV;AACH,KAFD,MAEO;AACHA,kBAAUje,MAAMqe,GAAN,IAAare,MAAMsc,IAAnB,IAA4B4B,SAASF,WAA/C;AACH;AACD,WAAOC,OAAP;AACH;;AAEM,SAASF,WAAT,CAAqB/d,KAArB,EAA4Bse,YAA5B,EAA0C;AAC7C,QAAIzJ,QAAQ7U,MAAM6U,KAAN,IAAe7U,MAAM6V,IAArB,IAA6B7V,MAAMue,QAA/C;AACA,QAAI,CAAC1J,KAAL,EAAY;AACRA,gBAAQ,YAAR;AACAyJ,wBAAgB,CAAhB;AACA,YAAIA,eAAe,CAAnB,EAAsB;AAClBzJ,qBAAS,OAAOyJ,YAAP,GAAsB,GAA/B;AACH;AACJ;AACD,WAAO,EAAEzJ,OAAOA,KAAT,EAAgByJ,cAAcA,YAA9B,EAAP;AACH,C;;;;;;;;;;;;;;;;;kBCnBuBE,iB;;AAFxB;;;;;;AAEe,SAASA,iBAAT,CAA2BC,KAA3B,EAAkC;AAC7C,WAAO,sBAAY,UAASpa,OAAT,EAAkBC,MAAlB,EAA0B;AACzC,YAAIma,MAAMC,MAAV,EAAkB;AACd,mBAAOpa,OAAO,IAAI4T,KAAJ,CAAU,eAAV,CAAP,CAAP;AACH;AACD,YAAMyG,uBAAuB,SAAvBA,oBAAuB,GAAW;AACpCF,kBAAM3M,mBAAN,CAA0B,SAA1B,EAAqC8M,QAArC;AACAH,kBAAM3M,mBAAN,CAA0B,OAA1B,EAAmC8M,QAAnC;AACAH,kBAAM3M,mBAAN,CAA0B,OAA1B,EAAmC8M,QAAnC;AACAH,kBAAM3M,mBAAN,CAA0B,OAA1B,EAAmC8M,QAAnC;AACH,SALD;AAMA,YAAMA,WAAW,SAAXA,QAAW,CAAS5V,CAAT,EAAY;AACzB2V;AACA,gBAAI3V,EAAErL,IAAF,KAAW,SAAf,EAA0B;AACtB0G;AACH,aAFD,MAEO;AACHC,uBAAO,IAAI4T,KAAJ,CAAU,8CAA8ClP,EAAErL,IAAhD,GAAuD,UAAjE,CAAP;AACH;AACJ,SAPD;;AASA8gB,cAAMhO,gBAAN,CAAuB,SAAvB,EAAkCmO,QAAlC;AACAH,cAAMhO,gBAAN,CAAuB,OAAvB,EAAgCmO,QAAhC;AACAH,cAAMhO,gBAAN,CAAuB,OAAvB,EAAgCmO,QAAhC;AACAH,cAAMhO,gBAAN,CAAuB,OAAvB,EAAgCmO,QAAhC;AACH,KAvBM,CAAP;AAwBH,C;;;;;;;;;;;;;;;;;AC3BD;;;;;;;;;;;;;;;;AAgBA,IAAIC,SAAStb,OAAOsb,MAApB;;AAEA,SAASC,oBAAT,CAA8BC,KAA9B,EAAqC;AACjC,QAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC3B,eAAO,KAAP;AACH;AACD,QAAMC,mBAAmB;AACrB,YAAI,IADiB;AAErBC,YAAI,IAFiB;AAGrBC,YAAI;AAHiB,KAAzB;AAKA,QAAMC,MAAMH,iBAAiBD,MAAM3M,WAAN,EAAjB,CAAZ;AACA,WAAO+M,MAAMJ,MAAM3M,WAAN,EAAN,GAA4B,KAAnC;AACH;;AAED,SAASgN,gBAAT,CAA0BL,KAA1B,EAAiC;AAC7B,QAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC3B,eAAO,KAAP;AACH;AACD,QAAMM,eAAe;AACjBC,eAAO,IADU;AAEjBC,gBAAQ,IAFS;AAGjB3L,aAAK,IAHY;AAIjB4L,cAAM,IAJW;AAKjBC,eAAO;AALU,KAArB;AAOA,QAAMC,QAAQL,aAAaN,MAAM3M,WAAN,EAAb,CAAd;AACA,WAAOsN,QAAQX,MAAM3M,WAAN,EAAR,GAA8B,KAArC;AACH;;AAED,IAAI,CAACyM,MAAL,EAAa;AACT,QAAMc,cAAc,MAApB;;AAEAd,aAAS,gBAAS5Z,SAAT,EAAoB2a,OAApB,EAA6BrM,IAA7B,EAAmC;AACxC,YAAMsJ,MAAM,IAAZ;;AAEA;;;;;AAKA;AACA;AACA;AACAA,YAAIgD,YAAJ,GAAmB,KAAnB;;AAEA;;;;;AAKA,YAAIxB,MAAM,EAAV;AACA,YAAIyB,eAAe,KAAnB;AACA,YAAIC,aAAa9a,SAAjB;AACA,YAAI+a,WAAWJ,OAAf;AACA,YAAIK,QAAQ1M,IAAZ;AACA,YAAI2M,UAAU,IAAd;AACA,YAAIC,YAAY,EAAhB;AACA,YAAIC,eAAe,IAAnB;AACA,YAAIC,QAAQV,WAAZ;AACA,YAAIW,aAAa,OAAjB;AACA,YAAIC,YAAYZ,WAAhB;AACA,YAAIa,QAAQ,GAAZ;AACA,YAAIC,SAAS,QAAb;;AAEApf,eAAOqf,cAAP,CAAsB7D,GAAtB,EAA2B,IAA3B,EAAiC;AAC7B8D,wBAAY,IADiB;AAE7B9hB,iBAAK,eAAY;AACb,uBAAOwf,GAAP;AACH,aAJ4B;AAK7B3f,iBAAK,aAAUqgB,KAAV,EAAiB;AAClBV,sBAAM,KAAKU,KAAX;AACH;AAP4B,SAAjC;;AAUA1d,eAAOqf,cAAP,CAAsB7D,GAAtB,EAA2B,aAA3B,EAA0C;AACtC8D,wBAAY,IAD0B;AAEtC9hB,iBAAK,eAAY;AACb,uBAAOihB,YAAP;AACH,aAJqC;AAKtCphB,iBAAK,aAAUqgB,KAAV,EAAiB;AAClBe,+BAAe,CAAC,CAACf,KAAjB;AACH;AAPqC,SAA1C;;AAUA1d,eAAOqf,cAAP,CAAsB7D,GAAtB,EAA2B,WAA3B,EAAwC;AACpC8D,wBAAY,IADwB;AAEpC9hB,iBAAK,eAAY;AACb,uBAAOkhB,UAAP;AACH,aAJmC;AAKpCrhB,iBAAK,aAAUqgB,KAAV,EAAiB;AAClB,oBAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC3B,0BAAM,IAAI6B,SAAJ,CAAc,qCAAd,CAAN;AACH;AACDb,6BAAahB,KAAb;AACA,qBAAKc,YAAL,GAAoB,IAApB;AACH;AAXmC,SAAxC;;AAcAxe,eAAOqf,cAAP,CAAsB7D,GAAtB,EAA2B,SAA3B,EAAsC;AAClC8D,wBAAY,IADsB;AAElC9hB,iBAAK,eAAY;AACb,uBAAOmhB,QAAP;AACH,aAJiC;AAKlCthB,iBAAK,aAAUqgB,KAAV,EAAiB;AAClB,oBAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC3B,0BAAM,IAAI6B,SAAJ,CAAc,mCAAd,CAAN;AACH;AACDZ,2BAAWjB,KAAX;AACA,qBAAKc,YAAL,GAAoB,IAApB;AACH;AAXiC,SAAtC;;AAcAxe,eAAOqf,cAAP,CAAsB7D,GAAtB,EAA2B,MAA3B,EAAmC;AAC/B8D,wBAAY,IADmB;AAE/B9hB,iBAAK,eAAY;AACb,uBAAOohB,KAAP;AACH,aAJ8B;AAK/BvhB,iBAAK,aAAUqgB,KAAV,EAAiB;AAClBkB,wBAAQ,KAAKlB,KAAb;AACA,qBAAKc,YAAL,GAAoB,IAApB;AACH;AAR8B,SAAnC;;AAWAxe,eAAOqf,cAAP,CAAsB7D,GAAtB,EAA2B,QAA3B,EAAqC;AACjC8D,wBAAY,IADqB;AAEjC9hB,iBAAK,eAAY;AACb,uBAAOqhB,OAAP;AACH,aAJgC;AAKjCxhB,iBAAK,aAAUqgB,KAAV,EAAiB;AAClBmB,0BAAUnB,KAAV;AACA,qBAAKc,YAAL,GAAoB,IAApB;AACH;AARgC,SAArC;;AAWAxe,eAAOqf,cAAP,CAAsB7D,GAAtB,EAA2B,UAA3B,EAAuC;AACnC8D,wBAAY,IADuB;AAEnC9hB,iBAAK,eAAY;AACb,uBAAOshB,SAAP;AACH,aAJkC;AAKnCzhB,iBAAK,aAAUqgB,KAAV,EAAiB;AAClB,oBAAM8B,UAAU/B,qBAAqBC,KAArB,CAAhB;AACA;AACA,oBAAI8B,YAAY,KAAhB,EAAuB;AACnB,0BAAM,IAAIC,WAAJ,CAAgB,6CAAhB,CAAN;AACH;AACDX,4BAAYU,OAAZ;AACA,qBAAKhB,YAAL,GAAoB,IAApB;AACH;AAbkC,SAAvC;;AAgBAxe,eAAOqf,cAAP,CAAsB7D,GAAtB,EAA2B,aAA3B,EAA0C;AACtC8D,wBAAY,IAD0B;AAEtC9hB,iBAAK,eAAY;AACb,uBAAOuhB,YAAP;AACH,aAJqC;AAKtC1hB,iBAAK,aAAUqgB,KAAV,EAAiB;AAClBqB,+BAAe,CAAC,CAACrB,KAAjB;AACA,qBAAKc,YAAL,GAAoB,IAApB;AACH;AARqC,SAA1C;;AAWAxe,eAAOqf,cAAP,CAAsB7D,GAAtB,EAA2B,MAA3B,EAAmC;AAC/B8D,wBAAY,IADmB;AAE/B9hB,iBAAK,eAAY;AACb,uBAAOwhB,KAAP;AACH,aAJ8B;AAK/B3hB,iBAAK,aAAUqgB,KAAV,EAAiB;AAClB,oBAAI,OAAOA,KAAP,KAAiB,QAAjB,IAA6BA,UAAUY,WAA3C,EAAwD;AACpD,0BAAM,IAAImB,WAAJ,CAAgB,oDAAhB,CAAN;AACH;AACDT,wBAAQtB,KAAR;AACA,qBAAKc,YAAL,GAAoB,IAApB;AACH;AAX8B,SAAnC;;AAcAxe,eAAOqf,cAAP,CAAsB7D,GAAtB,EAA2B,WAA3B,EAAwC;AACpC8D,wBAAY,IADwB;AAEpC9hB,iBAAK,eAAY;AACb,uBAAOyhB,UAAP;AACH,aAJmC;AAKpC5hB,iBAAK,aAAUqgB,KAAV,EAAiB;AAClB,oBAAM8B,UAAUzB,iBAAiBL,KAAjB,CAAhB;AACA,oBAAI,CAAC8B,OAAL,EAAc;AACV,0BAAM,IAAIC,WAAJ,CAAgB,6CAAhB,CAAN;AACH;AACDR,6BAAaO,OAAb;AACA,qBAAKhB,YAAL,GAAoB,IAApB;AACH;AAZmC,SAAxC;;AAeAxe,eAAOqf,cAAP,CAAsB7D,GAAtB,EAA2B,UAA3B,EAAuC;AACnC8D,wBAAY,IADuB;AAEnC9hB,iBAAK,eAAY;AACb,uBAAO0hB,SAAP;AACH,aAJkC;AAKnC7hB,iBAAK,aAAUqgB,KAAV,EAAiB;AAClB,oBAAIA,QAAQ,CAAR,IAAaA,QAAQ,GAAzB,EAA8B;AAC1B,0BAAM,IAAI7G,KAAJ,CAAU,qCAAV,CAAN;AACH;AACDqI,4BAAYxB,KAAZ;AACA,qBAAKc,YAAL,GAAoB,IAApB;AACH;AAXkC,SAAvC;;AAcAxe,eAAOqf,cAAP,CAAsB7D,GAAtB,EAA2B,MAA3B,EAAmC;AAC/B8D,wBAAY,IADmB;AAE/B9hB,iBAAK,eAAY;AACb,uBAAO2hB,KAAP;AACH,aAJ8B;AAK/B9hB,iBAAK,aAAUqgB,KAAV,EAAiB;AAClB,oBAAIA,QAAQ,CAAR,IAAaA,QAAQ,GAAzB,EAA8B;AAC1B,0BAAM,IAAI7G,KAAJ,CAAU,iCAAV,CAAN;AACH;AACDsI,wBAAQzB,KAAR;AACA,qBAAKc,YAAL,GAAoB,IAApB;AACH;AAX8B,SAAnC;;AAcAxe,eAAOqf,cAAP,CAAsB7D,GAAtB,EAA2B,OAA3B,EAAoC;AAChC8D,wBAAY,IADoB;AAEhC9hB,iBAAK,eAAY;AACb,uBAAO4hB,MAAP;AACH,aAJ+B;AAKhC/hB,iBAAK,aAAUqgB,KAAV,EAAiB;AAClB,oBAAM8B,UAAUzB,iBAAiBL,KAAjB,CAAhB;AACA,oBAAI,CAAC8B,OAAL,EAAc;AACV,0BAAM,IAAIC,WAAJ,CAAgB,6CAAhB,CAAN;AACH;AACDL,yBAASI,OAAT;AACA,qBAAKhB,YAAL,GAAoB,IAApB;AACH;AAZ+B,SAApC;;AAeA;;;;AAIA;AACAhD,YAAIkE,YAAJ,GAAmBpiB,SAAnB;AACH,KA/MD;;AAiNA;;;;AAIAkgB,WAAOziB,SAAP,CAAiB4kB,YAAjB,GAAgC,YAAY;AACxC;AACA,YAAMC,SAAS1d,OAAO0d,MAAtB;AACA,eAAOA,OAAOC,mBAAP,CAA2B3d,MAA3B,EAAmC,KAAKgQ,IAAxC,CAAP;AACH,KAJD;AAKH;;kBAEcsL,M;;;;;;;;;;;;;;;;;;kBCzQSsC,I;;AAJxB;;AAEA;;AAEe,SAASA,IAAT,CAAcC,MAAd,EAAsB;AACjCC,aAASD,MAAT;AACA,QAAIrkB,YAAY,EAAhB;AACA,QAAIukB,aAAaF,OAAOG,oBAAP,CAA4B,GAA5B,CAAjB;AACA;AACA,QAAIC,YAAY,EAAhB;AACA,QAAIC,KAAKL,OAAOG,oBAAP,CAA4B,IAA5B,CAAT;AACA,QAAIE,MAAMA,GAAG,CAAH,CAAV,EAAiB;AACb,YAAIC,kBAAkBC,WAAWF,GAAG,CAAH,EAAMG,YAAN,CAAmB,eAAnB,CAAX,CAAtB;AACA,YAAI,CAACC,MAAMH,eAAN,CAAL,EAA6B;AACzBF,wBAAYE,eAAZ;AACH;AACJ;AACDL,aAASC,UAAT;AACA,QAAI,CAACA,WAAWzf,MAAhB,EAAwB;AACpByf,qBAAaF,OAAOG,oBAAP,CAA4B,MAA5B,CAAb;AACA,YAAI,CAACD,WAAWzf,MAAhB,EAAwB;AACpByf,yBAAaF,OAAOG,oBAAP,CAA4B,OAA5B,CAAb;AACH;AACJ;;AAED,SAAK,IAAInO,IAAI,CAAb,EAAgBA,IAAIkO,WAAWzf,MAA/B,EAAuCuR,GAAvC,EAA4C;AACxC,YAAI0O,IAAIR,WAAWlO,CAAX,CAAR;;AAEA,YAAI2O,SAASD,EAAEP,oBAAF,CAAuB,IAAvB,CAAb;AACA,aAAK,IAAIS,IAAI,CAAb,EAAgBA,IAAID,OAAOlgB,MAA3B,EAAmCmgB,GAAnC,EAAwC;AACpC,gBAAIC,IAAIF,OAAOC,CAAP,CAAR;AACAC,cAAEC,UAAF,CAAaC,YAAb,CAA0Bf,OAAOgB,cAAP,CAAsB,MAAtB,CAA1B,EAAyDH,CAAzD;AACH;;AAED,YAAII,UAAWP,EAAEQ,SAAF,IAAeR,EAAES,WAAjB,IAAgCT,EAAEvO,IAAlC,IAA0C,EAAzD;AACA,YAAIA,OAAO,mBAAK8O,OAAL,EAAczG,OAAd,CAAsB,QAAtB,EAAgC,IAAhC,EAAsCA,OAAtC,CAA8C,cAA9C,EAA8D,IAA9D,EAAoEA,OAApE,CAA4E,YAA5E,EAA0F,MAA1F,CAAX;AACA,YAAIrI,IAAJ,EAAU;AACN,gBAAIG,QAAQoO,EAAEF,YAAF,CAAe,OAAf,CAAZ;AACA,gBAAIY,MAAMV,EAAEF,YAAF,CAAe,KAAf,CAAV;AACA,gBAAIhO,MAAMkO,EAAEF,YAAF,CAAe,KAAf,CAAV;;AAEA,gBAAIvO,QAAQ;AACRK,uBAAO,sBAAQA,KAAR,EAAe8N,SAAf,CADC;AAERjO,sBAAMA;AAFE,aAAZ;AAIA,gBAAIK,GAAJ,EAAS;AACLP,sBAAMO,GAAN,GAAY,sBAAQA,GAAR,EAAa4N,SAAb,CAAZ;AACH,aAFD,MAEO,IAAIgB,GAAJ,EAAS;AACZnP,sBAAMO,GAAN,GAAYP,MAAMK,KAAN,GAAc,sBAAQ8O,GAAR,EAAahB,SAAb,CAA1B;AACH;AACDzkB,sBAAUmP,IAAV,CAAemH,KAAf;AACH;AACJ;AACD,QAAI,CAACtW,UAAU8E,MAAf,EAAuB;AACnB4gB;AACH;AACD,WAAO1lB,SAAP;AACH;;AAED,SAASskB,QAAT,CAAkBqB,MAAlB,EAA0B;AACtB,QAAI,CAACA,MAAL,EAAa;AACTD;AACH;AACJ;;AAED,SAASA,UAAT,GAAsB;AAClB,UAAM,IAAIvK,KAAJ,CAAU,mBAAV,CAAN;AACH,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnED;;;;;;AAEA,IAAMyK,kBAAkB,CACpB,QADoB,EAEpB,QAFoB,EAGpB,MAHoB,EAIpB,WAJoB,CAAxB;;AAOA,SAASvO,YAAT,CAAsB5V,KAAtB,EAA6BokB,UAA7B,EAAyC5M,SAAzC,EAAoD;AAChDxX,UAAM4V,YAAN,CAAmB4B,SAAnB;;AAEA,QAAIxX,MAAMK,GAAN,CAAU,OAAV,MAAuB,MAAvB,IAAiCmX,cAAc,IAAnD,EAAyD;AACrD4M,mBAAWzc,IAAX,CAAgB,EAAEtG,QAAQ,WAAV,EAAhB;AACH;AACJ;;kBAEc,UAAC+iB,UAAD,EAAavY,SAAb,EAA2B;AACtC,QAAM7L,QAAQokB,WAAW/lB,MAAzB;;AAEA,QAAI,CAAC,qBAAEgmB,IAAF,CAAOxY,SAAP,CAAL,EAAwB;AACpB;AACH;;AAEDsY,oBAAgBnO,OAAhB,CAAwB,iBAAS;AAC7B,YAAMsO,WAAWzY,UAAU0Y,KAAV,CAAjB;;AAEA,YAAI,qBAAExgB,WAAF,CAAcugB,QAAd,CAAJ,EAA6B;AACzB;AACH;;AAED,gBAAQC,KAAR;AACI,iBAAK,MAAL;AACIH,2BAAW7X,OAAX,CAAmB+X,QAAnB;AACA;AACJ,iBAAK,QAAL;AACIF,2BAAW9X,SAAX,CAAqBgY,QAArB;AACA;AACJ,iBAAK,WAAL;AACI1O,6BAAa5V,KAAb,EAAoBokB,UAApB,EAAgCE,QAAhC;AACA;AACJ;AACItkB,sBAAME,GAAN,CAAUqkB,KAAV,EAAiBD,QAAjB;AAXR;AAaH,KApBD;AAqBH,C;;;;;;;;;;;;;;;;;;;;AC7CD;;AAIA;;AACA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAIE,kBAAkB;AAClBC,gBAAY,IADM;AAElBC,SAAK;AAFa,CAAtB;;AAKA,IAAIC,kBAAkB,SAAlBA,eAAkB,CAASC,WAAT,EAAsBvmB,MAAtB,EAA8BC,KAA9B,EAAqCumB,UAArC,EAAiD;AAAA;;AACnE,QAAMzmB,QAAQ,IAAd;;AAEA,QAAI0mB,aAAa,kCAAwBzmB,MAAxB,EAAgCwmB,UAAhC,CAAjB;AACA,QAAIE,eAAJ;AACA,QAAIC,sBAAJ;AACA,QAAIC,cAAc,CAAlB;AACA,QAAIC,WAAW,EAAf;AACA,QAAIC,UAAUC,iBAAd;AACA,QAAIC,2BAA2B,KAA/B;AACA,QAAIC,gBAAJ;AACA,QAAIC,oBAAJ;AACA,QAAIC,6BAAJ;AACA,QAAI/O,aAAa,KAAjB;AACA,QAAIgP,UAAU,KAAd;;AAEA,QAAMC,gBAAgB,SAAhBA,aAAgB,CAACllB,GAAD,EAAS;AAC3B,YAAIiW,UAAJ,EAAgB;AACZ;AACH;AACDjW,cAAMA,OAAO,EAAb;AACAA,YAAImlB,WAAJ,GAAkB,CAAC,CAACtnB,OAAOgC,GAAP,CAAW,UAAX,CAApB;;AAEA,eAAKnB,OAAL,yBAA6BsB,GAA7B;;AAEA;AACA,YAAIskB,WAAW9kB,KAAX,CAAiBK,GAAjB,CAAqB,OAArB,0BAAJ,EAAoD;AAChD,gBAAIG,IAAImlB,WAAR,EAAqB;AACjBb,2BAAWne,SAAX;AACH;AACJ,SAJD,MAIO;AACHme,uBAAWvgB,KAAX;AACH;AACJ,KAjBD;;AAmBA,QAAMqhB,sBAAsB,SAAtBA,mBAAsB,GAAM;AAC9B,YAAInP,UAAJ,EAAgB;AACZ;AACH;;AAED,YAAIqO,WAAW9kB,KAAX,CAAiBK,GAAjB,CAAqB,OAArB,0BAAJ,EAAoD;AAChD,gBAAIhC,OAAOgC,GAAP,CAAW,UAAX,CAAJ,EAA4B;AACxBukB,4BAAY3Z,aAAZ;AACA2Z,4BAAYjd,IAAZ;AACH;AACJ;AACJ,KAXD;;AAaA,SAAKxI,IAAL,GAAY,UAAZ;;AAEA,SAAK0mB,wBAAL,GAAgC,YAAW;AACvC,YAAIJ,WAAWhP,UAAf,EAA2B;AACvB;AACH;;AAEDqO,mBAAWnlB,EAAX,qBAA0BmmB,aAA1B,EAAyC,IAAzC;;AAEA;AACAznB,eAAO6B,GAAP,CAAW,UAAX,EAAuB4kB,UAAvB;;AAEA;AACA,YAAMiB,eAAeznB,MAAMynB,YAAN,EAArB;AACA,YAAIA,YAAJ,EAAkB;AACdA,yBAAaC,yBAAb,CAAuC,YAAM,CAAE,CAA/C,EAAiD,IAAjD;AACH;;AAED,eAAO,IAAP;AACH,KAjBD;;AAmBA,SAAK/iB,IAAL,GAAY,YAAW;AACnB,YAAIwiB,WAAWhP,UAAf,EAA2B;AACvB;AACH;AACDgP,kBAAU,IAAV;;AAEA;AACAX,mBAAWjnB,KAAX;;AAEAynB,kBAAUV,YAAYvkB,GAAZ,CAAgB,UAAhB,CAAV;AACAykB,mBAAWnlB,EAAX,CAAc,KAAd,EAAqBsmB,gBAArB,EAAuC,IAAvC;AACAnB,mBAAWnlB,EAAX,oCAAyCumB,mBAAzC,EAA8D,IAA9D;AACApB,mBAAWnlB,EAAX,qBAA0BmmB,aAA1B,EAAyC,IAAzC;AACAhB,mBAAWnlB,EAAX,yBAA8BwmB,qBAA9B,EAAqD,IAArD;AACArB,mBAAWnlB,EAAX,qBAA0BymB,aAA1B,EAAyC,IAAzC;;AAEA;AACAxB,oBAAY1Z,WAAZ;;AAEA,YAAMiQ,eAAe2J,WAAWpJ,aAAhC;AACA,YAAM2K,iBAAiBhoB,OAAOgC,GAAP,CAAW,gBAAX,CAAvB;AACAgmB,uBAAeC,WAAf,CAA2BnL,YAA3B;;AAEA,YAAIyJ,YAAY3W,eAAZ,MAAkCqX,YAAY,CAAZ,IAAiB,CAACV,YAAYxY,gBAAZ,EAAxD,EAAyF;AACrF;AACAkZ,sBAAU,CAAV;AACH,SAHD,MAGO,IAAIV,YAAYxY,gBAAZ,MAAkC/N,OAAOgC,GAAP,CAAW,OAAX,4BAAtC,EAA8E;AACjFilB,sBAAU,IAAV;AACH;;AAED;AACAjnB,eAAO6B,GAAP,CAAW,UAAX,EAAuB4kB,UAAvB;AACAA,mBAAW9kB,KAAX,CAAiBE,GAAjB,CAAqB,OAArB;;AAEA;AACA,YAAM6lB,eAAeznB,MAAMynB,YAAN,EAArB;AACA,YAAIA,YAAJ,EAAkB;AACdA,yBAAaC,yBAAb,CAAuC,YAAM,CAAE,CAA/C,EAAiD,IAAjD;AACH;;AAED,aAAKO,OAAL,CAAaloB,OAAOgC,GAAP,CAAW,cAAX,EAA2BmmB,SAAxC;AACA,eAAO,IAAP;AACH,KA1CD;;AA4CA,aAASN,mBAAT,GAA+B;AAC3BpB,mBAAW9kB,KAAX,CAAiBE,GAAjB,CAAqB,cAArB,EAAqC,IAArC;AACH;;AAED,aAASumB,aAAT,GAAyB;AACrBxB;AACA7mB,cAAMsoB,QAAN,CAAe3B,MAAf;AACH;;AAED,aAASkB,gBAAT,CAA0B9mB,IAA1B,EAAgCE,IAAhC,EAAsC;AAClC,YAAIF,SAAS,UAAb,EAAyB;AACrB;AACH;AACDE,eAAOA,QAAQ,EAAf;;AAEA,YAAI6lB,SAASR,GAAT,IAAgB,CAACrlB,KAAKqlB,GAA1B,EAA+B;AAC3BrlB,iBAAKqlB,GAAL,GAAWQ,SAASR,GAApB;AACH;;AAED,aAAKxlB,OAAL,CAAaC,IAAb,EAAmBE,IAAnB;;AAEA,YAAIF,SAAS,YAAT,IAAyBA,SAAS,OAAtC,EAA+C;AAC3C,gBAAI4lB,UAAUE,cAAc,CAAd,GAAkBF,OAAO1hB,MAAvC,EAA+C;AAC3CojB;AACH;AACJ;AACJ;;AAED,aAASX,aAAT,CAAuBtlB,GAAvB,EAA4B;AAAA,YAChBoB,QADgB,GACOpB,GADP,CAChBoB,QADgB;AAAA,YACNX,QADM,GACOT,GADP,CACNS,QADM;;AAExB,YAAMQ,aAAaqjB,WAAW9kB,KAAX,CAAiByB,UAAjB,IAA+BqjB,WAAW9kB,KAA7D;AACAyB,mBAAWvB,GAAX,CAAe,UAAf,EAA2B0B,QAA3B;AACAH,mBAAWvB,GAAX,CAAe,UAAf,EAA2Be,QAA3B;;AAEA;AACA;AACA,YAAI,CAACukB,oBAAL,EAA2B;AACvB;AACAA,mCAAuB,CAAC,8BAAgBD,WAAhB,EAA6B3jB,QAA7B,KAA0CA,QAA3C,4CAAvB;AACH;AACD,YAAI,CAACyjB,wBAAD,IAA6BpkB,YAAY+C,KAAK4S,GAAL,CAAS4O,oBAAT,+CAA7C,EAAyG;AACrGZ,wBAAY1Y,eAAZ;AACAmZ,uCAA2B,IAA3B;AACH;AACJ;;AAED,aAASc,qBAAT,CAA+B3b,CAA/B,EAAkC;AAC9B,YAAInL,OAAO,EAAX;AACA,YAAI6lB,SAASR,GAAb,EAAkB;AACdrlB,iBAAKqlB,GAAL,GAAWQ,SAASR,GAApB;AACH;AACD,aAAKxlB,OAAL,yBAA6BG,IAA7B;AACA+lB,0BAAkB9lB,IAAlB,CAAuB,IAAvB,EAA6BkL,CAA7B;AACH;;AAED,aAAS4a,iBAAT,CAA2B5a,CAA3B,EAA8B;AAC1B,YAAIua,UAAUE,cAAc,CAAd,GAAkBF,OAAO1hB,MAAvC,EAA+C;AAC3CojB;AACH,SAFD,MAEO;AACH,gBAAIjc,EAAErL,IAAF,2BAAJ,EAA+B;AAC3B;AACA,qBAAKD,OAAL,4BAAgC,EAAhC;AACH;AACD,iBAAKyE,OAAL;AACH;AACJ;;AAED,SAAK+iB,QAAL,GAAgB,UAASxkB,IAAT,EAAegP,OAAf,EAAwB;AACpC,YAAIuF,cAAc,CAACgP,OAAnB,EAA4B;AACxB,mBAAO,kBAAQ3f,MAAR,CAAe,IAAI4T,KAAJ,CAAU,oBAAV,CAAf,CAAP;AACH;AACD;AACA,YAAItW,WAAWlB,IAAf;AACA,YAAI,qBAAEykB,OAAF,CAAUzkB,IAAV,CAAJ,EAAqB;AACjB6iB,qBAAS7iB,IAAT;AACA8iB,4BAAgB9T,WAAW8T,aAA3B;AACA9iB,mBAAO6iB,OAAOE,WAAP,CAAP;AACA,gBAAID,aAAJ,EAAmB;AACf9T,0BAAU8T,cAAcC,WAAd,CAAV;AACH;AACJ,SAPD,MAOO;AACH7hB,uBAAW,CAAClB,IAAD,CAAX;AACH;;AAED,YAAM0kB,UAAU9B,WAAW9kB,KAA3B;AACA4mB,gBAAQ1mB,GAAR,CAAY,UAAZ,EAAwBkD,QAAxB;;AAEA/E,eAAO6B,GAAP,CAAW,iBAAX,EAA8B,KAA9B;;AAEA;AACA9B,cAAMc,OAAN,wBAA6B;AACzB6C,mBAAOkjB,WADkB;AAEzB/iB,kBAAMA;AAFmB,SAA7B;;AAKAgjB,mBAAW,SAAc,EAAd,EAAkBV,eAAlB,EAAmCtT,OAAnC,CAAX;;AAEA9S,cAAMyoB,eAAN;;AAEAD,gBAAQ1mB,GAAR,CAAY,YAAZ,EAA0B,KAA1B;;AAEA,YAAMqa,cAAcuK,WAAWhd,aAAX,CAAyBmd,WAAzB,CAApB;;AAEAI,mCAA2B,KAA3B;AACAE,sBAAcrjB,KAAKuiB,UAAL,IAAmBS,SAAST,UAA1C;AACA,YAAIc,WAAJ,EAAiB;AACbnnB,kBAAM0oB,eAAN,CAAsBvB,WAAtB,EAAmCL,QAAnC;AACH;AACD,eAAO3K,WAAP;AACH,KA1CD;;AA4CA,SAAKuM,eAAL,GAAuB,UAASrC,UAAT,EAAqBvT,OAArB,EAA8B6V,UAA9B,EAA0C;AAC7D,YAAMH,UAAU9B,WAAW9kB,KAA3B;AACA,YAAI+mB,UAAJ,EAAgB;AACZ5B,sBAAU4B,UAAV;AACH,SAFD,MAEO;AACH5B,sBAAUC,iBAAV;AACH;AACDwB,gBAAQ1mB,GAAR,CAAY,aAAZ,EAA2BgR,QAAQ8V,WAAnC;AACAJ,gBAAQ1mB,GAAR,CAAY,UAAZ,EAAwBgR,QAAQ+V,QAAhC;AACAL,gBAAQ1mB,GAAR,CAAY,YAAZ,EAA0BukB,UAA1B;AACAmC,gBAAQ1hB,UAAR,CAAmBgiB,UAAnB,GAAgC,KAAhC;AACAN,gBAAQ1mB,GAAR,CAAY,YAAZ,EAA0B,IAA1B;AACH,KAZD;;AAcA,SAAKinB,sBAAL,GAA8B,UAASpQ,QAAT,EAAmB;AAC7C+N,mBAAWsC,iBAAX,CAA6BrQ,QAA7B;;AAEA,aAAK8P,eAAL;AACH,KAJD;;AAMA,SAAKlf,IAAL,GAAY,YAAW;AACnBmd,mBAAWne,SAAX;AACH,KAFD;;AAIA,SAAKpC,KAAL,GAAa,YAAW;AACpBugB,mBAAWvgB,KAAX;AACH,KAFD;;AAIA,SAAKsiB,eAAL,GAAuB,YAAW;AAC9B,YAAIpQ,UAAJ,EAAgB;AACZ;AACH;AACD;AACA,YAAInY,MAAMynB,YAAN,EAAJ,EAA0B;AACtBznB,kBAAMynB,YAAN,GAAqBC,yBAArB,CAA+CN,aAA/C,EAA8DE,mBAA9D;AACH;AACJ,KARD;;AAUA,SAAKjX,MAAL,GAAc,UAASnO,GAAT,EAAc;AACxB,YAAI6mB,+BAAJ;AACA,aAAKnoB,OAAL,CAAamoB,UAAb,EAAyB7mB,GAAzB;AACA2kB,gBAAQ7lB,IAAR,CAAa,IAAb,EAAmB;AACfH,kBAAMkoB;AADS,SAAnB;AAGH,KAND;;AAQA,aAASjB,aAAT,CAAuB5lB,GAAvB,EAA4B;AACxB;AACA,YAAIA,IAAIsY,KAAJ,IAAatY,IAAI8mB,MAArB,EAA6B;AACzBhpB,kBAAMipB,WAAN;AACH;AACJ;;AAED,SAAKC,mBAAL,GAA2B,UAAStlB,IAAT,EAAe;AACtC,YAAIuU,UAAJ,EAAgB;AACZ;AACH;AACDpY,eAAO6B,GAAP,CAAW,cAAX,EAA2BgC,IAA3B;AACA4iB,mBAAW5M,QAAX;AACH,KAND;;AAQA,SAAKvU,OAAL,GAAe,YAAW;AACtB,YAAI8S,UAAJ,EAAgB;AACZ;AACH;AACDA,qBAAa,IAAb;AACA,aAAKvX,OAAL,CAAa,WAAb;AACA,aAAKoD,GAAL;;AAEA,YAAIhE,MAAMynB,YAAN,EAAJ,EAA0B;AACtBznB,kBAAMynB,YAAN,GAAqB0B,4BAArB;AACH;;AAEDppB,eAAOiE,GAAP,CAAW,IAAX,EAAiB,IAAjB,EAAuBwiB,UAAvB;AACAA,mBAAWxiB,GAAX,CAAe,IAAf,EAAqB,IAArB,EAA2BlE,KAA3B;AACA0mB,mBAAWnhB,OAAX;;AAEA;AACA,YAAI8hB,WAAWX,WAAW9kB,KAA1B,EAAiC;AAC7B3B,mBAAO6G,UAAP,CAAkBhE,KAAlB;AACH;;AAED7C,eAAO6B,GAAP,CAAW,UAAX,EAAuB,IAAvB;;AAEA4kB,qBAAa,IAAb;;AAEA,YAAI,CAACW,OAAD,IAAYpnB,OAAO6G,UAAP,CAAkBuR,UAAlC,EAA8C;AAC1C;AACH;;AAED;AACA;AACAmO,oBAAYzZ,WAAZ,CAAwBma,OAAxB;;AAEA,YAAI,KAAK3gB,QAAT,EAAmB;AACf;AACH;;AAED,YAAI2gB,YAAY,IAAhB,EAAsB;AAClBV,wBAAYtd,SAAZ;AACH,SAFD,MAEO;AACHsd,wBAAYje,SAAZ;AACH;AACJ,KA1CD;;AA4CA,SAAKT,QAAL,GAAgB,YAAW;AACvB,YAAIuQ,UAAJ,EAAgB;AACZ;AACA,mBAAO,KAAP;AACH;AACD,eAAOqO,WAAW9kB,KAAX,CAAiBK,GAAjB,CAAqB,OAArB,CAAP;AACH,KAND;;AAQA,SAAKkmB,OAAL,GAAe,UAASxR,IAAT,EAAe;AAC1B,YAAI0B,UAAJ,EAAgB;AACZ;AACH;AACDnY,cAAMopB,UAAN,CAAiB3S,QAAQ,EAAzB;AACH,KALD;;AAOA;AACA,SAAK4S,IAAL,GAAY,YAAW;AACnB,YAAIlR,UAAJ,EAAgB;AACZ;AACH;AACDpY,eAAO6B,GAAP,CAAW,iBAAX,EAA8B,IAA9B;AACH,KALD;;AAOA;;;;AAIA,SAAK0nB,eAAL,GAAuB,YAAY;AAC/B,YAAInR,UAAJ,EAAgB;AACZ,mBAAO,IAAP;AACH;AACD,eAAOqO,WAAWpJ,aAAlB;AACH,KALD;;AAOA;;;;;AAKA,SAAKmM,aAAL,GAAqB,UAASC,UAAT,EAAqB;AACtC;AACAvC,sBAAcuC,aAAa,CAAb,GAAiBA,UAAjB,GAA8B,IAA5C;AACA,YAAIhD,UAAJ,EAAgB;AACZA,uBAAW9kB,KAAX,CAAiBE,GAAjB,CAAqB,YAArB,EAAmCqlB,WAAnC;AACH;AACJ,KAND;AAOH,CAvXD;;AAyXA,SAAcZ,gBAAgB/mB,SAA9B;;kBAEe+mB,e;;;;;;;;;;;;;;;;;;;;;;;;;;AC3Yf;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;IAEqBoD,mB;;;AACjB,iCAAY/nB,KAAZ,EAAmB7B,SAAnB,EAA8B;AAAA;;AAAA,8IACpB6B,KADoB,EACb7B,SADa;;AAE1B,YAAMyoB,UAAU,MAAK5mB,KAAL,GAAa,qBAA7B;AACA,cAAKgoB,WAAL,GAAmBhoB,KAAnB;AACA,cAAK+W,QAAL,GAAgB,IAAhB;;AAEA6P,gBAAQnlB,UAAR,CAAmByD,UAAnB,CAA8BuX,SAA9B,GAA0C,OAA1C;;AAEA;AACA;AACA,YAAItB,qBAAJ;AACA,YAAI,sBAAShZ,iBAAb,EAAgC;AAC5B;AACAgZ,2BAAehd,UAAU8pB,YAAV,EAAf;AACH,SAHD,MAGO;AACH;AACA9M,2BAAenb,MAAMK,GAAN,CAAU,cAAV,CAAf;;AAEAumB,oBAAQ1hB,UAAR,CAAmBiW,YAAnB,GAAkCA,YAAlC;AACAyL,oBAAQ1hB,UAAR,CAAmBgjB,QAAnB,GAA8B/M,aAAagN,GAA3C;;AAEA;AACA,gBAAMC,mBAAmB,MAAKA,gBAAL,GAAwB,YAAM;AACnD,sBAAKlQ,QAAL;AACH,aAFD;AAGAiD,yBAAalJ,gBAAb,CAA8B,SAA9B,EAAyCmW,gBAAzC;AACAjN,yBAAana,YAAb,GAA4Bma,aAAakN,mBAAb,GAAmC,CAA/D;AACH;;AAED,cAAKlqB,SAAL,GAAiB,+BAAgBgd,YAAhB,EAA8Bhd,SAA9B,CAAjB;AA7B0B;AA8B7B;;;;gCAEO;AAAA,gBACI6B,KADJ,GAC0C,IAD1C,CACIA,KADJ;AAAA,gBACWgoB,WADX,GAC0C,IAD1C,CACWA,WADX;AAAA,gBACwBtM,aADxB,GAC0C,IAD1C,CACwBA,aADxB;;AAEJ,gBAAM4M,mBAAmBN,YAAY9iB,UAArC;AACA,gBAAMiV,oBAAoB6N,YAAYvmB,UAAtC;AACAzB,kBAAMnC,KAAN,CAAY;AACRqP,oBAAIob,iBAAiBpb,EADb;AAERtM,wBAAQ0nB,iBAAiB1nB,MAFjB;AAGRiX,8BAAc,IAHN;AAIR0Q,yBAASD,iBAAiBC,OAJlB;AAKRC,8BAAcrO,iBALN;AAMRtZ,sBAAMynB,iBAAiBznB,IANf;AAORgW,4BAAY,KAPJ;AAQR4R,gCAAgBH,iBAAiBG,cARzB;AASRC,2BAAWJ,iBAAiBI,SATpB;AAURC,6BAAaL,iBAAiBK,WAVtB;AAWRC,6BAAaN,iBAAiBM,WAXtB;AAYR1B,4BAAY;AAZJ,aAAZ;;AAeAlnB,kBAAML,EAAN,CAAS,kBAAT,EAA6B,KAAKkpB,wBAAlC;AACA7oB,kBAAML,EAAN,CAAS,cAAT,8BAA2C,IAA3C;AACAK,kBAAML,EAAN,gBAAgB,UAASN,IAAT,EAAe;AAC3B,qBAAKH,OAAL,gBAAoBG,IAApB;AACH,aAFD,EAEG,IAFH;;AAIA,gBAAI,CAACqc,cAAcwE,MAAnB,EAA2B;AACvBxE,8BAAcnX,KAAd;AACH;AACJ;;;sCAEaxC,K,EAAO;AAAA;;AACjB,iBAAKuF,SAAL;AACA,iBAAKyP,QAAL,GAAgB,IAAhB;AACA,oJAAoBhV,KAApB,EACK0D,IADL,CACU,UAAC6T,eAAD,EAAqB;AACvB,uBAAKwP,YAAL,CAAkBxP,gBAAgBvC,QAAlC;AACH,aAHL;AAIA,mBAAO,KAAKpQ,SAAL,EAAP;AACH;;;0CAEiBoQ,Q,EAAU;AACxB,iBAAKA,QAAL,GAAgBA,QAAhB;AACA,gBAAI,CAACA,QAAL,EAAe;AACX;AACH;AACD,iBAAK+R,YAAL,CAAkB/R,QAAlB;;AAEA;AACAA,qBAASzU,GAAT;AACAyU,qBAASpX,EAAT,gBAAmB,UAASN,IAAT,EAAe;AAC9B,qBAAKH,OAAL,gBAAoBG,IAApB;AACH,aAFD,EAEG,IAFH;AAGH;;;qCAEY0X,Q,EAAU;AAAA;;AACnB;AACA,gBAAI,CAACA,QAAD,IAAa,CAAC,KAAK5Y,SAAvB,EAAkC;AAC9B;AACH;;AAJkB,gBAMX6B,KANW,GAMY,IANZ,CAMXA,KANW;AAAA,gBAMJgoB,WANI,GAMY,IANZ,CAMJA,WANI;;AAOnB,gBAAMe,kBAAkBhS,SAAS5X,IAAT,KAAkB,OAA1C;;AAEA4X,qBAASzU,GAAT;AACAyU,qBAASpX,EAAT,CAAY,KAAZ,EAAmB,UAASR,IAAT,EAAeE,IAAf,EAAqB;AACpC,oBAAI0pB,mBAAoB5pB,+BAAxB,EAAkD;AAC9C;AACH;AACD,qBAAKD,OAAL,CAAaC,IAAb,EAAmB,SAAc,EAAd,EAAkBE,IAAlB,EAAwB,EAAEF,MAAMA,IAAR,EAAxB,CAAnB;AACH,aALD,EAKG,IALH;;AAOA,gBAAM6pB,sBAAsBhpB,MAAMyB,UAAlC;AACAsV,qBAASpX,EAAT,uBAA0B,UAACF,KAAD,EAAW;AACjCupB,oCAAoB9oB,GAApB,CAAwB,YAAxB,EAAsCT,MAAM/B,QAA5C;AACH,aAFD;AAGAsrB,gCAAoBrpB,EAApB,CAAuB,mBAAvB,EAA4C,UAACspB,aAAD,EAAgB/nB,KAAhB,EAA0B;AAClE,uBAAKgoB,aAAL,CAAmBhoB,KAAnB;AACH,aAFD;AAGA6V,qBAAS5L,WAAT;AACA4L,qBAASnW,MAAT,CAAgBonB,YAAY3nB,GAAZ,CAAgB,QAAhB,CAAhB;AACA0W,qBAASlW,IAAT,CAAcmnB,YAAYlnB,OAAZ,EAAd;AACA,gBAAIiW,SAASvK,eAAb,EAA8B;AAC1BuK,yBAASvK,eAAT,CAAyB,CAAzB;AACH;AACDwb,wBAAYroB,EAAZ,CAAe,eAAf,EAAgC,UAASN,IAAT,EAAekhB,KAAf,EAAsB;AAClD,qBAAK3f,MAAL,GAAc2f,KAAd;AACH,aAFD,EAEG,IAFH;AAGAyH,wBAAYroB,EAAZ,CAAe,aAAf,EAA8B,UAASN,IAAT,EAAewB,IAAf,EAAqB;AAC/C,qBAAKA,IAAL,GAAYA,IAAZ;AACA,oBAAI,CAACA,IAAL,EAAW;AACP,yBAAKD,MAAL,GAAconB,YAAY3nB,GAAZ,CAAgB,QAAhB,CAAd;AACH;AACJ,aALD,EAKG,IALH;AAMA2nB,wBAAYroB,EAAZ,CAAe,uBAAf,EAAwC,UAASN,IAAT,EAAekhB,KAAf,EAAsB;AAC1D,oBAAI,CAACA,KAAL,EAAY;AACRvgB,0BAAME,GAAN,CAAU,gBAAV,EAA4BqgB,KAA5B;AACA,yBAAK1f,IAAL,GAAYmnB,YAAY3nB,GAAZ,CAAgB,MAAhB,CAAZ;AACH;AACJ,aALD,EAKG,IALH;AAMH;;;kCAES;AAAA,gBACEL,KADF,GACoC,IADpC,CACEA,KADF;AAAA,gBACS7B,SADT,GACoC,IADpC,CACSA,SADT;AAAA,gBACoB6pB,WADpB,GACoC,IADpC,CACoBA,WADpB;;AAENhoB,kBAAMsC,GAAN;;AAEA;AACA,gBAAM6Y,eAAehd,UAAUqb,gBAAV,EAArB;AACA,gBAAI,CAAC,sBAASrX,iBAAd,EAAiC;AAC7B,oBAAIgZ,YAAJ,EAAkB;AACdA,iCAAa7H,mBAAb,CAAiC,SAAjC,EAA4C,KAAK8U,gBAAjD;AACA;AACA,wBAAIjN,aAAagN,GAAb,KAAqBnoB,MAAMK,GAAN,CAAU,UAAV,CAAzB,EAAgD;AAC5C,6BAAK6X,QAAL;AACH;AACJ;AACJ,aARD,MAQO;AACH/Z,0BAAUgrB,KAAV;AACA,oBAAM9C,iBAAiB2B,YAAY3nB,GAAZ,CAAgB,gBAAhB,CAAvB;AACA,oBAAI8a,aAAauI,UAAb,KAA4B2C,cAAhC,EAAgD;AAC5CA,mCAAe+C,WAAf,CAA2BjO,YAA3B;AACH;AACJ;AACJ;;;mCAEU;AAAA,gBACC6M,WADD,GACiB,IADjB,CACCA,WADD;;AAEP,gBAAMvmB,aAAaumB,YAAY3nB,GAAZ,CAAgB,YAAhB,CAAnB;AACA,gBAAM0W,WAAWiR,YAAYtR,QAAZ,EAAjB;;AAEAjV,uBAAWyW,QAAX;;AAEA;AACA,gBAAInB,QAAJ,EAAc;AACVA,yBAASoR,GAAT,GAAe,IAAf;AACH;AACJ;;;iDAEwB3nB,G,EAAK;AAAA,gBAClBR,KADkB,GACR,IADQ,CAClBA,KADkB;;AAE1BA,kBAAMd,OAAN,CAAcsB,IAAIrB,IAAlB,EAAwBqB,GAAxB;AACA,iBAAKtB,OAAL,qBAAyB;AACrBwB,4BAAYF,IAAI6oB;AADK,aAAzB;AAGH;;;sCAEanoB,K,EAAO;AAAA,gBACTlB,KADS,GACC,IADD,CACTA,KADS;;AAEjB,oBAAQkB,KAAR;AACI;AACA;AACIlB,0BAAME,GAAN,uBAAwBgB,KAAxB;AACA;AACJ;AACI;AANR;AAQH;;;0BAEQL,I,EAAM;AAAA,gBACHyY,eADG,GACkC,IADlC,CACHA,eADG;AAAA,gBACctZ,KADd,GACkC,IADlC,CACcA,KADd;AAAA,gBACqB+W,QADrB,GACkC,IADlC,CACqBA,QADrB;;AAEX/W,kBAAME,GAAN,CAAU,MAAV,EAAkBW,IAAlB;AACA,0HAAaA,IAAb;AACA,gBAAI,CAACyY,eAAL,EAAsB;AAClBvC,yBAASlW,IAAT,CAAcA,IAAd;AACH;AACJ;;;0BAEUD,M,EAAQ;AAAA,gBACP0Y,eADO,GAC8B,IAD9B,CACPA,eADO;AAAA,gBACUtZ,KADV,GAC8B,IAD9B,CACUA,KADV;AAAA,gBACiB+W,QADjB,GAC8B,IAD9B,CACiBA,QADjB;;AAEf/W,kBAAME,GAAN,CAAU,QAAV,EAAoBU,MAApB;AACA,4HAAeA,MAAf;AACA,gBAAI,CAAC0Y,eAAL,EAAsB;AAClBvC,yBAASnW,MAAT,CAAgBA,MAAhB;AACH;AACJ;;;;;;kBA9MgBmnB,mB;;;;;;;;;;;;;;;;;;;;ACPrB;;;;AACA;;;;AACA;;;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;IAMqBuB,e;;;AACjB,6BAAYvS,QAAZ,EAAsB/W,KAAtB,EAA6B;AAAA;;AAAA;;AAEzB,cAAK4J,QAAL,GAAgB,IAAhB;AACA,cAAKyC,cAAL,GAAsB,KAAtB;AACA,cAAKnK,IAAL,GAAY,IAAZ;AACA,cAAKT,UAAL,GAAkB,uBAAlB;AACA,cAAKzB,KAAL,GAAaA,KAAb;AACA,cAAK+W,QAAL,GAAgBA,QAAhB;AACA,cAAKwS,gBAAL,GAAwB,6CAAxB;AACA,cAAK/O,eAAL,GAAuB,0BAAW,YAAM,CAAE,CAAnB,CAAvB;AACAgP;AACA,cAAKC,UAAL,GAAkB,8BAA4B,CAAC,SAAD,CAA5B,EACd;AAAA,mBAAM,CAAC,MAAK7f,QAAN,IAAkB,MAAKyP,UAA7B;AAAA,SADc,CAAlB;AAXyB;AAa5B;;;;6BAEI9S,U,EAAY;AAAA,gBACLrE,IADK,GACiC,IADjC,CACLA,IADK;AAAA,gBACClC,KADD,GACiC,IADjC,CACCA,KADD;AAAA,gBACQyB,UADR,GACiC,IADjC,CACQA,UADR;AAAA,gBACoBsV,QADpB,GACiC,IADjC,CACoBA,QADpB;;;AAGb,gBAAI,CAACxQ,UAAL,EAAiB;AACbA,6BAAavG,MAAMK,GAAN,CAAU,YAAV,CAAb;AACH;;AAEDL,kBAAME,GAAN,CAAU,cAAV,EAA0B,KAA1B;AACA,gBAAIqa,+BAAJ;AACA,gBAAI9Y,WAAWpB,GAAX,CAAe,OAAf,CAAJ,EAA6B;AACzBka,8BAAcxD,SAASpP,IAAT,EAAd;AACH,aAFD,MAEO;AACHlG,2BAAWvB,GAAX,CAAe,OAAf,EAAwB,IAAxB;AACAqa,8BAAc,KAAKmP,YAAL,CAAkBxnB,IAAlB,EAAwB6U,QAAxB,CAAd;AACA,oBAAI,CAACtV,WAAWpB,GAAX,CAAe,SAAf,CAAL,EAAgC;AAC5B,yBAAKspB,YAAL,CAAkBpP,WAAlB,EAA+BhU,UAA/B;AACH;AACJ;AACD,mBAAOgU,WAAP;AACH;;;+BAEM;AAAA,gBACKxD,QADL,GACkB,IADlB,CACKA,QADL;;AAEHA,qBAASnM,IAAT;AACH;;;gCAEO;AAAA,gBACImM,QADJ,GACiB,IADjB,CACIA,QADJ;;AAEJA,qBAASxS,KAAT;AACH;;;kCAES;AAAA,gBACErC,IADF,GACiC,IADjC,CACEA,IADF;AAAA,gBACQT,UADR,GACiC,IADjC,CACQA,UADR;AAAA,gBACoBsV,QADpB,GACiC,IADjC,CACoBA,QADpB;;AAEN,gBAAI,CAAC7U,IAAD,IAAUA,QAAQA,KAAKyY,OAAL,KAAiB,MAAvC,EAAgD;AAC5C;AACH;AACD;AACA,gBAAI,KAAK/Q,QAAL,IAAiB,CAAC,KAAK/L,KAAvB,IAAgC,CAAC,KAAKua,SAA1C,EAAqD;AACjD3W,2BAAWvB,GAAX,CAAe,WAAf,EAA4B,IAA5B;AACA6W,yBAAS4D,OAAT,CAAiBzY,IAAjB;AACH;AACJ;;;kCAES;AAAA,gBACE6U,QADF,GAC2B,IAD3B,CACEA,QADF;AAAA,gBACYtV,UADZ,GAC2B,IAD3B,CACYA,UADZ;;AAEN,iBAAKa,GAAL;AACAb,uBAAWa,GAAX;AACAyU,qBAASzU,GAAT;AACA,iBAAKmnB,UAAL,CAAgB9lB,OAAhB;AACA,iBAAK0X,MAAL;AACA,gBAAItE,SAAShI,YAAT,EAAJ,EAA6B;AACzBgI,yBAAS6S,MAAT;AACH;AACD,mBAAO7S,SAASc,YAAhB;AACA,iBAAKd,QAAL,GAAgB,IAAhB;AACA,iBAAK7U,IAAL,GAAY,IAAZ;AACH;;;iCAEQ;AAAA,gBACGlC,KADH,GACuB,IADvB,CACGA,KADH;AAAA,gBACU+W,QADV,GACuB,IADvB,CACUA,QADV;;AAGL;;AACA/W,kBAAMwM,eAAN,CAAsBxM,MAAMK,GAAN,CAAU,qBAAV,CAAtB;AACA0W,qBAAS5L,WAAT;AACA,iBAAKvB,QAAL,GAAgB,IAAhB;AACA5J,kBAAME,GAAN,CAAU,UAAV,EAAsB,IAAtB;AACA,iBAAKupB,UAAL,CAAgB/lB,KAAhB;;AAEA,gBAAI,KAAK2I,cAAT,EAAyB;AACrB,qBAAKsQ,iBAAL;AACH;AACJ;;;iCAEQ;AAAA,gBACG3c,KADH,GACuB,IADvB,CACGA,KADH;AAAA,gBACU+W,QADV,GACuB,IADvB,CACUA,QADV;;AAEL,iBAAKyD,eAAL,CAAqB3V,MAArB;AACAkS,qBAAS7L,WAAT;AACA,iBAAKtB,QAAL,GAAgB,KAAhB;AACA5J,kBAAME,GAAN,CAAU,UAAV,EAAsB,KAAtB;AACH;;AAED;;;;qCACaqa,W,EAAahU,U,EAAY;AAAA;;AAAA,gBAC1BrE,IAD0B,GACY,IADZ,CAC1BA,IAD0B;AAAA,gBACpBT,UADoB,GACY,IADZ,CACpBA,UADoB;AAAA,gBACRzB,KADQ,GACY,IADZ,CACRA,KADQ;AAAA,gBACD+W,QADC,GACY,IADZ,CACDA,QADC;;;AAGlC,iBAAK7X,OAAL,6BAAiC;AAC7BgD,0BAD6B;AAE7BqE;AAF6B,aAAjC;AAIA;AACA,gBAAIwQ,YAAYA,SAASkJ,KAArB,IAA8B,CAAClJ,SAASkJ,KAAT,CAAeC,MAAlD,EAA0D;AACtDlgB,sBAAME,GAAN;AACH;;AAEDqa,wBAAY9U,IAAZ,CAAiB,YAAM;AACnB,oBAAI,CAAChE,WAAWpB,GAAX,CAAe,OAAf,CAAL,EAA8B;AAC1B;AACA;AACH;AACD,uBAAO6B,KAAKwV,SAAZ;AACAjW,2BAAWvB,GAAX,CAAe,SAAf,EAA0B,IAA1B;AACA,oBAAIuB,eAAezB,MAAMyB,UAAzB,EAAqC;AACjC;AACAA,+BAAWa,GAAX,+BAAqC,IAArC;AACAb,+BAAWC,MAAX,+BAAwC,UAACC,iBAAD,EAAoB2B,SAApB,EAAkC;AACtE,+BAAKpE,OAAL,+BAAmCoE,SAAnC;AACH,qBAFD;AAGAkT,6CAAyB/U,UAAzB;AACH;AACJ,aAfD,EAeG6D,KAfH,CAeS,iBAAS;AACdtF,sBAAME,GAAN,CAAU,cAAV,EAA0B,IAA1B;AACA,oBAAM2pB,iBAAiB9S,YAAYA,SAASkJ,KAArB,IAA8BlJ,SAASkJ,KAAT,CAAeC,MAApE;AACA,oBAAI2J,cAAJ,EAAoB;AAChBpoB,+BAAWvB,GAAX,CAAe,YAAf;AACH;AACD,uBAAKhB,OAAL,oCAAwC;AACpCqG,gCADoC;AAEpCrD,8BAFoC;AAGpCqE;AAHoC,iBAAxC;AAKH,aA1BD;AA2BH;;;4CAEmB;AAAA,gBACRwQ,QADQ,GACK,IADL,CACRA,QADQ;;AAEhB,iBAAK1K,cAAL,GAAsB,KAAtB;AACA0K,qBAAS+S,QAAT;AACA,iBAAK5qB,OAAL,yBAA6B,EAA7B;AACH;;;uCAEc;AAAA,gBACHgD,IADG,GACgB,IADhB,CACHA,IADG;AAAA,gBACG6U,QADH,GACgB,IADhB,CACGA,QADH;AAEX;;AACA,gBAAMgT,uBAAuBhT,SAAS/Q,IAAT,CAAc9D,IAAd,CAA7B;AACA,gBAAI6nB,oBAAJ,EAA0B;AACtB,oBAAMvP,kBAAkB,0BAAW,YAAM;AACrC,2BAAOzD,SAASpP,IAAT,uBAAP;AACH,iBAFuB,CAAxB;AAGA,qBAAK6S,eAAL,GAAuBA,eAAvB;AACA,uBAAOuP,qBAAqBtkB,IAArB,CAA0B+U,gBAAgB9U,KAA1C,CAAP;AACH;AACD,mBAAOqR,SAASpP,IAAT,uBAAP;AACH;;;4BAEgB;AACb,mBAAO,KAAKoP,QAAL,CAAcxL,oBAAd,EAAP;AACH,S;0BA6DcxJ,K,EAAO;AAClB,iBAAKgV,QAAL,CAAczL,oBAAd,CAAmCvJ,KAAnC;AACH;;;4BA7Da;AACV,mBAAO,KAAKgV,QAAL,CAAc3L,iBAAd,EAAP;AACH,S;0BA4GWrJ,K,EAAO;AACf,iBAAKgV,QAAL,CAAc/L,iBAAd,CAAgCjJ,KAAhC;AACH;;;4BA5GiB;AACd,mBAAO,KAAKgV,QAAL,CAAcvL,cAAd,EAAP;AACH;;;4BAEgB;AAAA,gBACL0Q,SADK,GACmB,IADnB,CACLA,SADK;AAAA,gBACMnF,QADN,GACmB,IADnB,CACMA,QADN;AAEb;;AACA,gBAAI,CAAC,KAAKnN,QAAV,EAAoB;AAChB,uBAAO,KAAP;AACH;AACD;AACA,gBAAI,CAACmN,SAASkJ,KAAd,EAAqB;AACjB,uBAAO,KAAP;AACH;AACD;AACA,mBAAO,CAAC/D,SAAD,IAAeA,aAAa,CAACA,UAAUhJ,QAAV,CAAmB6D,SAASkJ,KAA5B,CAApC;AACH,S;0BA2Cc+J,gB,EAAkB;AAAA,gBACrB9N,SADqB,GACG,IADH,CACrBA,SADqB;AAAA,gBACVnF,QADU,GACG,IADH,CACVA,QADU;AAE7B;;AACA,gBAAI,CAACA,SAASkJ,KAAd,EAAqB;AACjB,oBAAI+J,gBAAJ,EAAsB;AAClB,yBAAK3O,MAAL;AACH,iBAFD,MAEO;AACH,yBAAKS,MAAL;AACH;AACD;AACH;AACD,gBAAI,CAACI,SAAL,EAAgB;AACZ;AACH;;AAED,gBAAI8N,gBAAJ,EAAsB;AAClB,oBAAI,CAAC,KAAK3Q,UAAV,EAAsB;AAClB,yBAAKmB,eAAL,CAAqB3V,MAArB;AACA,yBAAKN,KAAL;AACA2X,8BAAUkN,WAAV,CAAsBrS,SAASkJ,KAA/B;AACA,yBAAK/D,SAAL,GAAiB,IAAjB;AACH;AACJ,aAPD,MAOO;AACH,qBAAKuN,UAAL,CAAgB/lB,KAAhB;AACA,oBAAI,KAAK2I,cAAT,EAAyB;AACrB,yBAAKsQ,iBAAL;AACH;AACJ;AACJ;;;4BArEe;AACZ,mBAAO,KAAK5F,QAAL,CAAchI,YAAd,EAAP;AACH,S;0BAqEaqE,O,EAAS;AAAA,gBACX2D,QADW,GACE,IADF,CACXA,QADW;;AAEnBA,qBAASkT,YAAT,CAAsB7W,OAAtB;AACH;;;4BAtEkB;AACf,mBAAO,KAAK2D,QAAL,CAAckJ,KAArB;AACH;;;4BAEe;AACZ,mBAAO,KAAKxe,UAAL,CAAgBpB,GAAhB,CAAoB,WAApB,CAAP;AACH;;;4BAEe;AACZ,mBAAO,KAAK0W,QAAL,CAAc1L,gBAAd,EAAP;AACH;;;4BAEW;AACR,mBAAO,KAAK5J,UAAL,CAAgBpB,GAAhB,CAAoB,OAApB,CAAP;AACH;;;4BAEa;AACV,mBAAO,KAAKoB,UAAL,CAAgBpB,GAAhB,CAAoB,SAApB,CAAP;AACH;;;0BAEc6B,I,EAAM;AACjB,gBAAMT,aAAa,KAAKA,UAAL,GAAkB,uBAArC;AACA,gBAAMR,WAAWiB,OAAO,sBAAQA,KAAKwV,SAAb,CAAP,GAAiC,CAAlD;AACA,gBAAM9V,WAAWM,OAAO,sBAAQA,KAAKN,QAAb,CAAP,GAAgC,CAAjD;AACA,gBAAMsoB,kBAAkBzoB,WAAWyD,UAAnC;AACAzD,uBAAWyW,QAAX;AACAgS,4BAAgBjpB,QAAhB,GAA2BA,QAA3B;AACAipB,4BAAgBtoB,QAAhB,GAA2BA,QAA3B;;AAEA,iBAAKM,IAAL,GAAYA,IAAZ;AACA,iBAAK6U,QAAL,CAAc9T,IAAd,CAAmBf,IAAnB;AACH;;;0BAyCYkI,I,EAAM;AACf,iBAAK2M,QAAL,CAAc7I,WAAd,CAA0B9D,IAA1B;AACH;;;0BAEQvJ,I,EAAM;AACX,iBAAKkW,QAAL,CAAclW,IAAd,CAAmBA,IAAnB;AACH;;;0BAEY6G,G,EAAK;AACd,iBAAKqP,QAAL,CAAcpM,IAAd,CAAmBjD,GAAnB;AACH;;;0BAMa3F,K,EAAO;AACjB,gBAAI,KAAKgV,QAAL,CAAcoT,iBAAlB,EAAqC;AACjC,qBAAKpT,QAAL,CAAcoT,iBAAd,CAAgCpoB,KAAhC;AACH;AACJ;;;0BAEUnB,M,EAAQ;AACf,iBAAKmW,QAAL,CAAcnW,MAAd,CAAqBA,MAArB;AACH;;;;;;kBA9RgB0oB,e;;;AAiSrB,SAAS9S,wBAAT,CAAkC/U,UAAlC,EAA8C;AAC1C;AACA,QAAMwW,aAAaxW,WAAWpB,GAAX,CAAe,YAAf,CAAnB;AACAoB,eAAWvC,OAAX,CAAmB,mBAAnB,EAAwCuC,UAAxC,EAAoDwW,UAApD,EAAgEA,UAAhE;AACH;;AAED,SAASuR,oBAAT,CAA8BlQ,eAA9B,EAA+C;AAC3CA,oBAAgBvC,QAAhB,CAAyBpX,EAAzB,CAA4B,KAA5B,EAAmC2Z,gBAAgBiQ,gBAAnD,EAAqEjQ,eAArE;AACH,C;;;;;;;;;;;;;;;;;kBCxSuB8Q,e;AAdxB;;;;;;;AAOA;;;;;;;AAOe,SAASA,eAAT,GAA2B;AACtC,QAAI1P,eAAe,IAAnB;AACA,QAAI2P,YAAY,IAAhB;;AAEA,WAAOxnB,OAAOynB,gBAAP,CAAwB;AAC3BvP,eAD2B,mBACnB7Y,IADmB,EACb+C,WADa,EACA;AACvBolB,wBAAY,EAAEnoB,UAAF,EAAQ+C,wBAAR,EAAZ;AACH,SAH0B;AAI3B0U,cAJ2B,kBAIpBzX,IAJoB,EAId;AACT,mBAAO,CAAC,EAAEmoB,aAAaE,KAAKC,SAAL,CAAeH,UAAUnoB,IAAV,CAAeY,OAAf,CAAuB,CAAvB,CAAf,MAA8CynB,KAAKC,SAAL,CAAetoB,KAAKY,OAAL,CAAa,CAAb,CAAf,CAA7D,CAAR;AACH,SAN0B;AAO3BkY,iBAP2B,uBAOf;AACRqP,wBAAY,IAAZ;AACH;AAT0B,KAAxB,EAUJ;AACCzO,yBAAiB;AACbvb,eADa,iBACP;AACF,uBAAOgqB,YAAYA,UAAUplB,WAAtB,GAAoC,IAA3C;AACH;AAHY,SADlB;AAMCyV,sBAAc;AACVra,eADU,iBACJ;AACF,uBAAOqa,YAAP;AACH,aAHS;AAIVxa,eAJU,eAINoZ,eAJM,EAIW;AACjBoB,+BAAepB,eAAf;AACH;AANS;AANf,KAVI,CAAP;AAyBH,C;;;;;;;;;;;;;;;;;;;;AC3CD;;AACA;;AACA;;;;AACA;;;;AAEA;AACA,IAAMmR,WAAW,SAAXA,QAAW,CAASpsB,MAAT,EAAiB;AAAA;;AAE9B,QAAIqsB,UAAU,EAAd;AACA,QAAIC,cAAc,EAAlB;AACA,QAAIC,gBAAgB,CAApB;;AAEA;AACAvsB,WAAOsB,EAAP,CAAU,qBAAV,EAAiC,UAACK,KAAD,EAAW;AACxC0qB,kBAAU,EAAV;AACAC,sBAAc,EAAd;AACAC,wBAAgB,CAAhB;;AAEA;AACA,YAAM1lB,aAAalF,MAAMkF,UAAzB;AACAA,mBAAW2lB,aAAX,GAA2B,CAA3B;AACA3lB,mBAAW5D,YAAX,GAA0BwpB,eAA1B;AACA9qB,cAAME,GAAN,CAAU,eAAV,EAA2B,IAA3B;AACH,KAVD,EAUG,IAVH;;AAYA;AACA7B,WAAOsB,EAAP,CAAU,kBAAV,EAA8B,YAAM;AAChC;AACA,YAAMuC,OAAO7D,OAAOgC,GAAP,CAAW,cAAX,CAAb;AACA,YAAMkB,SAASW,KAAKX,MAApB;AACA,YAAMwpB,MAAMxpB,UAAUA,OAAO8B,MAA7B;AACA,YAAI0nB,OAAO,CAAC1sB,OAAOgC,GAAP,CAAW,wBAAX,CAAZ,EAAkD;AAAA,uCACrCuU,CADqC;AAE1C;AACA,oBAAMpT,QAAQD,OAAOqT,CAAP,CAAd;AACA,oBAAIoW,eAAexpB,MAAMme,IAArB,KAA8B,CAACgL,YAAYnpB,MAAMqe,GAAlB,CAAnC,EAA2D;AACvDoL,8BAAUzpB,KAAV;AACA,gDAASA,KAAT,EAAgB,UAACid,OAAD,EAAa;AACzByM,2CAAmB1pB,KAAnB,EAA0Bid,OAA1B;AACH,qBAFD,EAEG,UAAClZ,KAAD,EAAW;AACV,8BAAKrG,OAAL,gBAAoB;AAChBqB,qCAAS,yBADO;AAEhBc,oCAAQkE;AAFQ,yBAApB;AAIH,qBAPD;AAQH;AAdyC;;AAC9C,iBAAK,IAAIqP,IAAI,CAAb,EAAgBA,IAAImW,GAApB,EAAyBnW,GAAzB,EAA8B;AAAA,sBAArBA,CAAqB;AAc7B;AACJ;AACDuW;AACH,KAvBD,EAuBG,IAvBH;;AAyBA;AACA9sB,WAAOsB,EAAP,CAAU,sBAAV,EAAkC,UAACK,KAAD,EAAQorB,iBAAR,EAA8B;AAC5D,YAAI5pB,QAAQ,IAAZ;AACA,YAAI4pB,sBAAsB,CAA1B,EAA6B;AACzB5pB,oBAAQkpB,QAAQU,oBAAoB,CAA5B,CAAR;AACH;AACDprB,cAAME,GAAN,CAAU,eAAV,EAA2BsB,KAA3B;AACH,KAND,EAMG,IANH;;AAQA,aAAS6pB,mBAAT,CAA6B9pB,MAA7B,EAAqC;AACjC,YAAI,CAACA,OAAO8B,MAAZ,EAAoB;AAChB;AACH;;AAED,aAAK,IAAIuR,IAAI,CAAb,EAAgBA,IAAIrT,OAAO8B,MAA3B,EAAmCuR,GAAnC,EAAwC;AACpCqW,sBAAU1pB,OAAOqT,CAAP,CAAV;AACH;;AAED;AACA8V,kBAAU7nB,OAAOkT,IAAP,CAAY4U,WAAZ,EAAyBvM,GAAzB,CAA6B;AAAA,mBAAMuM,YAAYzd,EAAZ,CAAN;AAAA,SAA7B,CAAV;;AAEAie;AACH;;AAED,aAASH,cAAT,CAAwBrL,IAAxB,EAA8B;AAC1B,eAAOA,SAAS,WAAT,IAAwBA,SAAS,UAAxC;AACH;;AAED,aAASuL,kBAAT,CAA4B1pB,KAA5B,EAAmCid,OAAnC,EAA4C;AACxCjd,cAAMnC,IAAN,GAAaof,OAAb;AACH;;AAED,aAASwM,SAAT,CAAmBzpB,KAAnB,EAA0B;AACtBA,cAAMnC,IAAN,GAAamC,MAAMnC,IAAN,IAAc,EAA3B;AACAmC,cAAM6V,IAAN,GAAa7V,MAAM6U,KAAN,IAAe7U,MAAM6V,IAArB,IAA6B7V,MAAMue,QAAhD;AACAve,cAAMqe,GAAN,GAAY,4BAASre,KAAT,EAAgBkpB,QAAQrnB,MAAxB,CAAZ;;AAEA,YAAI,CAAC7B,MAAM6V,IAAX,EAAiB;AACb,gBAAMiU,YAAY,+BAAY9pB,KAAZ,EAAmBopB,aAAnB,CAAlB;AACAppB,kBAAM6V,IAAN,GAAaiU,UAAUjV,KAAvB;AACAuU,4BAAgBU,UAAUxL,YAA1B;AACH;;AAED;AACA6K,oBAAYnpB,MAAMqe,GAAlB,IAAyBre,KAAzB;AACAkpB,gBAAQhd,IAAR,CAAalM,KAAb;AACH;;AAED,aAASspB,aAAT,GAAyB;AACrB,YAAMpW,OAAO,CAAC;AACVxH,gBAAI,KADM;AAEVmJ,mBAAO;AAFG,SAAD,CAAb;AAIA,aAAK,IAAIzB,IAAI,CAAb,EAAgBA,IAAI8V,QAAQrnB,MAA5B,EAAoCuR,GAApC,EAAyC;AACrCF,iBAAKhH,IAAL,CAAU;AACNR,oBAAIwd,QAAQ9V,CAAR,EAAWiL,GADT;AAENxJ,uBAAOqU,QAAQ9V,CAAR,EAAWyC,IAAX,IAAmB;AAFpB,aAAV;AAIH;AACD,eAAO3C,IAAP;AACH;;AAED,aAAS6W,mBAAT,GAA+B;AAC3B,YAAIH,oBAAoB,CAAxB;AACA,YAAM/U,QAAQhY,OAAOgC,GAAP,CAAW,cAAX,CAAd;;AAEA;AACA;AACA,YAAIgW,UAAU,KAAd,EAAqB;AACjBhY,mBAAO6B,GAAP,CAAW,eAAX,EAA4B,CAA5B;AACA;AACH;;AAED,aAAK,IAAI0U,IAAI,CAAb,EAAgBA,IAAI8V,QAAQrnB,MAA5B,EAAoCuR,GAApC,EAAyC;AACrC,gBAAMpT,SAAQkpB,QAAQ9V,CAAR,CAAd;AACA,gBAAIyB,SAASA,UAAU7U,OAAM6V,IAA7B,EAAmC;AAC/B+T,oCAAoBxW,IAAI,CAAxB;AACA;AACH,aAHD,MAGO,IAAIpT,OAAM6d,OAAN,IAAiB7d,OAAMoe,YAAvB,IAAuCpe,OAAMqe,GAAN,KAAc,SAAzD,EAAoE;AACvEuL,oCAAoBxW,IAAI,CAAxB;AACH,aAFM,MAEA,IAAIpT,OAAMgqB,UAAV,EAAsB;AACzB;AACH;AACJ;AACD;AACAC,yBAAiBL,iBAAjB;AACH;;AAED,aAASK,gBAAT,CAA0B1pB,KAA1B,EAAiC;AAC7B,YAAI2oB,QAAQrnB,MAAZ,EAAoB;AAChBhF,mBAAOiZ,qBAAP,CAA6BvV,KAA7B,EAAoC2oB,OAApC;AACH,SAFD,MAEO;AACHrsB,mBAAO6B,GAAP,CAAW,eAAX,EAA4B6B,KAA5B;AACH;AACJ;;AAED,aAASopB,gBAAT,GAA4B;AACxB,YAAM7pB,eAAewpB,eAArB;AACA,YAAIY,aAAapqB,YAAb,MAA+BoqB,aAAartB,OAAOgC,GAAP,CAAW,cAAX,CAAb,CAAnC,EAA6E;AACzEkrB;AACAltB,mBAAO6B,GAAP,CAAW,cAAX,EAA2BoB,YAA3B;AACH;AACJ;;AAED,aAASoqB,YAAT,CAAsBhX,IAAtB,EAA4B;AACxB,eAAOA,KAAK0J,GAAL,CAAS;AAAA,mBAAWlc,KAAKgL,EAAhB,SAAsBhL,KAAKmU,KAA3B;AAAA,SAAT,EAA6Cf,IAA7C,CAAkD,GAAlD,CAAP;AACH;;AAED,SAAK7K,kBAAL,GAA0B4gB,mBAA1B;;AAEA,SAAK7hB,eAAL,GAAuB,YAAW;AAC9B,eAAOnL,OAAOgC,GAAP,CAAW,eAAX,CAAP;AACH,KAFD;;AAIA,SAAKoJ,eAAL,GAAuB,YAAW;AAC9B,eAAOpL,OAAOgC,GAAP,CAAW,cAAX,CAAP;AACH,KAFD;;AAIA,SAAKsD,OAAL,GAAe,YAAW;AACtB,aAAKrB,GAAL,CAAS,IAAT,EAAe,IAAf,EAAqB,IAArB;AACH,KAFD;AAGH,CAtKD;;AAwKA,SAAcmoB,SAAS7sB,SAAvB;;kBAEe6sB,Q;;;;;;;;;;;;;;;;;;;;AChLf;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;AACA;;AACA;;AACA;;IAAYkB,c;;AACZ;;AAGA;;;;AACA;;AASA;;AAIA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;AAEA,mBAAAvM,CAAQ,4BAAR;;AAEA,IAAIwM,uBAAJ;;AAEA,IAAMC,YAAY,gBAAGvnB,MAArB;AACA,IAAMwnB,QAAQ,qBAAQC,EAAtB;;AAEA,SAASC,IAAT,CAAcjuB,IAAd,EAAoBM,MAApB,EAA4B;AACxB,QAAMD,QAAQ,SAAc,IAAd,sBAA4B;AACtC6tB,iBAAS,KAD6B;AAEtCC,aAAKnuB,IAFiC;AAGtCiC,eAAO3B;AAH+B,KAA5B,CAAd;;AAMA,QAAM8tB,iBAAiB,wBAAc,sBAAe9tB,OAAOgC,GAAP,CAAW,IAAX,CAAf,EAAiChC,OAAOgC,GAAP,CAAW,cAAX,EAA2B+rB,MAA5D,CAAd,CAAvB;AACA,QAAMC,cAAcF,eAAeG,aAAf,CAA6B,WAA7B,CAApB;;AAEA,QAAMC,WAAW,sBAAYluB,MAAZ,CAAjB;AACA,QAAMmuB,SAAS,oBAAUnuB,MAAV,CAAf;;AAEA,QAAMouB,oBAAoB,+BAAqBpuB,MAArB,CAA1B;AACAouB,sBAAkB9sB,EAAlB,CAAqB,KAArB,EAA4BvB,MAAMc,OAAlC,EAA2Cd,KAA3C;;AAEA,QAAIsuB,cAAJ;;AAEA,QAAIC,mBAAJ;AACA,QAAIC,oBAAJ;;AAEA,QAAIC,sBAAsB,CAAC,CAA3B;AACA,QAAIC,4BAA4B,CAAC,CAAjC;AACA,QAAIC,uBAAuB,CAAC,CAA5B;;AAEA,QAAIC,4BAAJ;AACA,QAAIC,0BAAJ;AACA,QAAIC,oBAAJ;;AAEA,QAAIC,cAAc,IAAlB;AACA,QAAIC,kBAAJ;;AAEA,aAASC,iBAAT,GAA6B;AACzB,eAAO,EAAEhsB,QAAQ,aAAV,EAAP;AACH;;AAED,SAAKisB,YAAL,GAAoB,YAAY;AAC5B,yDAAqBR,yBAArB;AACA,YAAMS,QAAQva,SAASwa,IAAT,CAActa,QAAd,CAAuBiZ,cAAvB,CAAd;AACA,YAAMsB,OAAO,iBAAOtB,cAAP,CAAb;AACA,YAAMuB,iBAAiB1pB,KAAKC,KAAL,CAAWwpB,KAAK3U,KAAhB,CAAvB;AACA,YAAM6U,kBAAkB3pB,KAAKC,KAAL,CAAWwpB,KAAKnG,MAAhB,CAAxB;;AAEA;AACA,YAAIoG,mBAAmBf,UAAnB,IAAiCgB,oBAAoBf,WAAzD,EAAsE;AAClE;AACA,gBAAI,CAACD,UAAD,IAAe,CAACC,WAApB,EAAiC;AAC7BgB;AACH;AACDvvB,mBAAO6B,GAAP,CAAW,OAAX,EAAoBqtB,KAApB;AACA;AACH;AACD;AACA,YAAI,CAACG,cAAD,IAAmB,CAACC,eAAxB,EAAyC;AACrC;AACA,gBAAI,CAAChB,UAAD,IAAe,CAACC,WAApB,EAAiC;AAC7BgB;AACH;AACJ;;AAED;AACA,YAAIF,kBAAkBC,eAAlB,IAAqCJ,KAAzC,EAAgD;AAC5ClvB,mBAAO6B,GAAP,CAAW,gBAAX,EAA6BwtB,cAA7B;AACArvB,mBAAO6B,GAAP,CAAW,iBAAX,EAA8BytB,eAA9B;AACH;AACDtvB,eAAO6B,GAAP,CAAW,OAAX,EAAoBqtB,KAApB;;AAEA,YAAIA,KAAJ,EAAW;AACP,mCAAaM,OAAb,CAAqB1B,cAArB;AACH;AACJ,KAlCD;;AAoCA,SAAK2B,YAAL,GAAoB,YAAW;AAC3B,YAAMJ,iBAAiBrvB,OAAOgC,GAAP,CAAW,gBAAX,CAAvB;AACA,YAAMstB,kBAAkBtvB,OAAOgC,GAAP,CAAW,iBAAX,CAAxB;;AAEA,YAAIhC,OAAOgC,GAAP,CAAW,UAAX,CAAJ,EAA4B;AACxB0tB,kCAAsBL,cAAtB,EAAsCC,eAAtC;AACH;;AAED,YAAIP,SAAJ,EAAe;AACXA,sBAAUtf,MAAV,CAAiB4f,cAAjB,EAAiCC,eAAjC;AACH;;AAEDK,qBAAaN,cAAb,EAA6BC,eAA7B;AACAlB,0BAAkB3e,MAAlB;AACH,KAdD;;AAgBA,SAAKmgB,YAAL,GAAoB,YAAW;AAC3B,YAAMP,iBAAiBrvB,OAAOgC,GAAP,CAAW,gBAAX,CAAvB;AACA,YAAMstB,kBAAkBtvB,OAAOgC,GAAP,CAAW,iBAAX,CAAxB;AACA,YAAIqtB,mBAAmBf,UAAnB,IAAiCgB,oBAAoBf,WAAzD,EAAsE;AAClED,yBAAae,cAAb;AACAd,0BAAce,eAAd;AACAvvB,kBAAMc,OAAN,iBAAsB;AAClB4Z,uBAAO4U,cADW;AAElBpG,wBAAQqG;AAFU,aAAtB;AAIA,gBAAM5U,aAAa,gCAAc2U,cAAd,CAAnB;AACA,gBAAIP,gBAAgBpU,UAApB,EAAgC;AAC5BoU,8BAAcpU,UAAd;AACA3a,sBAAMc,OAAN,qBAA0B;AACtB6Z,gCAAYoU;AADU,iBAA1B;AAGH;AACJ;AACJ,KAlBD;;AAoBA,aAASS,mBAAT,GAA+B;AAC3B,yDAAqBd,yBAArB;AACAA,oCAA4B,kDAAsBoB,iBAAtB,CAA5B;AACH;;AAED,aAASA,iBAAT,GAA6B;AACzB,YAAI,CAAC9vB,MAAM6tB,OAAX,EAAoB;AAChB;AACH;AACD7tB,cAAMkvB,YAAN;AACAlvB,cAAM0vB,YAAN;AACA1vB,cAAM6vB,YAAN;AACH;;AAED,aAASF,qBAAT,CAA+BjV,KAA/B,EAAsCwO,MAAtC,EAA8C;AAC1C,YAAM6G,YAAY,4BAAY9vB,MAAZ,CAAlB;AACA;AACA,YAAI,qBAAE6Y,QAAF,CAAW4B,KAAX,KAAqB,qBAAE5B,QAAF,CAAWoQ,MAAX,CAAzB,EAA6C;AACzC,gBAAMvO,aAAa,gCAAcD,KAAd,CAAnB;AACA,4CAAcqT,cAAd,EAA8BpT,UAA9B;;AAEA,gBAAMqV,cAAcrV,aAAa,CAAjC;AACA,kCAAYoT,cAAZ,EAA4B,sBAA5B,EAAoDiC,WAApD;AACA,kCAAYjC,cAAZ,EAA4B,yBAA5B,EAAwD7E,SAASxO,KAAjE;AACH;AACD,8BAAYqT,cAAZ,EAA4B,sBAA5B,EAAoDgC,SAApD;AACA9vB,eAAO6B,GAAP,CAAW,WAAX,EAAwBiuB,SAAxB;AACH;;AAED,SAAKtwB,KAAL,GAAa,YAAY;AACrB0uB,iBAAS1uB,KAAT,CAAesuB,eAAeG,aAAf,CAA6B,aAA7B,CAAf;AACAE,eAAO3uB,KAAP,CAAasuB,eAAeG,aAAf,CAA6B,WAA7B,CAAb;;AAEAI,gBAAQ,mBAASruB,MAAT,CAAR;AACAquB,cAAM7uB,KAAN;AACA6uB,cAAMzC,YAAN,CAAmBkC,cAAnB;AACAO,cAAM/sB,EAAN,qBAAqB0uB,iBAArB;;AAEA;AACA5B,0BAAkB5uB,KAAlB,CAAwBsuB,eAAejf,EAAvC,EAA2C7O,OAAOgC,GAAP,CAAW,UAAX,CAA3C;;AAEA;AACA8rB,uBAAemC,YAAf,CAA4B7B,kBAAkBrZ,OAAlB,EAA5B,EAAyDoZ,OAAOpZ,OAAP,EAAzD;;AAEA;AACA4Z,8BAAsBuB,mBAAmBxwB,IAAnB,EAAyBM,MAAzB,EAAiCguB,WAAjC,CAAtB;;AAEAa,sBAAc,2BAAYf,cAAZ,CAAd;AACAc,4BAAoB,uCAAwBd,cAAxB,EAAwCnZ,QAAxC,EAAkDwb,wBAAlD,CAApB;;AAEAnwB,eAAOsB,EAAP,CAAU,wBAAV,EAAoC,UAAUK,KAAV,EAAiByuB,GAAjB,EAAsB;AACtD,kCAAYtC,cAAZ,EAA4B,2BAA5B,EAAyDsC,GAAzD;AACH,SAFD;AAGApwB,eAAOsB,EAAP,CAAU,kBAAV,EAA8B,UAAUK,KAAV,EAAiByuB,GAAjB,EAAsB;AAChD,kCAAYtC,cAAZ,EAA4B,kBAA5B,EAAgDsC,GAAhD;AACH,SAFD;AAGApwB,eAAOsB,EAAP,CAAU,qBAAV,EAAiC,UAAUK,KAAV,EAAiByuB,GAAjB,EAAsB;AACnD,kCAAYtC,cAAZ,EAA4B,uBAA5B,EAAqDsC,GAArD;AACH,SAFD;;AAIA;AACApwB,eAAOsB,EAAP,4BAA6B6uB,wBAA7B;;AAEAnwB,eAAOsB,EAAP,2CAA4C,YAAM;AAC9CquB;AACH,SAFD;;AAIA,YAAMU,kBAAkBrwB,OAAO+tB,MAA/B;AACAsC,wBAAgB/uB,EAAhB,CAAmB,mBAAnB,EAAwCgvB,aAAxC;;AAEAtwB,eAAOqD,MAAP,CAAc,YAAd,EAA4BktB,eAA5B;AACAvwB,eAAOqD,MAAP,CAAc,cAAd,EAA8BmtB,oBAA9B;;AAEA,YAAM/V,QAAQza,OAAOgC,GAAP,CAAW,OAAX,CAAd;AACA,YAAMinB,SAASjpB,OAAOgC,GAAP,CAAW,QAAX,CAAf;AACAyuB,sBAAchW,KAAd,EAAqBwO,MAArB;AACAjpB,eAAOqD,MAAP,CAAc,aAAd,EAA6BqtB,mBAA7B;AACA,YAAI1wB,OAAOgC,GAAP,CAAW,UAAX,CAAJ,EAA4B;AACxB0tB,kCAAsBjV,KAAtB,EAA6BwO,MAA7B;AACH,SAFD,MAEO;AACH,+BAAS6E,cAAT,EAAyB,yBAAzB;AACH;;AAED,YAAIL,KAAJ,EAAW;AACP,+BAASK,cAAT,EAAyB,OAAzB;AACH;;AAED,YAAM6C,OAAO3wB,OAAOgC,GAAP,CAAW,MAAX,KAAsB,EAAnC;;AAEA,YAAI2uB,KAAK3X,IAAT,EAAe;AACX,mCAAa8U,cAAb,EAA6B,aAA7B,EAA4C,aAAa6C,KAAK3X,IAA9D;AACH;;AAED,YAAM4X,aAAa,yBAAcD,IAAd,CAAnB;AACA,wCAAqB3wB,OAAOgC,GAAP,CAAW,IAAX,CAArB,EAAuC4uB,UAAvC;;AAEA;AACA5wB,eAAO6B,GAAP,CAAW,gBAAX,EAA6BmsB,WAA7B;AACAhuB,eAAO6B,GAAP,CAAW,QAAX,EAAqB,sBAASgvB,MAA9B;AACA7wB,eAAO6B,GAAP,CAAW,WAAX,EAAwB,0BAAxB;AACA7B,eAAO6B,GAAP,CAAW,WAAX,EAAwB2rB,cAAc,OAAOvE,MAAP,KAAkB,QAAlB,IAA8BA,2CAA5C,CAAxB;;AAEA,+BAAa6H,GAAb,CAAiB,IAAjB;;AAEA,aAAKlD,OAAL,GAAe,IAAf;AACA5tB,eAAOa,OAAP,CAAe,WAAf,EAA4BitB,cAA5B;;AAEA,YAAMoB,QAAQva,SAASwa,IAAT,CAActa,QAAd,CAAuBiZ,cAAvB,CAAd;AACA,YAAIoB,KAAJ,EAAW;AACP,mCAAaM,OAAb,CAAqB1B,cAArB;AACH;AACD9tB,eAAO6B,GAAP,CAAW,OAAX,EAAoBqtB,KAApB;AACH,KAnFD;;AAqFA,aAAS6B,gBAAT,GAA4B;AACxB/wB,eAAO6B,GAAP,CAAW,YAAX,EAAyB,0BAAc7B,MAAd,EAAsB8tB,cAAtB,CAAzB;AACH;;AAED,SAAKlpB,IAAL,GAAY,YAAW;AACnB,aAAKqqB,YAAL;;AAEAjvB,eAAOsB,EAAP,CAAU,mBAAV,EAA+B0vB,WAA/B;AACAhxB,eAAOsB,EAAP,CAAU,kBAAV,EAA8ByvB,gBAA9B;AACA/wB,eAAOsB,EAAP,CAAU,mBAAV,EAA+ByvB,gBAA/B;AACA/wB,eAAOsB,EAAP,CAAU,0BAAV,EAAsCyvB,gBAAtC;AACA/wB,eAAOsB,EAAP,CAAU,mBAAV,EAA+B2vB,MAA/B;AACAjxB,eAAOsB,EAAP,CAAU,cAAV,EAA0B,UAACkY,YAAD,EAAkB;AACxC,gBAAIA,YAAJ,EAAkB;AACd0X;AACH,aAFD,MAEO;AACHC;AACH;AACJ,SAND;;AAQAJ;;AAEA;AACA,YAAI,uBAAa/K,IAAb,OAAwB,CAAxB,IAA6B,CAAChmB,OAAOgC,GAAP,CAAW,YAAX,CAAlC,EAA4D;AACxDivB,mBAAOjxB,MAAP,EAAe,CAAf,EAAkB,CAAlB;AACH;;AAED,YAAMqwB,kBAAkBrwB,OAAO+tB,MAA/B;;AAEA/tB,eAAOqD,MAAP,CAAc,OAAd,EAAuBwnB,aAAvB;AACAwF,wBAAgBhtB,MAAhB,CAAuB,UAAvB,EAAmC+tB,cAAnC;AACAf,wBAAgBhtB,MAAhB,CAAuB,YAAvB,EAAqCguB,YAArC;AACArxB,eAAOqD,MAAP,CAAc,WAAd,EAA2BiuB,kBAA3B;AACAjB,wBAAgBhtB,MAAhB,CAAuB,cAAvB,EAAuCkuB,cAAvC;AACA;AACAjD,qBAAaC,cAAc,IAA3B;AACA,aAAKqB,YAAL;AACH,KAjCD;;AAmCA,aAASwB,cAAT,CAAwBzvB,KAAxB,EAA+B6vB,MAA/B,EAAuC;AACnC,YAAMC,gBAAgB;AAClB3hB,sBAAU0hB;AADQ,SAAtB;AAGA,YAAIA,MAAJ,EAAY;AACRjE,6BAAiBD,eAAeoE,MAAf,CAAsB5hB,QAAvC;AACA,gBAAI,CAACyd,cAAL,EAAqB;AACjBkE,8BAAc7qB,WAAd,GAA4B0mB,eAAe3lB,IAAf,GACvBP,IADuB,CAClB,UAAUuqB,QAAV,EAAoB;AACtBpE,qCAAiBoE,QAAjB;AACA;AACA,wBAAMC,eAAejwB,MAAMK,GAAN,CAAU,UAAV,CAArB;AACA,wBAAI4vB,YAAJ,EAAkB;AACdC;AACH;AACD,2BAAOD,YAAP;AACH,iBATuB,CAA5B;AAUAH,8BAAc7qB,WAAd,CAA0BK,KAA1B,CAAgC,UAAUjE,MAAV,EAAkB;AAC9CjD,0BAAMc,OAAN,gBAAqB;AACjBqB,iCAAS,yBADQ;AAEjBc,gCAAQA;AAFS,qBAArB;AAIH,iBALD;AAMH,aAjBD,MAiBO;AACH6uB;AACH;AACJ,SAtBD,MAsBO;AACH9xB,kBAAM+xB,cAAN;AACH;AACD;AACA,YAAIxD,cAAcC,WAAlB,EAA+B;AAC3BxuB,kBAAMc,OAAN,mBAAwB4wB,aAAxB;AACH;AACJ;;AAED,aAASI,WAAT,GAAuB;AACnB,YAAM/hB,WAAW,IAAIyd,cAAJ,CAAmB5Y,QAAnB,EAA6B5U,MAAMgV,OAAN,EAA7B,CAAjB;AACAhV,cAAM8xB,WAAN,CAAkB/hB,QAAlB;AACH;;AAED,aAASmhB,MAAT,CAAgBtvB,KAAhB,EAAuB8D,UAAvB,EAAmCssB,cAAnC,EAAmD;AAC/C,YAAItsB,cAAc,CAACssB,cAAnB,EAAmC;AAC/BlH,0BAAclpB,KAAd,EAAqBA,MAAMK,GAAN,CAAU,OAAV,CAArB;AACAjC,kBAAM0vB,YAAN;AACH;AACJ;;AAED,aAASS,kBAAT,CAA4BrC,GAA5B,EAAiClsB,KAAjC,EAAwCqwB,UAAxC,EAAoD;AAChD,YAAMtK,eAAe,2BAAiB/lB,KAAjB,EAAwBqwB,UAAxB,CAArB;AACA,YAAMliB,WAAWnO,MAAMK,GAAN,CAAU,UAAV,CAAjB;AACA0lB,qBAAapmB,EAAb,CAAgB;AACZ2wB,mBAAO,iBAAM;AACTlyB,sBAAMc,OAAN;;AAEA,oBAAIkuB,SAAJ,EAAe;AACX,wBAAImD,qBAAJ,EAA2B;AACvBnD,kCAAUoD,YAAV,CAAuBC,KAAvB;AACH,qBAFD,MAEO;AACHvE,4BAAIwE,UAAJ,CAAerD,mBAAf;AACH;AACJ;AACJ,aAXW;AAYZsD,iBAAK,eAAM;AACPxE,+BAAe7Y,mBAAf,CAAmC,WAAnC,EAAgDf,WAAhD;AACA4Z,+BAAe7Y,mBAAf,CAAmC,UAAnC,EAA+Cd,UAA/C;AACA2Z,+BAAe7Y,mBAAf,CAAmC,WAAnC,EAAgDlB,WAAhD;AACAhU,sBAAMc,OAAN;AACA,oBAAIqxB,qBAAJ,EAA2B;AACvBnD,8BAAUoD,YAAV,CAAuBC,KAAvB;AACH;AACD,oBAAMvvB,QAAQlB,MAAMK,GAAN,CAAU,OAAV,CAAd;;AAEA,oBAAI8N,aACEjN,gCAAwBA,gCAAzB,IACAlB,MAAMK,GAAN,CAAU,UAAV,KAAyBa,8BAF1B,CAAJ,EAEwD;AACpDgrB,wBAAIwE,UAAJ,CAAerD,mBAAf;AACH;;AAED,oBAAIlf,YAAYjN,8BAAhB,EAAwC;AACpC;AACA;AACA,wBAAIlB,MAAMK,GAAN,CAAU,UAAV,KAAyBL,MAAMK,GAAN,CAAU,YAAV,CAAzB,IAAqDL,MAAMK,GAAN,CAAU,WAAV,MAA2B,OAApF,EAA8F;AAC1F;AACH;AACD,0CAAY8rB,cAAZ,EAA4B,yBAA5B;AACAM,sCAAkBmE,UAAlB,CAA6B,IAA7B;AACH,iBARD,MAQO,IAAIxD,SAAJ,EAAe;AAClB,wBAAI,CAACA,UAAUyD,OAAf,EAAwB;AACpBzD,kCAAU0D,UAAV;AACH,qBAFD,MAEO;AACH1D,kCAAU2D,YAAV;AACH;AACJ;AACJ,aA3CW;AA4CZC,yBAAa;AAAA,uBAAM5D,aAAalB,IAAIjhB,aAAJ,EAAnB;AAAA;AA5CD,SAAhB;;AA+CAkhB,uBAAela,gBAAf,CAAgC,WAAhC,EAA6CM,WAA7C;AACA4Z,uBAAela,gBAAf,CAAgC,WAAhC,EAA6CG,WAA7C;AACA+Z,uBAAela,gBAAf,CAAgC,UAAhC,EAA4CO,UAA5C;;AAEA,eAAOuT,YAAP;AACH;;AAED,aAASxT,WAAT,CAAqB9S,KAArB,EAA4B;AACxB,YAAI2tB,SAAJ,EAAe;AACXA,sBAAU6D,SAAV,CAAoBxxB,KAApB;AACH;AACJ;;AAED,aAAS2S,WAAT,CAAqB3S,KAArB,EAA4B;AACxB,YAAI2tB,aAAa,CAACA,UAAUyD,OAAxB,IAAmCpxB,MAAM6K,MAAN,CAAaqJ,QAAb,KAA0B,QAAjE,EAA2E;AACvEyZ,sBAAU0D,UAAV;AACH;AACJ;;AAED,aAASte,UAAT,CAAoB/S,KAApB,EAA2B;AACvB,YAAI2tB,aAAaA,UAAUyD,OAAvB,IAAkCpxB,MAAMyxB,aAAxC,IAAyD,CAAC/E,eAAejZ,QAAf,CAAwBzT,MAAMyxB,aAA9B,CAA9D,EAA4G;AACxG9D,sBAAU0D,UAAV;AACH;AACJ;;AAED,aAASlC,eAAT,CAAyB5uB,KAAzB,EAAgCmxB,MAAhC,EAAwC;AACpC,+BAAahF,cAAb,EAA6B,gBAA7B,EAA+C,gBAAgBgF,MAA/D;AACH;;AAED,aAASpC,mBAAT,CAA6B/uB,KAA7B,EAAoCoxB,WAApC,EAAiD;AAC7C,8BAAYjF,cAAZ,EAA4B,qBAA5B,EAAmD,CAAC,CAACiF,WAArD;AACA,YAAMC,uBAAuBlF,eAAeG,aAAf,CAA6B,YAA7B,CAA7B;AACA,wBAAM+E,oBAAN,EAA4B;AACxBC,wBAAYF,eAAe;AADH,SAA5B;AAGH;;AAED,aAASvC,oBAAT,CAA8B7uB,KAA9B,EAAqCC,SAArC,EAAgD;AAC5C,8BAAYksB,cAAZ,EAA4B,uBAA5B,EAAqDlsB,SAArD;AACH;;AAED,aAASouB,iBAAT,CAA2B7tB,GAA3B,EAAgC;AAC5B,YAAI,CAACA,IAAI+wB,IAAT,EAAe;AACX,gBAAIlzB,OAAOgC,GAAP,CAAW,UAAX,CAAJ,EAA4B;AACxBtC,qBAAK2yB,UAAL,CAAgBrD,mBAAhB;AACH;AACJ,SAJD,MAIO;AACHtvB,iBAAKwG,KAAL,CAAW8oB,mBAAX;AACAtvB,iBAAKkN,aAAL,CAAmB,KAAnB;AACAlG,mBAAOysB,IAAP,CAAYhxB,IAAI+wB,IAAhB,EAAsB/wB,IAAIixB,UAA1B;AACH;AACJ;;AAED,SAAKvB,WAAL,GAAmB,UAAU/hB,QAAV,EAAoB;AACnCif,oBAAYjf,QAAZ;;AAEA,8BAAYge,cAAZ,EAA4B,yBAA5B;;AAEAhe,iBAAS0hB,MAAT,CAAgB9xB,IAAhB,EAAsBM,MAAtB;;AAEA;AACA,YAAIuuB,WAAJ,EAAiB;AACbmB,kCAAsBpB,UAAtB,EAAkCC,WAAlC;AACAze,qBAASL,MAAT,CAAgB6e,UAAhB,EAA4BC,WAA5B;AACAH,8BAAkBmE,UAAlB,CAA6B,IAA7B;AACH;;AAEDziB,iBAASxO,EAAT,CAAY,yBAAZ,EAAuC,YAAW;AAC9C,gBAAMuB,QAAQ7C,OAAOgC,GAAP,CAAW,OAAX,CAAd;AACA,gBAAIa,mCAA2BA,iCAA/B,EAA0D;AACtDurB,kCAAkBmE,UAAlB,CAA6B,IAA7B;AACH;AACJ,SALD;;AAOAziB,iBAASxO,EAAT,CAAY,KAAZ,EAAmBvB,MAAMc,OAAzB,EAAkCd,KAAlC;;AAEA,YAAIC,OAAOgC,GAAP,CAAW,UAAX,CAAJ,EAA4B;AACxB+sB,sBAAUmC,aAAV;AACH;AACJ,KA1BD;;AA4BA,SAAKY,cAAL,GAAsB,YAAY;AAC9B,YAAI/C,SAAJ,EAAe;AACXA,sBAAUsE,OAAV,CAAkBrzB,MAAlB;AACA+uB,wBAAY,IAAZ;AACH;;AAED,2BAASjB,cAAT,EAAyB,yBAAzB;AACH,KAPD;;AASA;AACA,QAAMkD,cAAc,SAAdA,WAAc,CAAUrvB,KAAV,EAAiBkB,KAAjB,EAAwB;;AAExC;AACA,YAAIA,SAASksB,SAAT,IAAsBptB,MAAMK,GAAN,CAAU,gBAAV,CAA1B,EAAuD;AACnD+sB,sBAAUuE,cAAV,CAAyB5zB,IAAzB,EAA+BiC,KAA/B;AACH;;AAED,YAAIitB,kBAAkB2E,qBAAlB,EAAJ,EAA+C;AAC3C,gBAAI1wB,KAAJ,EAAW;AACP+rB,kCAAkB4E,iBAAlB;AACH,aAFD,MAEO;AACH5E,kCAAkB6E,cAAlB;AACH;AACDC,iCAAqB5F,cAArB,EAAqCjrB,KAArC;AACH,SAPD,MAOO,IAAI4qB,KAAJ,EAAW;AACdiG,iCAAqB5F,cAArB,EAAqCjrB,KAArC;AACH,SAFM,MAEA;AACH;AACA,gBAAM6V,WAAW/W,MAAM0W,QAAN,EAAjB;AACAK,qBAAS9L,aAAT,CAAuB/J,KAAvB;AACH;AACJ,KArBD;;AAuBA,aAAS4tB,aAAT,CAAuBkD,WAAvB,EAAoCC,YAApC,EAAkDC,eAAlD,EAAmE;AAC/D,YAAMC,WAAWH,gBAAgB7xB,SAAjC;AACA,YAAMiyB,YAAYH,iBAAiB9xB,SAAnC;AACA,YAAMkyB,cAAc;AAChBvZ,mBAAOkZ;AADS,SAApB;;AAIA;AACA,YAAII,aAAaF,eAAjB,EAAkC;AAC9B7zB,mBAAO6B,GAAP,CAAW,aAAX,EAA0B,IAA1B;AACH;AACD,YAAI,CAAC7B,OAAOgC,GAAP,CAAW,aAAX,CAAL,EAAgC;AAC5B;AACA;AACA,gBAAIinB,SAAS2K,YAAb;AACA,gBAAI,qBAAE/a,QAAF,CAAWoQ,MAAX,KAAsBA,WAAW,CAArC,EAAwC;AACpCA,yBAAStjB,KAAK4S,GAAL,CAAS0Q,MAAT,oCAAT;AACH;AACD+K,wBAAY/K,MAAZ,GAAqBA,MAArB;AACH;;AAED,YAAI6K,YAAYC,SAAhB,EAA2B;AACvB/zB,mBAAO6B,GAAP,CAAW,OAAX,EAAoB8xB,WAApB;AACA3zB,mBAAO6B,GAAP,CAAW,QAAX,EAAqB+xB,YAArB;AACH;;AAED,wBAAM9F,cAAN,EAAsBkG,WAAtB;AACH;;AAED,aAASrE,YAAT,CAAsBN,cAAtB,EAAsCC,eAAtC,EAAuD;AACnD,YAAI,CAACD,cAAD,IAAmBrK,MAAM,IAAIqK,cAAV,CAAvB,EAAkD;AAC9CA,6BAAiBrvB,OAAOgC,GAAP,CAAW,gBAAX,CAAjB;AACA,gBAAI,CAACqtB,cAAL,EAAqB;AACjB;AACH;AACJ;AACD,YAAI,CAACC,eAAD,IAAoBtK,MAAM,IAAIsK,eAAV,CAAxB,EAAoD;AAChDA,8BAAkBtvB,OAAOgC,GAAP,CAAW,iBAAX,CAAlB;AACA,gBAAI,CAACstB,eAAL,EAAsB;AAClB;AACH;AACJ;;AAED,YAAIpB,QAAJ,EAAc;AACVA,qBAASze,MAAT,CAAgB4f,cAAhB,EAAgCC,eAAhC,EAAiDtvB,OAAOgC,GAAP,CAAW,YAAX,CAAjD;AACH;;AAED,YAAM0W,WAAW1Y,OAAOqY,QAAP,EAAjB;AACA,YAAI,CAACK,QAAL,EAAe;AACX;AACH;AACDA,iBAASjJ,MAAT,CAAgB4f,cAAhB,EAAgCC,eAAhC,EAAiDtvB,OAAOgC,GAAP,CAAW,YAAX,CAAjD;AACH;;AAED,SAAKyN,MAAL,GAAc,UAAUkkB,WAAV,EAAuBC,YAAvB,EAAqC;AAC/C,YAAMC,kBAAkB,IAAxB;AACApD,sBAAckD,WAAd,EAA2BC,YAA3B,EAAyCC,eAAzC;AACAhE;AACH,KAJD;AAKA,SAAK3G,WAAL,GAAmByG,YAAnB;;AAEA,aAASsE,mBAAT,GAA+B;AAC3B;AACA,YAAIrF,kBAAkB2E,qBAAlB,EAAJ,EAA+C;AAC3C,gBAAMW,YAAYtF,kBAAkBuF,iBAAlB,EAAlB;AACA,mBAAO,CAAC,EAAED,aAAaA,cAAcpG,cAA7B,CAAR;AACH;AACD;AACA,YAAMpV,WAAW1Y,OAAOqY,QAAP,EAAjB;AACA,eAAOK,SAAS0b,aAAT,EAAP;AACH;;AAGD,aAASjE,wBAAT,CAAkC/uB,KAAlC,EAAyC;AACrC,YAAMizB,aAAar0B,OAAOgC,GAAP,CAAW,YAAX,CAAnB;AACA,YAAMsyB,WAAYlzB,MAAM4pB,OAAN,KAAkBlpB,SAAnB,GAAgCV,MAAM4pB,OAAtC,GAAgDiJ,qBAAjE;;AAEA;AACA;AACA,YAAII,eAAeC,QAAnB,EAA6B;AACzBt0B,mBAAO6B,GAAP,CAAW,YAAX,EAAyByyB,QAAzB;AACH;;AAED/E;AACAjV,qBAAakU,mBAAb;AACAA,8BAAsBpU,WAAWuV,YAAX,EAAyB,GAAzB,CAAtB;AACH;;AAED,aAAS+D,oBAAT,CAA8B/Y,aAA9B,EAA6C4Z,eAA7C,EAA8D;AAC1D,8BAAY5Z,aAAZ,EAA2B,oBAA3B,EAAiD4Z,eAAjD;AACA,wBAAM5f,SAASwa,IAAf,EAAqB,EAAEqF,WAAYD,eAAD,GAAoB,QAApB,GAA+B,EAA5C,EAArB;;AAEA,YAAIA,mBAAmBxF,SAAvB,EAAkC;AAC9B;AACAA,sBAAU0D,UAAV;AACH;;AAED9C;AACAJ;AACH;;AAED,aAAS8B,YAAT,CAAsB1vB,KAAtB,EAA6B6W,UAA7B,EAAyC;AACrC,YAAMic,OAAQjc,eAAe,MAA7B;AACA,8BAAYsV,cAAZ,EAA4B,cAA5B,EAA4C2G,IAA5C;AACH;;AAED,aAASnD,kBAAT,CAA4B3vB,KAA5B,EAAmCyuB,GAAnC,EAAwC;AACpC,YAAMsE,cAAetE,QAAQ,OAA7B;AACA,YAAM1X,WAAW/W,MAAMK,GAAN,CAAU,UAAV,CAAjB;;AAEA,8BAAY8rB,cAAZ,EAA4B,qBAA5B,EAAmD4G,WAAnD;;AAEA,YAAMC,UAAWjc,YAAYA,SAASM,IAAT,CAAchD,OAAd,CAAsB,OAAtB,MAAmC,CAAhE;AACA,YAAMjB,UAAW2f,eAAe,CAACC,OAAjB,GAA4B3G,WAA5B,GAA0CA,YAAY3N,WAAtE;AACA;AACA;AACAyN,uBAAemC,YAAf,CAA4B/B,SAAS0G,EAArC,EAAyC7f,OAAzC;AACH;;AAED,aAASub,aAAT,CAAuB3uB,KAAvB,EAA8BQ,GAA9B,EAAmC;AAC/B,YAAI,CAACA,GAAL,EAAU;AACNgsB,mBAAO/oB,YAAP,CAAoBzD,KAApB,EAA2BA,MAAMK,GAAN,CAAU,cAAV,CAA3B;AACA;AACH;AACD,YAAM6yB,iBAAiB,8BAAelzB,KAAf,EAAsBQ,IAAID,OAA1B,CAAvB;AACA,YAAI,yBAAe4yB,SAAnB,EAA8B;AAC1BD,2BAAe5G,aAAf,CAA6B,UAA7B,EAAyChG,WAAzC,CAAqD,yBAAe6M,SAAf,CAAyB,OAAzB,CAArD;AACH;AACD3G,eAAO7E,IAAP;AACAwE,uBAAe7F,WAAf,CAA2B4M,eAAe1U,UAA1C;AACA,8BAAY2N,cAAZ,EAA4B,sBAA5B,EAAoD,CAAC,CAACnsB,MAAMK,GAAN,CAAU,WAAV,CAAtD;AACH;;AAED,aAAS6oB,aAAT,CAAuBlpB,KAAvB,EAA8B2yB,QAA9B,EAAwCS,QAAxC,EAAkD;AAC9C,YAAI,CAACh1B,MAAM6tB,OAAX,EAAoB;AAChB;AACH;;AAED,YAAImH,gCAAJ,EAA8B;AAC1B,gBAAMF,iBAAiB/G,eAAeG,aAAf,CAA6B,eAA7B,CAAvB;AACA,gBAAI4G,cAAJ,EAAoB;AAChBA,+BAAexP,UAAf,CAA0B0F,WAA1B,CAAsC8J,cAAtC;AACH;AACJ;;AAED,yDAAqBnG,oBAArB;AACA,YAAI4F,kCAAJ,EAAgC;AAC5BU,yBAAaV,QAAb;AACH,SAFD,MAEO;AACH5F,mCAAuB,kDAAsB;AAAA,uBAAMsG,aAAaV,QAAb,CAAN;AAAA,aAAtB,CAAvB;AACH;AACJ;;AAED,aAASU,YAAT,CAAsBnyB,KAAtB,EAA6B;AACzB,YAAI7C,OAAOgC,GAAP,CAAW,UAAX,KAA0Ba,8BAA1B,IAAoD,mBAASirB,cAAT,EAAyB,yBAAzB,CAAxD,EAA6G;AACzG,kCAAYA,cAAZ,EAA4B,yBAA5B;AACH;AACD,+BAAaA,cAAb,EAA6B,cAA7B,EAA6C,cAAcjrB,KAA3D;;AAEA,gBAAQA,KAAR;AACI;AACA;AACA;AACI,oBAAIurB,iBAAJ,EAAuB;AACnBA,sCAAkB9E,IAAlB;AACH;AACD;AACJ;AACI,oBAAI8E,iBAAJ,EAAuB;AACnBA,sCAAkB6G,IAAlB;AACA,wBAAIpyB,kCAA0BksB,SAA1B,IAAuC,CAACA,UAAUyD,OAAtD,EAA+D;AAC3DpE,0CAAkBmE,UAAlB,CAA6B,IAA7B;AACH;AACJ;AACD;AAfR;AAiBH;;AAED,aAAS2C,sBAAT,CAAgCvzB,KAAhC,EAAuCyD,YAAvC,EAAqD;AACjD,YAAM+vB,WAAWxzB,MAAMK,GAAN,CAAU,cAAV,CAAjB;AACA;AACA,YAAI,CAACmzB,QAAL,EAAe;AACX;AACH;;AAED;AACA,YAAMC,WAAWzgB,SAAS0gB,aAAT,CAAuB,KAAvB,CAAjB;AACAD,iBAAS3P,SAAT,GAAqBrgB,aAAakwB,KAAb,IAAsB,EAA3C;AACAH,iBAASI,YAAT,CAAsB,OAAtB,EAA+BH,SAAS1P,WAAxC;AACH;;AAED,aAAS8P,cAAT,CAAwB3xB,IAAxB,EAA8B;AAC1BqqB,iBAASuH,QAAT,CAAkB5xB,QAAQA,KAAK6xB,KAA/B;AACH;;AAED,aAASnE,cAAT,CAAwB5vB,KAAxB,EAA+BkC,IAA/B,EAAqC;AACjC2xB,uBAAe3xB,IAAf;AACA;AACA,YAAI2pB,SAAJ,EAAe;AACX0H,mCAAuBvzB,KAAvB,EAA8BkC,IAA9B;AACH;AACJ;;AAED,QAAMquB,sBAAsB,SAAtBA,mBAAsB,GAAM;AAC9B,YAAMC,eAAepD,aAAaA,UAAUoD,YAA5C;AACA,eAAO,CAAC,EAAEA,gBAAgBA,aAAawD,OAA/B,CAAR;AACH,KAHD;;AAKA,QAAMzE,gBAAgB,SAAhBA,aAAgB,GAAW;AAC7B,2BAASpD,cAAT,EAAyB,aAAzB;;AAEA,YAAIiB,SAAJ,EAAe;AACXA,sBAAUmC,aAAV;AACH;AACJ,KAND;;AAQA,QAAMC,kBAAkB,SAAlBA,eAAkB,GAAW;AAC/B,YAAI,CAACxC,mBAAL,EAA0B;AACtB;AACA;AACH;AACD,YAAII,SAAJ,EAAe;AACXA,sBAAUoC,eAAV,CAA0BnxB,MAA1B;AACH;;AAEDD,cAAMspB,UAAN,CAAiB,EAAjB;AACA,8BAAYyE,cAAZ,EAA4B,CAAC,aAAD,EAAgB,2BAAhB,CAA5B;AACA9tB,eAAO6B,GAAP,CAAW,iBAAX,EAA8B,KAA9B;;AAEA;AACA,YAAM6W,WAAW1Y,OAAOqY,QAAP,EAAjB;AACA,YAAIK,QAAJ,EAAc;AACVA,qBAASkT,YAAT,CAAsBoC,WAAtB;AACH;;AAED;AACAW,4BAAoBvF,4BAApB;AACH,KArBD;;AAuBA,SAAKC,UAAL,GAAkB,UAAU3S,IAAV,EAAgB;AAC9B1W,eAAO6B,GAAP,CAAW,SAAX,EAAsB6U,IAAtB;AACH,KAFD;;AAIA,SAAKgR,YAAL,GAAoB,YAAY;AAC5B,eAAOiH,mBAAP;AACH,KAFD;;AAIA,SAAKje,YAAL,GAAoB,KAAKqE,OAAL,GAAe,YAAY;AAC3C,eAAO+Y,cAAP;AACH,KAFD;;AAIA,SAAK8H,iBAAL,GAAyB,YAAW;AAChC,YAAI7G,SAAJ,EAAe;AACX,mBAAOA,UAAUha,OAAV,EAAP;AACH;AACD,eAAO,IAAP;AACH,KALD;;AAOA,SAAKrF,aAAL,GAAqB,YAAoC;AAAA,YAA1BmmB,iBAA0B,uEAAN,IAAM;;AACrD,YAAMC,aAAa;AACfthB,eAAG,CADY;AAEfC,eAAG,CAFY;AAGfgG,mBAAO6T,cAAc,CAHN;AAIfrF,oBAAQsF,eAAe;AAJR,SAAnB;AAMA,YAAIQ,SAAJ,EAAe;AACX;AACA,gBAAI8G,iBAAJ,EAAuB;AACnBC,2BAAW7M,MAAX,IAAqB8F,UAAUgH,gBAAV,EAArB;AACH;AACJ;AACD,eAAOD,UAAP;AACH,KAdD;;AAgBA,SAAKnmB,WAAL,GAAmB,UAAUqmB,aAAV,EAAyB;AACxC5H,0BAAkB6H,KAAlB;AACA7H,0BAAkB5uB,KAAlB,CAAwBQ,OAAOgC,GAAP,CAAW,IAAX,CAAxB,EAA0Cg0B,aAA1C;AACA5H,0BAAkB3e,MAAlB;AACH,KAJD;;AAMA,SAAKnK,OAAL,GAAe,YAAY;AACvBtF,eAAOsF,OAAP;AACA,+BAAa4wB,SAAb,CAAuBpI,cAAvB;AACA,+BAAavC,MAAb,CAAoB,IAApB;AACA,aAAKqC,OAAL,GAAe,KAAf;AACA,aAAK3pB,GAAL;AACA,yDAAqBwqB,yBAArB;AACAnU,qBAAakU,mBAAb;AACA,YAAIK,WAAJ,EAAiB;AACbA,wBAAYvpB,OAAZ;AACAupB,0BAAc,IAAd;AACH;AACD,YAAID,iBAAJ,EAAuB;AACnBA,8BAAkBtpB,OAAlB;AACAspB,gCAAoB,IAApB;AACH;AACD,YAAIG,SAAJ,EAAe;AACXA,sBAAUsE,OAAV,CAAkBrzB,MAAlB;AACH;AACD,YAAI2uB,mBAAJ,EAAyB;AACrBA,gCAAoBrpB,OAApB;AACAwoB,2BAAe7Y,mBAAf,CAAmC,WAAnC,EAAgDf,WAAhD;AACA4Z,2BAAe7Y,mBAAf,CAAmC,UAAnC,EAA+Cd,UAA/C;AACA2Z,2BAAe7Y,mBAAf,CAAmC,WAAnC,EAAgDlB,WAAhD;AACA4a,kCAAsB,IAAtB;AACH;AACDP,0BAAkB9oB,OAAlB;AACA,YAAI+oB,KAAJ,EAAW;AACPA,kBAAM/oB,OAAN;AACA+oB,oBAAQ,IAAR;AACH;AACD,2BAASruB,OAAOgC,GAAP,CAAW,IAAX,CAAT;AACH,KAhCD;AAiCH;;kBAEc2rB,I;;;;;;;;;;;;;;;;;;kBC/zBA,UAAC9e,EAAD,EAAwB;AAAA,QAAnBsnB,SAAmB,uEAAP,EAAO;;AACnC,WACI,cAAYtnB,EAAZ,4EAAqFsnB,SAArF,qVADJ;AAYH,C;;;;;;;;;;;;;;;;;ACbM,IAAMC,0DAAyB,EAA/B;;AAEA,IAAMC,oCAAc,SAAdA,WAAc,CAAS10B,KAAT,EAAgB;AACvC,QAAMiyB,eAAejyB,MAAMK,GAAN,CAAU,QAAV,CAArB;AACA,QAAIL,MAAMK,GAAN,CAAU,aAAV,CAAJ,EAA8B;AAC1B,eAAO,KAAP;AACH;AACD,QAAI,OAAO4xB,YAAP,KAAwB,QAAxB,IAAoCA,aAAa5d,OAAb,CAAqB,GAArB,IAA4B,CAAC,CAArE,EAAwE;AACpE,eAAO,KAAP;AACH;;AAED;AACA,QAAIsgB,iBAAkB1C,eAAe,CAAhB,IAAsB2C,GAA3C;AACAD,qBAAkB,CAACtR,MAAMsR,cAAN,CAAD,GAAyBA,cAAzB,GAA0C30B,MAAMK,GAAN,CAAU,iBAAV,CAA5D;AACA,QAAI,CAACs0B,cAAL,EAAqB;AACjB,eAAO,KAAP;AACH;;AAED,WAAOA,kBAAkBA,kBAAkBF,sBAA3C;AACH,CAjBM,C;;;;;;;;;;;;;;;;;;ACFP;;;;AACA;;;;AAEA,IAAMI,QAAQ,EAAd;AACA,IAAMC,WAAW,EAAjB;;AAEA,IAAIC,6BAAJ;AACA,IAAIC,6BAA6B,CAAC,CAAlC;;AAEA,SAASC,4BAAT,GAAwC;AACpC,QAAMC,uBAAuBnwB,OAAOmwB,oBAApC;AACA,QAAI,CAACH,oBAAL,EAA2B;AACvB;AACAA,+BAAuB,IAAIG,oBAAJ,CAAyB,UAACC,OAAD,EAAa;AACzD,gBAAIA,WAAWA,QAAQ9xB,MAAvB,EAA+B;AAC3B,qBAAK,IAAIuR,IAAIugB,QAAQ9xB,MAArB,EAA6BuR,GAA7B,GAAmC;AAC/B,wBAAMC,QAAQsgB,QAAQvgB,CAAR,CAAd;AACA,yBAAK,IAAI4O,IAAIqR,MAAMxxB,MAAnB,EAA2BmgB,GAA3B,GAAiC;AAC7B,4BAAI4R,OAAOP,MAAMrR,CAAN,CAAX;AACA,4BAAI3O,MAAMvK,MAAN,KAAiB8qB,KAAKrmB,YAAL,EAArB,EAA0C;AACtCqmB,iCAAKp1B,KAAL,CAAWE,GAAX,CAAe,mBAAf,EAAoC2U,MAAMwgB,iBAA1C;AACA;AACH;AACJ;AACJ;AACJ;AACJ,SAbsB,EAapB,EAAEC,WAAW,CAAC,CAAD,EAAI,IAAJ,EAAU,GAAV,EAAe,IAAf,EAAqB,CAArB,CAAb,EAboB,CAAvB;AAcH;AACJ;;AAED,SAASC,wBAAT,GAAoC;AAChC,qDAAqBP,0BAArB;AACAA,iCAA6B,kDAAsB,SAASQ,iBAAT,GAA6B;AAC5EX,cAAM7e,OAAN,CAAc,gBAAQ;AAClBof,iBAAK9H,YAAL;AACH,SAFD;AAGAuH,cAAM7e,OAAN,CAAc,gBAAQ;AAClB,gBAAIof,KAAKp1B,KAAL,CAAWK,GAAX,CAAe,YAAf,CAAJ,EAAkC;AAC9B+0B,qBAAKtH,YAAL;AACH;AACJ,SAJD;AAKA+G,cAAM7e,OAAN,CAAc,gBAAQ;AAClBof,iBAAKnH,YAAL;AACH,SAFD;AAGH,KAZ4B,CAA7B;AAaH;;AAED,SAASwH,kBAAT,GAA8B;AAC1BZ,UAAM7e,OAAN,CAAc,gBAAQ;AAClBof,aAAKp1B,KAAL,CAAWE,GAAX,CAAe,WAAf,EAA4B,0BAA5B;AACH,KAFD;AAGH;;AAED8S,SAASf,gBAAT,CAA0B,kBAA1B,EAA8CwjB,kBAA9C;AACAziB,SAASf,gBAAT,CAA0B,wBAA1B,EAAoDwjB,kBAApD;AACA1wB,OAAOkN,gBAAP,CAAwB,QAAxB,EAAkCsjB,wBAAlC;AACAxwB,OAAOkN,gBAAP,CAAwB,mBAAxB,EAA6CsjB,wBAA7C;;AAEAxwB,OAAOkN,gBAAP,CAAwB,cAAxB,EAAwC,YAAM;AAC1Ce,aAASM,mBAAT,CAA6B,kBAA7B,EAAiDmiB,kBAAjD;AACAziB,aAASM,mBAAT,CAA6B,wBAA7B,EAAuDmiB,kBAAvD;AACA1wB,WAAOuO,mBAAP,CAA2B,QAA3B,EAAqCiiB,wBAArC;AACAxwB,WAAOuO,mBAAP,CAA2B,mBAA3B,EAAgDiiB,wBAAhD;AACH,CALD;;kBAOe;AACXpG,SAAK,aAASiG,IAAT,EAAe;AAChBP,cAAMnnB,IAAN,CAAW0nB,IAAX;AACH,KAHU;AAIXxL,YAAQ,gBAASwL,IAAT,EAAe;AACnB,YAAMrzB,QAAQ8yB,MAAMxgB,OAAN,CAAc+gB,IAAd,CAAd;AACA,YAAIrzB,UAAU,CAAC,CAAf,EAAkB;AACd8yB,kBAAMa,MAAN,CAAa3zB,KAAb,EAAoB,CAApB;AACH;AACJ,KATU;AAUXsiB,UAAM,gBAAW;AACb,eAAOwQ,MAAMxxB,MAAb;AACH,KAZU;AAaXwqB,WAbW,mBAaH3R,SAbG,EAaQ;AACf+Y;;AAEA,YAAIH,SAAS5Y,UAAUhP,EAAnB,CAAJ,EAA4B;AACxB;AACH;;AAED4nB,iBAAS5Y,UAAUhP,EAAnB,IAAyB,IAAzB;AACA6nB,6BAAqBlH,OAArB,CAA6B3R,SAA7B;AACH,KAtBU;AAuBXqY,aAvBW,qBAuBDrY,SAvBC,EAuBU;AACjB,YAAI6Y,wBAAwBD,SAAS5Y,UAAUhP,EAAnB,CAA5B,EAAoD;AAChD,mBAAO4nB,SAAS5Y,UAAUhP,EAAnB,CAAP;AACA6nB,iCAAqBR,SAArB,CAA+BrY,SAA/B;AACH;AACJ;AA5BU,C;;;;;;;;;;;;;;;;;kBCjESyZ,a;AAAT,SAASA,aAAT,CAAuB31B,KAAvB,EAA8BoT,OAA9B,EAAuC;AAClD;AACA,QAAIpT,MAAMK,GAAN,CAAU,YAAV,CAAJ,EAA6B;AACzB,eAAO,CAAP;AACH;;AAED;AACA,QAAI,CAACL,MAAMK,GAAN,CAAU,WAAV,CAAL,EAA6B;AACzB,eAAO,CAAP;AACH;AACD;AACA,QAAIg1B,oBAAoBr1B,MAAMK,GAAN,CAAU,mBAAV,CAAxB;;AAEA,QAAIg1B,sBAAsBl1B,SAA1B,EAAqC;AACjC;AACAk1B,4BAAoBO,kBAAkBxiB,OAAlB,CAApB;AACH;;AAED,WAAOiiB,iBAAP;AACH;;AAED,SAASO,iBAAT,CAA2BtrB,MAA3B,EAAmC;AAC/B,QAAMurB,OAAO7iB,SAAS8iB,eAAtB;AACA,QAAMtI,OAAOxa,SAASwa,IAAtB;AACA,QAAMuI,WAAW;AACbC,aAAK,CADQ;AAEbhV,cAAM,CAFO;AAGbC,eAAO4U,KAAKI,WAAL,IAAoBzI,KAAKyI,WAHnB;AAIbnd,eAAO+c,KAAKI,WAAL,IAAoBzI,KAAKyI,WAJnB;AAKbC,gBAAQL,KAAKM,YAAL,IAAqB3I,KAAK2I,YALrB;AAMb7O,gBAAQuO,KAAKM,YAAL,IAAqB3I,KAAK2I;AANrB,KAAjB;;AASA,QAAI,CAAC3I,KAAKta,QAAL,CAAc5I,MAAd,CAAL,EAA4B;AACxB,eAAO,CAAP;AACH;AACD;AACA,QAAIvF,OAAOqxB,gBAAP,CAAwB9rB,MAAxB,EAAgC+rB,OAAhC,KAA4C,MAAhD,EAAwD;AACpD,eAAO,CAAP;AACH;;AAED,QAAMC,aAAaC,sBAAsBjsB,MAAtB,CAAnB;AACA,QAAI,CAACgsB,UAAL,EAAiB;AACb,eAAO,CAAP;AACH;;AAED,QAAIE,mBAAmBF,UAAvB;AACA,QAAIG,SAASnsB,OAAOoZ,UAApB;AACA,QAAIgT,SAAS,KAAb;;AAEA,WAAO,CAACA,MAAR,EAAgB;AACZ,YAAIC,aAAa,IAAjB;AACA,YAAIF,WAAWjJ,IAAX,IAAmBiJ,WAAWZ,IAA9B,IAAsCY,OAAO9X,QAAP,KAAoB,CAA9D,EAAiE;AAC7D+X,qBAAS,IAAT;AACAC,yBAAaZ,QAAb;AACH,SAHD,MAGO,IAAIhxB,OAAOqxB,gBAAP,CAAwBK,MAAxB,EAAgCG,QAAhC,KAA6C,SAAjD,EAA4D;AAC/DD,yBAAaJ,sBAAsBE,MAAtB,CAAb;AACH;AACD,YAAIE,UAAJ,EAAgB;AACZH,+BAAmBK,wBAAwBF,UAAxB,EAAoCH,gBAApC,CAAnB;AACA,gBAAI,CAACA,gBAAL,EAAuB;AACnB,uBAAO,CAAP;AACH;AACJ;AACDC,iBAASA,OAAO/S,UAAhB;AACH;AACD,QAAMoT,aAAaR,WAAWxd,KAAX,GAAmBwd,WAAWhP,MAAjD;AACA,QAAMyP,mBAAmBP,iBAAiB1d,KAAjB,GAAyB0d,iBAAiBlP,MAAnE;AACA,WAAOwP,aAAcC,mBAAmBD,UAAjC,GAA+C,CAAtD;AACH;;AAED,SAASP,qBAAT,CAA+BtD,EAA/B,EAAmC;AAC/B,QAAI;AACA,eAAOA,GAAGsD,qBAAH,EAAP;AACH,KAFD,CAEE,OAAO/rB,CAAP,EAAU,CAAC,+CAAgD;AAChE;;AAED,SAASqsB,uBAAT,CAAiCG,KAAjC,EAAwCC,KAAxC,EAA+C;AAC3C,QAAMjB,MAAMhyB,KAAK4S,GAAL,CAASogB,MAAMhB,GAAf,EAAoBiB,MAAMjB,GAA1B,CAAZ;AACA,QAAME,SAASlyB,KAAKmT,GAAL,CAAS6f,MAAMd,MAAf,EAAuBe,MAAMf,MAA7B,CAAf;AACA,QAAMlV,OAAOhd,KAAK4S,GAAL,CAASogB,MAAMhW,IAAf,EAAqBiW,MAAMjW,IAA3B,CAAb;AACA,QAAMC,QAAQjd,KAAKmT,GAAL,CAAS6f,MAAM/V,KAAf,EAAsBgW,MAAMhW,KAA5B,CAAd;AACA,QAAMnI,QAAQmI,QAAQD,IAAtB;AACA,QAAMsG,SAAS4O,SAASF,GAAxB;AACA,WAAQld,SAAS,CAAT,IAAcwO,UAAU,CAAzB,IAA+B;AAClC0O,aAAKA,GAD6B;AAElCE,gBAAQA,MAF0B;AAGlClV,cAAMA,IAH4B;AAIlCC,eAAOA,KAJ2B;AAKlCnI,eAAOA,KAL2B;AAMlCwO,gBAAQA;AAN0B,KAAtC;AAQH,C;;;;;;;;;;;;;;;;;QCzFe4P,a,GAAAA,a;QAyEAC,oB,GAAAA,oB;;AA5EhB;;AACA;;AAEO,SAASD,aAAT,CAAuBE,UAAvB,EAAmC;AACtC,QAAI,CAACA,UAAL,EAAiB;AACbA,qBAAa,EAAb;AACH;;AAED,QAAMC,SAASD,WAAWC,MAA1B;AACA,QAAMC,WAAWF,WAAWE,QAA5B;AACA,QAAMje,aAAa+d,WAAW/d,UAA9B;;AAEA,QAAMke,SAAS,EAAf;;AAEAA,WAAOC,UAAP,GAAoBC,cAAcL,WAAWI,UAAzB,CAApB;;AAEAD,WAAOG,UAAP,GAAoBC,cAAcP,WAAWM,UAAzB,CAApB;;AAEAH,WAAOK,KAAP,GAAeC,SAAST,WAAWQ,KAApB,CAAf;;AAEAL,WAAOO,QAAP,GAAkBC,YAAYX,WAAWU,QAAvB,CAAlB;;AAEA,aAASL,aAAT,CAAuBO,gBAAvB,EAAyC;AACrC,YAAIA,oBAAoBX,MAApB,IAA8BC,QAA9B,IAA0Cje,UAA9C,EAA0D;AACtD,gBAAMvb,SAAS,EAAf;;AAEAk6B,+BAAmBA,oBAAoB,EAAvC;AACAl6B,mBAAOm6B,WAAP,GAAqBD,iBAAiBC,WAAjB,IAAgCZ,MAArD;AACAv5B,mBAAOo6B,KAAP,GAAeF,iBAAiBE,KAAjB,IAA0BZ,QAAzC;AACAx5B,mBAAOiX,IAAP,GAAcijB,iBAAiBjjB,IAAjB,IAAyBuiB,QAAvC;AACAx5B,mBAAOub,UAAP,GAAoB2e,iBAAiB3e,UAAjB,IAA+BA,UAAnD;;AAEA,mBAAOvb,MAAP;AACH;AACJ;;AAED,aAAS65B,aAAT,CAAuBQ,gBAAvB,EAAyC;AACrC,YAAIA,oBAAoBd,MAAxB,EAAgC;AAC5B,gBAAMv5B,SAAS,EAAf;;AAEAq6B,+BAAmBA,oBAAoB,EAAvC;AACAr6B,mBAAOs6B,QAAP,GAAkBD,iBAAiBC,QAAjB,IAA6Bf,MAA/C;AACAv5B,mBAAOu6B,IAAP,GAAcF,iBAAiBE,IAA/B;;AAEA,mBAAOv6B,MAAP;AACH;AACJ;;AAED,aAAS+5B,QAAT,CAAkBS,WAAlB,EAA+B;AAC3B,YAAIA,eAAejB,MAAf,IAAyBC,QAAzB,IAAqCje,UAAzC,EAAqD;AACjD,gBAAMvb,SAAS,EAAf;;AAEAw6B,0BAAcA,eAAe,EAA7B;AACAx6B,mBAAOiX,IAAP,GAAcujB,YAAYvjB,IAAZ,IAAoBuiB,QAAlC;AACAx5B,mBAAOy6B,UAAP,GAAoBD,YAAYC,UAAZ,IAA0BlB,MAA9C;AACAv5B,mBAAOub,UAAP,GAAoBif,YAAYjf,UAAZ,IAA0BA,UAA9C;;AAEA,mBAAOvb,MAAP;AACH;AACJ;;AAED,aAASi6B,WAAT,CAAqBS,cAArB,EAAqC;AACjC,YAAIA,kBAAkBlB,QAAlB,IAA8Bje,UAAlC,EAA8C;AAC1C,gBAAMvb,SAAS,EAAf;;AAEA06B,6BAAiBA,kBAAkB,EAAnC;AACA16B,mBAAOiX,IAAP,GAAcyjB,eAAezjB,IAAf,IAAuBuiB,QAArC;AACAx5B,mBAAOub,UAAP,GAAoBmf,eAAenf,UAAf,IAA6BA,UAAjD;;AAEA,mBAAOvb,MAAP;AACH;AACJ;;AAED,WAAOy5B,MAAP;AACH;;AAEM,SAASJ,oBAAT,CAA8BsB,QAA9B,EAAwCzJ,IAAxC,EAA8C;AACjD,QAAI,CAACA,IAAL,EAAW;AACP;AACH;;AAED,aAAS0J,QAAT,CAAkBC,QAAlB,EAA4BC,IAA5B,EAAkCrY,KAAlC,EAAyCsY,YAAzC,EAAuD;AACnD,YAAI,CAACtY,KAAL,EAAY;AACR;AACH;AACD;;;AAGAoY,mBAAW,qBAAOA,QAAP,EAAiB,MAAMF,QAAN,IAAkBI,eAAe,EAAf,GAAoB,GAAtC,CAAjB,CAAX;;AAEA,YAAMC,IAAI,EAAV;AACAA,UAAEF,IAAF,IAAUrY,KAAV;AACA,sBAAIoY,SAASrjB,IAAT,CAAc,IAAd,CAAJ,EAAyBwjB,CAAzB,EAA4BL,QAA5B;AACH;;AAED;AACA;;AAEA,QAAIzJ,KAAKwI,UAAT,EAAqB;AACjBuB,wBAAgB/J,KAAKwI,UAArB;AACH;AACD,QAAIxI,KAAK0I,UAAT,EAAqB;AACjBsB,wBAAgBhK,KAAK0I,UAArB;AACH;AACD,QAAI1I,KAAK4I,KAAT,EAAgB;AACZqB,mBAAWjK,KAAK4I,KAAhB;AACH;AACD,QAAI5I,KAAK8I,QAAT,EAAmB;AACfoB,sBAAclK,KAAK8I,QAAnB;AACH;AACD,QAAI9I,KAAK4I,KAAT,EAAgB;AACZuB,iCAAyBnK,KAAK4I,KAA9B;AACH;;AAED,aAASmB,eAAT,CAAyBj7B,MAAzB,EAAiC;;AAE7B46B,iBAAS;AACL;AACA,gDAFK,EAGL,mBAHK,EAIL,qBAJK,CAAT,EAKG,OALH,EAKY56B,OAAOiX,IALnB;;AAOA,YAAIjX,OAAOo6B,KAAX,EAAkB;AACdQ,qBAAS;AACL;AACA,iDAFK,EAGL,sDAHK,CAAT,EAIG,OAJH,EAIY56B,OAAOo6B,KAJnB;;AAMAQ,qBAAS,CACL,6CADK,CAAT,EAEG,OAFH,EAEY56B,OAAOo6B,KAFnB;;AAIA;AACA;AACA,gCAAQO,QAAR,+DAA0E36B,OAAOo6B,KAAjF,QAA2FO,QAA3F;AACH;AACD,YAAI36B,OAAOm6B,WAAX,EAAwB;AACpBS,qBAAS,CACL,mDADK,EAEL,mDAFK,CAAT,EAGG,OAHH,EAGY56B,OAAOm6B,WAHnB;;AAKA;AACAS,qBAAS;AACL;AACA,2DAFK,EAGL,2CAHK,EAIL,2CAJK,EAKL,4DALK,CAAT,EAMG,OANH,EAMY56B,OAAOm6B,WANnB;;AAQAS,qBAAS,CACL,qBADK,CAAT,EAEG,MAFH,EAEW56B,OAAOo6B,KAFlB;;AAIA;AACA;AACA,gCAAQO,QAAR,qEAAgF36B,OAAOm6B,WAAvF,QAAuGQ,QAAvG;AACA,gCAAQA,QAAR,qEAAgF36B,OAAOm6B,WAAvF,QAAuGQ,QAAvG;AACA,gCAAQA,QAAR,qEAAgF36B,OAAOm6B,WAAvF,QAAuGQ,QAAvG;;AAEA,gCAAQA,QAAR,qDAAgE36B,OAAOm6B,WAAvE,QAAuFQ,QAAvF;AACA,gCAAQA,QAAR,2DAAsE36B,OAAOm6B,WAA7E,QAA6FQ,QAA7F;AACA,gCAAQA,QAAR,2DAAsE36B,OAAOm6B,WAA7E,QAA6FQ,QAA7F;AACA,gCAAQA,QAAR,2DAAsE36B,OAAOm6B,WAA7E,QAA6FQ,QAA7F;AACH;;AAED;AACAC,iBAAS,CACL,sBADK,EAEL,qCAFK,EAGL,sCAHK,CAAT,EAIG,YAJH,EAIiB56B,OAAOub,UAJxB,EAIoC,IAJpC;AAKH;;AAED,aAAS2f,eAAT,CAAyBl7B,MAAzB,EAAiC;;AAE7B46B,iBAAS,CACL,cADK,EAEL,UAFK,CAAT,EAGG,kBAHH,EAGuB56B,OAAOs6B,QAH9B;;AAKAM,iBAAS,CACL,YADK,CAAT,EAEG,kBAFH,EAEuB,kBAAQ56B,OAAOs6B,QAAf,EAAyB,EAAzB,CAFvB;;AAIAM,iBAAS,CACL,UADK,CAAT,EAEG,kBAFH,EAEuB56B,OAAOu6B,IAF9B;;AAIAK,iBAAS,CACL,qCADK,EAEL,yBAFK,CAAT,EAGG,kBAHH,EAGuB56B,OAAOub,UAH9B;AAIH;;AAED,aAAS4f,UAAT,CAAoBn7B,MAApB,EAA4B;;AAExB46B,iBAAS,CACL,YADK,EAEL,mBAFK,EAGL,wBAHK,EAIL,oBAJK,EAKL,kBALK,EAML,2BANK,EAOL,mBAPK,CAAT,EAQG,OARH,EAQY56B,OAAOiX,IARnB;;AAUA2jB,iBAAS,CACL,6BADK,EAEL,yCAFK,EAGL,yCAHK,EAIL,0BAJK,EAKL,iCALK,EAML,iCANK,EAOL,0BAPK,EAQL,0BARK,EASL,wBATK,CAAT,EAUG,OAVH,EAUY56B,OAAOy6B,UAVnB;;AAYAG,iBAAS,CACL,YADK,EAEL,mBAFK,CAAT,EAGG,YAHH,EAGiB56B,OAAOub,UAHxB;AAIH;;AAED,aAAS6f,aAAT,CAAuBp7B,MAAvB,EAA+B;;AAE3B46B,iBAAS,CACL,UADK,EAEL,sBAFK,EAGL,uBAHK,CAAT,EAIG,kBAJH,EAIuB56B,OAAOub,UAJ9B;;AAMAqf,iBAAS,CACL,cADK,EAEL,aAFK,CAAT,EAGG,OAHH,EAGY56B,OAAOub,UAHnB;;AAKAqf,iBAAS,CACL,UADK,CAAT,EAEG,QAFH,EAEa,MAFb;;AAIAA,iBAAS,CACL,mBADK,EAEL,mBAFK,EAGL,uBAHK,EAIL,sBAJK,CAAT,EAKG,OALH,EAKY56B,OAAOiX,IALnB;AAMH;;AAED;AACA;AACA,aAASokB,wBAAT,CAAkCr7B,MAAlC,EAA0C;AACtC,YAAIA,OAAOy6B,UAAX,EAAuB;AACnB,gBAAMa,iBAAiB;AACnBC,uBAAOv7B,OAAOy6B,UADK;AAEnBe,6BAAax7B,OAAOy6B,UAFD;AAGnBgB,wBAAQz7B,OAAOy6B;AAHI,aAAvB;AAKA,gCAAQE,QAAR,wBAAqCW,cAArC,EAAqDX,QAArD;AACA,gCAAQA,QAAR,oCAAiDW,cAAjD,EAAiEX,QAAjE;AACH;AACD,YAAI36B,OAAOiX,IAAX,EAAiB;AACb,gBAAMykB,mBAAmB;AACrBH,uBAAOv7B,OAAOiX,IADO;AAErBukB,6BAAax7B,OAAOiX,IAFC;AAGrBwkB,wBAAQz7B,OAAOiX;AAHM,aAAzB;AAKA,gCAAQ0jB,QAAR,0BAAuCe,gBAAvC,EAAyDf,QAAzD;AACA,gCAAQA,QAAR,sCAAmDe,gBAAnD,EAAqEf,QAArE;AACH;AACJ;AACJ,C;;;;;;;;;;;;;;;;;;kBC5Qc,UAASgB,cAAT,EAAyBC,eAAzB,EAA0CC,cAA1C,EAA0D;AACrE,QAAM9H,qBAAoB4H,eAAe5H,iBAAf,IACtB4H,eAAeG,uBADO,IAEtBH,eAAeI,uBAFO,IAGtBJ,eAAeK,oBAHO,IAItBL,eAAeM,mBAJnB;;AAMA,QAAMjI,kBAAiB4H,gBAAgB5H,cAAhB,IACnB4H,gBAAgBM,oBADG,IAEnBN,gBAAgBO,sBAFG,IAGnBP,gBAAgBQ,mBAHG,IAInBR,gBAAgBS,gBAJpB;;AAMA,QAAMvI,yBAAwB,CAAC,EAAEC,sBAAqBC,eAAvB,CAA/B;;AAEA,SAAK,IAAIld,IAAIwlB,2BAA2B/2B,MAAxC,EAAgDuR,GAAhD,GAAsD;AAClD8kB,wBAAgBznB,gBAAhB,CAAiCmoB,2BAA2BxlB,CAA3B,CAAjC,EAAgE+kB,cAAhE;AACH;;AAED,WAAO;AACHU,gBAAQD,0BADL;AAEHxI,+BAAuB,iCAAW;AAC9B,mBAAOA,sBAAP;AACH,SAJE;AAKHC,2BAAmB,6BAAW;AAC1BA,+BAAkBhjB,KAAlB,CAAwB4qB,cAAxB;AACH,SAPE;AAQH3H,wBAAgB,0BAAW;AACvBA,4BAAejjB,KAAf,CAAqB6qB,eAArB;AACH,SAVE;AAWHlH,2BAAmB,6BAAW;AAC1B,mBAAOkH,gBAAgBlH,iBAAhB,IACHkH,gBAAgBY,8BADb,IAEHZ,gBAAgBa,oBAFb,IAGHb,gBAAgBc,mBAHpB;AAIH,SAhBE;AAiBH72B,iBAAS,mBAAW;AAChB,iBAAK,IAAIiR,KAAIwlB,2BAA2B/2B,MAAxC,EAAgDuR,IAAhD,GAAsD;AAClD8kB,gCAAgBpmB,mBAAhB,CAAoC8mB,2BAA2BxlB,EAA3B,CAApC,EAAmE+kB,cAAnE;AACH;AACJ;AArBE,KAAP;AAuBH,C;;AAjDD,IAAMS,6BAA6B,CAC/B,kBAD+B,EAE/B,wBAF+B,EAG/B,qBAH+B,EAI/B,oBAJ+B,CAAnC,C;;;;;;;;;;;;;;;;;;kBCGe,UAAUX,cAAV,EAA0B;AACrC,QAAIgB,kBAAkB,KAAtB;;AAEA,QAAMC,SAAS,SAATA,MAAS,GAAY;AACvBD,0BAAkB,KAAlB;AACA,8BAAYhB,cAAZ,EAA4B,aAA5B;AACH,KAHD;;AAKA,QAAMkB,cAAc,SAAdA,WAAc,GAAY;AAC5BF,0BAAkB,IAAlB;AACA,2BAAShB,cAAT,EAAyB,aAAzB;AACH,KAHD;;AAKA,QAAMmB,UAAU,SAAVA,OAAU,GAAY;AACxB,YAAI,CAACH,eAAL,EAAsB;AAClBC;AACH;AACJ,KAJD;;AAMAjB,mBAAexnB,gBAAf,CAAgC,OAAhC,EAAyC2oB,OAAzC;AACAnB,mBAAexnB,gBAAf,CAAgC,MAAhC,EAAwCyoB,MAAxC;AACAjB,mBAAexnB,gBAAf,CAAgC,WAAhC,EAA6C0oB,WAA7C;;AAEA,WAAO;AACHh3B,iBAAS,mBAAW;AAChB81B,2BAAenmB,mBAAf,CAAmC,OAAnC,EAA4CsnB,OAA5C;AACAnB,2BAAenmB,mBAAf,CAAmC,MAAnC,EAA2ConB,MAA3C;AACAjB,2BAAenmB,mBAAf,CAAmC,WAAnC,EAAgDqnB,WAAhD;AACH;AALE,KAAP;AAOH,C;;AAjCD,oD;;;;;;;;;;;;;;;;;;;;;;ACAA;;AACA;;;;AACA;;;;;;;;IAEqBE,Y;AACjB,0BAAY76B,KAAZ,EAAmBoT,OAAnB,EAA4B;AAAA;;AACxB,iBAAc,IAAd;;AAEA,aAAKqU,4BAAL;AACA,aAAKqT,UAAL,GAAkB1nB,OAAlB;AACA,aAAKpT,KAAL,GAAaA,KAAb;;AAEA,aAAKqK,EAAL,GAAU,iBAAO+I,OAAP,EAAgB,EAAEmB,iBAAiB,IAAnB,EAAyBjC,SAAS,IAAlC,EAAhB,EAA0D3S,EAA1D,CAA6D;AACnE,yBAAa,KAAKomB,YADiD;AAEnE,qCAAyB,gCAAW;AAChC,oBAAI,KAAKgV,2BAAT,EAAsC;AAClC,yBAAKA,2BAAL;AACA;AACH;AACD,qBAAK77B,OAAL,CAAa,aAAb;AACH;AARkE,SAA7D,EASP,IATO,CAAV;AAUH;;;;kCAES;AACN,gBAAI,KAAKmL,EAAT,EAAa;AACT,qBAAKA,EAAL,CAAQ1G,OAAR;AACA,qBAAK0G,EAAL,GAAU,KAAKywB,UAAL,GAAkB,KAAK96B,KAAL,GAAa,IAAzC;AACA,qBAAKynB,4BAAL;AACH;AACJ;;;qCAEYjnB,G,EAAK;AACd,gBAAI,KAAKR,KAAL,CAAWK,GAAX,CAAe,cAAf,CAAJ,EAAoC;AAChC;AACH;AACD,gBAAI,KAAK26B,qBAAT,EAAgC;AAC5B,qBAAKA,qBAAL,CAA2Bx6B,GAA3B;AACA;AACH;AACD,iBAAKtB,OAAL,CAAcsB,IAAIrB,IAAJ,kBAAD,GAAuB,OAAvB,GAAiC,KAA9C;AACH;;;kCAES;AACN,mBAAO,KAAK27B,UAAZ;AACH;;;kDAEyB/U,Y,EAAckV,kB,EAAoB;AACxD,iBAAKD,qBAAL,GAA6BjV,YAA7B;AACA,iBAAKgV,2BAAL,GAAmCE,sBAAsB,IAAzD;AACH;;;uDAE8B;AAC3B,iBAAKD,qBAAL,GAA6B,IAA7B;AACA,iBAAKD,2BAAL,GAAmC,IAAnC;AACH;;;;;;kBAnDgBF,Y;;;;;;;;;;;;;;;;;;;;ACJrB;;AACA;;AACA;;;;AACA;;AACA;;AACA;;AACA;;;;;;AAGA,IAAIK,gBAAJ;;AAEA,IAAMC,YAAY;AACdC,UAAM,IADQ;AAEdC,uBAAmB,EAFL;AAGdC,eAAW,IAHG;AAIdC,cAAU,EAJI;AAKdC,iBAAa,GALC;AAMdC,eAAW,IANG,EAMG;AACjBC,kBAAc,qBAAEC,QAPF;AAQdC,mBAAe;AARD,CAAlB;;AAWA;;;;;AAKA,IAAMC,mBAAmB,SAAnBA,gBAAmB,CAAUn8B,SAAV,EAAqB;AAAA;;AAE1C,QAAMrB,SAASqB,UAAU0sB,MAAzB;;AAEA,QAAIlH,iBAAJ;AACA,QAAI4W,uBAAJ;AACA,QAAIC,qBAAJ;AACA,QAAIC,mBAAJ;AACA,QAAIC,iBAAJ;AACA,QAAIC,wBAAJ;AACA,QAAIC,uBAAJ;AACA,QAAIC,mBAAJ;AACA,QAAIC,qBAAJ;;AAEAJ,eAAWjpB,SAAS0gB,aAAT,CAAuB,KAAvB,CAAX;AACAuI,aAASK,SAAT,GAAqB,sBAArB;;AAEA,SAAKhJ,IAAL,GAAY,YAAY;AACpB,2BAAS2I,QAAT,EAAmB,qBAAnB;AACH,KAFD;;AAIA,SAAKtU,IAAL,GAAY,YAAY;AACpB,8BAAYsU,QAAZ,EAAsB,qBAAtB;AACH,KAFD;;AAIA;AACA,SAAKM,QAAL,GAAgB,UAAUC,QAAV,EAAoB;AAChC,YAAIn+B,OAAOgC,GAAP,CAAW,wBAAX,CAAJ,EAA0C;AACtC;AACH;;AAED07B,uBAAe,EAAf;AACAD,yBAAiBU,QAAjB;AACA,YAAI,CAACA,QAAL,EAAe;AACX,iBAAK5L,UAAL;AACA;AACH;AACD,aAAK6L,UAAL,CAAgBD,QAAhB,EAA0BR,UAA1B;AACH,KAZD;;AAcA,SAAKluB,MAAL,GAAc,YAAY;AACtB4uB;AACA,aAAK9L,UAAL,CAAgB,IAAhB;AACH,KAHD;;AAKA,SAAKA,UAAL,GAAkB,UAAU+L,iBAAV,EAA6B;AAC3CA,4BAAoB,CAAC,CAACA,iBAAtB;AACA,YAAIzB,OAAJ,EAAa;AACTA,oBAAQ0B,WAAR,CAAoB73B,MAApB,EAA4Bg3B,YAA5B,EAA0CE,QAA1C,EAAoDU,iBAApD;AACH;AACJ,KALD;;AAOA,SAAKF,UAAL,GAAkB,UAAUj7B,KAAV,EAAiBq7B,SAAjB,EAA4B;AAC1C,YAAI,CAACr7B,KAAD,IAAU,CAACA,MAAMnC,IAAjB,IAAyB,CAACw9B,SAA1B,IAAuCx+B,OAAOgC,GAAP,CAAW,wBAAX,CAA3C,EAAiF;AAC7E;AACH;;AAED,YAAMqH,MAAM,KAAKo1B,oBAAL,CAA0Bt7B,KAA1B,EAAiCq7B,SAAjC,CAAZ;AACA,YAAIn1B,QAAQ,KAAZ,EAAmB;AACf;AACH;;AAED,YAAM2G,OAAO,KAAK0uB,cAAL,CAAoBv7B,MAAMnC,IAA1B,EAAgCqI,GAAhC,CAAb;;AAEA,aAAKs1B,iBAAL,CAAuB3uB,IAAvB;AACA,aAAKuiB,UAAL,CAAgB,IAAhB;AACH,KAdD;;AAgBA,SAAKmM,cAAL,GAAsB,UAAUE,OAAV,EAAmBv1B,GAAnB,EAAwB;AAC1C,eAAO,qBAAEmG,MAAF,CAASovB,OAAT,EAAkB,UAAU5e,GAAV,EAAe;AACpC,mBAAO3W,OAAQ2W,IAAI5X,SAAZ,KAA2B,CAAC4X,IAAI+C,OAAL,IAAgB1Z,OAAO2W,IAAI+C,OAAtD,CAAP;AACH,SAFM,CAAP;AAGH,KAJD;;AAMA,SAAK4b,iBAAL,GAAyB,UAAU3uB,IAAV,EAAgB;AACrC;AACA,YAAI,CAACA,KAAKhL,MAAV,EAAkB;AACd04B,2BAAe,EAAf;AACH,SAFD,MAEO,IAAI,qBAAEmB,UAAF,CAAa7uB,IAAb,EAAmB0tB,YAAnB,EAAiC14B,MAArC,EAA6C;AAChD,+BAAS64B,eAAT,EAA0B,2BAA1B;AACAH,2BAAe1tB,IAAf;AACH;;AAED,eAAO0tB,YAAP;AACH,KAVD;;AAYA,SAAKe,oBAAL,GAA4B,UAAUt7B,KAAV,EAAiBq7B,SAAjB,EAA4B;AACpD,YAAMrsB,SAAShP,MAAMgP,MAArB;AACA,YAAMuM,WAAW8f,UAAU9f,QAA3B;;AAEA;AACA,YAAIvM,MAAJ,EAAY;AACR,gBAAIuM,YAAY,qBAAE7F,QAAF,CAAW6F,SAASvM,MAAT,CAAX,CAAhB,EAA8C;AAC1C,uBAAOuM,SAASvM,MAAT,CAAP;AACH;AACD;AACH,SALD,MAKO,IAAIqsB,UAAUj7B,QAAV,GAAqB,CAAzB,EAA4B;AAC/B;AACA,mBAAOi7B,UAAU57B,QAAV,GAAqB47B,UAAUj7B,QAAtC;AACH;;AAED;AACA,eAAOi7B,UAAU57B,QAAjB;AACH,KAjBD;;AAmBA,SAAKqzB,KAAL,GAAa,YAAY;AACrB,wBAAM2H,QAAN;AACH,KAFD;;AAIA;;;;;;AAMA,SAAKp+B,KAAL,GAAa,UAAUs/B,eAAV,EAA2BjsB,OAA3B,EAAoC;AAC7CgrB,0BAAkBlpB,SAAS0gB,aAAT,CAAuB,KAAvB,CAAlB;AACAyI,yBAAiBnpB,SAAS0gB,aAAT,CAAuB,MAAvB,CAAjB;AACAwI,wBAAgBI,SAAhB,GAA4B,6BAA5B;AACAH,uBAAeG,SAAf,GAA2B,2BAA3B;;AAEApX,mBAAW,SAAc,EAAd,EAAkBiW,SAAlB,EAA6BjqB,OAA7B,CAAX;;AAEAkrB,qBAAajB,UAAUM,SAAvB;AACA2B,sBAAclY,SAASqW,QAAvB;;AAEA,YAAM8B,cAAcnY,SAASmY,WAA7B;AACA,YAAMzB,gBAAgB1W,SAAS0W,aAA/B;AACA,YAAMN,YAAYpW,SAASoW,SAA3B;AACAe,uBAAe,EAAf;AACA,YAAMiB,YAAY,EAAlB;;AAEAC,sBAAcD,SAAd,EAAyBpY,QAAzB;;AAEA,YAAImY,eAAezB,kBAAkBT,UAAUS,aAA/C,EAA8D;AAC1DS,yBAAamB,eAAb,GAA+B,kBAAQH,eAAe,SAAvB,EAAkCzB,aAAlC,CAA/B;AACH;;AAED6B,sBAAcnC,SAAd,EAAyBgC,SAAzB,EAAoCpY,SAASsW,WAA7C;;AAEA,YAAI,CAACtW,SAASkW,IAAV,IAAkBE,cAAc,IAApC,EAA0C;AACtCmC,0BAAc,SAAd,EAAyBH,SAAzB;AACH;;AAED,wBAAMpB,eAAN,EAAuBG,YAAvB;AACA,wBAAMF,cAAN,EAAsBmB,SAAtB;AACAI,4BAAoBP,eAApB,EAAqCG,SAArC;;AAEApB,wBAAgB5V,WAAhB,CAA4B6V,cAA5B;AACAF,iBAAS3V,WAAT,CAAqB4V,eAArB;;AAEA79B,eAAOqD,MAAP,CAAc,eAAd,EAA+B,UAAU1B,KAAV,EAAiB29B,aAAjB,EAAgC;AAC3D,iBAAKpB,QAAL,CAAcoB,aAAd;AACH,SAFD,EAEG,IAFH;;AAIAt/B,eAAO6B,GAAP,CAAW,UAAX,EAAuBglB,QAAvB;AACH,KAzCD;;AA2CA,SAAK9R,OAAL,GAAe,YAAY;AACvB,eAAO6oB,QAAP;AACH,KAFD;;AAIA,SAAKt4B,OAAL,GAAe,YAAW;AACtBtF,eAAOiE,GAAP,CAAW,IAAX,EAAiB,IAAjB,EAAuB,IAAvB;AACA,aAAKA,GAAL;AACH,KAHD;;AAKA,aAAS86B,aAAT,GAAyB;AACrB,YAAI,CAAC,qBAAEQ,QAAF,CAAW1Y,SAASqW,QAApB,CAAL,EAAoC;AAChC;AACH;;AAED,YAAMjU,SAASjpB,OAAOgC,GAAP,CAAW,iBAAX,CAAf;;AAEA,YAAI,CAACinB,MAAL,EAAa;AACTjpB,mBAAO0E,IAAP,CAAY,wBAAZ,EAAsCq6B,aAAtC,EAAqD,IAArD;AACA;AACH;;AAED;AACAhB,qBAAajB,UAAUM,SAAV,GAAsBvW,SAASqW,QAA/B,GAA0CJ,UAAUI,QAAjE;AACH;;AAED,aAASmB,YAAT,GAAwB;AACpB,YAAMpV,SAASjpB,OAAOgC,GAAP,CAAW,iBAAX,CAAf;;AAEA,YAAI,CAACinB,MAAL,EAAa;AACT;AACH;;AAED,YAAMiU,WAAWv3B,KAAKC,KAAL,CAAWqjB,SAAS8U,UAApB,CAAjB;;AAEA,YAAI/9B,OAAOgC,GAAP,CAAW,wBAAX,CAAJ,EAA0C;AACtCw9B,kCAAsBx/B,OAAOgC,GAAP,CAAW,IAAX,CAAtB,EAAwCk7B,QAAxC;AACH,SAFD,MAEO;AACH,4BAAMU,QAAN,EAAgB;AACZV,0BAAUA,WAAW;AADT,aAAhB;AAGH;AACJ;;AAED,aAASmC,mBAAT,CAA6BjF,QAA7B,EAAuC6E,SAAvC,EAAkD;AAC9CZ;AACAoB,6BAAqBrF,QAArB,EAA+B6E,SAA/B;AACAS,6BAAqBtF,QAArB,EAA+B6E,SAA/B;AACH;;AAED,aAASS,oBAAT,CAA8BtF,QAA9B,EAAwC6E,SAAxC,EAAmD;AAC/C;AACA,sBAAI,MAAM7E,QAAN,GAAiB,yBAArB,EAAgD4D,YAAhD,EAA8D5D,QAA9D;AACA,sBAAI,MAAMA,QAAN,GAAiB,qBAArB,EAA4C6E,SAA5C,EAAuD7E,QAAvD;AACH;;AAED,aAASqF,oBAAT,CAA8BrF,QAA9B,EAAwC6E,SAAxC,EAAmD;AAC/C,YAAI,qBAAQU,MAAZ,EAAoB;AAChB;AACA,0BAAI,MAAMvF,QAAN,GAAiB,uDAArB,EAA8E;AAC1E+E,iCAAiBF,UAAUE;AAD+C,aAA9E,EAEG/E,QAFH,EAEa,IAFb;AAGH;;AAED,sBAAI,MAAMA,QAAN,GAAiB,8CAArB,EAAqE4D,YAArE,EAAmF5D,QAAnF,EAA6F,IAA7F;AACA,sBAAI,MAAMA,QAAN,GAAiB,iBAArB,EAAwC6E,SAAxC,EAAmD7E,QAAnD,EAA6D,IAA7D;AACH;;AAED,aAASoF,qBAAT,CAA+BpF,QAA/B,EAAyC8C,QAAzC,EAAmD;AAC/C;AACAc,qBAAad,QAAb,GAAwBA,WAAW,IAAnC;AACA,sBAAI,MAAM9C,QAAN,GAAiB,8CAArB,EAAqE4D,YAArE,EAAmF5D,QAAnF,EAA6F,IAA7F;AACH;;AAED,aAAS8E,aAAT,CAAuBD,SAAvB,EAAkCpsB,OAAlC,EAA2C;AACvC,YAAMmoB,QAAQnoB,QAAQmoB,KAAtB;AACA,YAAMmC,cAActqB,QAAQsqB,WAA5B;AACA,YAAInC,SAASmC,gBAAgBL,UAAUK,WAAvC,EAAoD;AAChD8B,sBAAUjE,KAAV,GAAkB,kBAAQA,SAAS,SAAjB,EAA4BmC,WAA5B,CAAlB;AACH;;AAED,YAAItqB,QAAQkqB,IAAZ,EAAkB;AACd,gBAAM6C,UAAU/sB,QAAQssB,eAAxB;AACA,gBAAMU,YAAYhtB,QAAQmqB,iBAA1B;AACA,gBAAI4C,YAAY9C,UAAUqC,eAAtB,IAAyCU,cAAc/C,UAAUE,iBAArE,EAAwF;AACpFiC,0BAAUE,eAAV,GAA4B,kBAAQS,OAAR,EAAiBC,SAAjB,CAA5B;AACH;AACJ,SAND,MAMO;AACHZ,sBAAUjkB,UAAV,GAAuB,aAAvB;AACH;;AAED,YAAInI,QAAQitB,UAAZ,EAAwB;AACpBb,sBAAUa,UAAV,GAAuBjtB,QAAQitB,UAA/B;AACH;;AAED,YAAIjtB,QAAQktB,SAAZ,EAAuB;AACnBd,sBAAUc,SAAV,GAAsBltB,QAAQktB,SAA9B;AACH;;AAED,YAAIltB,QAAQmtB,UAAZ,EAAwB;AACpBf,sBAAUe,UAAV,GAAuBntB,QAAQmtB,UAA/B;AACH;;AAED,YAAIntB,QAAQotB,cAAZ,EAA4B;AACxBhB,sBAAUgB,cAAV,GAA2BptB,QAAQotB,cAAnC;AACH;AACJ;;AAED,aAASb,aAAT,CAAuBc,MAAvB,EAA+BC,MAA/B,EAAuChD,WAAvC,EAAoD;AAChD,YAAMnC,QAAQ,kBAAQ,SAAR,EAAmBmC,WAAnB,CAAd;AACA,YAAI+C,WAAW,YAAf,EAA6B;AAAE;AAC3BC,mBAAOC,UAAP,GAAoB,eAAepF,KAAnC;AACH,SAFD,MAEO,IAAIkF,WAAW,QAAf,EAAyB;AAAE;AAC9BC,mBAAOC,UAAP,GAAoB,aAAapF,KAAb,GAAqB,cAArB,GAAsCA,KAAtC,GAA8C,cAA9C,GAA+DA,KAAnF;AACH,SAFM,MAEA,IAAIkF,WAAW,WAAf,EAA4B;AAAE;AACjCC,mBAAOC,UAAP,GAAoB,gBAAgBpF,KAApC;AACH,SAFM,MAEA,IAAIkF,WAAW,SAAf,EAA0B;AAAE;AAC/BC,mBAAOC,UAAP,GAAoB,gBAAgBpF,KAAhB,GAAwB,aAAxB,GAAwCA,KAAxC,GAChB,cADgB,GACCA,KADD,GACS,aADT,GACyBA,KADzB,GACiC,gBADjC,GAEhBA,KAFgB,GAER,eAFQ,GAEUA,KAFV,GAEkB,gBAFlB,GAEqCA,KAFrC,GAGhB,eAHgB,GAGEA,KAHtB;AAIH;AACJ;;AAED,QAAMqF,cAAc,SAAdA,WAAc,CAACl0B,CAAD,EAAO;AACvBwxB,qBAAaxxB,CAAb;AACA,cAAKiyB,UAAL,CAAgBX,cAAhB,EAAgCE,UAAhC;AACH,KAHD;;AAKA,aAAS2C,oBAAT,CAA8B3+B,KAA9B,EAAqCsB,YAArC,EAAmD;AAAA;;AAC/C,YAAIA,aAAa+B,MAAb,KAAwB,CAA5B,EAA+B;AAC3B;AACA;AACH;;AAED;AACA,YAAI,CAACrD,MAAMK,GAAN,CAAU,wBAAV,CAAD,IAAwC,CAAC66B,OAA7C,EAAsD;AAClD0D,iCAAqBt5B,KAArB,CAA2B,UAACC,KAAD,EAAW;AAClC,uBAAKrG,OAAL,gBAAoB;AAChBqB,6BAAS,kCADO;AAEhBc,4BAAQkE;AAFQ,iBAApB;AAIH,aALD;AAMAvF,kBAAMsC,GAAN,CAAU,qBAAV,EAAiCq8B,oBAAjC,EAAuD,IAAvD;AACH;AACJ;;AAED,aAASC,kBAAT,GAA8B;AAC1B,eAAO,0EAAqC,UAAUxf,OAAV,EAAmB;AAC3D8b,sBAAU,mBAAA9b,CAAQ,0BAAR,EAA4BC,OAAtC;AACH,SAFM,2EAAP;AAGH;;AAEDhhB,WAAOsB,EAAP,CAAU,qBAAV,EAAiC,YAAY;AACzCq8B,qBAAa,IAAb;AACAD,uBAAe,EAAf;AACH,KAHD,EAGG,IAHH;;AAKA19B,WAAOsB,EAAP,qBAAsB,UAAU6K,CAAV,EAAa;AAC/BuxB,uBAAe,EAAf;AACA2C,oBAAYl0B,CAAZ;AACH,KAHD,EAGG,IAHH;;AAKAnM,WAAOsB,EAAP,qBAAsB++B,WAAtB,EAAmC,IAAnC;;AAEArgC,WAAOsB,EAAP,CAAU,oBAAV,EAAgC,YAAY;AACxC;AACA,aAAK88B,UAAL,CAAgBX,cAAhB,EAAgCE,UAAhC;AACH,KAHD,EAGG,IAHH;;AAKA39B,WAAOsB,EAAP,CAAU,qBAAV,EAAiCg/B,oBAAjC,EAAuD,IAAvD;AACH,CAxUD;;AA0UA,SAAc9C,iBAAiBj+B,SAA/B;;kBAEei+B,gB;;;;;;;;;;;;;;;;;;;;kBCzVSgD,I;;AAdxB;;;;AACA;;AACA;;;;AACA;;AACA;;AACA;;;;;;AAEA,IAAMC,eAAe;AACjBrN,gBAAY,QADK;AAEjBsN,YAAQ,CAFS;AAGjBpX,UAAM,KAHW;AAIjB1mB,cAAU;AAJO,CAArB;;AAOe,SAAS49B,IAAT,CAAcxgC,MAAd,EAAsB;AACjC,aAAc,IAAd;;AAEA,QAAIquB,KAAJ;AACA,QAAIsS,SAAJ;AACA,QAAMC,OAAO,IAAIC,KAAJ,EAAb;;AAEA,SAAKrhC,KAAL,GAAa,YAAW;AACpBmhC,oBAAY,SAAc,EAAd,EAAkBF,YAAlB,EAAgCzgC,OAAOgC,GAAP,CAAW,MAAX,CAAhC,CAAZ;AACA2+B,kBAAU/9B,QAAV,GAAqB+9B,UAAU/9B,QAAV,IAAsB69B,aAAa79B,QAAxD;AACA+9B,kBAAUrX,IAAV,GAAkBqX,UAAUrX,IAAV,CAAewX,QAAf,OAA8B,MAAhD;;AAEA;AACA;AACA;AACA,YAAI,CAACH,UAAUlhB,IAAX,IAAmBkhB,UAAU/9B,QAAV,KAAuB,aAA9C,EAA6D;AACzD;AACH;;AAED,YAAI,CAACyrB,KAAL,EAAY;AACRA,oBAAQ,wBAAc,oBAAasS,UAAU/9B,QAAvB,EAAiC+9B,UAAUrX,IAA3C,CAAd,CAAR;AACH;;AAEDtpB,eAAO6B,GAAP,CAAW,MAAX,EAAmB8+B,SAAnB;;AAEA;AACAC,aAAKjhB,MAAL,GAAc,YAAY;AACtB;AACA,gBAAIsJ,SAAS,KAAKA,MAAlB;AACA,gBAAIxO,QAAQ,KAAKA,KAAjB;AACA,gBAAM0lB,SAAS;AACXY,iCAAiB,UAAU,KAAKjX,GAAf,GAAqB;AAD3B,aAAf;AAGA,gBAAI6W,UAAUD,MAAV,KAAqBD,aAAaC,MAAtC,EAA8C;AAC1C,oBAAMM,YAAa,aAAD,CAAgBC,IAAhB,CAAqBN,UAAU/9B,QAA/B,CAAlB;AACA,oBAAIo+B,UAAUh8B,MAAV,KAAqB,CAAzB,EAA4B;AACxBm7B,2BAAO,YAAYa,UAAU,CAAV,CAAnB,IAAmCL,UAAUD,MAA7C;AACAP,2BAAO,YAAYa,UAAU,CAAV,CAAnB,IAAmCL,UAAUD,MAA7C;AACH;AACJ;;AAED;AACA,gBAAMQ,YAAYlhC,OAAOgC,GAAP,CAAW,iBAAX,IAAgC,IAAlD;AACA,gBAAMm/B,WAAWnhC,OAAOgC,GAAP,CAAW,gBAAX,IAA+B,IAAhD;;AAEA,gBAAIinB,SAASiY,SAAT,IAAsBzmB,QAAQ0mB,QAAlC,EAA4C;AACxC,oBAAMC,SAAS3mB,QAAQwO,MAAvB;AACA,oBAAMoY,UAAUF,WAAWD,SAA3B;;AAEA,oBAAIG,UAAUD,MAAd,EAAsB;AAClB;AACAnY,6BAASiY,SAAT;AACAzmB,4BAAQymB,YAAYE,MAApB;AACH,iBAJD,MAIO;AACH;AACA3mB,4BAAQ0mB,QAAR;AACAlY,6BAASkY,WAAWC,MAApB;AACH;AACJ;;AAEDjB,mBAAO1lB,KAAP,GAAe9U,KAAKC,KAAL,CAAW6U,KAAX,CAAf;AACA0lB,mBAAOlX,MAAP,GAAgBtjB,KAAKC,KAAL,CAAWqjB,MAAX,CAAhB;;AAEA,4BAAMoF,KAAN,EAAa8R,MAAb;;AAEA;AACAngC,mBAAO6B,GAAP,CAAW,WAAX,EAAwBs+B,OAAO1lB,KAA/B;AACH,SAzCD;;AA2CAmmB,aAAK9W,GAAL,GAAW6W,UAAUlhB,IAArB;;AAEA,YAAM6hB,sBAAsB,iBAAOjT,KAAP,CAA5B;;AAEA,YAAIsS,UAAUzN,IAAd,EAAoB;AAChB7E,kBAAMkH,YAAN,CAAmB,UAAnB,EAA+B,GAA/B;AACAlH,kBAAMkH,YAAN,CAAmB,YAAnB,EAAiC,MAAjC;AACH;;AAED+L,4BAAoBhgC,EAApB,CAAuB,iBAAvB,EAA0C,UAAUa,GAAV,EAAe;AACrD,gBAAIA,OAAOA,IAAI6P,eAAf,EAAgC;AAC5B7P,oBAAI6P,eAAJ;AACH;;AAED,iBAAKnR,OAAL,qBAAyB;AACrBqyB,sBAAMyN,UAAUzN,IADK;AAErBE,4BAAYuN,UAAUvN;AAFD,aAAzB;AAKH,SAVD,EAUG,IAVH;AAWH,KAlFD;;AAoFA,SAAKxH,YAAL,GAAoB,UAAS/N,SAAT,EAAoB;AACpC,YAAIwQ,KAAJ,EAAW;AACPxQ,sBAAUoK,WAAV,CAAsBoG,KAAtB;AACH;AACJ,KAJD;;AAMA,SAAKtZ,OAAL,GAAe,YAAW;AACtB,eAAOsZ,KAAP;AACH,KAFD;;AAIA,SAAKzrB,QAAL,GAAgB,YAAW;AACvB,eAAO+9B,UAAU/9B,QAAjB;AACH,KAFD;;AAIA,SAAK0C,OAAL,GAAe,YAAW;AACtBs7B,aAAKjhB,MAAL,GAAc,IAAd;AACH,KAFD;AAGH,C;;;;;;;;;;;;;;;;;;kBC1Hc,UAAC/c,QAAD,EAAW0mB,IAAX,EAAoB;AAC/B,QAAMiY,SAASjY,OAAO,UAAP,GAAoB,EAAnC;AACA,4CAAsC1mB,QAAtC,GAAiD2+B,MAAjD;AACH,C;;;;;;;;;;;;;;;;;;;;ACHD;;AAEA,IAAMC,UAAU,SAAVA,OAAU,CAASxhC,MAAT,EAAiB;AAC7B,SAAK2B,KAAL,GAAa3B,MAAb;AACA,SAAK01B,KAAL,GAAa,IAAb;AACH,CAHD;;AAKA,SAAS+L,UAAT,CAAoB5+B,KAApB,EAA2B;AACvB,WAAOA,UAAU,UAAV,IAAwBA,UAAU,MAAlC,IAA4CA,UAAU,OAAtD,IAAiEA,UAAU,WAAlF;AACH;;AAED,SAAc2+B,QAAQjiC,SAAtB,EAAiC;AAC7BC,WAAO,eAASuV,OAAT,EAAkB;AACrB,aAAK6f,EAAL,GAAU7f,OAAV;AACH,KAH4B;AAI7B0gB,cAAU,kBAAS/mB,GAAT,EAAc;AACpB;AACA,YAAIgnB,QAAQ,KAAKA,KAAjB;AACA,YAAIA,KAAJ,EAAW;AACPA,kBAAM/V,MAAN,GAAe,IAAf;AACH;AACD,aAAK+V,KAAL,GAAa,IAAb;AACA,YAAIqL,kBAAkB,EAAtB;AACA,YAAI,OAAOryB,GAAP,KAAe,QAAnB,EAA6B;AACzBqyB,8BAAkB,UAAUryB,GAAV,GAAgB,IAAlC;AACAgnB,oBAAQ,KAAKA,KAAL,GAAa,IAAImL,KAAJ,EAArB;AACAnL,kBAAM5L,GAAN,GAAYpb,GAAZ;AACH;AACD,wBAAM,KAAKkmB,EAAX,EAAe;AACXmM,6BAAiBA;AADN,SAAf;AAGH,KApB4B;AAqB7BtxB,YAAQ,gBAASgL,KAAT,EAAgBwO,MAAhB,EAAwByY,UAAxB,EAAoC;AACxC,YAAIA,eAAe,SAAnB,EAA8B;AAC1B,gBAAIjnB,KAAJ,EAAW;AACP,qBAAKknB,iBAAL,GAAyBlnB,QAAQwO,MAAjC;AACH;AACD,gBAAI,CAAC,KAAK0Y,iBAAN,IACA,CAAC,KAAKjM,KADN,IAEA,CAAC+L,WAAW,KAAK9/B,KAAL,CAAWK,GAAX,CAAe,OAAf,CAAX,CAFL,EAE0C;AACtC;AACH;AACD;AACA,gBAAI0zB,QAAQ,KAAKA,KAAjB;AACA,gBAAIkM,iBAAiB,IAArB;AACA,gBAAIlM,KAAJ,EAAW;AACP,oBAAIA,MAAMjb,KAAN,KAAgB,CAApB,EAAuB;AACnB,wBAAI1a,QAAQ,IAAZ;AACA21B,0BAAM/V,MAAN,GAAe,YAAW;AACtB5f,8BAAM0P,MAAN,CAAagL,KAAb,EAAoBwO,MAApB,EAA4ByY,UAA5B;AACH,qBAFD;AAGA;AACH;AACD,oBAAIG,mBAAmBnM,MAAMjb,KAAN,GAAcib,MAAMzM,MAA3C;AACA,oBAAItjB,KAAKm8B,GAAL,CAAS,KAAKH,iBAAL,GAAyBE,gBAAlC,IAAsD,IAA1D,EAAgE;AAC5DD,qCAAiB,OAAjB;AACH;AACJ;AACD,4BAAM,KAAKhN,EAAX,EAAe;AACXgN,gCAAgBA;AADL,aAAf;AAGH;AACJ,KAnD4B;AAoD7B7sB,aAAS,mBAAW;AAChB,eAAO,KAAK6f,EAAZ;AACH;AAtD4B,CAAjC;;kBAyDe4M,O;;;;;;;;;;;;;;;;;;;;ACpEf;;AAEA,IAAMO,QAAQ,SAARA,KAAQ,CAAS/hC,MAAT,EAAiB;AAC3B,SAAK2B,KAAL,GAAa3B,OAAO+tB,MAApB;AACH,CAFD;;AAIA,SAAcgU,MAAMxiC,SAApB,EAA+B;AAC3B;AACA;AACA+pB,UAAM,gBAAW;AACb,wBAAM,KAAKsL,EAAX,EAAe,EAAEoD,SAAS,MAAX,EAAf;AACH,KAL0B;AAM3B/C,UAAM,gBAAW;AACb,wBAAM,KAAKL,EAAX,EAAe,EAAEoD,SAAS,EAAX,EAAf;AACH,KAR0B;;AAU3Bx4B,WAAO,eAASwiC,OAAT,EAAkB;AACrB,aAAKpN,EAAL,GAAUoN,OAAV;;AAEA;AACA,YAAIC,MAAM,KAAKrN,EAAL,CAAQlQ,oBAAR,CAA6B,KAA7B,CAAV;AACA,aAAK4Q,KAAL,GAAa2M,IAAI,CAAJ,CAAb;AACA,aAAKC,WAAL,GAAmBD,IAAI,CAAJ,CAAnB;;AAEA,aAAKtgC,KAAL,CAAWL,EAAX,CAAc,kBAAd,EAAkC,KAAK6gC,MAAvC,EAA+C,IAA/C;AACA,aAAKxgC,KAAL,CAAW0B,MAAX,CAAkB,cAAlB,EAAkC,KAAK+B,YAAvC,EAAqD,IAArD;AACH,KApB0B;;AAsB3B+8B,YAAQ,gBAASxgC,KAAT,EAAgB;AACpB,YAAIygC,aAAa,EAAjB;AACA,YAAIC,OAAO1gC,MAAMK,GAAN,CAAU,MAAV,CAAX;AACA,YAAIqgC,IAAJ,EAAU;AACN;AACA,gBAAI3B,SAAS,IAAI,CAAC,KAAK2B,KAAK3B,MAAX,EAAmB3hB,OAAnB,CAA2B,IAA3B,EAAiC,EAAjC,CAAjB;AACA,gBAAIujB,UAAU3gC,MAAMK,GAAN,CAAU,WAAV,KAA0BgjB,MAAM0b,MAAN,IAAgB,CAAhB,GAAoBA,SAAS,EAAvD,CAAd;AACA,gBAAI2B,KAAKz/B,QAAL,KAAkB,UAAtB,EAAkC;AAC9Bw/B,2BAAWG,WAAX,GAAyBD,OAAzB;AACH,aAFD,MAEO,IAAID,KAAKz/B,QAAL,KAAkB,WAAtB,EAAmC;AACtCw/B,2BAAWI,YAAX,GAA0BF,OAA1B;AACH;AACJ;AACD,wBAAM,KAAK1N,EAAX,EAAewN,UAAf;AACH,KApC0B;;AAsC3Bh9B,kBAAc,sBAASzD,KAAT,EAAgBkC,IAAhB,EAAsB;AAChC,YAAI,CAACA,IAAL,EAAW;AACP;AACH;AACD,YAAIlC,MAAMK,GAAN,CAAU,cAAV,KAA6BL,MAAMK,GAAN,CAAU,oBAAV,CAAjC,EAAkE;AAC9D,gBAAIszB,QAAQ,EAAZ;AACA,gBAAI4M,cAAc,EAAlB;;AAEA,gBAAIr+B,KAAKyxB,KAAL,IAAc3zB,MAAMK,GAAN,CAAU,cAAV,CAAlB,EAA6C;AACzCszB,wBAAQzxB,KAAKyxB,KAAb;AACH;AACD,gBAAIzxB,KAAKq+B,WAAL,IAAoBvgC,MAAMK,GAAN,CAAU,oBAAV,CAAxB,EAAyD;AACrDkgC,8BAAcr+B,KAAKq+B,WAAnB;AACH;;AAED,iBAAKO,UAAL,CAAgBnN,KAAhB,EAAuB4M,WAAvB;AACH,SAZD,MAYO;AACH,iBAAK5Y,IAAL;AACH;AACJ,KAzD0B;;AA2D3BmZ,gBAAY,oBAASnN,KAAT,EAAgB4M,WAAhB,EAA6B;AACrC,aAAK5M,KAAL,CAAW7P,SAAX,GAAuB6P,KAAvB;AACA,aAAK4M,WAAL,CAAiBzc,SAAjB,GAA6Byc,WAA7B;;AAEA,YAAI,KAAK5M,KAAL,CAAWnV,UAAX,IAAyB,KAAK+hB,WAAL,CAAiB/hB,UAA9C,EAA0D;AACtD,iBAAK8U,IAAL;AACH,SAFD,MAEO;AACH,iBAAK3L,IAAL;AACH;AACJ,KApE0B;;AAsE3BvU,aAAS,mBAAW;AAChB,eAAO,KAAK6f,EAAZ;AACH;AAxE0B,CAA/B;;kBA2EemN,K;;;;;;;;;;;ACjFf;;AAEA;AACA;AACA;AACA;AACA;AACA,mD;;;;;;;;;;;ACPA;AACA;;;AAGA;AACA,mCAAoC,cAAc,6BAA6B,UAAU,SAAS,WAAW,uCAAuC,cAAc,gBAAgB,gBAAgB,gBAAgB,oBAAoB,wBAAwB,SAAS,cAAc,qBAAqB,qBAAqB,gDAAgD,6CAA6C,YAAY,WAAW,UAAU,kBAAkB,MAAM,qBAAqB,2BAA2B,SAAS,4BAA4B,SAAS,4BAA4B,sBAAsB,iBAAiB,4BAA4B,kIAAkI,aAAa,WAAW,WAAW,WAAW,kBAAkB,4BAA4B,wBAAwB,WAAW,iBAAiB,aAAa,6CAA6C,WAAW,SAAS,iCAAiC,WAAW,iCAAiC,aAAa,mBAAmB,4BAA4B,SAAS,uEAAuE,gBAAgB,SAAS,aAAa,aAAa,6CAA6C,4BAA4B,oFAAoF,WAAW,qBAAqB,uBAAuB,2CAA2C,2BAA2B,aAAa,4BAA4B,wCAAwC,2BAA2B,uBAAuB,0BAA0B,2BAA2B,uBAAuB,0BAA0B,qBAAqB,aAAa,iBAAiB,WAAW,gBAAgB,iBAAiB,WAAW,YAAY,kBAAkB,oGAAoG,WAAW,YAAY,kBAAkB,mBAAmB,4BAA4B,6BAA6B,mCAAmC,oDAAoD,4BAA4B,6BAA6B,mCAAmC,WAAW,4BAA4B,4BAA4B,WAAW,uCAAuC,sCAAsC,WAAW,UAAU,WAAW,eAAe,kBAAkB,cAAc,aAAa,gBAAgB,sBAAsB,uCAAuC,sBAAsB,2BAA2B,yBAAyB,sBAAsB,qBAAqB,iBAAiB,YAAY,mBAAmB,8BAA8B,uBAAuB,yCAAyC,cAAc,qBAAqB,aAAa,8CAA8C,aAAa,sBAAsB,2BAA2B,sBAAsB,kBAAkB,WAAW,YAAY,MAAM,OAAO,SAAS,QAAQ,UAAU,gBAAgB,eAAe,WAAW,kBAAkB,YAAY,sBAAsB,eAAe,UAAU,eAAe,kBAAkB,mBAAmB,OAAO,QAAQ,SAAS,cAAc,mCAAmC,oBAAoB,mBAAmB,mBAAmB,gBAAgB,kBAAkB,MAAM,QAAQ,SAAS,OAAO,WAAW,YAAY,YAAY,uBAAuB,8DAA8D,aAAa,mCAAmC,mBAAmB,gCAAgC,gBAAgB,gCAAgC,iBAAiB,oCAAoC,gBAAgB,YAAY,kBAAkB,aAAa,UAAU,mBAAmB,WAAW,YAAY,kCAAkC,4CAA4C,wBAAwB,6BAA6B,0BAA0B,6BAA6B,sBAAsB,iCAAiC,0BAA0B,UAAU,aAAa,iBAAiB,WAAW,UAAU,sCAAsC,WAAW,kBAAkB,mBAAmB,oBAAoB,gBAAgB,uBAAuB,mBAAmB,WAAW,kBAAkB,kBAAkB,sEAAsE,gBAAgB,wCAAwC,iBAAiB,oEAAoE,aAAa,aAAa,kBAAkB,WAAW,YAAY,kBAAkB,aAAa,6BAA6B,sBAAsB,oBAAoB,oBAAoB,cAAc,qBAAqB,oBAAoB,gBAAgB,MAAM,iCAAiC,cAAc,oBAAoB,aAAa,cAAc,oBAAoB,8CAA8C,qBAAqB,kBAAkB,qBAAqB,WAAW,sBAAsB,iBAAiB,kBAAkB,qBAAqB,kBAAkB,mBAAmB,kBAAkB,qBAAqB,uBAAuB,kBAAkB,gBAAgB,mBAAmB,iCAAiC,WAAW,kBAAkB,wCAAwC,aAAa,2BAA2B,oDAAoD,6BAA6B,mBAAmB,kDAAkD,8BAA8B,qBAAqB,iCAAiC,wDAAwD,aAAa,SAAS,kBAAkB,YAAY,eAAe,mBAAmB,4BAA4B,wBAAwB,SAAS,WAAW,UAAU,YAAY,+BAA+B,aAAa,mBAAmB,MAAM,QAAQ,kBAAkB,MAAM,OAAO,qBAAqB,OAAO,sBAAsB,QAAQ,2CAA2C,YAAY,uDAAuD,wBAAwB,UAAU,gBAAgB,6BAA6B,4FAA4F,kBAAkB,6CAA6C,sBAAsB,WAAW,eAAe,cAAc,UAAU,gBAAgB,kBAAkB,qEAAqE,aAAa,iEAAiE,eAAe,qEAAqE,sBAAsB,yEAAyE,QAAQ,kBAAkB,SAAS,mBAAmB,sBAAsB,kBAAkB,aAAa,aAAa,wCAAwC,gCAAgC,2FAA2F,YAAY,WAAW,kBAAkB,cAAc,uGAAuG,aAAa,6FAA6F,cAAc,gBAAgB,2TAA2T,eAAe,iBAAiB,UAAU,6GAA6G,gBAAgB,mBAAmB,4DAA4D,YAAY,WAAW,MAAM,kBAAkB,OAAO,gBAAgB,uBAAuB,eAAe,eAAe,UAAU,oNAAoN,cAAc,4NAA4N,cAAc,gHAAgH,aAAa,uMAAuM,aAAa,6BAA6B,sBAAsB,uBAAuB,MAAM,QAAQ,SAAS,OAAO,aAAa,SAAS,eAAe,+CAA+C,cAAc,+CAA+C,gBAAgB,4EAA4E,gBAAgB,4CAA4C,eAAe,4DAA4D,kBAAkB,gCAAgC,gBAAgB,6BAA6B,gBAAgB;;AAEl7S;;;;;;;;;;;;;;;;;;;;;;;;;ACPA;;;;;;;;;;;;IAEMW,qB;;;;AACNA,sBAAsBnjC,SAAtB,GAAkC,SAAc,EAAd,wBAAlC;;AAEA,IAAMojC,mBAAmB,eAAzB;;AAEA,SAASC,wBAAT,CAAkCvhC,SAAlC,EAA6CwhC,aAA7C,EAA4DC,aAA5D,EAA2E;AACvEt+B,WAAOkT,IAAP,CAAYmrB,aAAZ,EAA2BlrB,OAA3B,CAAmC,UAAC4iB,IAAD,EAAU;AACzC,YAAIA,QAAQsI,aAAR,IAAyBA,cAActI,IAAd,MAAwBuI,cAAcvI,IAAd,CAArD,EAA0E;AACtEl5B,sBAAUR,OAAV,aAA4B05B,IAA5B,EAAoCl5B,SAApC,EAA+CwhC,cAActI,IAAd,CAA/C,EAAoEuI,cAAcvI,IAAd,CAApE;AACH;AACJ,KAJD;AAKH;;AAED,SAASwI,eAAT,CAAyBC,QAAzB,EAAmC3hC,SAAnC,EAA8C;AAC1C,QAAI2hC,QAAJ,EAAc;AACVA,iBAAS/+B,GAAT,CAAa,IAAb,EAAmB,IAAnB,EAAyB5C,SAAzB;AACH;AACJ;;IAEK4hC,e;;;AAEF,6BAAYtZ,WAAZ,EAAyBuZ,WAAzB,EAAsC;AAAA;;AAAA;;AAGlC,cAAKljC,MAAL,GAAc2pB,WAAd;AACA,cAAKwZ,WAAL,GAAmB,IAAnB;;AAEA,iBAAcxZ,YAAY9iB,UAA1B,EAAsC;AAClCu8B,qBAAS,EADyB;AAElC/gC,wBAAY,KAFsB;AAGlCghC,uBAAW,CAHuB;AAIlCC,uBAAW;AAJuB,SAAtC;;AAOA3Z,oBAAYroB,EAAZ,CAAe,KAAf,EAAsB,UAACR,IAAD,EAAOyiC,aAAP,EAAsBrhB,KAAtB,EAA6BshB,aAA7B,EAA+C;AACjE,gBAAID,kBAAkB5Z,WAAtB,EAAmC;AAC/B4Z;AACH;AACD,gBAAI,CAACL,WAAD,IAAgBA,YAAYpiC,IAAZ,EAAkByiC,aAAlB,EAAiCrhB,KAAjC,EAAwCshB,aAAxC,CAApB,EAA4E;AACxE,sBAAK3iC,OAAL,CAAaC,IAAb,EAAmByiC,aAAnB,EAAkCrhB,KAAlC,EAAyCshB,aAAzC;AACH;AACJ,SAPD;;AASA7Z,oBAAYroB,EAAZ,CAAe,mBAAf,EAAoC,UAACK,KAAD,EAAQyB,UAAR,EAAuB;AACvD,kBAAKA,UAAL,GAAkBA,UAAlB;AACH,SAFD;AAtBkC;AAyBrC;;;;4BAoBGm3B,I,EAAM;AACN,gBAAMn3B,aAAa,KAAK+/B,WAAxB;AACA,gBAAI//B,cAAcm3B,QAAQn3B,WAAWyD,UAArC,EAAiD;AAC7C,uBAAOzD,WAAWpB,GAAX,CAAeu4B,IAAf,CAAP;AACH;AACD,mBAAO,KAAKv6B,MAAL,CAAYgC,GAAZ,CAAgBu4B,IAAhB,CAAP;AACH;;;4BAEGA,I,EAAMnK,G,EAAK;AACX,mBAAO,KAAKpwB,MAAL,CAAY6B,GAAZ,CAAgB04B,IAAhB,EAAsBnK,GAAtB,CAAP;AACH;;;mCAEU;AACP,mBAAO,KAAKpwB,MAAL,CAAYqY,QAAZ,EAAP;AACH;;;kCAES;AACN0qB,4BAAgB,KAAK/iC,MAArB,EAA6B,IAA7B;AACA+iC,4BAAgB,KAAKI,WAArB,EAAkC,IAAlC;AACA,iBAAKl/B,GAAL;AACH;;;0BAtCcb,U,EAAY;AAAA;;AACvB,gBAAMqgC,qBAAqB,KAAKN,WAAhC;AACAJ,4BAAgBU,kBAAhB,EAAoC,IAApC;;AAEA,iBAAKN,WAAL,GAAmB//B,UAAnB;;AAEAA,uBAAW9B,EAAX,CAAc,KAAd,EAAqB,UAACR,IAAD,EAAOyiC,aAAP,EAAsBrhB,KAAtB,EAA6BshB,aAA7B,EAA+C;AAChE,oBAAID,kBAAkBngC,UAAtB,EAAkC;AAC9BmgC;AACH;AACD,uBAAK1iC,OAAL,CAAaC,IAAb,EAAmByiC,aAAnB,EAAkCrhB,KAAlC,EAAyCshB,aAAzC;AACH,aALD,EAKG,IALH;;AAOA,gBAAIC,kBAAJ,EAAwB;AACpBb,yCAAyB,IAAzB,EAA+Bx/B,WAAWyD,UAA1C,EAAsD48B,mBAAmB58B,UAAzE;AACH;AACJ;;;;EA7CyB67B,qB;;IAsETgB,S;;;AACjB,uBAAY/Z,WAAZ,EAAyB;AAAA;;AAAA,2HACfA,WADe,EACF,UAAC7oB,IAAD,EAAU;AACzB;AACA,gBAAM6iC,gBAAgB,OAAKC,cAA3B;AACA,gBAAID,aAAJ,EAAmB;AACf,oBAAME,QAAQlB,iBAAiB1B,IAAjB,CAAsBngC,IAAtB,CAAd;AACA,oBAAI+iC,KAAJ,EAAW;AACP,wBAAMtJ,OAAOsJ,MAAM,CAAN,CAAb;AACA,wBAAItJ,QAAQoJ,cAAc98B,UAA1B,EAAsC;AAClC,+BAAO,KAAP;AACH;AACJ;AACJ;AACD,mBAAO,IAAP;AACH,SAdoB;;AAgBrB,eAAK+8B,cAAL,GAAsB,IAAtB;AACA,eAAKE,gBAAL,GAAwB,IAAIb,eAAJ,CAAoB,OAAKjjC,MAAzB,CAAxB;;AAEA2pB,oBAAYroB,EAAZ,CAAe,iBAAf,EAAkC,UAACK,KAAD,EAAQyE,QAAR,EAAqB;AACnD,mBAAKu9B,aAAL,GAAqBv9B,WAAWA,SAASzE,KAApB,GAA4B,IAAjD;AACH,SAFD;AAnBqB;AAsBxB;;;;4BAuCG44B,I,EAAM;AACN,gBAAMn3B,aAAa,KAAK+/B,WAAxB;AACA,gBAAI//B,cAAcm3B,QAAQn3B,WAAWyD,UAArC,EAAiD;AAC7C,uBAAOzD,WAAWpB,GAAX,CAAeu4B,IAAf,CAAP;AACH;AACD,gBAAMoJ,gBAAgB,KAAKC,cAA3B;AACA,gBAAID,iBAAiBpJ,QAAQoJ,cAAc98B,UAA3C,EAAuD;AACnD,uBAAO88B,cAAc3hC,GAAd,CAAkBu4B,IAAlB,CAAP;AACH;AACD,mBAAO,KAAKv6B,MAAL,CAAYgC,GAAZ,CAAgBu4B,IAAhB,CAAP;AACH;;;mCAEU;AACP,gBAAMoJ,gBAAgB,KAAKC,cAA3B;AACA,gBAAID,iBAAiBA,cAActrB,QAAd,EAArB,EAA+C;AAC3C,uBAAOsrB,cAActrB,QAAd,EAAP;AACH;AACD;AACH;;;kCAES;AACN;AACA0qB,4BAAgB,KAAKa,cAArB,EAAqC,IAArC;AACH;;;4BA5DY;AACT,mBAAO,KAAKE,gBAAZ;AACH;;;0BAEiBH,a,EAAe;AAAA;;AAC7B,gBAAMI,mBAAmB,KAAKH,cAA9B;AACAb,4BAAgBgB,gBAAhB,EAAkC,IAAlC;;AAEA,iBAAK/jC,MAAL,CAAYiE,GAAZ,CAAgB,mBAAhB,EAAqC,IAArC,EAA2C,IAA3C;;AAEA,iBAAK2/B,cAAL,GAAsBD,aAAtB;;AAEA,iBAAK9iC,OAAL,CAAa,cAAb,EAA6B,CAAC,CAAC8iC,aAA/B;;AAEA,gBAAIA,aAAJ,EAAmB;AACfA,8BAAcriC,EAAd,CAAiB,KAAjB,EAAwB,UAACR,IAAD,EAAOyiC,aAAP,EAAsBrhB,KAAtB,EAA6BshB,aAA7B,EAA+C;AACnE,wBAAID,kBAAkBI,aAAtB,EAAqC;AACjCJ;AACH;AACD,2BAAK1iC,OAAL,CAAaC,IAAb,EAAmByiC,aAAnB,EAAkCrhB,KAAlC,EAAyCshB,aAAzC;AACH,iBALD,EAKG,IALH;;AAOAG,8BAActgC,MAAd,CAAqB,YAArB,EAAmC,UAAC1B,KAAD,EAAQyB,UAAR,EAAuB;AACtD,2BAAKA,UAAL,GAAkBA,UAAlB;AACH,iBAFD,EAEG,IAFH;;AAIAw/B,yCAAyB,IAAzB,EAA+Be,cAAc98B,UAA7C,EAAyD,KAAK7G,MAAL,CAAY6G,UAArE;AACH,aAbD,MAaO,IAAIk9B,gBAAJ,EAAsB;AACzB,qBAAK/jC,MAAL,CAAYqD,MAAZ,CAAmB,YAAnB,EAAiC,UAAC1B,KAAD,EAAQyB,UAAR,EAAuB;AACpD,2BAAKA,UAAL,GAAkBA,UAAlB;AACH,iBAFD,EAEG,IAFH;;AAIA,oBAAM4gC,mBAAmB,SAAc,EAAd,EAAkB,KAAKhkC,MAAL,CAAY6G,UAA9B,EAA0Ck9B,iBAAiBl9B,UAA3D,CAAzB;AACA+7B,yCAAyB,IAAzB,EAA+B,KAAK5iC,MAAL,CAAY6G,UAA3C,EAAuDm9B,gBAAvD;AACH;AACJ;;;;EA5DkCf,e;;kBAAlBS,S;;;;;;;;;;;;;;;;;;;;kBC3FGO,U;AAAT,SAASA,UAAT,CAAoBtiC,KAApB,EAA2Bb,IAA3B,EAAiCojC,YAAjC,EAA+C;AAC1D,QAAI5P,WAAW4P,YAAf;;AAEA,YAAQpjC,IAAR;AACI,aAAK,MAAL;AACA,aAAK,YAAL;AACA,aAAK,OAAL;AACA,aAAK,MAAL;AACA,aAAK,OAAL;AAAc;AACV,oBAAMiF,WAAWpE,MAAMK,GAAN,CAAU,UAAV,CAAjB;AACA;AACA,oBAAI+D,aAAajE,SAAjB,EAA4B;AACxB;AACAwyB,+BAAW,SAAc,EAAd,EAAkB4P,YAAlB,EAAgC,EAAEn+B,UAAUA,QAAZ,EAAhC,CAAX;AACH;AACD;AACH;AACD;AAAS;AACL;AACH;AAhBL;;AAmBA,WAAOuuB,QAAP;AACH,C;;;;;;;;;;;;;;;;;;QC6Be6P,W,GAAAA,W;;AA5BhB;;;;AACA;;;;;;AAEA;;;;;;;;AA3BA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAaA,IAAMC,QAAQ,IAAIC,IAAJ,CAAS,CAAC,IAAIC,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,EAAV,EAAc,GAAd,EAAmB,GAAnB,EAAwB,GAAxB,EAA6B,GAA7B,EAAkC,GAAlC,EAAuC,GAAvC,EAA4C,GAA5C,EAAiD,GAAjD,EAAsD,CAAtD,EAAyD,CAAzD,EAA4D,CAA5D,EAA+D,CAA/D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,EAArG,EAAyG,GAAzG,EAA8G,GAA9G,EAAmH,EAAnH,EAAuH,EAAvH,EAA2H,CAA3H,EAA8H,CAA9H,EAAiI,CAAjI,EAAoI,CAApI,EAAuI,GAAvI,EAA4I,GAA5I,EAAiJ,GAAjJ,EAAsJ,GAAtJ,EAA2J,CAA3J,EAA8J,CAA9J,EAAiK,CAAjK,EAAoK,GAApK,EAAyK,GAAzK,EAA8K,GAA9K,EAAmL,EAAnL,EAAuL,GAAvL,EAA4L,EAA5L,EAAgM,EAAhM,EAAoM,CAApM,EAAuM,EAAvM,EAA2M,GAA3M,EAAgN,EAAhN,EAAoN,GAApN,EAAyN,GAAzN,EAA8N,CAA9N,EAAiO,CAAjO,EAAoO,CAApO,EAAuO,CAAvO,EAA0O,CAA1O,EAA6O,CAA7O,EAAgP,CAAhP,EAAmP,CAAnP,EAAsP,CAAtP,EAAyP,CAAzP,EAA4P,CAA5P,EAA+P,CAA/P,EAAkQ,CAAlQ,EAAqQ,CAArQ,EAAwQ,CAAxQ,EAA2Q,CAA3Q,EAA8Q,CAA9Q,EAAiR,CAAjR,EAAoR,CAApR,EAAuR,CAAvR,EAA0R,CAA1R,EAA6R,CAA7R,EAAgS,CAAhS,EAAmS,CAAnS,EAAsS,CAAtS,EAAyS,CAAzS,EAA4S,CAA5S,EAA+S,CAA/S,EAAkT,CAAlT,EAAqT,CAArT,EAAwT,CAAxT,EAA2T,CAA3T,EAA8T,CAA9T,EAAiU,CAAjU,EAAoU,CAApU,EAAuU,CAAvU,EAA0U,CAA1U,EAA6U,CAA7U,EAAgV,CAAhV,EAAmV,CAAnV,EAAsV,CAAtV,EAAyV,CAAzV,EAA4V,CAA5V,EAA+V,CAA/V,EAAkW,CAAlW,EAAqW,CAArW,EAAwW,CAAxW,EAA2W,CAA3W,EAA8W,CAA9W,EAAiX,CAAjX,EAAoX,CAApX,EAAuX,CAAvX,EAA0X,CAA1X,EAA6X,CAA7X,EAAgY,CAAhY,EAAmY,CAAnY,EAAsY,CAAtY,EAAyY,CAAzY,EAA4Y,CAA5Y,EAA+Y,CAA/Y,EAAkZ,CAAlZ,EAAqZ,CAArZ,EAAwZ,CAAxZ,EAA2Z,CAA3Z,EAA8Z,CAA9Z,EAAia,CAAja,EAAoa,CAApa,EAAua,CAAva,EAA0a,CAA1a,EAA6a,CAA7a,EAAgb,CAAhb,EAAmb,CAAnb,EAAsb,CAAtb,EAAyb,CAAzb,EAA4b,CAA5b,EAA+b,CAA/b,EAAkc,CAAlc,EAAqc,CAArc,EAAwc,CAAxc,EAA2c,CAA3c,EAA8c,CAA9c,EAAid,CAAjd,EAAod,CAApd,EAAud,CAAvd,EAA0d,CAA1d,EAA6d,CAA7d,EAAge,CAAhe,EAAme,CAAne,EAAse,CAAte,EAAye,CAAze,EAA4e,CAA5e,EAA+e,CAA/e,EAAkf,CAAlf,EAAqf,CAArf,EAAwf,CAAxf,EAA2f,CAA3f,EAA8f,CAA9f,EAAigB,CAAjgB,EAAogB,CAApgB,EAAugB,CAAvgB,EAA0gB,CAA1gB,EAA6gB,CAA7gB,EAAghB,CAAhhB,EAAmhB,CAAnhB,EAAshB,CAAthB,EAAyhB,CAAzhB,EAA4hB,CAA5hB,EAA+hB,CAA/hB,EAAkiB,CAAliB,EAAqiB,CAAriB,EAAwiB,CAAxiB,EAA2iB,CAA3iB,EAA8iB,CAA9iB,EAAijB,CAAjjB,EAAojB,CAApjB,EAAujB,CAAvjB,EAA0jB,CAA1jB,EAA6jB,CAA7jB,EAAgkB,CAAhkB,EAAmkB,CAAnkB,EAAskB,CAAtkB,EAAykB,CAAzkB,EAA4kB,CAA5kB,EAA+kB,CAA/kB,EAAklB,CAAllB,EAAqlB,CAArlB,EAAwlB,CAAxlB,EAA2lB,CAA3lB,EAA8lB,CAA9lB,EAAimB,CAAjmB,EAAomB,CAApmB,EAAumB,CAAvmB,EAA0mB,CAA1mB,EAA6mB,CAA7mB,EAAgnB,CAAhnB,EAAmnB,CAAnnB,EAAsnB,CAAtnB,EAAynB,CAAznB,EAA4nB,CAA5nB,EAA+nB,CAA/nB,EAAkoB,CAAloB,EAAqoB,CAAroB,EAAwoB,CAAxoB,EAA2oB,CAA3oB,EAA8oB,CAA9oB,EAAipB,CAAjpB,EAAopB,CAAppB,EAAupB,CAAvpB,EAA0pB,CAA1pB,EAA6pB,CAA7pB,EAAgqB,CAAhqB,EAAmqB,CAAnqB,EAAsqB,CAAtqB,EAAyqB,CAAzqB,EAA4qB,CAA5qB,EAA+qB,CAA/qB,EAAkrB,CAAlrB,EAAqrB,CAArrB,EAAwrB,CAAxrB,EAA2rB,CAA3rB,EAA8rB,CAA9rB,EAAisB,CAAjsB,EAAosB,CAApsB,EAAusB,CAAvsB,EAA0sB,CAA1sB,EAA6sB,CAA7sB,EAAgtB,CAAhtB,EAAmtB,CAAntB,EAAstB,CAAttB,EAAytB,CAAztB,EAA4tB,CAA5tB,EAA+tB,CAA/tB,EAAkuB,CAAluB,EAAquB,CAAruB,EAAwuB,CAAxuB,EAA2uB,CAA3uB,EAA8uB,CAA9uB,EAAivB,CAAjvB,EAAovB,CAApvB,EAAuvB,CAAvvB,EAA0vB,CAA1vB,EAA6vB,CAA7vB,EAAgwB,CAAhwB,EAAmwB,CAAnwB,EAAswB,CAAtwB,EAAywB,CAAzwB,EAA4wB,CAA5wB,EAA+wB,CAA/wB,EAAkxB,CAAlxB,EAAqxB,CAArxB,EAAwxB,CAAxxB,EAA2xB,CAA3xB,EAA8xB,CAA9xB,EAAiyB,CAAjyB,EAAoyB,CAApyB,EAAuyB,CAAvyB,EAA0yB,CAA1yB,EAA6yB,CAA7yB,EAAgzB,CAAhzB,EAAmzB,CAAnzB,EAAszB,CAAtzB,EAAyzB,CAAzzB,EAA4zB,CAA5zB,EAA+zB,CAA/zB,EAAk0B,CAAl0B,EAAq0B,CAAr0B,EAAw0B,CAAx0B,EAA20B,CAA30B,EAA80B,CAA90B,EAAi1B,CAAj1B,EAAo1B,CAAp1B,EAAu1B,CAAv1B,EAA01B,CAA11B,EAA61B,CAA71B,EAAg2B,CAAh2B,EAAm2B,CAAn2B,EAAs2B,CAAt2B,EAAy2B,CAAz2B,EAA42B,CAA52B,EAA+2B,CAA/2B,EAAk3B,CAAl3B,EAAq3B,CAAr3B,EAAw3B,CAAx3B,EAA23B,CAA33B,EAA83B,CAA93B,EAAi4B,CAAj4B,EAAo4B,CAAp4B,EAAu4B,CAAv4B,EAA04B,CAA14B,EAA64B,CAA74B,EAAg5B,CAAh5B,EAAm5B,CAAn5B,EAAs5B,CAAt5B,EAAy5B,CAAz5B,EAA45B,CAA55B,EAA+5B,CAA/5B,EAAk6B,CAAl6B,EAAq6B,CAAr6B,EAAw6B,CAAx6B,EAA26B,CAA36B,EAA86B,CAA96B,EAAi7B,CAAj7B,EAAo7B,CAAp7B,EAAu7B,CAAv7B,EAA07B,CAA17B,EAA67B,CAA77B,EAAg8B,CAAh8B,EAAm8B,CAAn8B,EAAs8B,CAAt8B,EAAy8B,CAAz8B,EAA48B,CAA58B,EAA+8B,CAA/8B,EAAk9B,CAAl9B,EAAq9B,CAAr9B,EAAw9B,CAAx9B,EAA29B,CAA39B,EAA89B,CAA99B,EAAi+B,CAAj+B,EAAo+B,CAAp+B,EAAu+B,CAAv+B,EAA0+B,CAA1+B,EAA6+B,CAA7+B,EAAg/B,CAAh/B,EAAm/B,CAAn/B,EAAs/B,CAAt/B,EAAy/B,CAAz/B,EAA4/B,CAA5/B,EAA+/B,CAA//B,EAAkgC,EAAlgC,EAAsgC,GAAtgC,EAA2gC,CAA3gC,EAA8gC,CAA9gC,EAAihC,CAAjhC,EAAohC,CAAphC,EAAuhC,CAAvhC,EAA0hC,CAA1hC,EAA6hC,CAA7hC,EAAgiC,CAAhiC,EAAmiC,CAAniC,EAAsiC,CAAtiC,EAAyiC,CAAziC,EAA4iC,CAA5iC,EAA+iC,CAA/iC,EAAkjC,CAAljC,EAAqjC,CAArjC,EAAwjC,CAAxjC,EAA2jC,CAA3jC,EAA8jC,CAA9jC,EAAikC,CAAjkC,EAAokC,CAApkC,EAAukC,CAAvkC,EAA0kC,CAA1kC,EAA6kC,CAA7kC,EAAglC,CAAhlC,EAAmlC,CAAnlC,EAAslC,CAAtlC,EAAylC,CAAzlC,EAA4lC,CAA5lC,EAA+lC,CAA/lC,EAAkmC,CAAlmC,EAAqmC,CAArmC,EAAwmC,CAAxmC,EAA2mC,CAA3mC,EAA8mC,CAA9mC,EAAinC,CAAjnC,EAAonC,CAApnC,EAAunC,CAAvnC,EAA0nC,CAA1nC,EAA6nC,CAA7nC,EAAgoC,CAAhoC,EAAmoC,CAAnoC,EAAsoC,CAAtoC,EAAyoC,CAAzoC,EAA4oC,CAA5oC,EAA+oC,CAA/oC,EAAkpC,CAAlpC,EAAqpC,CAArpC,EAAwpC,CAAxpC,EAA2pC,CAA3pC,EAA8pC,CAA9pC,EAAiqC,CAAjqC,EAAoqC,CAApqC,EAAuqC,CAAvqC,EAA0qC,CAA1qC,EAA6qC,CAA7qC,EAAgrC,CAAhrC,EAAmrC,CAAnrC,EAAsrC,CAAtrC,EAAyrC,CAAzrC,EAA4rC,CAA5rC,EAA+rC,CAA/rC,EAAksC,CAAlsC,EAAqsC,CAArsC,EAAwsC,CAAxsC,EAA2sC,CAA3sC,EAA8sC,CAA9sC,EAAitC,CAAjtC,EAAotC,CAAptC,EAAutC,CAAvtC,EAA0tC,CAA1tC,EAA6tC,CAA7tC,EAAguC,CAAhuC,EAAmuC,CAAnuC,EAAsuC,CAAtuC,EAAyuC,CAAzuC,EAA4uC,CAA5uC,EAA+uC,CAA/uC,EAAkvC,CAAlvC,EAAqvC,CAArvC,EAAwvC,CAAxvC,EAA2vC,CAA3vC,EAA8vC,CAA9vC,EAAiwC,CAAjwC,EAAowC,CAApwC,EAAuwC,CAAvwC,EAA0wC,CAA1wC,EAA6wC,CAA7wC,EAAgxC,CAAhxC,EAAmxC,CAAnxC,EAAsxC,CAAtxC,EAAyxC,CAAzxC,EAA4xC,CAA5xC,EAA+xC,GAA/xC,EAAoyC,EAApyC,EAAwyC,EAAxyC,EAA4yC,CAA5yC,EAA+yC,EAA/yC,EAAmzC,GAAnzC,EAAwzC,EAAxzC,EAA4zC,GAA5zC,EAAi0C,GAAj0C,EAAs0C,CAAt0C,EAAy0C,CAAz0C,EAA40C,CAA50C,EAA+0C,CAA/0C,EAAk1C,CAAl1C,EAAq1C,CAAr1C,EAAw1C,CAAx1C,EAA21C,CAA31C,EAA81C,CAA91C,EAAi2C,CAAj2C,EAAo2C,CAAp2C,EAAu2C,CAAv2C,EAA02C,CAA12C,EAA62C,CAA72C,EAAg3C,CAAh3C,EAAm3C,CAAn3C,EAAs3C,CAAt3C,EAAy3C,CAAz3C,EAA43C,CAA53C,EAA+3C,CAA/3C,EAAk4C,CAAl4C,EAAq4C,CAAr4C,EAAw4C,CAAx4C,EAA24C,CAA34C,EAA84C,CAA94C,EAAi5C,CAAj5C,EAAo5C,CAAp5C,EAAu5C,CAAv5C,EAA05C,CAA15C,EAA65C,CAA75C,EAAg6C,CAAh6C,EAAm6C,CAAn6C,EAAs6C,CAAt6C,EAAy6C,CAAz6C,EAA46C,CAA56C,EAA+6C,CAA/6C,EAAk7C,CAAl7C,EAAq7C,CAAr7C,EAAw7C,CAAx7C,EAA27C,CAA37C,EAA87C,CAA97C,EAAi8C,CAAj8C,EAAo8C,CAAp8C,EAAu8C,CAAv8C,EAA08C,CAA18C,EAA68C,CAA78C,EAAg9C,CAAh9C,EAAm9C,CAAn9C,EAAs9C,CAAt9C,EAAy9C,CAAz9C,EAA49C,CAA59C,EAA+9C,CAA/9C,EAAk+C,CAAl+C,EAAq+C,CAAr+C,EAAw+C,CAAx+C,EAA2+C,CAA3+C,EAA8+C,CAA9+C,EAAi/C,CAAj/C,EAAo/C,CAAp/C,EAAu/C,CAAv/C,EAA0/C,CAA1/C,EAA6/C,CAA7/C,EAAggD,CAAhgD,EAAmgD,CAAngD,EAAsgD,CAAtgD,EAAygD,CAAzgD,EAA4gD,CAA5gD,EAA+gD,CAA/gD,EAAkhD,CAAlhD,EAAqhD,CAArhD,EAAwhD,CAAxhD,EAA2hD,CAA3hD,EAA8hD,CAA9hD,EAAiiD,CAAjiD,EAAoiD,CAApiD,EAAuiD,CAAviD,EAA0iD,CAA1iD,EAA6iD,CAA7iD,EAAgjD,CAAhjD,EAAmjD,CAAnjD,EAAsjD,CAAtjD,EAAyjD,CAAzjD,EAA4jD,CAA5jD,EAA+jD,CAA/jD,EAAkkD,CAAlkD,EAAqkD,CAArkD,EAAwkD,CAAxkD,EAA2kD,CAA3kD,EAA8kD,CAA9kD,EAAilD,CAAjlD,EAAolD,CAAplD,EAAulD,CAAvlD,EAA0lD,CAA1lD,EAA6lD,CAA7lD,EAAgmD,CAAhmD,EAAmmD,CAAnmD,EAAsmD,CAAtmD,EAAymD,CAAzmD,EAA4mD,CAA5mD,EAA+mD,CAA/mD,EAAknD,CAAlnD,EAAqnD,CAArnD,EAAwnD,CAAxnD,EAA2nD,CAA3nD,EAA8nD,CAA9nD,EAAioD,CAAjoD,EAAooD,CAApoD,EAAuoD,CAAvoD,EAA0oD,CAA1oD,EAA6oD,CAA7oD,EAAgpD,CAAhpD,EAAmpD,CAAnpD,EAAspD,CAAtpD,EAAypD,CAAzpD,EAA4pD,CAA5pD,EAA+pD,CAA/pD,EAAkqD,CAAlqD,EAAqqD,CAArqD,EAAwqD,CAAxqD,EAA2qD,CAA3qD,EAA8qD,CAA9qD,EAAirD,CAAjrD,EAAorD,CAAprD,EAAurD,CAAvrD,EAA0rD,CAA1rD,EAA6rD,CAA7rD,EAAgsD,CAAhsD,EAAmsD,CAAnsD,EAAssD,CAAtsD,EAAysD,CAAzsD,EAA4sD,CAA5sD,EAA+sD,CAA/sD,EAAktD,CAAltD,EAAqtD,CAArtD,EAAwtD,CAAxtD,EAA2tD,CAA3tD,EAA8tD,CAA9tD,EAAiuD,CAAjuD,EAAouD,CAApuD,EAAuuD,CAAvuD,EAA0uD,CAA1uD,EAA6uD,CAA7uD,EAAgvD,CAAhvD,EAAmvD,CAAnvD,EAAsvD,CAAtvD,EAAyvD,CAAzvD,EAA4vD,CAA5vD,EAA+vD,CAA/vD,EAAkwD,CAAlwD,EAAqwD,CAArwD,EAAwwD,CAAxwD,EAA2wD,CAA3wD,EAA8wD,CAA9wD,EAAixD,CAAjxD,EAAoxD,CAApxD,EAAuxD,CAAvxD,EAA0xD,CAA1xD,EAA6xD,CAA7xD,EAAgyD,CAAhyD,EAAmyD,CAAnyD,EAAsyD,CAAtyD,EAAyyD,CAAzyD,EAA4yD,CAA5yD,EAA+yD,CAA/yD,EAAkzD,CAAlzD,EAAqzD,CAArzD,EAAwzD,CAAxzD,EAA2zD,CAA3zD,EAA8zD,CAA9zD,EAAi0D,CAAj0D,EAAo0D,CAAp0D,EAAu0D,CAAv0D,EAA00D,CAA10D,EAA60D,CAA70D,EAAg1D,CAAh1D,EAAm1D,CAAn1D,EAAs1D,CAAt1D,EAAy1D,CAAz1D,EAA41D,CAA51D,EAA+1D,CAA/1D,EAAk2D,CAAl2D,EAAq2D,CAAr2D,EAAw2D,CAAx2D,EAA22D,CAA32D,EAA82D,CAA92D,EAAi3D,CAAj3D,EAAo3D,CAAp3D,EAAu3D,CAAv3D,EAA03D,CAA13D,EAA63D,CAA73D,EAAg4D,CAAh4D,EAAm4D,CAAn4D,EAAs4D,CAAt4D,EAAy4D,CAAz4D,EAA44D,CAA54D,EAA+4D,CAA/4D,EAAk5D,CAAl5D,EAAq5D,CAAr5D,EAAw5D,CAAx5D,EAA25D,CAA35D,EAA85D,CAA95D,EAAi6D,CAAj6D,EAAo6D,CAAp6D,EAAu6D,CAAv6D,EAA06D,CAA16D,EAA66D,CAA76D,EAAg7D,CAAh7D,EAAm7D,CAAn7D,EAAs7D,CAAt7D,EAAy7D,CAAz7D,EAA47D,CAA57D,EAA+7D,CAA/7D,EAAk8D,CAAl8D,EAAq8D,CAAr8D,EAAw8D,CAAx8D,EAA28D,CAA38D,EAA88D,CAA98D,EAAi9D,CAAj9D,EAAo9D,CAAp9D,EAAu9D,CAAv9D,EAA09D,CAA19D,EAA69D,CAA79D,EAAg+D,CAAh+D,EAAm+D,CAAn+D,EAAs+D,CAAt+D,EAAy+D,CAAz+D,EAA4+D,CAA5+D,EAA++D,CAA/+D,EAAk/D,CAAl/D,EAAq/D,CAAr/D,EAAw/D,CAAx/D,EAA2/D,CAA3/D,EAA8/D,CAA9/D,EAAigE,CAAjgE,EAAogE,CAApgE,EAAugE,CAAvgE,EAA0gE,CAA1gE,EAA6gE,CAA7gE,EAAghE,CAAhhE,EAAmhE,CAAnhE,EAAshE,CAAthE,EAAyhE,CAAzhE,EAA4hE,CAA5hE,EAA+hE,CAA/hE,EAAkiE,CAAliE,EAAqiE,CAAriE,EAAwiE,CAAxiE,EAA2iE,CAA3iE,EAA8iE,CAA9iE,EAAijE,CAAjjE,EAAojE,CAApjE,EAAujE,CAAvjE,EAA0jE,CAA1jE,EAA6jE,CAA7jE,EAAgkE,CAAhkE,EAAmkE,CAAnkE,EAAskE,CAAtkE,EAAykE,CAAzkE,EAA4kE,CAA5kE,EAA+kE,CAA/kE,EAAklE,CAAllE,EAAqlE,CAArlE,EAAwlE,CAAxlE,EAA2lE,CAA3lE,EAA8lE,CAA9lE,EAAimE,CAAjmE,EAAomE,CAApmE,EAAumE,CAAvmE,EAA0mE,EAA1mE,EAA8mE,GAA9mE,EAAmnE,GAAnnE,EAAwnE,CAAxnE,EAA2nE,CAA3nE,EAA8nE,CAA9nE,EAAioE,CAAjoE,EAAooE,CAApoE,EAAuoE,CAAvoE,EAA0oE,CAA1oE,EAA6oE,CAA7oE,EAAgpE,CAAhpE,EAAmpE,CAAnpE,EAAspE,CAAtpE,EAAypE,CAAzpE,EAA4pE,CAA5pE,EAA+pE,CAA/pE,EAAkqE,CAAlqE,EAAqqE,CAArqE,EAAwqE,CAAxqE,EAA2qE,CAA3qE,EAA8qE,CAA9qE,EAAirE,CAAjrE,EAAorE,CAAprE,EAAurE,CAAvrE,EAA0rE,CAA1rE,EAA6rE,CAA7rE,EAAgsE,CAAhsE,EAAmsE,CAAnsE,EAAssE,CAAtsE,EAAysE,CAAzsE,EAA4sE,CAA5sE,EAA+sE,CAA/sE,EAAktE,CAAltE,EAAqtE,CAArtE,EAAwtE,CAAxtE,EAA2tE,CAA3tE,EAA8tE,CAA9tE,EAAiuE,CAAjuE,EAAouE,CAApuE,EAAuuE,CAAvuE,EAA0uE,CAA1uE,EAA6uE,CAA7uE,EAAgvE,CAAhvE,EAAmvE,CAAnvE,EAAsvE,CAAtvE,EAAyvE,CAAzvE,EAA4vE,CAA5vE,EAA+vE,CAA/vE,EAAkwE,CAAlwE,EAAqwE,CAArwE,EAAwwE,CAAxwE,EAA2wE,CAA3wE,EAA8wE,CAA9wE,EAAixE,CAAjxE,EAAoxE,CAApxE,EAAuxE,CAAvxE,EAA0xE,CAA1xE,EAA6xE,CAA7xE,EAAgyE,CAAhyE,EAAmyE,CAAnyE,EAAsyE,CAAtyE,EAAyyE,CAAzyE,EAA4yE,CAA5yE,EAA+yE,CAA/yE,EAAkzE,CAAlzE,EAAqzE,CAArzE,EAAwzE,CAAxzE,EAA2zE,CAA3zE,EAA8zE,CAA9zE,EAAi0E,CAAj0E,EAAo0E,CAAp0E,EAAu0E,CAAv0E,EAA00E,CAA10E,EAA60E,CAA70E,EAAg1E,CAAh1E,EAAm1E,CAAn1E,EAAs1E,CAAt1E,EAAy1E,CAAz1E,EAA41E,CAA51E,EAA+1E,CAA/1E,EAAk2E,CAAl2E,EAAq2E,CAAr2E,EAAw2E,CAAx2E,EAA22E,CAA32E,EAA82E,CAA92E,EAAi3E,CAAj3E,EAAo3E,CAAp3E,EAAu3E,CAAv3E,EAA03E,CAA13E,EAA63E,CAA73E,EAAg4E,CAAh4E,EAAm4E,CAAn4E,EAAs4E,CAAt4E,EAAy4E,CAAz4E,EAA44E,GAA54E,EAAi5E,CAAj5E,EAAo5E,CAAp5E,EAAu5E,CAAv5E,EAA05E,GAA15E,EAA+5E,GAA/5E,EAAo6E,GAAp6E,EAAy6E,GAAz6E,EAA86E,GAA96E,EAAm7E,CAAn7E,EAAs7E,CAAt7E,EAAy7E,CAAz7E,EAA47E,GAA57E,EAAi8E,GAAj8E,EAAs8E,GAAt8E,EAA28E,GAA38E,EAAg9E,GAAh9E,EAAq9E,CAAr9E,EAAw9E,CAAx9E,EAA29E,CAA39E,EAA89E,CAA99E,EAAi+E,CAAj+E,EAAo+E,CAAp+E,EAAu+E,CAAv+E,EAA0+E,CAA1+E,EAA6+E,CAA7+E,EAAg/E,CAAh/E,EAAm/E,CAAn/E,EAAs/E,CAAt/E,EAAy/E,CAAz/E,EAA4/E,CAA5/E,EAA+/E,CAA//E,EAAkgF,GAAlgF,EAAugF,CAAvgF,EAA0gF,CAA1gF,EAA6gF,CAA7gF,EAAghF,EAAhhF,EAAohF,CAAphF,EAAuhF,CAAvhF,EAA0hF,CAA1hF,EAA6hF,CAA7hF,EAAgiF,CAAhiF,EAAmiF,CAAniF,EAAsiF,CAAtiF,EAAyiF,CAAziF,EAA4iF,CAA5iF,EAA+iF,CAA/iF,EAAkjF,CAAljF,EAAqjF,CAArjF,EAAwjF,CAAxjF,EAA2jF,CAA3jF,EAA8jF,CAA9jF,EAAikF,CAAjkF,EAAokF,CAApkF,EAAukF,CAAvkF,EAA0kF,CAA1kF,EAA6kF,CAA7kF,EAAglF,CAAhlF,EAAmlF,CAAnlF,EAAslF,CAAtlF,EAAylF,CAAzlF,EAA4lF,CAA5lF,EAA+lF,CAA/lF,EAAkmF,CAAlmF,EAAqmF,CAArmF,EAAwmF,CAAxmF,EAA2mF,CAA3mF,EAA8mF,CAA9mF,EAAinF,CAAjnF,EAAonF,CAApnF,EAAunF,CAAvnF,EAA0nF,CAA1nF,EAA6nF,CAA7nF,EAAgoF,CAAhoF,EAAmoF,CAAnoF,EAAsoF,CAAtoF,EAAyoF,CAAzoF,EAA4oF,CAA5oF,EAA+oF,CAA/oF,EAAkpF,CAAlpF,EAAqpF,CAArpF,EAAwpF,CAAxpF,EAA2pF,CAA3pF,EAA8pF,CAA9pF,EAAiqF,CAAjqF,EAAoqF,EAApqF,EAAwqF,CAAxqF,EAA2qF,CAA3qF,EAA8qF,CAA9qF,EAAirF,CAAjrF,EAAorF,CAAprF,EAAurF,CAAvrF,EAA0rF,CAA1rF,EAA6rF,CAA7rF,EAAgsF,CAAhsF,EAAmsF,CAAnsF,EAAssF,CAAtsF,EAAysF,CAAzsF,EAA4sF,CAA5sF,EAA+sF,CAA/sF,EAAktF,CAAltF,EAAqtF,CAArtF,EAAwtF,CAAxtF,EAA2tF,CAA3tF,EAA8tF,CAA9tF,EAAiuF,CAAjuF,EAAouF,CAApuF,EAAuuF,CAAvuF,EAA0uF,CAA1uF,EAA6uF,CAA7uF,EAAgvF,CAAhvF,EAAmvF,CAAnvF,EAAsvF,CAAtvF,EAAyvF,CAAzvF,EAA4vF,CAA5vF,EAA+vF,CAA/vF,EAAkwF,CAAlwF,EAAqwF,CAArwF,EAAwwF,CAAxwF,EAA2wF,CAA3wF,EAA8wF,GAA9wF,EAAmxF,GAAnxF,EAAwxF,GAAxxF,EAA6xF,EAA7xF,EAAiyF,GAAjyF,EAAsyF,CAAtyF,EAAyyF,CAAzyF,EAA4yF,CAA5yF,EAA+yF,EAA/yF,EAAmzF,GAAnzF,EAAwzF,GAAxzF,EAA6zF,GAA7zF,EAAk0F,GAAl0F,EAAu0F,CAAv0F,EAA00F,CAA10F,EAA60F,CAA70F,EAAg1F,CAAh1F,EAAm1F,CAAn1F,EAAs1F,CAAt1F,EAAy1F,CAAz1F,EAA41F,CAA51F,EAA+1F,CAA/1F,EAAk2F,CAAl2F,EAAq2F,CAAr2F,EAAw2F,CAAx2F,EAA22F,CAA32F,EAA82F,CAA92F,EAAi3F,CAAj3F,EAAo3F,CAAp3F,EAAu3F,CAAv3F,EAA03F,CAA13F,EAA63F,CAA73F,EAAg4F,CAAh4F,EAAm4F,CAAn4F,EAAs4F,CAAt4F,EAAy4F,CAAz4F,EAA44F,EAA54F,EAAg5F,CAAh5F,EAAm5F,CAAn5F,EAAs5F,CAAt5F,EAAy5F,CAAz5F,EAA45F,CAA55F,EAA+5F,CAA/5F,EAAk6F,CAAl6F,EAAq6F,CAAr6F,EAAw6F,CAAx6F,EAA26F,CAA36F,EAA86F,CAA96F,EAAi7F,CAAj7F,EAAo7F,CAAp7F,EAAu7F,CAAv7F,EAA07F,CAA17F,EAA67F,CAA77F,EAAg8F,CAAh8F,EAAm8F,CAAn8F,EAAs8F,CAAt8F,EAAy8F,CAAz8F,EAA48F,CAA58F,EAA+8F,CAA/8F,EAAk9F,CAAl9F,EAAq9F,CAAr9F,EAAw9F,CAAx9F,EAA29F,CAA39F,EAA89F,CAA99F,EAAi+F,CAAj+F,EAAo+F,CAAp+F,EAAu+F,CAAv+F,EAA0+F,CAA1+F,EAA6+F,CAA7+F,EAAg/F,CAAh/F,EAAm/F,CAAn/F,EAAs/F,CAAt/F,EAAy/F,CAAz/F,EAA4/F,CAA5/F,EAA+/F,CAA//F,EAAkgG,CAAlgG,EAAqgG,CAArgG,EAAwgG,CAAxgG,EAA2gG,CAA3gG,EAA8gG,CAA9gG,EAAihG,CAAjhG,EAAohG,CAAphG,EAAuhG,CAAvhG,EAA0hG,CAA1hG,EAA6hG,CAA7hG,EAAgiG,EAAhiG,EAAoiG,CAApiG,EAAuiG,CAAviG,EAA0iG,CAA1iG,EAA6iG,CAA7iG,EAAgjG,CAAhjG,EAAmjG,CAAnjG,EAAsjG,CAAtjG,EAAyjG,CAAzjG,EAA4jG,CAA5jG,EAA+jG,CAA/jG,EAAkkG,CAAlkG,EAAqkG,CAArkG,EAAwkG,CAAxkG,EAA2kG,CAA3kG,EAA8kG,EAA9kG,EAAklG,GAAllG,EAAulG,GAAvlG,EAA4lG,GAA5lG,EAAimG,GAAjmG,EAAsmG,CAAtmG,EAAymG,CAAzmG,EAA4mG,CAA5mG,EAA+mG,EAA/mG,EAAmnG,GAAnnG,EAAwnG,GAAxnG,EAA6nG,GAA7nG,EAAkoG,GAAloG,EAAuoG,CAAvoG,EAA0oG,CAA1oG,EAA6oG,CAA7oG,EAAgpG,CAAhpG,EAAmpG,CAAnpG,EAAspG,CAAtpG,EAAypG,CAAzpG,EAA4pG,CAA5pG,EAA+pG,CAA/pG,EAAkqG,CAAlqG,EAAqqG,CAArqG,EAAwqG,EAAxqG,EAA4qG,CAA5qG,EAA+qG,CAA/qG,EAAkrG,CAAlrG,EAAqrG,CAArrG,EAAwrG,CAAxrG,EAA2rG,CAA3rG,EAA8rG,CAA9rG,EAAisG,CAAjsG,EAAosG,CAApsG,EAAusG,CAAvsG,EAA0sG,CAA1sG,EAA6sG,GAA7sG,EAAktG,GAAltG,EAAutG,GAAvtG,EAA4tG,GAA5tG,EAAiuG,EAAjuG,EAAquG,CAAruG,EAAwuG,CAAxuG,EAA2uG,CAA3uG,EAA8uG,EAA9uG,EAAkvG,GAAlvG,EAAuvG,GAAvvG,EAA4vG,GAA5vG,EAAiwG,GAAjwG,EAAswG,CAAtwG,EAAywG,CAAzwG,EAA4wG,CAA5wG,EAA+wG,CAA/wG,EAAkxG,CAAlxG,EAAqxG,CAArxG,EAAwxG,CAAxxG,EAA2xG,CAA3xG,EAA8xG,CAA9xG,EAAiyG,CAAjyG,EAAoyG,CAApyG,EAAuyG,CAAvyG,EAA0yG,CAA1yG,EAA6yG,CAA7yG,EAAgzG,GAAhzG,EAAqzG,EAArzG,EAAyzG,CAAzzG,EAA4zG,CAA5zG,EAA+zG,CAA/zG,EAAk0G,CAAl0G,EAAq0G,EAAr0G,EAAy0G,GAAz0G,EAA80G,CAA90G,EAAi1G,CAAj1G,EAAo1G,CAAp1G,EAAu1G,CAAv1G,EAA01G,CAA11G,EAA61G,EAA71G,EAAi2G,GAAj2G,EAAs2G,GAAt2G,EAA22G,GAA32G,EAAg3G,GAAh3G,EAAq3G,CAAr3G,EAAw3G,CAAx3G,EAA23G,CAA33G,EAA83G,CAA93G,EAAi4G,CAAj4G,EAAo4G,CAAp4G,EAAu4G,CAAv4G,EAA04G,CAA14G,EAA64G,GAA74G,EAAk5G,GAAl5G,EAAu5G,GAAv5G,EAA45G,GAA55G,EAAi6G,CAAj6G,EAAo6G,CAAp6G,EAAu6G,CAAv6G,EAA06G,CAA16G,EAA66G,CAA76G,EAAg7G,CAAh7G,EAAm7G,CAAn7G,EAAs7G,CAAt7G,EAAy7G,CAAz7G,EAA47G,CAA57G,EAA+7G,CAA/7G,EAAk8G,CAAl8G,EAAq8G,EAAr8G,EAAy8G,GAAz8G,EAA88G,GAA98G,EAAm9G,GAAn9G,EAAw9G,GAAx9G,EAA69G,EAA79G,EAAi+G,EAAj+G,EAAq+G,GAAr+G,EAA0+G,GAA1+G,EAA++G,GAA/+G,EAAo/G,GAAp/G,EAAy/G,GAAz/G,EAA8/G,CAA9/G,EAAigH,CAAjgH,EAAogH,CAApgH,EAAugH,CAAvgH,EAA0gH,EAA1gH,EAA8gH,GAA9gH,EAAmhH,GAAnhH,EAAwhH,GAAxhH,EAA6hH,GAA7hH,EAAkiH,CAAliH,EAAqiH,CAAriH,EAAwiH,CAAxiH,EAA2iH,EAA3iH,EAA+iH,GAA/iH,EAAojH,GAApjH,EAAyjH,GAAzjH,EAA8jH,GAA9jH,EAAmkH,CAAnkH,EAAskH,CAAtkH,EAAykH,CAAzkH,EAA4kH,CAA5kH,EAA+kH,CAA/kH,EAAklH,CAAllH,EAAqlH,CAArlH,EAAwlH,CAAxlH,EAA2lH,CAA3lH,EAA8lH,CAA9lH,EAAimH,CAAjmH,EAAomH,EAApmH,EAAwmH,GAAxmH,EAA6mH,GAA7mH,EAAknH,GAAlnH,EAAunH,GAAvnH,EAA4nH,CAA5nH,EAA+nH,CAA/nH,EAAkoH,CAAloH,EAAqoH,EAAroH,EAAyoH,GAAzoH,EAA8oH,GAA9oH,EAAmpH,GAAnpH,EAAwpH,GAAxpH,EAA6pH,CAA7pH,EAAgqH,CAAhqH,EAAmqH,CAAnqH,EAAsqH,CAAtqH,EAAyqH,CAAzqH,EAA4qH,CAA5qH,EAA+qH,CAA/qH,EAAkrH,CAAlrH,EAAqrH,CAArrH,EAAwrH,CAAxrH,EAA2rH,CAA3rH,EAA8rH,EAA9rH,EAAksH,GAAlsH,EAAusH,GAAvsH,EAA4sH,GAA5sH,EAAitH,EAAjtH,EAAqtH,CAArtH,EAAwtH,CAAxtH,EAA2tH,CAA3tH,EAA8tH,CAA9tH,EAAiuH,CAAjuH,EAAouH,CAApuH,EAAuuH,CAAvuH,EAA0uH,GAA1uH,EAA+uH,GAA/uH,EAAovH,GAApvH,EAAyvH,EAAzvH,EAA6vH,GAA7vH,EAAkwH,CAAlwH,EAAqwH,CAArwH,EAAwwH,CAAxwH,EAA2wH,GAA3wH,EAAgxH,GAAhxH,EAAqxH,GAArxH,EAA0xH,GAA1xH,EAA+xH,GAA/xH,EAAoyH,CAApyH,EAAuyH,CAAvyH,EAA0yH,CAA1yH,EAA6yH,CAA7yH,EAAgzH,CAAhzH,EAAmzH,CAAnzH,EAAszH,CAAtzH,EAAyzH,CAAzzH,EAA4zH,CAA5zH,EAA+zH,CAA/zH,EAAk0H,CAAl0H,EAAq0H,EAAr0H,EAAy0H,GAAz0H,EAA80H,GAA90H,EAAm1H,EAAn1H,EAAu1H,EAAv1H,EAA21H,CAA31H,EAA81H,CAA91H,EAAi2H,CAAj2H,EAAo2H,CAAp2H,EAAu2H,CAAv2H,EAA02H,CAA12H,EAA62H,CAA72H,EAAg3H,CAAh3H,EAAm3H,CAAn3H,EAAs3H,CAAt3H,EAAy3H,CAAz3H,EAA43H,CAA53H,EAA+3H,CAA/3H,EAAk4H,CAAl4H,EAAq4H,CAAr4H,EAAw4H,CAAx4H,EAA24H,CAA34H,EAA84H,CAA94H,EAAi5H,CAAj5H,EAAo5H,EAAp5H,EAAw5H,CAAx5H,EAA25H,CAA35H,EAA85H,CAA95H,EAAi6H,CAAj6H,EAAo6H,GAAp6H,EAAy6H,EAAz6H,EAA66H,CAA76H,EAAg7H,CAAh7H,EAAm7H,CAAn7H,EAAs7H,CAAt7H,EAAy7H,CAAz7H,EAA47H,EAA57H,EAAg8H,GAAh8H,EAAq8H,GAAr8H,EAA08H,GAA18H,EAA+8H,GAA/8H,EAAo9H,CAAp9H,EAAu9H,CAAv9H,EAA09H,CAA19H,EAA69H,CAA79H,EAAg+H,CAAh+H,EAAm+H,GAAn+H,EAAw+H,GAAx+H,EAA6+H,GAA7+H,EAAk/H,EAAl/H,EAAs/H,CAAt/H,EAAy/H,CAAz/H,EAA4/H,CAA5/H,EAA+/H,CAA//H,EAAkgI,GAAlgI,EAAugI,GAAvgI,EAA4gI,GAA5gI,EAAihI,EAAjhI,EAAqhI,EAArhI,EAAyhI,EAAzhI,EAA6hI,CAA7hI,EAAgiI,CAAhiI,EAAmiI,CAAniI,EAAsiI,CAAtiI,EAAyiI,CAAziI,EAA4iI,GAA5iI,EAAijI,CAAjjI,EAAojI,CAApjI,EAAujI,CAAvjI,EAA0jI,GAA1jI,EAA+jI,GAA/jI,EAAokI,CAApkI,EAAukI,GAAvkI,EAA4kI,GAA5kI,EAAilI,GAAjlI,EAAslI,CAAtlI,EAAylI,EAAzlI,EAA6lI,EAA7lI,EAAimI,CAAjmI,EAAomI,GAApmI,EAAymI,GAAzmI,EAA8mI,GAA9mI,EAAmnI,CAAnnI,EAAsnI,CAAtnI,EAAynI,CAAznI,EAA4nI,CAA5nI,EAA+nI,CAA/nI,EAAkoI,EAAloI,EAAsoI,GAAtoI,EAA2oI,GAA3oI,EAAgpI,GAAhpI,EAAqpI,GAArpI,EAA0pI,CAA1pI,EAA6pI,CAA7pI,EAAgqI,CAAhqI,EAAmqI,CAAnqI,EAAsqI,CAAtqI,EAAyqI,CAAzqI,EAA4qI,CAA5qI,EAA+qI,CAA/qI,EAAkrI,CAAlrI,EAAqrI,CAArrI,EAAwrI,CAAxrI,EAA2rI,CAA3rI,EAA8rI,CAA9rI,EAAisI,CAAjsI,EAAosI,CAApsI,EAAusI,CAAvsI,EAA0sI,CAA1sI,EAA6sI,CAA7sI,EAAgtI,CAAhtI,EAAmtI,EAAntI,EAAutI,GAAvtI,EAA4tI,GAA5tI,EAAiuI,GAAjuI,EAAsuI,EAAtuI,EAA0uI,CAA1uI,EAA6uI,CAA7uI,EAAgvI,CAAhvI,EAAmvI,CAAnvI,EAAsvI,CAAtvI,EAAyvI,CAAzvI,EAA4vI,CAA5vI,EAA+vI,CAA/vI,EAAkwI,CAAlwI,EAAqwI,CAArwI,EAAwwI,CAAxwI,EAA2wI,CAA3wI,EAA8wI,CAA9wI,EAAixI,CAAjxI,EAAoxI,CAApxI,EAAuxI,CAAvxI,EAA0xI,CAA1xI,EAA6xI,CAA7xI,EAAgyI,CAAhyI,EAAmyI,CAAnyI,EAAsyI,CAAtyI,EAAyyI,CAAzyI,EAA4yI,CAA5yI,EAA+yI,EAA/yI,EAAmzI,GAAnzI,EAAwzI,GAAxzI,EAA6zI,GAA7zI,EAAk0I,GAAl0I,EAAu0I,CAAv0I,EAA00I,CAA10I,EAA60I,CAA70I,EAAg1I,CAAh1I,EAAm1I,CAAn1I,EAAs1I,CAAt1I,EAAy1I,CAAz1I,EAA41I,CAA51I,EAA+1I,CAA/1I,EAAk2I,CAAl2I,EAAq2I,CAAr2I,EAAw2I,CAAx2I,EAA22I,CAA32I,EAA82I,CAA92I,EAAi3I,CAAj3I,EAAo3I,GAAp3I,EAAy3I,CAAz3I,EAA43I,CAA53I,EAA+3I,CAA/3I,EAAk4I,GAAl4I,EAAu4I,CAAv4I,EAA04I,CAA14I,EAA64I,CAA74I,EAAg5I,EAAh5I,EAAo5I,GAAp5I,EAAy5I,GAAz5I,EAA85I,EAA95I,EAAk6I,GAAl6I,EAAu6I,CAAv6I,EAA06I,CAA16I,EAA66I,CAA76I,EAAg7I,CAAh7I,EAAm7I,CAAn7I,EAAs7I,CAAt7I,EAAy7I,CAAz7I,EAA47I,CAA57I,EAA+7I,CAA/7I,EAAk8I,CAAl8I,EAAq8I,CAAr8I,EAAw8I,EAAx8I,EAA48I,CAA58I,EAA+8I,CAA/8I,EAAk9I,CAAl9I,EAAq9I,EAAr9I,EAAy9I,GAAz9I,EAA89I,GAA99I,EAAm+I,GAAn+I,EAAw+I,EAAx+I,EAA4+I,CAA5+I,EAA++I,CAA/+I,EAAk/I,CAAl/I,EAAq/I,EAAr/I,EAAy/I,GAAz/I,EAA8/I,GAA9/I,EAAmgJ,GAAngJ,EAAwgJ,EAAxgJ,EAA4gJ,CAA5gJ,EAA+gJ,CAA/gJ,EAAkhJ,CAAlhJ,EAAqhJ,CAArhJ,EAAwhJ,CAAxhJ,EAA2hJ,CAA3hJ,EAA8hJ,CAA9hJ,EAAiiJ,EAAjiJ,EAAqiJ,GAAriJ,EAA0iJ,GAA1iJ,EAA+iJ,GAA/iJ,EAAojJ,GAApjJ,EAAyjJ,CAAzjJ,EAA4jJ,CAA5jJ,EAA+jJ,CAA/jJ,EAAkkJ,CAAlkJ,EAAqkJ,CAArkJ,EAAwkJ,CAAxkJ,EAA2kJ,CAA3kJ,EAA8kJ,CAA9kJ,EAAilJ,GAAjlJ,EAAslJ,GAAtlJ,EAA2lJ,GAA3lJ,EAAgmJ,GAAhmJ,EAAqmJ,EAArmJ,EAAymJ,GAAzmJ,EAA8mJ,GAA9mJ,EAAmnJ,GAAnnJ,EAAwnJ,CAAxnJ,EAA2nJ,CAA3nJ,EAA8nJ,CAA9nJ,EAAioJ,CAAjoJ,EAAooJ,CAApoJ,EAAuoJ,CAAvoJ,EAA0oJ,CAA1oJ,EAA6oJ,CAA7oJ,EAAgpJ,CAAhpJ,EAAmpJ,CAAnpJ,EAAspJ,CAAtpJ,EAAypJ,CAAzpJ,EAA4pJ,EAA5pJ,EAAgqJ,GAAhqJ,EAAqqJ,GAArqJ,EAA0qJ,GAA1qJ,EAA+qJ,GAA/qJ,EAAorJ,CAAprJ,EAAurJ,CAAvrJ,EAA0rJ,CAA1rJ,EAA6rJ,EAA7rJ,EAAisJ,GAAjsJ,EAAssJ,GAAtsJ,EAA2sJ,GAA3sJ,EAAgtJ,GAAhtJ,EAAqtJ,CAArtJ,EAAwtJ,CAAxtJ,EAA2tJ,CAA3tJ,EAA8tJ,EAA9tJ,EAAkuJ,GAAluJ,EAAuuJ,EAAvuJ,EAA2uJ,GAA3uJ,EAAgvJ,EAAhvJ,EAAovJ,CAApvJ,EAAuvJ,CAAvvJ,EAA0vJ,CAA1vJ,EAA6vJ,CAA7vJ,EAAgwJ,CAAhwJ,EAAmwJ,CAAnwJ,EAAswJ,CAAtwJ,EAAywJ,CAAzwJ,EAA4wJ,EAA5wJ,EAAgxJ,EAAhxJ,EAAoxJ,GAApxJ,EAAyxJ,GAAzxJ,EAA8xJ,EAA9xJ,EAAkyJ,EAAlyJ,EAAsyJ,EAAtyJ,EAA0yJ,EAA1yJ,EAA8yJ,EAA9yJ,EAAkzJ,EAAlzJ,EAAszJ,EAAtzJ,EAA0zJ,EAA1zJ,EAA8zJ,EAA9zJ,CAAf,CAAD,CAAT,EAA81J,EAAExjC,MAAM,WAAR,EAA91J,CAAd;;AAEA,SAASyjC,aAAT,CAAwBxvB,OAAxB,QAA4C;AAAA,QAATtM,KAAS,QAATA,KAAS;;AACxC;AACAsM,YAAQtM,KAAR,GAAgBA,KAAhB;AACAsM,YAAQ+U,GAAR,GAAc0a,IAAIC,eAAJ,CAAoBL,KAApB,CAAd;;AAEA;AACA,WAAOrvB,QAAQzL,IAAR,MAAkB,2BAAkByL,OAAlB,CAAzB;AACH;;AAEM,IAAM2vB,8CAAmB,iBAAzB;AACA,IAAMC,0CAAiB,eAAvB;AACA,IAAMC,gDAAoB,kBAA1B;;AAEP,IAAMC,uBAAuB,EAA7B;;AAEO,SAASV,WAAT,CAAqBrkC,SAArB,SAAoG;AAAA,QAAlE0I,UAAkE,SAAlEA,UAAkE;AAAA,4BAAtDC,KAAsD;AAAA,QAAtDA,KAAsD,+BAA9C,KAA8C;AAAA,iCAAvCC,UAAuC;AAAA,QAAvCA,UAAuC,oCAA1B,KAA0B;AAAA,8BAAnBo8B,OAAmB;AAAA,QAAnBA,OAAmB,iCAAT,KAAS;;AACvG,QAAM/vB,UAAUjV,UAAUilC,cAAV,EAAhB;AACA,QAAMntB,MAAMnP,QAAQ,OAAR,QAAqBC,UAAjC;;AAEA;AACA,QAAI,CAACm8B,qBAAqBjtB,GAArB,CAAL,EAAgC;AAC5B;AACAitB,6BAAqBjtB,GAArB,IAA4B2sB,cAAcxvB,OAAd,EAAuB,EAAEtM,YAAF,EAAvB,EAAkCxB,KAAlC,CAAwC,UAACkF,CAAD,EAAO;AACvE;AACA,gBAAI,CAAC3D,WAAWK,SAAX,EAAD,IAA2BJ,UAAU,KAArC,IAA8CC,UAAlD,EAA8D;AAC1DD,wBAAQ,IAAR;AACA,uBAAO87B,cAAcxvB,OAAd,EAAuB,EAAEtM,YAAF,EAAvB,CAAP;AACH;AACD,kBAAM0D,CAAN;AACH,SAP2B,EAOzB/E,IAPyB,CAOpB,YAAM;AACV,gBAAIqB,KAAJ,EAAW;AACPo8B,qCAAqBjtB,GAArB,IAA4B,IAA5B,CADO,CAC2B;AAClC,uBAAO+sB,cAAP;AACH;AACD,mBAAOD,gBAAP;AACH,SAb2B,EAazBz9B,KAbyB,CAanB,iBAAS;AACdqT,yBAAa0qB,SAAb;AACAH,iCAAqBjtB,GAArB,IAA4B,IAA5B,CAFc,CAEoB;AAClC1Q,kBAAMlE,MAAN,GAAe4hC,iBAAf;AACA,kBAAM19B,KAAN;AACH,SAlB2B,CAA5B;AAmBH;;AAED;AACA,QAAM+9B,UAAUJ,qBAAqBjtB,GAArB,EAA0BxQ,IAA1B,CAA+B,kBAAU;AACrDkT,qBAAa0qB,SAAb;AACA,YAAIx8B,WAAWK,SAAX,EAAJ,EAA4B;AACxB,gBAAM3B,QAAQ,IAAImU,KAAJ,CAAU,6BAAV,CAAd;AACAnU,kBAAMlE,MAAN,GAAe,WAAf;AACA,kBAAMkE,KAAN;AACH;AACD,eAAO0B,MAAP;AACH,KARe,CAAhB;;AAUA;AACA,QAAIo8B,kBAAJ;AACA,QAAME,QAAQ,sBAAY,UAAC19B,OAAD,EAAUC,MAAV,EAAqB;AAC3Cu9B,oBAAY5qB,WAAW,YAAM;AACzByqB,iCAAqBjtB,GAArB,IAA4B,IAA5B,CADyB,CACS;AAClC,gBAAM1Q,QAAQ,IAAImU,KAAJ,CAAU,yBAAV,CAAd;AACAnU,kBAAMlE,MAAN,GAAe,SAAf;AACAyE,mBAAOP,KAAP;AACH,SALW,EAKT49B,OALS,CAAZ;AAMH,KAPa,CAAd;AAQA,WAAO,kBAAQK,IAAR,CAAa,CAAEF,OAAF,EAAWC,KAAX,CAAb,CAAP;AACH,C;;;;;;;;;;;;;;;;;QCpGeE,K,GAAAA,K;QAMA5sB,U,GAAAA,U;;AAPhB;AACO,SAAS4sB,KAAT,CAAe7hC,QAAf,EAAyBC,YAAzB,EAAuC;AAC1C,WAAOmC,KAAKm8B,GAAL,CAASv+B,QAAT,KAAsBoC,KAAK4S,GAAL,CAAS/U,YAAT,EAAuB,CAAvB,CAA7B;AACH;;AAED;AACA;AACO,SAASgV,UAAT,CAAoBjV,QAApB,EAA8BC,YAA9B,EAA4C;AAC/C,QAAM6hC,gBAAiB7hC,iBAAiB1B,SAAlB,GAA+B,GAA/B,GAAqC0B,YAA3D;AACA,QAAI1C,OAAO,KAAX;;AAEA,QAAIyC,aAAa+hC,QAAjB,EAA2B;AACvB;AACAxkC,eAAO,MAAP;AACH,KAHD,MAGO,IAAIyC,WAAW,CAAf,EAAkB;AACrBzC,eAAOskC,MAAM7hC,QAAN,EAAgB8hC,aAAhB,IAAiC,KAAjC,GAAyC,MAAhD;AACH;;AAED;AACA,WAAOvkC,IAAP;AACH,C;;;;;;;;;;;;;;;;;;ACrBD;;AACA;;;;;;AAEA,IAAMykC,aAAa,WAAnB;AACA,IAAMC,cAAc,YAApB;;AAEA;AACA;AACA,IAAMC,2BAA4B,SAA5BA,wBAA4B,CAAS72B,QAAT,EAAmB;AACjD,QAAI82B,UAAU,CAAd;AACA,WAAO,UAAUvjC,GAAV,EAAe;AAClB,YAAMkH,MAAMlH,IAAIS,QAAhB;AACA,YAAIyG,MAAMq8B,OAAV,EAAmB;AACf92B;AACH;AACD;AACA;AACA82B,kBAAUr8B,GAAV;AACH,KARD;AASH,CAXD;;AAaA,SAASs8B,sBAAT,CAAgChkC,KAAhC,EAAuCqc,iBAAvC,EAA0D;AACtDA,sBAAkB/Z,GAAlB,6BAA0CtC,MAAMikC,cAAhD;AACA5nB,sBAAkB/Z,GAAlB,+BAA4CtC,MAAMkkC,kBAAlD;AACA7nB,sBAAkB/Z,GAAlB,qBAAkCtC,MAAMmkC,OAAxC;AACAnkC,UAAMsC,GAAN,CAAU,kBAAV,EAA8BtC,MAAMokC,aAApC;AACH;;AAED,SAASC,eAAT,CAAyBrkC,KAAzB,EAAgCqc,iBAAhC,EAAmD;AAC/C,QAAIrc,MAAMokC,aAAV,EAAyB;AACrBJ,+BAAuBhkC,KAAvB,EAA8Bqc,iBAA9B;AACH;;AAED;AACA,QAAItZ,OAAO,KAAX;AACA/C,UAAMkkC,kBAAN,GAA2B,YAAW;AAClC,YAAInhC,IAAJ,EAAU;AACN;AACH;AACDA,eAAO,IAAP;AACA,YAAMuhC,UAAUtkC,MAAM6M,QAAtB;AACAy3B,gBAAQC,IAAR;;AAEA,YAAMC,OAAOF,QAAQG,aAAR,EAAb;AACApoB,0BAAkBnd,OAAlB,4BAA6C,EAAEwlC,UAAUF,IAAZ,EAA7C;AACAR,+BAAuBhkC,KAAvB,EAA8Bqc,iBAA9B;AACH,KAXD;;AAaArc,UAAMmkC,OAAN,GAAgBL,yBAAyB9jC,MAAMkkC,kBAA/B,CAAhB;;AAEAlkC,UAAMikC,cAAN,GAAuB,YAAW;AAC9BjkC,cAAM6M,QAAN,CAAe03B,IAAf;AACH,KAFD;;AAIA;AACAvkC,UAAMokC,aAAN,GAAsB,UAASO,YAAT,EAAuBC,SAAvB,EAAkC;AACpD,YAAIA,SAAJ,EAAe;AACX5kC,kBAAM6M,QAAN,CAAe03B,IAAf,CAAoBV,WAApB;AACH,SAFD,MAEO;AACH7jC,kBAAM6M,QAAN,CAAe03B,IAAf,CAAoBX,UAApB;AACH;AACJ,KAND;;AAQA5jC,UAAML,EAAN,CAAS,kBAAT,EAA6BK,MAAMokC,aAAnC;AACA/nB,sBAAkB1c,EAAlB,6BAAyCK,MAAMikC,cAA/C;AACA5nB,sBAAkBtZ,IAAlB,+BAA6C/C,MAAMkkC,kBAAnD;AACA7nB,sBAAkB1c,EAAlB,qBAAiCK,MAAMmkC,OAAvC;AACH;;AAED,IAAMU,UAAU,SAAVA,OAAU,CAASC,YAAT,EAAuBzoB,iBAAvB,EAA0C;AACtD,aAAS0oB,YAAT,CAAsB/kC,KAAtB,EAA6ByB,UAA7B,EAAyCujC,aAAzC,EAAwD;AACpD;AACA,YAAIhlC,MAAM6M,QAAN,IAAkBm4B,aAAtB,EAAqC;AACjChlC,kBAAM6M,QAAN,CAAeuI,GAAf,CAAmB4vB,cAAc3kC,GAAd,CAAkB,YAAlB,CAAnB;AACH;AACD;AACAL,cAAM6M,QAAN,GAAiB,qBAAjB;AACA7M,cAAM6M,QAAN,CAAe43B,aAAf,GAA+B,YAAW;AACtC,gBAAMD,OAAO,KAAKS,OAAL,uDAAb;AACA;AACA;AACA,gBAAMC,aAAa,KAAKD,OAAL,CAAapB,WAAb,4BAAnB;AACA,gBAAIqB,aAAa,CAAb,IAAkBA,aAAaV,IAAnC,EAAyC;AACrC,uBAAOU,UAAP;AACH;AACD,mBAAOV,IAAP;AACH,SATD;AAUAxkC,cAAM6M,QAAN,CAAe03B,IAAf;AACAvkC,cAAM6M,QAAN,CAAeiU,KAAf,CAAqBrf,WAAWpB,GAAX,CAAe,YAAf,CAArB;;AAEAgkC,wBAAgBrkC,KAAhB,EAAuBqc,iBAAvB;;AAEA5a,mBAAW9B,EAAX,CAAc,mBAAd,EAAmC,UAAUwlC,gBAAV,EAA4BznC,QAA5B,EAAsCwf,QAAtC,EAAgD;AAC/E,gBAAIxf,aAAawf,QAAjB,EAA2B;AACvBld,sBAAM6M,QAAN,CAAeuI,GAAf,CAAmB8H,QAAnB;AACAld,sBAAM6M,QAAN,CAAeiU,KAAf,CAAqBpjB,QAArB;AACH;AACJ,SALD;AAMH;;AAEDonC,iBAAapjC,MAAb,CAAoB,YAApB,EAAkCqjC,YAAlC;AACH,CAhCD;;kBAkCeF,O","file":"jwplayer.core.js","sourcesContent":["import instances from 'api/players';\nimport { showView } from 'api/core-shim';\nimport setConfig from 'api/set-config';\nimport ApiQueueDecorator from 'api/api-queue';\nimport PlaylistLoader from 'playlist/loader';\nimport Playlist, { filterPlaylist, validatePlaylist, fixSources } from 'playlist/playlist';\nimport InstreamAdapter from 'controller/instream-adapter';\nimport Captions from 'controller/captions';\nimport Model from 'controller/model';\nimport View from 'view/view';\nimport ViewModel from 'view/view-model';\nimport changeStateEvent from 'events/change-state-event';\nimport eventsMiddleware from 'controller/events-middleware';\nimport Events from 'utils/backbone.events';\nimport { AUTOPLAY_DISABLED, AUTOPLAY_MUTED, canAutoplay } from 'utils/can-autoplay';\nimport { OS, Features } from 'environment/environment';\nimport { streamType } from 'providers/utils/stream-type';\nimport Promise, { resolved } from 'polyfills/promise';\nimport cancelable from 'utils/cancelable';\nimport _ from 'utils/underscore';\nimport { INITIAL_MEDIA_STATE } from 'model/player-model';\nimport { PLAYER_STATE, STATE_BUFFERING, STATE_IDLE, STATE_COMPLETE, STATE_PAUSED, STATE_PLAYING, STATE_ERROR, STATE_LOADING,\n    STATE_STALLED, AUTOSTART_NOT_ALLOWED, MEDIA_BEFOREPLAY, PLAYLIST_LOADED, ERROR, PLAYLIST_COMPLETE, CAPTIONS_CHANGED, READY,\n    MEDIA_ERROR, MEDIA_COMPLETE, CAST_SESSION, FULLSCREEN, PLAYLIST_ITEM, MEDIA_VOLUME, MEDIA_MUTE, PLAYBACK_RATE_CHANGED,\n    CAPTIONS_LIST, RESIZE, MEDIA_VISUAL_QUALITY } from 'events/events';\nimport ProgramController from 'program/program-controller';\nimport initQoe from 'controller/qoe';\nimport { BACKGROUND_LOAD_OFFSET } from '../program/program-constants';\nimport Item from 'playlist/item';\n\n// The model stores a different state than the provider\nfunction normalizeState(newstate) {\n    if (newstate === STATE_LOADING || newstate === STATE_STALLED) {\n        return STATE_BUFFERING;\n    }\n    return newstate;\n}\n\nconst Controller = function() {};\n\nObject.assign(Controller.prototype, {\n    setup(config, _api, originalContainer, eventListeners, commandQueue, mediaPool) {\n        const _this = this;\n        const _model = _this._model = new Model();\n\n        let _view;\n        let _captions;\n        let _beforePlay = false;\n        let _actionOnAttach;\n        let _stopPlaylist = false;\n        let _interruptPlay;\n        let checkAutoStartCancelable = cancelable(_checkAutoStart);\n        let updatePlaylistCancelable = cancelable(function() {});\n        let primeBeforePlay = true;\n\n        _this.originalContainer = _this.currentContainer = originalContainer;\n        _this._events = eventListeners;\n\n        // Delegate trigger so we can run a middleware function before any event is bubbled through the API\n        _this.trigger = function (type, args) {\n            const data = eventsMiddleware(_model, type, args);\n            return Events.trigger.call(this, type, data);\n        };\n\n        let eventsReadyQueue = new ApiQueueDecorator(_this, [\n            'trigger',\n        ], () => true);\n\n        const _trigger = (type, event) => {\n            _this.trigger(type, event);\n        };\n\n        _model.setup(config);\n\n        const viewModel = new ViewModel(_model);\n\n        _view = this._view = new View(_api, viewModel);\n        _view.on('all', _trigger, _this);\n\n        const _programController = new ProgramController(_model, mediaPool);\n        updateProgramSoundSettings();\n        addProgramControllerListeners();\n        initQoe(_model, _programController);\n\n        _model.on(ERROR, _this.triggerError, _this);\n\n        // If we attempt to load flash, assume it is blocked if we don't hear back within a second\n        _model.on('change:flashBlocked', function(model, isBlocked) {\n            if (!isBlocked) {\n                this._model.set('errorEvent', undefined);\n                return;\n            }\n            // flashThrottle indicates whether this is a throttled event or plugin blocked event\n            const throttled = !!model.get('flashThrottle');\n            const errorEvent = {\n                message: throttled ? 'Click to run Flash' : 'Flash plugin failed to load'\n            };\n            // Only dispatch an error for Flash blocked, not throttled events\n            if (!throttled) {\n                this.trigger(ERROR, errorEvent);\n            }\n            this._model.set('errorEvent', errorEvent);\n        }, this);\n\n        _model.on('change:state', changeStateEvent, this);\n\n        _model.on('change:castState', function(model, evt) {\n            _this.trigger(CAST_SESSION, evt);\n        });\n\n        _model.on('change:fullscreen', function(model, bool) {\n            _this.trigger(FULLSCREEN, {\n                fullscreen: bool\n            });\n            if (bool) {\n                // Stop autoplay behavior when the player enters fullscreen\n                model.set('playOnViewable', false);\n            }\n        });\n\n        _model.on('change:volume', function(model, vol) {\n            _this.trigger(MEDIA_VOLUME, {\n                volume: vol\n            });\n        });\n\n        _model.on('change:mute', function(model) {\n            _this.trigger(MEDIA_MUTE, {\n                mute: model.getMute()\n            });\n        });\n\n        _model.on('change:playbackRate', function(model, rate) {\n            _this.trigger(PLAYBACK_RATE_CHANGED, {\n                playbackRate: rate,\n                position: model.get('position')\n            });\n        });\n\n        _model.on('change:scrubbing', function(model, state) {\n            if (state) {\n                _pause();\n            } else {\n                _play({ reason: 'interaction' });\n            }\n        });\n\n        // For onCaptionsList and onCaptionsChange\n        _model.on('change:captionsList', function(model, captionsList) {\n            _this.trigger(CAPTIONS_LIST, {\n                tracks: captionsList,\n                track: _model.get('captionsIndex') || 0\n            });\n        });\n\n        _model.on('change:mediaModel', function(model, mediaModel) {\n            model.set('errorEvent', undefined);\n            mediaModel.change('mediaState', function (changedMediaModel, state) {\n                if (!model.get('errorEvent')) {\n                    model.set(PLAYER_STATE, normalizeState(state));\n                }\n            }, this);\n            mediaModel.change('duration', function (changedMediaModel, duration) {\n                if (duration === 0) {\n                    return;\n                }\n                const minDvrWindow = model.get('minDvrWindow');\n                const type = streamType(duration, minDvrWindow);\n                model.setStreamType(type);\n            }, this);\n\n            const index = model.get('item') + 1;\n            const recsAuto = (model.get('related') || {}).oncomplete === 'autoplay';\n            let item = model.get('playlist')[index];\n            if ((item || recsAuto) && Features.backgroundLoading) {\n                const onPosition = (changedMediaModel, position) => {\n                    // Do not background load DAI items because that item will be dynamically replaced before play\n                    if ((item && !item.daiSetting) && position >= mediaModel.get('duration') - BACKGROUND_LOAD_OFFSET) {\n                        mediaModel.off('change:position', onPosition, this);\n                        _programController.backgroundLoad(item);\n                    } else if (recsAuto) {\n                        item = _model.get('nextUp');\n                    }\n                };\n                mediaModel.on('change:position', onPosition, this);\n            }\n        });\n\n        // Ensure captionsList event is raised after playlistItem\n        _captions = new Captions(_model);\n        _captions.on('all', _trigger, _this);\n\n        viewModel.on('viewSetup', (viewElement) => {\n            showView(this, viewElement);\n        });\n\n        this.playerReady = function() {\n            const related = _api.getPlugin('related');\n            if (related) {\n                related.on('nextUp', (nextUp) => {\n                    let item = null;\n                    if (nextUp === Object(nextUp)) {\n                        // Format the item from the nextUp feed into a valid PlaylistItem\n                        item = Item(nextUp);\n                        item.sources = fixSources(item, _model);\n                    }\n                    _model.set('nextUp', item);\n                });\n            }\n\n            // Fire 'ready' once the view has resized so that player width and height are available\n            // (requires the container to be in the DOM)\n            _view.once(RESIZE, _playerReadyNotify);\n\n            _view.init();\n        };\n\n        function _playerReadyNotify() {\n            _model.change('visibility', _updateViewable);\n            eventsReadyQueue.off();\n\n            // Tell the api that we are loaded\n            _this.trigger(READY, {\n                // this will be updated by Api\n                setupTime: 0\n            });\n\n            _model.change('playlist', function(model, playlist) {\n                if (playlist.length) {\n                    const eventData = {\n                        playlist: playlist\n                    };\n                    const feedData = _model.get('feedData');\n                    if (feedData) {\n                        const eventFeedData = Object.assign({}, feedData);\n                        delete eventFeedData.playlist;\n                        eventData.feedData = eventFeedData;\n                    }\n                    _this.trigger(PLAYLIST_LOADED, eventData);\n                }\n            });\n\n            _model.change('playlistItem', function(model, playlistItem) {\n                if (playlistItem) {\n                    _this.trigger(PLAYLIST_ITEM, {\n                        index: _model.get('item'),\n                        item: playlistItem\n                    });\n                }\n            });\n\n            eventsReadyQueue.flush();\n            eventsReadyQueue.destroy();\n            eventsReadyQueue = null;\n\n            _model.change('viewable', viewableChange);\n            _model.change('viewable', _checkPlayOnViewable);\n            _model.once('change:autostartFailed change:mute', function(model) {\n                model.off('change:viewable', _checkPlayOnViewable);\n            });\n\n            // Run _checkAutoStart() last\n            // 'viewable' changes can result in preload() being called on the initial provider instance\n            _checkAutoStart();\n        }\n\n        function _updateViewable(model, visibility) {\n            if (!_.isUndefined(visibility)) {\n                _model.set('viewable', Math.round(visibility));\n            }\n        }\n\n        function _checkAutoStart() {\n            if (!apiQueue) {\n                // this player has been destroyed\n                return;\n            }\n\n            // Autostart immediately if we're not waiting for the player to become viewable first.\n            if (_model.get('autostart') === true && !_model.get('playOnViewable')) {\n                _autoStart();\n            }\n            apiQueue.flush();\n        }\n\n        function viewableChange(model, viewable) {\n            _this.trigger('viewable', {\n                viewable: viewable\n            });\n\n            // Only attempt to preload if this is the first player on the page or viewable\n            if (instances[0] !== _api && viewable !== 1) {\n                return;\n            }\n            if (_model.get('state') === 'idle' && _model.get('autostart') === false) {\n                _programController.preloadVideo();\n            }\n        }\n\n        function _checkPlayOnViewable(model, viewable) {\n            if (model.get('playOnViewable')) {\n                if (viewable) {\n                    _autoStart();\n                } else if (OS.mobile) {\n                    _this.pause({ reason: 'autostart' });\n                }\n            }\n        }\n\n        function _load(item, feedData) {\n\n            const instream = _this._instreamAdapter;\n            if (instream) {\n                instream.noResume = true;\n            }\n            _this.trigger('destroyPlugin', {});\n            _stop(true);\n\n            checkAutoStartCancelable.cancel();\n            checkAutoStartCancelable = cancelable(_checkAutoStart);\n            updatePlaylistCancelable.cancel();\n\n            if (_inInteraction(window.event)) {\n                _programController.primeMediaElements();\n            }\n\n            let loadPromise;\n\n            switch (typeof item) {\n                case 'string': {\n                    _model.attributes.item = 0;\n                    _model.attributes.itemReady = false;\n                    const loadPlaylistPromise = _loadPlaylist(item).catch(error => {\n                        _this.triggerError({\n                            message: `Error loading playlist: ${error.message}`\n                        });\n                    });\n                    updatePlaylistCancelable = cancelable((data) => {\n                        if (data) {\n                            return _this.updatePlaylist(Playlist(data.playlist), data);\n                        }\n                    });\n                    loadPromise = loadPlaylistPromise.then(updatePlaylistCancelable.async);\n                    break;\n                }\n                case 'object':\n                    _model.attributes.item = 0;\n                    loadPromise = _this.updatePlaylist(Playlist(item), feedData || {});\n                    break;\n                case 'number':\n                    loadPromise = _setItem(item);\n                    break;\n                default:\n                    return;\n            }\n            loadPromise.catch(error => {\n                _this.triggerError({\n                    message: `Playlist error: ${error.message}`\n                });\n            });\n\n            loadPromise.then(checkAutoStartCancelable.async).catch(function() {});\n        }\n\n        function _loadPlaylist(toLoad) {\n            return new Promise((resolve, reject) => {\n                const loader = new PlaylistLoader();\n                loader.on(PLAYLIST_LOADED, function(data) {\n                    resolve(data);\n                });\n                loader.on(ERROR, function(error) {\n                    reject(error);\n                }, this);\n                loader.load(toLoad);\n            });\n        }\n\n        function _getAdState() {\n            return _this._instreamAdapter && _this._instreamAdapter.getState();\n        }\n\n        function _getState() {\n            const adState = _getAdState();\n            if (_.isString(adState)) {\n                return adState;\n            }\n            return _model.get('state');\n        }\n\n        function _play(meta) {\n            checkAutoStartCancelable.cancel();\n\n            if (_model.get('state') === STATE_ERROR) {\n                return resolved;\n            }\n\n            const playReason = _getReason(meta);\n            const startTime = meta ? meta.startTime : null;\n            _model.set('playReason', playReason);\n            // Stop autoplay behavior if the video is started by the user or an api call\n            if (playReason === 'interaction' || playReason === 'external') {\n                _model.set('playOnViewable', false);\n            }\n\n            const adState = _getAdState();\n            if (_.isString(adState)) {\n                // this will resume the ad. _api.playAd would load a new ad\n                _api.pauseAd(false);\n                return resolved;\n            }\n\n            if (_model.get('state') === STATE_COMPLETE) {\n                _stop(true);\n                _setItem(0);\n            }\n\n            if (!_beforePlay) {\n                _beforePlay = true;\n                _this.trigger(MEDIA_BEFOREPLAY, {\n                    playReason,\n                    startTime\n                });\n                _beforePlay = false;\n\n                if (_inInteraction(window.event) && primeBeforePlay) {\n                    _programController.primeMediaElements();\n                    primeBeforePlay = false;\n                }\n\n                if (_interruptPlay) {\n                    // Force tags to prime if we're about to play an ad\n                    // Resetting the source in order to prime is OK since we'll be switching it anyway\n                    if (_inInteraction(window.event) && !Features.backgroundLoading) {\n                        _model.get('mediaElement').load();\n                    }\n                    _interruptPlay = false;\n                    _actionOnAttach = null;\n                    return resolved;\n                }\n            }\n\n            return _programController.playVideo(playReason)\n                .then(() => {\n                    // If playback succeeded that means we captured a gesture (and used it to prime the pool)\n                    // Avoid priming again in beforePlay because it could cause BGL'd media to be source reset\n                    primeBeforePlay = false;\n                });\n        }\n\n        function _getReason(meta) {\n            if (meta && meta.reason) {\n                return meta.reason;\n            }\n            if (_inInteraction(window.event)) {\n                return 'interaction';\n            }\n            return 'external';\n        }\n\n        function _autoStart() {\n            const state = _model.get('state');\n            if (state !== STATE_IDLE && state !== STATE_PAUSED) {\n                return;\n            }\n\n            // Reset cancelable for new autoplay test below.\n            checkAutoStartCancelable = cancelable(_checkAutoStart);\n\n            // Detect and store browser autoplay setting in the model.\n            const adConfig = _model.get('advertising');\n            canAutoplay(mediaPool, {\n                cancelable: checkAutoStartCancelable,\n                muted: _this.getMute(),\n                allowMuted: adConfig ? adConfig.autoplayadsmuted : true\n            }).then(result => {\n                _model.set('canAutoplay', result);\n\n                // Only apply autostartMuted on un-muted autostart attempt.\n                if (result === AUTOPLAY_MUTED && !_this.getMute()) {\n                    _model.set('autostartMuted', true);\n                    updateProgramSoundSettings();\n\n                    _model.once('change:autostartMuted', function(model) {\n                        model.off('change:viewable', _checkPlayOnViewable);\n                    });\n                }\n\n                return _play({ reason: 'autostart' }).catch(() => {\n                    if (!_this._instreamAdapter) {\n                        _model.set('autostartFailed', true);\n                    }\n                    _actionOnAttach = null;\n                });\n            }).catch(error => {\n                _model.set('canAutoplay', AUTOPLAY_DISABLED);\n                _model.set('autostart', false);\n\n                // Emit event unless test was explicitly canceled.\n                if (!checkAutoStartCancelable.cancelled()) {\n                    const { reason } = error;\n                    _this.trigger(AUTOSTART_NOT_ALLOWED, {\n                        reason,\n                        error\n                    });\n                }\n            });\n        }\n\n        function _stop(internal) {\n            checkAutoStartCancelable.cancel();\n            apiQueue.empty();\n\n            const adState = _getAdState();\n            if (_.isString(adState)) {\n                return;\n            }\n\n            const fromApi = !internal;\n\n            _actionOnAttach = null;\n\n            if (fromApi) {\n                _stopPlaylist = true;\n            }\n\n            if (_beforePlay) {\n                _interruptPlay = true;\n            }\n\n            _model.set('errorEvent', undefined);\n            _programController.stopVideo();\n        }\n\n        function _pause(meta) {\n            _actionOnAttach = null;\n            checkAutoStartCancelable.cancel();\n\n            const pauseReason = _getReason(meta);\n            _model.set('pauseReason', pauseReason);\n            // Stop autoplay behavior if the video is paused by the user or an api call\n            if (pauseReason === 'interaction' || pauseReason === 'external') {\n                _model.set('playOnViewable', false);\n            }\n\n            const adState = _getAdState();\n            if (_.isString(adState)) {\n                _api.pauseAd(true);\n                return;\n            }\n\n            switch (_model.get('state')) {\n                case STATE_ERROR:\n                    return;\n                case STATE_PLAYING:\n                case STATE_BUFFERING: {\n                    _programController.pause();\n                    break;\n                }\n                default:\n                    if (_beforePlay) {\n                        _interruptPlay = true;\n                    }\n            }\n        }\n\n        function _isIdle() {\n            const state = _model.get('state');\n            return (state === STATE_IDLE || state === STATE_COMPLETE || state === STATE_ERROR);\n        }\n\n        function _seek(pos, meta) {\n            if (_model.get('state') === STATE_ERROR) {\n                return;\n            }\n            _programController.position = pos;\n            if (!_model.get('scrubbing') && _model.get('state') !== STATE_PLAYING) {\n                meta = meta || {};\n                meta.startTime = pos;\n                this.play(meta);\n            }\n        }\n\n        function _item(index, meta) {\n            _stop(true);\n            _setItem(index);\n            _play(meta).catch(() => {\n                // Suppress \"Uncaught (in promise) Error\"\n            });\n        }\n\n        function _setItem(index) {\n            _programController.stopVideo();\n\n            const playlist = _model.get('playlist');\n            const length = playlist.length;\n\n            // If looping past the end, or before the beginning\n            index = (parseInt(index, 10) || 0) % length;\n            if (index < 0) {\n                index += length;\n            }\n\n            return _programController.setActiveItem(index);\n        }\n\n        function _prev(meta) {\n            _item(_model.get('item') - 1, meta);\n        }\n\n        function _next(meta) {\n            _item(_model.get('item') + 1, meta);\n        }\n\n        function _completeHandler() {\n            if (!_isIdle()) {\n                // Something has made an API call before the complete handler has fired.\n                return;\n            } else if (_stopPlaylist) {\n                // Stop called in onComplete event listener\n                _stopPlaylist = false;\n                return;\n            }\n\n            _actionOnAttach = _completeHandler;\n\n            const idx = _model.get('item');\n            if (idx === _model.get('playlist').length - 1) {\n                // If it's the last item in the playlist\n                if (_model.get('repeat')) {\n                    _next({ reason: 'repeat' });\n                } else {\n                    // Exit fullscreen on IOS so that our overlays show to the user\n                    if (OS.iOS) {\n                        _setFullscreen(false);\n                    }\n                    // Autoplay/pause no longer needed since there's no more media to play\n                    // This prevents media from replaying when a completed video scrolls into view\n                    _model.set('playOnViewable', false);\n                    _model.set('state', STATE_COMPLETE);\n                    _this.trigger(PLAYLIST_COMPLETE, {});\n                }\n                return;\n            }\n\n            // It wasn't the last item in the playlist,\n            //  so go to the next one and trigger an autoadvance event\n            const related = _api.getPlugin('related');\n            triggerAdvanceEvent(related, 'nextAutoAdvance');\n            _next({ reason: 'playlist' });\n        }\n\n        function _setCurrentQuality(index) {\n            _programController.quality = index;\n        }\n\n        function _getCurrentQuality() {\n            return _programController.quality;\n        }\n\n        function _getConfig() {\n            return this._model ? this._model.getConfiguration() : undefined;\n        }\n\n        function _getVisualQuality() {\n            const mediaModel = this._model.get('mediaModel');\n            if (mediaModel) {\n                return mediaModel.get(MEDIA_VISUAL_QUALITY);\n            }\n            return null;\n        }\n\n        function _getQualityLevels() {\n            return _programController.qualities;\n        }\n\n        function _setCurrentAudioTrack(index) {\n            _programController.audioTrack = index;\n        }\n\n        function _getCurrentAudioTrack() {\n            return _programController.audioTrack;\n        }\n\n        function _getAudioTracks() {\n            return _programController.audioTracks;\n        }\n\n        function _setCurrentCaptions(index) {\n            index = parseInt(index, 10) || 0;\n\n            _model.persistVideoSubtitleTrack(index);\n            _programController.subtitles = index;\n\n            _this.trigger(CAPTIONS_CHANGED, {\n                tracks: _getCaptionsList(),\n                track: index\n            });\n        }\n\n        function _getCurrentCaptions() {\n            return _captions.getCurrentIndex();\n        }\n\n        function _getCaptionsList() {\n            return _captions.getCaptionsList();\n        }\n\n        /* Used for the InStream API */\n        function _detachMedia() {\n            if (_beforePlay) {\n                _interruptPlay = true;\n            }\n\n            if (Features.backgroundLoading) {\n                _programController.backgroundActiveMedia();\n            } else {\n                _programController.attached = false;\n            }\n        }\n\n        function _attachMedia(position) {\n            // Called after instream ends\n\n            if (Features.backgroundLoading) {\n                _programController.restoreBackgroundMedia();\n            } else {\n                // Set the position before attaching so that we resume at the expected time\n                _programController.position = position || 0;\n                _programController.attached = true;\n            }\n\n            if (typeof _actionOnAttach === 'function') {\n                _actionOnAttach();\n            }\n        }\n\n        function _setFullscreen(state) {\n            if (!_.isBoolean(state)) {\n                state = !_model.get('fullscreen');\n            }\n\n            _model.set('fullscreen', state);\n            if (_this._instreamAdapter && _this._instreamAdapter._adModel) {\n                _this._instreamAdapter._adModel.set('fullscreen', state);\n            }\n        }\n\n        function _nextUp() {\n            const related = _api.getPlugin('related');\n            triggerAdvanceEvent(related, 'nextClick', () => related.next());\n        }\n\n        function triggerAdvanceEvent(related, evt, cb) {\n            if (!related) {\n                return;\n            }\n            const nextUp = _model.get('nextUp');\n            if (nextUp) {\n                _this.trigger(evt, {\n                    mode: nextUp.mode,\n                    ui: 'nextup',\n                    target: nextUp,\n                    itemsShown: [ nextUp ],\n                    feedData: nextUp.feedData,\n                });\n            }\n            if (typeof cb === 'function') {\n                cb();\n            }\n        }\n\n        function addProgramControllerListeners() {\n            _programController\n                .on('all', _trigger, _this)\n                .on('subtitlesTracks', (e) => {\n                    _captions.setSubtitlesTracks(e.tracks);\n                    const defaultCaptionsIndex = _captions.getCurrentIndex();\n\n                    // set the current captions if the default index isn't 0 or \"Off\"\n                    if (defaultCaptionsIndex > 0) {\n                        _setCurrentCaptions(defaultCaptionsIndex);\n                    }\n                }, _this)\n                .on(MEDIA_COMPLETE, () => {\n                    // Insert a small delay here so that other complete handlers can execute\n                    resolved.then(_completeHandler);\n                }, _this)\n                .on(MEDIA_ERROR, _this.triggerError, _this);\n        }\n\n        function updateProgramSoundSettings() {\n            _programController.mute = _model.getMute();\n            _programController.volume = _model.get('volume');\n        }\n\n        /** Controller API / public methods **/\n        this.load = _load;\n        this.play = _play;\n        this.pause = _pause;\n        this.seek = _seek;\n        this.stop = _stop;\n        this.playlistItem = _item;\n        this.playlistNext = _next;\n        this.playlistPrev = _prev;\n        this.setCurrentCaptions = _setCurrentCaptions;\n        this.setCurrentQuality = _setCurrentQuality;\n        this.setFullscreen = _setFullscreen;\n        this.detachMedia = _detachMedia;\n        this.attachMedia = _attachMedia;\n        this.getCurrentQuality = _getCurrentQuality;\n        this.getQualityLevels = _getQualityLevels;\n        this.setCurrentAudioTrack = _setCurrentAudioTrack;\n        this.getCurrentAudioTrack = _getCurrentAudioTrack;\n        this.getAudioTracks = _getAudioTracks;\n        this.getCurrentCaptions = _getCurrentCaptions;\n        this.getCaptionsList = _getCaptionsList;\n        this.getVisualQuality = _getVisualQuality;\n        this.getConfig = _getConfig;\n        this.getState = _getState;\n        this.next = _nextUp;\n        this.setConfig = (newConfig) => {\n            setConfig(_this, newConfig);\n        };\n        this.setItemIndex = _setItem;\n\n        // Program Controller passthroughs\n        this.playVideo = (playReason) => _programController.playVideo(playReason);\n        this.stopVideo = () => _programController.stopVideo();\n        this.castVideo = (castProvider, item) => _programController.castVideo(castProvider, item);\n        this.stopCast = () => _programController.stopCast();\n        this.backgroundActiveMedia = () => _programController.backgroundActiveMedia();\n        this.restoreBackgroundMedia = () => _programController.restoreBackgroundMedia();\n        this.preloadNextItem = () => {\n            if (_programController.backgroundMedia) {\n                // Instruct the background media to preload if it's already been loaded\n                _programController.preloadVideo();\n            }\n        };\n        this.isBeforeComplete = () => _programController.beforeComplete;\n\n        // Model passthroughs\n        this.setVolume = (volume) => {\n            _model.setVolume(volume);\n            updateProgramSoundSettings();\n        };\n        this.setMute = (mute) => {\n            _model.setMute(mute);\n            updateProgramSoundSettings();\n        };\n        this.setPlaybackRate = (playbackRate) => {\n            _model.setPlaybackRate(playbackRate);\n        };\n        this.getProvider = () => _model.get('provider');\n        this.getWidth = () => _model.get('containerWidth');\n        this.getHeight = () => _model.get('containerHeight');\n        this.getItemQoe = () => _model._qoeItem;\n        this.addButton = function(img, tooltip, callback, id, btnClass) {\n            let customButtons = _model.get('customButtons') || [];\n            let replaced = false;\n            const newButton = {\n                img: img,\n                tooltip: tooltip,\n                callback: callback,\n                id: id,\n                btnClass: btnClass\n            };\n\n            customButtons = customButtons.reduce((buttons, button) => {\n                if (button.id === id) {\n                    replaced = true;\n                    buttons.push(newButton);\n                } else {\n                    buttons.push(button);\n                }\n                return buttons;\n            }, []);\n\n            if (!replaced) {\n                customButtons.unshift(newButton);\n            }\n\n            _model.set('customButtons', customButtons);\n        };\n        this.removeButton = function(id) {\n            const customButtons = _.filter(\n                _model.get('customButtons'),\n                (button) => button.id !== id\n            );\n\n            _model.set('customButtons', customButtons);\n        };\n\n        // View passthroughs\n        this.resize = _view.resize;\n        this.getSafeRegion = _view.getSafeRegion;\n        this.setCaptions = _view.setCaptions;\n\n        this.checkBeforePlay = function() {\n            return _beforePlay;\n        };\n\n        this.setControls = function (mode) {\n            if (!_.isBoolean(mode)) {\n                mode = !_model.get('controls');\n            }\n            _model.set('controls', mode);\n            _programController.controls = mode;\n        };\n\n        this.setCues = function (cues) {\n            _model.set('cues', cues);\n        };\n\n        this.updatePlaylist = function(playlist, feedData) {\n            try {\n                const filteredPlaylist = filterPlaylist(playlist, _model, feedData);\n\n                // Throw exception if playlist is empty\n                validatePlaylist(filteredPlaylist);\n\n                _model.set('feedData', feedData);\n                _model.set('playlist', filteredPlaylist);\n            } catch (error) {\n                return Promise.reject(error);\n            }\n            return _setItem(_model.get('item'));\n        };\n\n        this.playerDestroy = function () {\n            this.trigger('destroyPlugin', {});\n            this.off();\n            this.stop();\n            showView(this, this.originalContainer);\n            if (_view) {\n                _view.destroy();\n            }\n            if (_model) {\n                _model.destroy();\n            }\n            if (apiQueue) {\n                apiQueue.destroy();\n            }\n            if (_captions) {\n                _captions.destroy();\n            }\n            if (_programController) {\n                _programController.destroy();\n            }\n            this.instreamDestroy();\n        };\n\n        this.isBeforePlay = this.checkBeforePlay;\n\n        this.createInstream = function() {\n            this.instreamDestroy();\n            this._instreamAdapter = new InstreamAdapter(this, _model, _view, mediaPool);\n            return this._instreamAdapter;\n        };\n\n        this.skipAd = function() {\n            if (this._instreamAdapter) {\n                this._instreamAdapter.skipAd();\n            }\n        };\n\n        this.instreamDestroy = function() {\n            if (_this._instreamAdapter) {\n                _this._instreamAdapter.destroy();\n                _this._instreamAdapter = null;\n            }\n        };\n\n        // Setup ApiQueueDecorator after instance methods have been assigned\n        const apiQueue = new ApiQueueDecorator(this, [\n            'play',\n            'pause',\n            'setCurrentAudioTrack',\n            'setCurrentCaptions',\n            'setCurrentQuality',\n            'setFullscreen',\n        ], () => !this._model.get('itemReady') || eventsReadyQueue);\n        // Add commands from CoreLoader to queue\n        apiQueue.queue.push.apply(apiQueue.queue, commandQueue);\n\n        _view.setup();\n    },\n    get(property) {\n        if (property in INITIAL_MEDIA_STATE) {\n            const mediaModel = this._model.get('mediaModel');\n            if (mediaModel) {\n                return mediaModel.get(property);\n            }\n            return INITIAL_MEDIA_STATE[property];\n        }\n        return this._model.get(property);\n    },\n    getContainer() {\n        return this.currentContainer || this.originalContainer;\n    },\n    getMute() {\n        return this._model.getMute();\n    },\n    triggerError(evt) {\n        this._model.set('errorEvent', evt);\n        this._model.set('state', STATE_ERROR);\n        this._model.once('change:state', function() {\n            this._model.set('errorEvent', undefined);\n        }, this);\n\n        this.trigger(ERROR, evt);\n    }\n});\n\n\nfunction _inInteraction(event) {\n    return event && /^(?:mouse|pointer|touch|gesture|click|key)/.test(event.type);\n}\n\nexport default Controller;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/controller/controller.js","import { Browser, OS, Features } from 'environment/environment';\nimport { DRAG, DRAG_START, DRAG_END, CLICK, DOUBLE_CLICK, MOVE, OUT, TAP, DOUBLE_TAP, OVER, ENTER } from 'events/events';\nimport Events from 'utils/backbone.events';\nimport { now } from 'utils/date';\n\nconst TouchEvent = window.TouchEvent;\nconst PointerEvent = window.PointerEvent;\nconst _supportsPointerEvents = ('PointerEvent' in window) && !OS.android;\nconst _supportsTouchEvents = ('ontouchstart' in window);\nconst _useMouseEvents = !_supportsPointerEvents && !(_supportsTouchEvents && OS.mobile);\nconst _isOSXFirefox = Browser.firefox && OS.mac;\n\nfunction getCoord(e, c) {\n    return /touch/.test(e.type) ? (e.originalEvent || e).changedTouches[0]['page' + c] : e['page' + c];\n}\n\nfunction isRightClick(evt) {\n    const e = evt || window.event;\n\n    if (!(evt instanceof MouseEvent)) {\n        return false;\n    }\n\n    if ('which' in e) {\n        // Gecko (Firefox), WebKit (Safari/Chrome) & Opera\n        return (e.which === 3);\n    } else if ('button' in e) {\n        // IE and Opera\n        return (e.button === 2);\n    }\n\n    return false;\n}\n\nfunction isEnterKey(evt) {\n    const e = evt || window.event;\n\n    if ((e instanceof KeyboardEvent) && e.keyCode === 13) {\n        evt.stopPropagation();\n        return true;\n    }\n\n    return false;\n}\n\nfunction normalizeUIEvent(type, srcEvent, target) {\n    let source;\n\n    if (srcEvent instanceof MouseEvent || (!srcEvent.touches && !srcEvent.changedTouches)) {\n        source = srcEvent;\n    } else if (srcEvent.touches && srcEvent.touches.length) {\n        source = srcEvent.touches[0];\n    } else {\n        source = srcEvent.changedTouches[0];\n    }\n\n    return {\n        type: type,\n        sourceEvent: srcEvent,\n        target: srcEvent.target,\n        currentTarget: target,\n        pageX: source.pageX,\n        pageY: source.pageY\n    };\n}\n\n// Preventdefault to prevent click events\nfunction preventDefault(evt) {\n    // Because sendEvent from utils.eventdispatcher clones evt objects instead of passing them\n    //  we cannot call evt.preventDefault() on them\n    if (!(evt instanceof MouseEvent) && !(evt instanceof TouchEvent)) {\n        return;\n    }\n    if (evt.preventManipulation) {\n        evt.preventManipulation();\n    }\n    // prevent scrolling\n    if (evt.preventDefault) {\n        evt.preventDefault();\n    }\n}\n\nconst UI = function (elem, options) {\n    const _elem = elem;\n    let _hasMoved = false;\n    let _startX = 0;\n    let _startY = 0;\n    let _lastClickTime = 0;\n    let _doubleClickDelay = 300;\n    let _touchListenerTarget;\n    let _pointerId;\n\n    options = options || {};\n\n    const listenerOptions = Features.passiveEvents ? { passive: !options.preventScrolling } : false;\n\n    const interactEndDelegate = (event) => interactEndHandler(event);\n\n    // If its not mobile, add mouse listener.  Add touch listeners so touch devices that aren't Android or iOS\n    // (windows phones) still get listeners just in case they want to use them.\n    if (_supportsPointerEvents) {\n        elem.addEventListener('pointerdown', interactStartHandler, listenerOptions);\n        if (options.useHover) {\n            elem.addEventListener('pointerover', overHandler);\n            elem.addEventListener('pointerout', pointerOutHandler);\n        }\n        if (options.useMove) {\n            elem.addEventListener('pointermove', moveHandler);\n        }\n    } else {\n        if (_useMouseEvents) {\n            elem.addEventListener('mousedown', interactStartHandler, listenerOptions);\n            if (options.useHover) {\n                elem.addEventListener('mouseover', overHandler);\n                elem.addEventListener('mouseout', outHandler);\n            }\n            if (options.useMove) {\n                elem.addEventListener('mousemove', moveHandler);\n            }\n        }\n\n        // Always add this, in case we don't properly identify the device as mobile\n        elem.addEventListener('touchstart', interactStartHandler, listenerOptions);\n    }\n\n    elem.addEventListener('keydown', keyHandler);\n    if (options.useFocus) {\n        elem.addEventListener('focus', overHandler);\n        elem.addEventListener('blur', outHandler);\n    }\n\n    // overHandler and outHandler not assigned in touch situations\n    function overHandler(evt) {\n        if (evt.pointerType !== 'touch') {\n            triggerEvent(OVER, evt);\n        }\n    }\n\n    function moveHandler(evt) {\n        if (evt.pointerType !== 'touch') {\n            triggerEvent(MOVE, evt);\n        }\n    }\n\n    function pointerOutHandler(evt) {\n        if (evt.pointerType !== 'touch' && 'x' in evt) {\n            // elementFromPoint to handle an issue where setPointerCapture is causing a pointerout event\n            const { x, y } = evt;\n            const overElement = document.elementFromPoint(x, y);\n            if (!elem.contains(overElement)) {\n                triggerEvent(OUT, evt);\n            }\n        }\n    }\n\n    function outHandler(evt) {\n        triggerEvent(OUT, evt);\n    }\n\n    function keyHandler(evt) {\n        if (isEnterKey(evt)) {\n            triggerEvent(ENTER, evt);\n        }\n    }\n\n    function setEventListener(element, eventName, callback) {\n        element.removeEventListener(eventName, callback);\n        element.addEventListener(eventName, callback);\n    }\n\n    function interactStartHandler(evt) {\n        _touchListenerTarget = evt.target;\n        _startX = getCoord(evt, 'X');\n        _startY = getCoord(evt, 'Y');\n\n        if (!isRightClick(evt)) {\n\n            if (evt.type === 'pointerdown' && evt.isPrimary) {\n                if (options.preventScrolling) {\n                    _pointerId = evt.pointerId;\n                    elem.setPointerCapture(_pointerId);\n                }\n                setEventListener(elem, 'pointermove', interactDragHandler, listenerOptions);\n                setEventListener(elem, 'pointercancel', interactEndHandler);\n\n                // Listen for mouseup after mouse pointer down because pointerup doesn't fire on swf objects\n                if (evt.pointerType === 'mouse' && _touchListenerTarget.nodeName === 'OBJECT') {\n                    setEventListener(document, 'mouseup', interactEndDelegate);\n                } else {\n                    setEventListener(elem, 'pointerup', interactEndHandler);\n                }\n            } else if (evt.type === 'mousedown') {\n                setEventListener(document, 'mousemove', interactDragHandler, listenerOptions);\n\n                // Handle clicks in OSX Firefox over Flash 'object'\n                if (_isOSXFirefox && evt.target.nodeName.toLowerCase() === 'object') {\n                    setEventListener(elem, 'click', interactEndHandler);\n                } else {\n                    setEventListener(document, 'mouseup', interactEndDelegate);\n                }\n            } else if (evt.type === 'touchstart') {\n                setEventListener(_touchListenerTarget, 'touchmove', interactDragHandler, listenerOptions);\n                setEventListener(_touchListenerTarget, 'touchcancel', interactEndHandler);\n                setEventListener(_touchListenerTarget, 'touchend', interactEndHandler);\n            }\n\n            // Prevent scrolling the screen while dragging on mobile.\n            if (options.preventScrolling) {\n                preventDefault(evt);\n            }\n        }\n    }\n\n    function interactDragHandler(evt) {\n        const movementThreshold = 6;\n\n        if (_hasMoved) {\n            triggerEvent(DRAG, evt);\n        } else {\n            const endX = getCoord(evt, 'X');\n            const endY = getCoord(evt, 'Y');\n            const moveX = endX - _startX;\n            const moveY = endY - _startY;\n            if (moveX * moveX + moveY * moveY > movementThreshold * movementThreshold) {\n                triggerEvent(DRAG_START, evt);\n                _hasMoved = true;\n                triggerEvent(DRAG, evt);\n            }\n        }\n\n        // Prevent scrolling the screen dragging while dragging on mobile.\n        if (options.preventScrolling) {\n            preventDefault(evt);\n        }\n    }\n\n    function interactEndHandler(evt) {\n        const isPointerEvent = (evt.type === 'pointerup' || evt.type === 'pointercancel');\n        if (isPointerEvent && options.preventScrolling) {\n            elem.releasePointerCapture(_pointerId);\n        }\n        elem.removeEventListener('pointermove', interactDragHandler);\n        elem.removeEventListener('pointercancel', interactEndHandler);\n        elem.removeEventListener('pointerup', interactEndHandler);\n        document.removeEventListener('mousemove', interactDragHandler);\n        document.removeEventListener('mouseup', interactEndDelegate);\n        if (_touchListenerTarget) {\n            _touchListenerTarget.removeEventListener('touchmove', interactDragHandler);\n            _touchListenerTarget.removeEventListener('touchcancel', interactEndHandler);\n            _touchListenerTarget.removeEventListener('touchend', interactEndHandler);\n        }\n\n        if (_hasMoved) {\n            triggerEvent(DRAG_END, evt);\n        } else if ((!options.directSelect || evt.target === elem) && evt.type.indexOf('cancel') === -1) {\n            if (evt.type === 'mouseup' || evt.type === 'click' || isPointerEvent && evt.pointerType === 'mouse') {\n                triggerEvent(CLICK, evt);\n            } else {\n                triggerEvent(TAP, evt);\n                if (evt.type === 'touchend') {\n                    // preventDefault to not dispatch the 300ms delayed click after a tap\n                    preventDefault(evt);\n                }\n            }\n        }\n\n        _touchListenerTarget = null;\n        _hasMoved = false;\n    }\n\n    const self = this;\n    function triggerEvent(type, srcEvent) {\n        let evt;\n        if (options.enableDoubleTap && (type === CLICK || type === TAP)) {\n            if (now() - _lastClickTime < _doubleClickDelay) {\n                const doubleType = (type === CLICK) ?\n                    DOUBLE_CLICK : DOUBLE_TAP;\n                evt = normalizeUIEvent(doubleType, srcEvent, _elem);\n                self.trigger(doubleType, evt);\n                _lastClickTime = 0;\n            } else {\n                _lastClickTime = now();\n            }\n        }\n        evt = normalizeUIEvent(type, srcEvent, _elem);\n        self.trigger(type, evt);\n    }\n\n    this.triggerEvent = triggerEvent;\n\n    this.destroy = function() {\n        this.off();\n        elem.removeEventListener('touchstart', interactStartHandler);\n        elem.removeEventListener('mousedown', interactStartHandler);\n        elem.removeEventListener('keydown', keyHandler);\n\n        if (_touchListenerTarget) {\n            _touchListenerTarget.removeEventListener('touchmove', interactDragHandler);\n            _touchListenerTarget.removeEventListener('touchcancel', interactEndHandler);\n            _touchListenerTarget.removeEventListener('touchend', interactEndHandler);\n            _touchListenerTarget = null;\n        }\n\n        if (_supportsPointerEvents) {\n            if (options.preventScrolling) {\n                elem.releasePointerCapture(_pointerId);\n            }\n            elem.removeEventListener('pointerover', overHandler);\n            elem.removeEventListener('pointerdown', interactStartHandler);\n            elem.removeEventListener('pointermove', interactDragHandler);\n            elem.removeEventListener('pointermove', moveHandler);\n            elem.removeEventListener('pointercancel', interactEndHandler);\n            elem.removeEventListener('pointerout', pointerOutHandler);\n            elem.removeEventListener('pointerup', interactEndHandler);\n        }\n\n        elem.removeEventListener('click', interactEndHandler);\n        elem.removeEventListener('mouseover', overHandler);\n        elem.removeEventListener('mousemove', moveHandler);\n        elem.removeEventListener('mouseout', outHandler);\n        document.removeEventListener('mousemove', interactDragHandler);\n        document.removeEventListener('mouseup', interactEndDelegate);\n\n        if (options.useFocus) {\n            elem.removeEventListener('focus', overHandler);\n            elem.removeEventListener('blur', outHandler);\n        }\n    };\n\n    return this;\n};\n\n// Expose what the source of the event is so that we can ensure it's handled correctly.\n// This returns only 'touch' or 'mouse'. 'pen' will be treated as a mouse.\nexport function getPointerType(evt) {\n    if ((_supportsTouchEvents && evt instanceof TouchEvent) ||\n        (_supportsPointerEvents && evt instanceof PointerEvent && evt.pointerType === 'touch')) {\n        return 'touch';\n    }\n\n    return 'mouse';\n}\n\nObject.assign(UI.prototype, Events);\n\nexport default UI;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/ui.js","import { seconds, trim } from 'utils/strings';\n\n// Component that loads and parses an SRT file\n\nexport default function Srt(data) {\n    // Trim whitespace and split the list by returns.\n    var _captions = [];\n    data = trim(data);\n    var list = data.split('\\r\\n\\r\\n');\n    if (list.length === 1) {\n        list = data.split('\\n\\n');\n    }\n\n    for (var i = 0; i < list.length; i++) {\n        if (list[i] === 'WEBVTT') {\n            continue;\n        }\n        // Parse each entry\n        var entry = _entry(list[i]);\n        if (entry.text) {\n            _captions.push(entry);\n        }\n    }\n\n    return _captions;\n}\n\n\n/* Parse a single captions entry. */\nfunction _entry(data) {\n    var entry = {};\n    var array = data.split('\\r\\n');\n    if (array.length === 1) {\n        array = data.split('\\n');\n    }\n    var idx = 1;\n    if (array[0].indexOf(' --> ') > 0) {\n        idx = 0;\n    }\n    if (array.length > idx + 1 && array[idx + 1]) {\n        // This line contains the start and end.\n        var line = array[idx];\n        var index = line.indexOf(' --> ');\n        if (index > 0) {\n            entry.begin = seconds(line.substr(0, index));\n            entry.end = seconds(line.substr(index + 5));\n            // Remaining lines contain the text\n            entry.text = array.slice(idx + 1).join('\\r\\n');\n        }\n    }\n    return entry;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/parsers/captions/srt.js","import { resolved } from 'polyfills/promise';\n\nexport default function cancelable(callback) {\n    let cancelled = false;\n\n    return {\n        async: function() {\n            const args = arguments;\n            return resolved.then(() => {\n                if (cancelled) {\n                    return;\n                }\n                return callback.apply(this, args);\n            });\n        },\n        cancel: () => {\n            cancelled = true;\n        },\n        cancelled: () => cancelled\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/cancelable.js","import { OS } from 'environment/environment';\nimport SimpleModel from 'model/simplemodel';\nimport { INITIAL_PLAYER_STATE, INITIAL_MEDIA_STATE } from 'model/player-model';\nimport { STATE_IDLE } from 'events/events';\nimport _ from 'utils/underscore';\nimport { seconds } from 'utils/strings';\nimport Providers from 'providers/providers';\n\n// Represents the state of the player\nconst Model = function() {\n    const _this = this;\n    let providers;\n    let _provider;\n    this.mediaModel = new MediaModel();\n\n    this.set('attached', true);\n    this.set('mediaModel', this.mediaModel);\n\n    this.setup = function(config) {\n        Object.assign(this.attributes, config, INITIAL_PLAYER_STATE);\n        providers = new Providers(this.getConfiguration());\n        this.setAutoStart();\n        return this;\n    };\n\n    this.getConfiguration = function() {\n        const config = this.clone();\n        const mediaModelAttributes = config.mediaModel.attributes;\n        Object.keys(INITIAL_MEDIA_STATE).forEach(key => {\n            config[key] = mediaModelAttributes[key];\n        });\n        delete config.instream;\n        delete config.mediaModel;\n        return config;\n    };\n\n    this.persistQualityLevel = function(quality, levels) {\n        var currentLevel = levels[quality] || {};\n        var label = currentLevel.label;\n        this.set('qualityLabel', label);\n    };\n\n    this.setActiveItem = function (index) {\n        const item = this.get('playlist')[index];\n        this.resetItem(item);\n        this.attributes.playlistItem = null;\n        this.set('item', index);\n        this.set('minDvrWindow', item.minDvrWindow);\n        this.set('playlistItem', item);\n    };\n\n    this.setMediaModel = function (mediaModel) {\n        if (this.mediaModel && this.mediaModel !== mediaModel) {\n            this.mediaModel.off();\n        }\n\n        mediaModel = mediaModel || new MediaModel();\n        this.mediaModel = mediaModel;\n        this.set('mediaModel', mediaModel);\n        syncPlayerWithMediaModel(mediaModel);\n    };\n\n    this.destroy = function() {\n        this.attributes._destroyed = true;\n        this.off();\n        if (_provider) {\n            _provider.off(null, null, this);\n            _provider.destroy();\n        }\n    };\n\n    this.getVideo = function() {\n        return _provider;\n    };\n\n    this.setFullscreen = function(state) {\n        state = !!state;\n        if (state !== _this.get('fullscreen')) {\n            _this.set('fullscreen', state);\n        }\n    };\n\n    this.getProviders = function() {\n        return providers;\n    };\n\n    this.setVolume = function(volume) {\n        volume = Math.round(volume);\n        this.set('volume', volume);\n        var mute = (volume === 0);\n        if (mute !== (this.getMute())) {\n            this.setMute(mute);\n        }\n    };\n\n    this.getMute = function() {\n        return this.get('autostartMuted') || this.get('mute');\n    };\n\n    this.setMute = function(mute) {\n        if (mute === undefined) {\n            mute = !(this.getMute());\n        }\n        this.set('mute', mute);\n        if (!mute) {\n            var volume = Math.max(10, this.get('volume'));\n            this.set('autostartMuted', false);\n            this.setVolume(volume);\n        }\n    };\n\n    this.setStreamType = function(streamType) {\n        this.set('streamType', streamType);\n        if (streamType === 'LIVE') {\n            this.setPlaybackRate(1);\n        }\n    };\n\n    this.setProvider = function (provider) {\n        _provider = provider;\n        syncProviderProperties(this, provider);\n    };\n\n    this.resetProvider = function () {\n        _provider = null;\n        this.set('provider', undefined);\n    };\n\n    this.setPlaybackRate = function(playbackRate) {\n        if (!_.isNumber(playbackRate)) {\n            return;\n        }\n\n        // Clamp the rate between 0.25x and 4x\n        playbackRate = Math.max(Math.min(playbackRate, 4), 0.25);\n\n        if (this.get('streamType') === 'LIVE') {\n            playbackRate = 1;\n        }\n\n        this.set('defaultPlaybackRate', playbackRate);\n\n        if (_provider && _provider.setPlaybackRate) {\n            _provider.setPlaybackRate(playbackRate);\n        }\n    };\n\n    this.persistCaptionsTrack = function() {\n        var track = this.get('captionsTrack');\n\n        if (track) {\n            // update preference if an option was selected\n            this.set('captionLabel', track.name);\n        } else {\n            this.set('captionLabel', 'Off');\n        }\n    };\n\n\n    this.setVideoSubtitleTrack = function(trackIndex, tracks) {\n        this.set('captionsIndex', trackIndex);\n        /*\n         * Tracks could have changed even if the index hasn't.\n         * Need to ensure track has data for captionsrenderer.\n         */\n        if (trackIndex && tracks && trackIndex <= tracks.length && tracks[trackIndex - 1].data) {\n            this.set('captionsTrack', tracks[trackIndex - 1]);\n        }\n    };\n\n    this.persistVideoSubtitleTrack = function(trackIndex, tracks) {\n        this.setVideoSubtitleTrack(trackIndex, tracks);\n        this.persistCaptionsTrack();\n    };\n\n    // Mobile players always wait to become viewable.\n    // Desktop players must have autostart set to viewable\n    this.setAutoStart = function(autoStart) {\n        if (autoStart !== undefined) {\n            this.set('autostart', autoStart);\n        }\n\n        const autoStartOnMobile = OS.mobile && this.get('autostart');\n        this.set('playOnViewable', autoStartOnMobile || this.get('autostart') === 'viewable');\n    };\n\n    this.resetItem = function (item) {\n        const position = item ? seconds(item.starttime) : 0;\n        const duration = item ? seconds(item.duration) : 0;\n        const mediaModel = this.mediaModel;\n        this.set('playRejected', false);\n        this.attributes.itemMeta = {};\n        mediaModel.set('position', position);\n        mediaModel.set('currentTime', 0);\n        mediaModel.set('duration', duration);\n    };\n};\n\nconst syncProviderProperties = (model, provider) => {\n    model.set('provider', provider.getName());\n    if (model.get('instreamMode') === true) {\n        provider.instreamMode = true;\n    }\n\n    if (provider.getName().name.indexOf('flash') === -1) {\n        model.set('flashThrottle', undefined);\n        model.set('flashBlocked', false);\n    }\n\n    // Attempt setting the playback rate to be the user selected value\n    model.setPlaybackRate(model.get('defaultPlaybackRate'));\n\n    // Set playbackRate because provider support for playbackRate may have changed and not sent an update\n    model.set('supportsPlaybackRate', provider.supportsPlaybackRate);\n    model.set('playbackRate', provider.getPlaybackRate());\n    model.set('renderCaptionsNatively', provider.renderNatively);\n};\n\nfunction syncPlayerWithMediaModel(mediaModel) {\n    // Sync player state with mediaModel state\n    const mediaState = mediaModel.get('mediaState');\n    mediaModel.trigger('change:mediaState', mediaModel, mediaState, mediaState);\n}\n\n// Represents the state of the provider/media element\nconst MediaModel = Model.MediaModel = function() {\n    this.attributes = {\n        mediaState: STATE_IDLE\n    };\n};\n\nObject.assign(MediaModel.prototype, SimpleModel, {\n    srcReset() {\n        Object.assign(this.attributes, {\n            setup: false,\n            started: false,\n            preloaded: false,\n            visualQuality: null,\n            buffer: 0,\n            currentTime: 0\n        });\n    }\n});\n\nObject.assign(Model.prototype, SimpleModel);\n\nexport { MediaModel };\nexport default Model;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/controller/model.js","export const requestAnimationFrame = window.requestAnimationFrame || function (callback) {\n    return setTimeout(callback, 17);\n};\n\nexport const cancelAnimationFrame = window.cancelAnimationFrame || clearTimeout;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/request-animation-frame.js","import { replaceClass } from 'utils/dom';\n\nexport function getBreakpoint(width) {\n    let breakpoint = 0;\n\n    if (width >= 1280) {\n        breakpoint = 7;\n    } else if (width >= 960) {\n        breakpoint = 6;\n    } else if (width >= 800) {\n        breakpoint = 5;\n    } else if (width >= 640) {\n        breakpoint = 4;\n    } else if (width >= 540) {\n        breakpoint = 3;\n    } else if (width >= 420) {\n        breakpoint = 2;\n    } else if (width >= 320) {\n        breakpoint = 1;\n    }\n\n    return breakpoint;\n}\n\nexport function setBreakpoint(playerElement, breakpointNumber) {\n    const breakpointClass = 'jw-breakpoint-' + breakpointNumber;\n    replaceClass(playerElement, /jw-breakpoint-\\d+/, breakpointClass);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/utils/breakpoint.js","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader/lib/css-base.js\n// module id = 83\n// module chunks = 0 1 2 3 4 5","import Providers from 'providers/providers';\nimport MediaController from 'program/media-controller';\nimport Promise, { resolved } from 'polyfills/promise';\nimport cancelable from 'utils/cancelable';\nimport { MediaControllerListener } from 'program/program-listeners';\nimport Eventable from 'utils/eventable';\nimport BackgroundMedia from 'program/background-media';\n\nimport { ERROR, PLAYER_STATE, STATE_BUFFERING, STATE_IDLE, STATE_COMPLETE } from 'events/events';\nimport { Features } from '../environment/environment';\n\n/** @private Do not include in JSDocs */\n\nclass ProgramController extends Eventable {\n    /**\n     * ProgramController constructor\n     * @param {Model} model - The player's model\n     * @param {MediaElementPool} mediaPool - The player's media element pool\n     */\n    constructor(model, mediaPool) {\n        super();\n\n        this.adPlaying = false;\n        this.background = BackgroundMedia();\n        this.mediaPool = mediaPool;\n        this.mediaController = null;\n        this.mediaControllerListener = MediaControllerListener(model, this);\n        this.model = model;\n        this.providers = new Providers(model.getConfiguration());\n        this.loadPromise = resolved;\n\n        if (!Features.backgroundLoading) {\n            // If background loading is not supported, set the shared media element\n            model.set('mediaElement', this.mediaPool.getPrimedElement());\n        }\n    }\n\n    /**\n     * Activates a playlist item, loading it into the foreground.\n     * This method will either load a new Provider or reuse the active one.\n     * @param {number} index - The playlist index of the item\n     * @returns {Promise} The Provider promise. Resolves with the active Media Controller\n     * @memberOf ProgramController\n     */\n    setActiveItem(index) {\n        const { background, mediaController, model } = this;\n        const item = model.get('playlist')[index];\n\n        model.attributes.itemReady = false;\n        model.setActiveItem(index);\n        const source = getSource(item);\n        if (!source) {\n            return Promise.reject(new Error('No media'));\n        }\n\n        // Activate the background media if it's loading the item we want to play\n        if (background.isNext(item)) {\n            // First destroy the active item so that the BGL provider can enter the foreground\n            this._destroyActiveMedia();\n            // Attach the BGL provider into the load/play chain\n            this.loadPromise = this._activateBackgroundMedia();\n            return this.loadPromise;\n        }\n        // Loading a new item invalidates all background loading media\n        this._destroyBackgroundMedia();\n\n        if (mediaController) {\n            const casting = model.get('castActive');\n            if (casting || this._providerCanPlay(mediaController.provider, source)) {\n                // We can synchronously reuse the current mediaController\n                this.loadPromise = Promise.resolve(mediaController);\n                // Reinitialize the mediaController with the new item, allowing a new playback session\n                mediaController.activeItem = item;\n                this._setActiveMedia(mediaController);\n                return this.loadPromise;\n            }\n\n            // If we can't play the source with the current provider, reset the current one and\n            // prime the next tag within the gesture\n            this._destroyActiveMedia();\n        }\n\n        const mediaModelContext = model.mediaModel;\n        this.loadPromise = this._setupMediaController(source)\n            .then(nextMediaController => {\n                // Don't do anything if we've tried to load another provider while this promise was resolving\n                // We check using the mediaModel because it is unique per item, and per instance of that item\n                if (mediaModelContext === model.mediaModel) {\n                    nextMediaController.activeItem = item;\n                    this._setActiveMedia(nextMediaController);\n                    return nextMediaController;\n                }\n            })\n            .catch(err => {\n                this._destroyActiveMedia();\n                throw err;\n            });\n        return this.loadPromise;\n    }\n\n    /**\n     * Plays the active item.\n     * Will wait for the Provider promise to resolve before any play attempt.\n     * @param {string} playReason - The reason playback is beginning.\n     * @returns {Promise} The Play promise. Resolves when playback begins; rejects upon failure.\n     */\n    playVideo(playReason) {\n        const { mediaController, model } = this;\n        const item = model.get('playlistItem');\n        let playPromise;\n\n        if (!item) {\n            return Promise.reject(new Error('No media'));\n        }\n\n        if (!playReason) {\n            playReason = model.get('playReason');\n        }\n\n        // Start playback immediately if we have already loaded a mediaController\n        if (mediaController) {\n            playPromise = mediaController.play(playReason);\n        } else {\n            // Wait for the provider to load before starting initial playback\n            model.set(PLAYER_STATE, STATE_BUFFERING);\n\n            // Make the subsequent promise cancelable so that we can avoid playback when no longer wanted\n            const thenPlayPromise = cancelable((nextMediaController) => {\n                if (this.mediaController && this.mediaController.mediaModel === nextMediaController.mediaModel) {\n                    return nextMediaController.play(playReason);\n                }\n                throw new Error('Playback cancelled.');\n            });\n\n            playPromise = this.loadPromise\n                .catch(error => {\n                    thenPlayPromise.cancel();\n                    // Required provider was not loaded\n                    model.trigger(ERROR, {\n                        message: `Could not play video: ${error.message}`,\n                        error: error\n                    });\n                    // Fail the playPromise to trigger \"playAttemptFailed\"\n                    throw error;\n                })\n                .then(thenPlayPromise.async);\n        }\n\n        return playPromise;\n    }\n\n    /**\n     * Stops playback of the active item, and sets the player state to IDLE.\n     * @returns {void}\n     */\n    stopVideo() {\n        const { mediaController, model } = this;\n\n        const item = model.get('playlist')[model.get('item')];\n        model.attributes.playlistItem = item;\n        model.resetItem(item);\n\n        if (mediaController) {\n            mediaController.stop();\n        }\n    }\n\n    /**\n     * Preloads the active item, which loads and buffers some content.\n     * @returns {void}\n     */\n    preloadVideo() {\n        const { background, mediaController } = this;\n        const media = mediaController || background.currentMedia;\n        if (!media) {\n            return;\n        }\n        media.preload();\n    }\n\n    /**\n     * Pauses playback of the current video, and sets the player state to PAUSED.\n     * @returns {void}\n     */\n    pause() {\n        const { mediaController } = this;\n        if (!mediaController) {\n            return;\n        }\n\n        mediaController.pause();\n    }\n\n    /**\n     * Casts a video. The Cast Controller will control the Cast Provider.\n     * @param {CastProvider} castProvider - The playback provider instance (Casting is implemented in jwplayer-commercial).\n     * @param {Item} item - The playlist Item instance to cast.\n     * @returns {void}\n     */\n    castVideo(castProvider, item) {\n        const { model } = this;\n        model.attributes.itemReady = false;\n\n        const playlistItem = Object.assign({}, item);\n        playlistItem.starttime = model.mediaModel.get('position');\n\n        const castMediaController = new MediaController(castProvider, model);\n        castMediaController.activeItem = playlistItem;\n        this._setActiveMedia(castMediaController);\n    }\n\n    /**\n     * Stops casting. The Player is expected to restore video playback afterwards.\n     * @returns {void}\n     */\n    stopCast() {\n        const { model } = this;\n        const index = model.get('item');\n        const item = model.get('playlist')[index];\n\n        item.starttime = model.mediaModel.get('position');\n\n        this.stopVideo();\n        this.setActiveItem(index);\n    }\n\n    /**\n     * Places the currently active Media Controller into the background.\n     * The media is still attached to a media element, but is removed from the Player's container.\n     * Background media still emits events, but we stop listening to them.\n     * Background media can (and will) be updated via it's API.\n     * @returns {void}\n     */\n    backgroundActiveMedia() {\n        this.adPlaying = true;\n        const { background, mediaController } = this;\n        if (!mediaController) {\n            return;\n        }\n\n        // Destroy any existing background media\n        if (background.currentMedia) {\n            this._destroyMediaController(background.currentMedia);\n        }\n\n        mediaController.background = true;\n        background.currentMedia = mediaController;\n        this.mediaController = null;\n    }\n\n    /**\n     * Restores the background media to the foreground.\n     * Its media element is reattached to the Player container.\n     * We start listening to its events again.\n     * @returns {void}\n     */\n    restoreBackgroundMedia() {\n        this.adPlaying = false;\n        const { background, mediaController } = this;\n        const backgroundMediaController = background.currentMedia;\n        if (!backgroundMediaController) {\n            return;\n        } else if (mediaController) {\n            // An existing media controller means that we've changed the active item\n            // The current background media is no longer relevant, so destroy it\n            this._destroyMediaController(backgroundMediaController);\n            background.currentMedia = null;\n            return;\n        }\n\n        backgroundMediaController.mediaModel.attributes.mediaState = 'buffering';\n        this._setActiveMedia(backgroundMediaController);\n        backgroundMediaController.background = false;\n        background.currentMedia = null;\n    }\n\n    /**\n     * Loads the next playlist item in the background.\n     * @param {Item} item - The playlist item to load.\n     *\n     * @returns {void}\n     */\n    backgroundLoad(item) {\n        const { background } = this;\n        const source = getSource(item);\n\n        background.setNext(item, this._setupMediaController(source)\n            .then(nextMediaController => {\n                nextMediaController.activeItem = item;\n                nextMediaController.preload();\n                return nextMediaController;\n            })\n            .catch(() => {\n                background.clearNext();\n            })\n        );\n    }\n\n    /**\n     * Primes media elements so that they can autoplay without further user gesture.\n     * A primed element is required for media to load in the background.\n     * This method does not prime elements who already have a source set (\"safe prime\").\n     * @returns {void}\n     */\n    primeMediaElements() {\n        this.mediaPool.prime();\n    }\n\n    /**\n     * Removes all event listeners and destroys all media.\n     * @returns {void}\n     */\n    destroy() {\n        this.off();\n        this._destroyBackgroundMedia();\n        this._destroyActiveMedia();\n    }\n\n    /**\n     * Activates the provided media controller, placing it into the foreground.\n     * Events fired from the media controller will be forwarded through the program controller.\n     * @param {MediaController} mediaController - The media controller to activate.\n     * @returns {void}\n     * @private\n     */\n    _setActiveMedia(mediaController) {\n        const { model } = this;\n        const { mediaModel, provider } = mediaController;\n\n        assignMediaContainer(model, mediaController);\n        this.mediaController = mediaController;\n\n        model.set('mediaElement', mediaController.mediaElement);\n        model.setMediaModel(mediaModel);\n        model.setProvider(provider);\n\n        forwardEvents(this, mediaController);\n        model.set('itemReady', true);\n    }\n\n    /**\n     * Destroys the active media controller and current playback.\n     * @returns {void}\n     * @private\n     */\n    _destroyActiveMedia() {\n        const { mediaController, model } = this;\n        if (!mediaController) {\n            return;\n        }\n\n        mediaController.detach();\n        this._destroyMediaController(mediaController);\n        model.resetProvider();\n        this.mediaController = null;\n    }\n\n    /**\n     * Destroys all background media.\n     * @returns {void}\n     * @private\n     */\n    _destroyBackgroundMedia() {\n        const { background } = this;\n        this._destroyMediaController(background.currentMedia);\n        background.currentMedia = null;\n        this._destroyBackgroundLoadingMedia();\n    }\n\n    /**\n     * Destroys a mediaController, and returns it's tag to the pool.\n     * @param {MediaController} mediaController - The media controller to destroy and recycle.\n     * @returns {void}\n     * @private\n     */\n    _destroyMediaController(mediaController) {\n        const { mediaPool } = this;\n        if (!mediaController) {\n            return;\n        }\n        mediaPool.recycle(mediaController.mediaElement);\n        mediaController.destroy();\n    }\n\n    /**\n     * Constructs a new media controller with the provider whose able to play the current source.\n     * Will wait and load the provider constructor if it has not already been loaded.\n     * If the required provider cannot be loaded, the subsequent promise rejection will destroy playback.\n     * @param {Source} source - The playlist item Source for which a provider is needed.\n     * @returns {Promise} The Provider constructor promise.\n     * @private\n     */\n    _setupMediaController(source) {\n        const { model, providers } = this;\n        const makeMediaController = ProviderConstructor => new MediaController(\n            new ProviderConstructor(model.get('id'), model.getConfiguration(), this.primedElement),\n            model\n        );\n\n        const { provider, name } = providers.choose(source);\n        if (provider) {\n            return Promise.resolve(makeMediaController((provider)));\n        }\n\n        return providers.load(name)\n            .then(ProviderConstructor => makeMediaController(ProviderConstructor));\n    }\n\n    /**\n     * Places the background loading media into the foreground. Will wait for the provider promise to resolve.\n     * If the program controller has been placed into ads mode, the background loading media will replace the background\n     * loaded media. When the ad is over, the loaded media will be placed into the foreground via _restoreBackgroundMedia().\n     * This is done to avoid a race condition where we have activated the loading item, but switch to ads mode before the\n     * promise resovles, resulting in two tags in the foreground (since _backgroundActiveMedia \"misses\" the pending promise).\n     * @returns {Promise} The Provider promise. Resolves with preloaded media controller.\n     * @memberOf ProgramController\n     */\n    _activateBackgroundMedia() {\n        const { background, background: { nextLoadPromise } } = this;\n        // Activating this item means that any media already loaded in the background will no longer be needed\n        this._destroyMediaController(background.currentMedia);\n        background.currentMedia = null;\n        return nextLoadPromise.then(nextMediaController => {\n            if (!nextMediaController) {\n                return;\n            }\n            background.clearNext();\n            if (this.adPlaying) {\n                background.currentMedia = nextMediaController;\n            } else {\n                this._setActiveMedia(nextMediaController);\n                nextMediaController.background = false;\n            }\n            return nextMediaController;\n        });\n        // The catch is chained as part of the play promise chain\n    }\n\n    /**\n     * Destroys the mediaController which was constructed and loading in the background (nextMedia).\n     * Does not destroy the mediaController which was already playing and subsequently placed into the background (currentMedia).\n     * @returns {void}\n     * @private\n     */\n    _destroyBackgroundLoadingMedia() {\n        const { background, background: { nextLoadPromise } } = this;\n        if (!nextLoadPromise) {\n            return;\n        }\n        nextLoadPromise.then(nextMediaController => {\n            this._destroyMediaController(nextMediaController);\n            background.clearNext();\n        });\n    }\n\n    _providerCanPlay(_provider, source) {\n        const { provider } = this.providers.choose(source);\n        return provider && (_provider && _provider instanceof provider);\n    }\n\n    /**\n     * Returns the active audio track index.\n     * @returns {number} The active audio track index.\n     */\n    get audioTrack() {\n        const { mediaController } = this;\n        if (!mediaController) {\n            return -1;\n        }\n\n        return mediaController.audioTrack;\n    }\n\n    /**\n     * Returns the list of audio tracks.\n     * @returns {Array<AudioTrackOption>} An array of AudioTrackOption instances.\n     */\n    get audioTracks() {\n        const { mediaController } = this;\n        if (!mediaController) {\n            return;\n        }\n\n        return mediaController.audioTracks;\n    }\n\n    /**\n     * Returns whether the current media has completed playback.\n     * @returns {boolean} Is the \"beforeComplete\" event being propagated\n     * or did it result in the media being detached or backgrounded?\n     */\n    get beforeComplete() {\n        const { mediaController, background: { currentMedia } } = this;\n        if (!mediaController && !currentMedia) {\n            return false;\n        }\n\n        return mediaController ? mediaController.beforeComplete : currentMedia.beforeComplete;\n    }\n\n    /**\n     * Returns a primed element from the media pool.\n     * @returns {HTMLVideoElement|null} The first video element in the pool, or null if the pool is empty.\n     */\n    get primedElement() {\n        if (!Features.backgroundLoading) {\n            // If background loading is not supported, the model will always contain the shared media element\n            // Prime it so that playback after changing the active item does not require further gestures\n            const { model } = this;\n            return model.get('mediaElement');\n        }\n        return this.mediaPool.getPrimedElement();\n    }\n\n    /**\n     * Returns the active quality index.\n     * @returns {number} The active quality level index.\n     */\n    get quality() {\n        if (!this.mediaController) {\n            return -1;\n        }\n\n        return this.mediaController.quality;\n    }\n\n    /**\n     * Returns the list of quality levels.\n     * @returns {Array<QualityOption>} An array of QualityOption objects.\n     */\n    get qualities() {\n        const { mediaController } = this;\n        if (!mediaController) {\n            return null;\n        }\n\n        return mediaController.qualities;\n    }\n\n    /**\n     * Attaches or detaches the current media\n     * @param {boolean} shouldAttach - Attach or detach?\n     * @returns {void}\n     */\n    set attached(shouldAttach) {\n        const { mediaController } = this;\n\n        if (!mediaController) {\n            return;\n        }\n\n        if (shouldAttach) {\n            mediaController.attach();\n        } else {\n            mediaController.detach();\n        }\n    }\n\n    /**\n     * Sets the active audio index.\n     * @param {number} index - The index of the audio track to select.\n     * @returns {void}\n     */\n    set audioTrack(index) {\n        const { mediaController } = this;\n        if (!mediaController) {\n            return;\n        }\n\n        mediaController.audioTrack = parseInt(index, 10) || 0;\n    }\n\n    /**\n     * Activates or deactivates media controls.\n     * @param {boolean} mode - Activate or deactivate media controls?\n     * @returns {void}\n     * TODO: deprecate - only used by jwplayer-commercial flash provider\n     */\n    set controls(mode) {\n        const { mediaController } = this;\n        if (!mediaController) {\n            return;\n        }\n\n        mediaController.controls = mode;\n    }\n\n    /**\n     * Mutes or unmutes the activate media.\n     * Syncs across all media elements.\n     * @param {boolean} mute - Mute or unmute media?\n     * @returns {void}\n     */\n    set mute(mute) {\n        const { background, mediaController, mediaPool } = this;\n\n        if (mediaController) {\n            mediaController.mute = mute;\n        }\n        if (background.currentMedia) {\n            background.currentMedia.mute = mute;\n        }\n\n        mediaPool.syncMute(mute);\n    }\n\n    /**\n     * Seeks the media to the provided position.\n     * If the media is not attached, set the item's starttime so that when reattaching, it resumes at that time.\n     * If we seek before an item loads, set the item's starttime so that when playback begins, we buffer at that time.\n     * @param {number} pos - The position to start at or seek to.\n     * @returns {void}\n     */\n    set position(pos) {\n        const { mediaController, model } = this;\n        if (!mediaController) {\n            return;\n        }\n        const state = model.get(PLAYER_STATE);\n        const beforeLoad = (!mediaController.started && !mediaController.preloaded && state === STATE_IDLE);\n\n        if (beforeLoad || state === STATE_COMPLETE) {\n            mediaController.item.starttime = pos;\n        } else if (mediaController.attached) {\n            mediaController.position = pos;\n        } else {\n            mediaController.item.starttime = pos;\n        }\n    }\n\n    /**\n     * Sets the current quality level.\n     * @param {number} index - The index of the quality level to select.\n     * @returns {void}\n     */\n    set quality(index) {\n        const { mediaController } = this;\n        if (!mediaController) {\n            return;\n        }\n\n        mediaController.quality = parseInt(index, 10) || 0;\n    }\n\n    /**\n     * Sets the current subtitles track.\n     * @param {number} index - The index of the subtitle track to select.\n     * @returns {void}\n     */\n    set subtitles(index) {\n        const { mediaController } = this;\n        if (!mediaController) {\n            return;\n        }\n\n        mediaController.subtitles = index;\n    }\n\n    /**\n     * Sets the volume level.\n     * Syncs across all media elements.\n     * @param {number} volume - A number from 0 to 1.\n     * @returns {void}\n     */\n    set volume(volume) {\n        const { background, mediaController, mediaPool } = this;\n\n        if (mediaController) {\n            mediaController.volume = volume;\n        }\n        if (background.currentMedia) {\n            background.currentMedia.volume = volume;\n        }\n\n        mediaPool.syncVolume(volume);\n    }\n}\n\nfunction assignMediaContainer(model, mediaController) {\n    const container = model.get('mediaContainer');\n    if (container) {\n        mediaController.container = container;\n    } else {\n        model.once('change:mediaContainer', (changedModel, changedContainer) => {\n            mediaController.container = changedContainer;\n        });\n    }\n}\n\nfunction forwardEvents(programController, mediaController) {\n    mediaController.off('all', programController.mediaControllerListener, programController);\n    mediaController.on('all', programController.mediaControllerListener, programController);\n}\n\nfunction getSource(item) {\n    return item && item.sources && item.sources[0];\n}\n\nexport default ProgramController;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/program/program-controller.js","import BackboneEvents from 'utils/backbone.events';\n\n// Combine mixins into a class which can be extended\nexport default class Eventable {}\nEventable.prototype = Object.assign({}, BackboneEvents);\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/eventable.js","import { _isNaN, _isNumber } from 'utils/underscore';\nimport { PLAYER_STATE, STATE_IDLE, MEDIA_VOLUME, MEDIA_MUTE,\n    MEDIA_TYPE, AUDIO_TRACKS, AUDIO_TRACK_CHANGED,\n    MEDIA_RATE_CHANGE, MEDIA_BUFFER, MEDIA_TIME, MEDIA_LEVELS, MEDIA_LEVEL_CHANGED, MEDIA_ERROR,\n    MEDIA_BEFORECOMPLETE, MEDIA_COMPLETE, MEDIA_META, MEDIA_SEEK, MEDIA_SEEKED,\n    NATIVE_FULLSCREEN, MEDIA_VISUAL_QUALITY } from 'events/events';\n\nexport function ProviderListener(mediaController) {\n    return function (type, data) {\n        const { mediaModel } = mediaController;\n        const event = Object.assign({}, data, {\n            type: type\n        });\n\n        switch (type) {\n            case MEDIA_TYPE:\n                if (mediaModel.get(MEDIA_TYPE) === data.mediaType) {\n                    return;\n                }\n                mediaModel.set(MEDIA_TYPE, data.mediaType);\n                break;\n            case MEDIA_VISUAL_QUALITY:\n                mediaModel.set(MEDIA_VISUAL_QUALITY, Object.assign({}, data));\n                return;\n            case PLAYER_STATE: {\n                if (data.newstate === STATE_IDLE) {\n                    mediaController.thenPlayPromise.cancel();\n                    mediaModel.srcReset();\n                }\n                // Always fire change:mediaState to keep player model in sync\n                const previousState = mediaModel.attributes.mediaState;\n                mediaModel.attributes.mediaState = data.newstate;\n                mediaModel.trigger('change:mediaState', mediaModel, data.newstate, previousState);\n                // This \"return\" is important because\n                //  we are choosing to not propagate model event.\n                //  Instead letting the master controller do so\n                return;\n            }\n            case MEDIA_COMPLETE:\n                mediaController.beforeComplete = true;\n                mediaController.trigger(MEDIA_BEFORECOMPLETE, event);\n                if (mediaController.attached && !mediaController.background) {\n                    mediaController._playbackComplete();\n                }\n                return;\n            case MEDIA_ERROR:\n                mediaController.thenPlayPromise.cancel();\n                mediaModel.srcReset();\n                break;\n            case MEDIA_META: {\n                const duration = data.duration;\n                if (_isNumber(duration) && !_isNaN(duration)) {\n                    mediaModel.set('duration', duration);\n                }\n                break;\n            }\n            case MEDIA_BUFFER:\n                mediaModel.set('buffer', data.bufferPercent);\n                /* falls through to update duration while media is loaded */\n            case MEDIA_TIME: {\n                mediaModel.set('position', data.position);\n                mediaModel.set('currentTime', data.currentTime);\n                const duration = data.duration;\n                if (_isNumber(duration) && !_isNaN(duration)) {\n                    mediaModel.set('duration', duration);\n                }\n                break;\n            }\n            case MEDIA_LEVELS:\n                mediaModel.set(MEDIA_LEVELS, data.levels);\n                /* falls through to update current level */\n            case MEDIA_LEVEL_CHANGED: {\n                const { currentQuality, levels } = data;\n                if (currentQuality > -1 && levels.length > 1) {\n                    mediaModel.set('currentLevel', parseInt(currentQuality));\n                }\n                break;\n            }\n            case AUDIO_TRACKS:\n                mediaModel.set(AUDIO_TRACKS, data.tracks);\n                /* falls through to update current track */\n            case AUDIO_TRACK_CHANGED: {\n                const { currentTrack, tracks } = data;\n\n                if (currentTrack > -1 && tracks.length > 0 && currentTrack < tracks.length) {\n                    mediaModel.set('currentAudioTrack', parseInt(currentTrack));\n                }\n                break;\n            }\n            case 'visualQuality':\n                mediaModel.set('visualQuality', Object.assign({}, data));\n                break;\n            default:\n                break;\n        }\n\n        mediaController.trigger(type, event);\n    };\n}\n\nexport function MediaControllerListener(model, programController) {\n    return function (type, data) {\n        switch (type) {\n            case 'flashThrottle': {\n                const throttled = (data.state !== 'resume');\n                model.set('flashThrottle', throttled);\n                model.set('flashBlocked', throttled);\n            }\n                break;\n            case 'flashBlocked':\n                model.set('flashBlocked', true);\n                return;\n            case 'flashUnblocked':\n                model.set('flashBlocked', false);\n                return;\n            case MEDIA_VOLUME:\n                model.set(type, data[type]);\n                return;\n            case MEDIA_MUTE:\n                if (!model.get('autostartMuted')) {\n                    // Don't persist mute state with muted autostart\n                    model.set(type, data[type]);\n                }\n                return;\n            case MEDIA_RATE_CHANGE:\n                model.set('playbackRate', data.playbackRate);\n                return;\n            case MEDIA_META: {\n                Object.assign(model.get('itemMeta'), data.metadata);\n                break;\n            }\n            case MEDIA_LEVEL_CHANGED:\n                model.persistQualityLevel(data.currentQuality, data.levels);\n                break;\n            case 'subtitlesTrackChanged':\n                model.persistVideoSubtitleTrack(data.currentTrack, data.tracks);\n                break;\n            case MEDIA_TIME:\n            case MEDIA_SEEK:\n            case MEDIA_SEEKED:\n            case NATIVE_FULLSCREEN:\n            case 'subtitlesTracks':\n            case 'subtitlesTracksData':\n                model.trigger(type, data);\n                break;\n            default:\n        }\n\n        programController.trigger(type, data);\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/program/program-listeners.js","import { STATE_IDLE, STATE_COMPLETE, STATE_ERROR } from 'events/events';\n\n// The api should dispatch an idle event when the model's state changes to complete\n// This is to avoid conflicts with the complete event and to maintain legacy event flow\nfunction normalizeApiState(newstate) {\n    if (newstate === STATE_COMPLETE || newstate === STATE_ERROR) {\n        return STATE_IDLE;\n    }\n    return newstate;\n}\n\nexport default function ChangeStateEvent(model, newstate, oldstate) {\n    newstate = normalizeApiState(newstate);\n    oldstate = normalizeApiState(oldstate);\n    // do not dispatch idle a second time after complete\n    if (newstate !== oldstate) {\n        // buffering, playing and paused states become:\n        // buffer, play and pause events\n        var eventType = newstate.replace(/(?:ing|d)$/, '');\n        var evt = {\n            type: eventType,\n            newstate: newstate,\n            oldstate: oldstate,\n            reason: model.mediaModel.get('mediaState')\n        };\n        // add reason for play/pause events\n        if (eventType === 'play') {\n            evt.playReason = model.get('playReason');\n        } else if (eventType === 'pause') {\n            evt.pauseReason = model.get('pauseReason');\n        }\n        this.trigger(eventType, evt);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/events/change-state-event.js","export default (function() {\n    if ('hidden' in document) {\n        return function () {\n            return !document.hidden;\n        };\n    }\n    if ('webkitHidden' in document) {\n        return function () {\n            return !document.webkitHidden;\n        };\n    }\n    // document.hidden not supported\n    return function () {\n        return true;\n    };\n}());\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/active-tab.js","import VTTCue from 'parsers/captions/vttcue';\nimport { chunkLoadErrorHandler } from '../api/core-loader';\nimport utils from 'utils/helpers';\nimport { localName } from 'parsers/parsers';\nimport srt from 'parsers/captions/srt';\nimport dfxp from 'parsers/captions/dfxp';\n\nexport function loadFile(track, successHandler, errorHandler) {\n    track.xhr = utils.ajax(track.file, function(xhr) {\n        xhrSuccess(xhr, track, successHandler, errorHandler);\n    }, errorHandler);\n}\n\nexport function cancelXhr(tracks) {\n    if (tracks) {\n        tracks.forEach(track => {\n            var xhr = track.xhr;\n            if (xhr) {\n                xhr.onload = null;\n                xhr.onreadystatechange = null;\n                xhr.onerror = null;\n                if ('abort' in xhr) {\n                    xhr.abort();\n                }\n            }\n            delete track.xhr;\n        });\n    }\n}\n\nexport function convertToVTTCues(cues) {\n    // VTTCue is available natively or polyfilled where necessary\n    return cues.map(cue => new VTTCue(cue.begin, cue.end, cue.text));\n}\n\nfunction xhrSuccess(xhr, track, successHandler, errorHandler) {\n    var xmlRoot = xhr.responseXML ? xhr.responseXML.firstChild : null;\n    var cues;\n    var vttCues;\n\n    // IE9 sets the firstChild element to the root <xml> tag\n    if (xmlRoot) {\n        if (localName(xmlRoot) === 'xml') {\n            xmlRoot = xmlRoot.nextSibling;\n        }\n        // Ignore all comments\n        while (xmlRoot.nodeType === xmlRoot.COMMENT_NODE) {\n            xmlRoot = xmlRoot.nextSibling;\n        }\n    }\n\n    try {\n        if (xmlRoot && localName(xmlRoot) === 'tt') {\n            // parse dfxp track\n            cues = dfxp(xhr.responseXML);\n            vttCues = convertToVTTCues(cues);\n            delete track.xhr;\n            successHandler(vttCues);\n        } else {\n            // parse VTT/SRT track\n            var responseText = xhr.responseText;\n            if (responseText.indexOf('WEBVTT') >= 0) {\n                // make VTTCues from VTT track\n                loadVttParser().then(VTTParser => {\n                    var parser = new VTTParser(window);\n                    vttCues = [];\n                    parser.oncue = function(cue) {\n                        vttCues.push(cue);\n                    };\n\n                    parser.onflush = function() {\n                        delete track.xhr;\n                        successHandler(vttCues);\n                    };\n\n                    // Parse calls onflush internally\n                    parser.parse(responseText);\n                }).catch(error => {\n                    delete track.xhr;\n                    errorHandler(error);\n                });\n            } else {\n                // make VTTCues from SRT track\n                cues = srt(responseText);\n                vttCues = convertToVTTCues(cues);\n                delete track.xhr;\n                successHandler(vttCues);\n            }\n        }\n    } catch (error) {\n        delete track.xhr;\n        errorHandler(error);\n    }\n}\n\nfunction loadVttParser() {\n    return require.ensure(['parsers/captions/vttparser'], function (require) {\n        return require('parsers/captions/vttparser').default;\n    }, chunkLoadErrorHandler, 'vttparser');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/controller/tracks-loader.js","export function createId(track, tracksCount) {\n    var trackId;\n    var prefix = track.kind || 'cc';\n    if (track.default || track.defaulttrack) {\n        trackId = 'default';\n    } else {\n        trackId = track._id || track.file || (prefix + tracksCount);\n    }\n    return trackId;\n}\n\nexport function createLabel(track, unknownCount) {\n    var label = track.label || track.name || track.language;\n    if (!label) {\n        label = 'Unknown CC';\n        unknownCount += 1;\n        if (unknownCount > 1) {\n            label += ' [' + unknownCount + ']';\n        }\n    }\n    return { label: label, unknownCount: unknownCount };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/controller/tracks-helper.js","import Promise from 'polyfills/promise';\n\nexport default function createPlayPromise(video) {\n    return new Promise(function(resolve, reject) {\n        if (video.paused) {\n            return reject(new Error('Play refused.'));\n        }\n        const removeEventListeners = function() {\n            video.removeEventListener('playing', listener);\n            video.removeEventListener('pause', listener);\n            video.removeEventListener('abort', listener);\n            video.removeEventListener('error', listener);\n        };\n        const listener = function(e) {\n            removeEventListeners();\n            if (e.type === 'playing') {\n                resolve();\n            } else {\n                reject(new Error('The play() request was interrupted by a \"' + e.type + '\" event.'));\n            }\n        };\n\n        video.addEventListener('playing', listener);\n        video.addEventListener('abort', listener);\n        video.addEventListener('error', listener);\n        video.addEventListener('pause', listener);\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/providers/utils/play-promise.js","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n*/\n\nlet VTTCue = window.VTTCue;\n\nfunction findDirectionSetting(value) {\n    if (typeof value !== 'string') {\n        return false;\n    }\n    const directionSetting = {\n        '': true,\n        lr: true,\n        rl: true\n    };\n    const dir = directionSetting[value.toLowerCase()];\n    return dir ? value.toLowerCase() : false;\n}\n\nfunction findAlignSetting(value) {\n    if (typeof value !== 'string') {\n        return false;\n    }\n    const alignSetting = {\n        start: true,\n        middle: true,\n        end: true,\n        left: true,\n        right: true\n    };\n    const align = alignSetting[value.toLowerCase()];\n    return align ? value.toLowerCase() : false;\n}\n\nif (!VTTCue) {\n    const autoKeyword = 'auto';\n\n    VTTCue = function(startTime, endTime, text) {\n        const cue = this;\n\n        /**\n         * Shim implementation specific properties. These properties are not in\n         * the spec.\n         */\n\n        // Lets us know when the VTTCue's data has changed in such a way that we need\n        // to recompute its display state. This lets us compute its display state\n        // lazily.\n        cue.hasBeenReset = false;\n\n        /**\n         * VTTCue and TextTrackCue properties\n         * http://dev.w3.org/html5/webvtt/#vttcue-interface\n         */\n\n        let _id = '';\n        let _pauseOnExit = false;\n        let _startTime = startTime;\n        let _endTime = endTime;\n        let _text = text;\n        let _region = null;\n        let _vertical = '';\n        let _snapToLines = true;\n        let _line = autoKeyword;\n        let _lineAlign = 'start';\n        let _position = autoKeyword;\n        let _size = 100;\n        let _align = 'middle';\n\n        Object.defineProperty(cue, 'id', {\n            enumerable: true,\n            get: function () {\n                return _id;\n            },\n            set: function (value) {\n                _id = '' + value;\n            }\n        });\n\n        Object.defineProperty(cue, 'pauseOnExit', {\n            enumerable: true,\n            get: function () {\n                return _pauseOnExit;\n            },\n            set: function (value) {\n                _pauseOnExit = !!value;\n            }\n        });\n\n        Object.defineProperty(cue, 'startTime', {\n            enumerable: true,\n            get: function () {\n                return _startTime;\n            },\n            set: function (value) {\n                if (typeof value !== 'number') {\n                    throw new TypeError('Start time must be set to a number.');\n                }\n                _startTime = value;\n                this.hasBeenReset = true;\n            }\n        });\n\n        Object.defineProperty(cue, 'endTime', {\n            enumerable: true,\n            get: function () {\n                return _endTime;\n            },\n            set: function (value) {\n                if (typeof value !== 'number') {\n                    throw new TypeError('End time must be set to a number.');\n                }\n                _endTime = value;\n                this.hasBeenReset = true;\n            }\n        });\n\n        Object.defineProperty(cue, 'text', {\n            enumerable: true,\n            get: function () {\n                return _text;\n            },\n            set: function (value) {\n                _text = '' + value;\n                this.hasBeenReset = true;\n            }\n        });\n\n        Object.defineProperty(cue, 'region', {\n            enumerable: true,\n            get: function () {\n                return _region;\n            },\n            set: function (value) {\n                _region = value;\n                this.hasBeenReset = true;\n            }\n        });\n\n        Object.defineProperty(cue, 'vertical', {\n            enumerable: true,\n            get: function () {\n                return _vertical;\n            },\n            set: function (value) {\n                const setting = findDirectionSetting(value);\n                // Have to check for false because the setting an be an empty string.\n                if (setting === false) {\n                    throw new SyntaxError('An invalid or illegal string was specified.');\n                }\n                _vertical = setting;\n                this.hasBeenReset = true;\n            }\n        });\n\n        Object.defineProperty(cue, 'snapToLines', {\n            enumerable: true,\n            get: function () {\n                return _snapToLines;\n            },\n            set: function (value) {\n                _snapToLines = !!value;\n                this.hasBeenReset = true;\n            }\n        });\n\n        Object.defineProperty(cue, 'line', {\n            enumerable: true,\n            get: function () {\n                return _line;\n            },\n            set: function (value) {\n                if (typeof value !== 'number' && value !== autoKeyword) {\n                    throw new SyntaxError('An invalid number or illegal string was specified.');\n                }\n                _line = value;\n                this.hasBeenReset = true;\n            }\n        });\n\n        Object.defineProperty(cue, 'lineAlign', {\n            enumerable: true,\n            get: function () {\n                return _lineAlign;\n            },\n            set: function (value) {\n                const setting = findAlignSetting(value);\n                if (!setting) {\n                    throw new SyntaxError('An invalid or illegal string was specified.');\n                }\n                _lineAlign = setting;\n                this.hasBeenReset = true;\n            }\n        });\n\n        Object.defineProperty(cue, 'position', {\n            enumerable: true,\n            get: function () {\n                return _position;\n            },\n            set: function (value) {\n                if (value < 0 || value > 100) {\n                    throw new Error('Position must be between 0 and 100.');\n                }\n                _position = value;\n                this.hasBeenReset = true;\n            }\n        });\n\n        Object.defineProperty(cue, 'size', {\n            enumerable: true,\n            get: function () {\n                return _size;\n            },\n            set: function (value) {\n                if (value < 0 || value > 100) {\n                    throw new Error('Size must be between 0 and 100.');\n                }\n                _size = value;\n                this.hasBeenReset = true;\n            }\n        });\n\n        Object.defineProperty(cue, 'align', {\n            enumerable: true,\n            get: function () {\n                return _align;\n            },\n            set: function (value) {\n                const setting = findAlignSetting(value);\n                if (!setting) {\n                    throw new SyntaxError('An invalid or illegal string was specified.');\n                }\n                _align = setting;\n                this.hasBeenReset = true;\n            }\n        });\n\n        /**\n         * Other <track> spec defined properties\n         */\n\n        // http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#text-track-cue-display-state\n        cue.displayState = undefined;\n    };\n\n    /**\n     * VTTCue methods\n     */\n\n    VTTCue.prototype.getCueAsHTML = function () {\n        // Assume WebVTT.convertCueToDOMTree is on the global.\n        const WebVTT = window.WebVTT;\n        return WebVTT.convertCueToDOMTree(window, this.text);\n    };\n}\n\nexport default VTTCue;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/parsers/captions/vttcue.js","import { seconds, trim } from 'utils/strings';\n\n// Component that loads and parses an DFXP file\n\nexport default function Dfxp(xmlDoc) {\n    validate(xmlDoc);\n    var _captions = [];\n    var paragraphs = xmlDoc.getElementsByTagName('p');\n    // Default frameRate is 30\n    var frameRate = 30;\n    var tt = xmlDoc.getElementsByTagName('tt');\n    if (tt && tt[0]) {\n        var parsedFrameRate = parseFloat(tt[0].getAttribute('ttp:frameRate'));\n        if (!isNaN(parsedFrameRate)) {\n            frameRate = parsedFrameRate;\n        }\n    }\n    validate(paragraphs);\n    if (!paragraphs.length) {\n        paragraphs = xmlDoc.getElementsByTagName('tt:p');\n        if (!paragraphs.length) {\n            paragraphs = xmlDoc.getElementsByTagName('tts:p');\n        }\n    }\n\n    for (var i = 0; i < paragraphs.length; i++) {\n        var p = paragraphs[i];\n\n        var breaks = p.getElementsByTagName('br');\n        for (var j = 0; j < breaks.length; j++) {\n            var b = breaks[j];\n            b.parentNode.replaceChild(xmlDoc.createTextNode('\\r\\n'), b);\n        }\n\n        var rawText = (p.innerHTML || p.textContent || p.text || '');\n        var text = trim(rawText).replace(/>\\s+</g, '><').replace(/(<\\/?)tts?:/g, '$1').replace(/<br.*?\\/>/g, '\\r\\n');\n        if (text) {\n            var begin = p.getAttribute('begin');\n            var dur = p.getAttribute('dur');\n            var end = p.getAttribute('end');\n\n            var entry = {\n                begin: seconds(begin, frameRate),\n                text: text\n            };\n            if (end) {\n                entry.end = seconds(end, frameRate);\n            } else if (dur) {\n                entry.end = entry.begin + seconds(dur, frameRate);\n            }\n            _captions.push(entry);\n        }\n    }\n    if (!_captions.length) {\n        parseError();\n    }\n    return _captions;\n}\n\nfunction validate(object) {\n    if (!object) {\n        parseError();\n    }\n}\n\nfunction parseError() {\n    throw new Error('Invalid DFXP file');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/parsers/captions/dfxp.js","import _ from 'utils/underscore';\n\nconst supportedFields = [\n    'repeat',\n    'volume',\n    'mute',\n    'autostart'\n];\n\nfunction setAutoStart(model, controller, autoStart) {\n    model.setAutoStart(autoStart);\n\n    if (model.get('state') === 'idle' && autoStart === true) {\n        controller.play({ reason: 'autostart' });\n    }\n}\n\nexport default (controller, newConfig) => {\n    const model = controller._model;\n\n    if (!_.size(newConfig)) {\n        return;\n    }\n\n    supportedFields.forEach(field => {\n        const newValue = newConfig[field];\n\n        if (_.isUndefined(newValue)) {\n            return;\n        }\n\n        switch (field) {\n            case 'mute':\n                controller.setMute(newValue);\n                break;\n            case 'volume':\n                controller.setVolume(newValue);\n                break;\n            case 'autostart':\n                setAutoStart(model, controller, newValue);\n                break;\n            default:\n                model.set(field, newValue);\n        }\n    });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/api/set-config.js","import { STATE_BUFFERING, STATE_COMPLETE, STATE_PAUSED,\n    MEDIA_META, MEDIA_PLAY_ATTEMPT_FAILED, MEDIA_TIME, MEDIA_COMPLETE,\n    PLAYLIST_ITEM, PLAYLIST_COMPLETE,\n    INSTREAM_CLICK, AD_SKIPPED } from 'events/events';\nimport { BACKGROUND_LOAD_OFFSET, BACKGROUND_LOAD_MIN_OFFSET } from '../program/program-constants';\nimport Promise from 'polyfills/promise';\nimport { offsetToSeconds } from 'utils/strings';\nimport Events from 'utils/backbone.events';\nimport _ from 'utils/underscore';\nimport AdProgramController from 'program/ad-program-controller';\n\nvar _defaultOptions = {\n    skipoffset: null,\n    tag: null\n};\n\nvar InstreamAdapter = function(_controller, _model, _view, _mediaPool) {\n    const _this = this;\n\n    let _adProgram = new AdProgramController(_model, _mediaPool);\n    let _array;\n    let _arrayOptions;\n    let _arrayIndex = 0;\n    let _options = {};\n    let _skipAd = _instreamItemNext;\n    let _backgroundLoadTriggered = false;\n    let _oldpos;\n    let _skipOffset;\n    let _backgroundLoadStart;\n    let _destroyed = false;\n    let _inited = false;\n\n    const _clickHandler = (evt) => {\n        if (_destroyed) {\n            return;\n        }\n        evt = evt || {};\n        evt.hasControls = !!_model.get('controls');\n\n        this.trigger(INSTREAM_CLICK, evt);\n\n        // toggle playback after click event\n        if (_adProgram.model.get('state') === STATE_PAUSED) {\n            if (evt.hasControls) {\n                _adProgram.playVideo();\n            }\n        } else {\n            _adProgram.pause();\n        }\n    };\n\n    const _doubleClickHandler = () => {\n        if (_destroyed) {\n            return;\n        }\n\n        if (_adProgram.model.get('state') === STATE_PAUSED) {\n            if (_model.get('controls')) {\n                _controller.setFullscreen();\n                _controller.play();\n            }\n        }\n    };\n\n    this.type = 'instream';\n\n    this.addAdProgramTimeListener = function() {\n        if (_inited || _destroyed) {\n            return;\n        }\n\n        _adProgram.on(MEDIA_TIME, _instreamTime, this);\n\n        // This enters the player into instream mode\n        _model.set('instream', _adProgram);\n\n        // don't trigger api play/pause on display click\n        const clickHandler = _view.clickHandler();\n        if (clickHandler) {\n            clickHandler.setAlternateClickHandlers(() => {}, null);\n        }\n\n        return this;\n    };\n\n    this.init = function() {\n        if (_inited || _destroyed) {\n            return;\n        }\n        _inited = true;\n\n        // Keep track of the original player state\n        _adProgram.setup();\n\n        _oldpos = _controller.get('position');\n        _adProgram.on('all', _instreamForward, this);\n        _adProgram.on(MEDIA_PLAY_ATTEMPT_FAILED, triggerPlayRejected, this);\n        _adProgram.on(MEDIA_TIME, _instreamTime, this);\n        _adProgram.on(MEDIA_COMPLETE, _instreamItemComplete, this);\n        _adProgram.on(MEDIA_META, _instreamMeta, this);\n\n        // Make sure the original player's provider stops broadcasting events (pseudo-lock...)\n        _controller.detachMedia();\n\n        const mediaElement = _adProgram.primedElement;\n        const mediaContainer = _model.get('mediaContainer');\n        mediaContainer.appendChild(mediaElement);\n\n        if (_controller.checkBeforePlay() || (_oldpos === 0 && !_controller.isBeforeComplete())) {\n            // make sure video restarts after preroll\n            _oldpos = 0;\n        } else if (_controller.isBeforeComplete() || _model.get('state') === STATE_COMPLETE) {\n            _oldpos = null;\n        }\n\n        // This enters the player into instream mode\n        _model.set('instream', _adProgram);\n        _adProgram.model.set('state', STATE_BUFFERING);\n\n        // don't trigger api play/pause on display click\n        const clickHandler = _view.clickHandler();\n        if (clickHandler) {\n            clickHandler.setAlternateClickHandlers(() => {}, null);\n        }\n\n        this.setText(_model.get('localization').loadingAd);\n        return this;\n    };\n\n    function triggerPlayRejected() { \n        _adProgram.model.set('playRejected', true);\n    }\n\n    function _loadNextItem() {\n        _arrayIndex++;\n        _this.loadItem(_array);\n    }\n\n    function _instreamForward(type, data) {\n        if (type === 'complete') {\n            return;\n        }\n        data = data || {};\n\n        if (_options.tag && !data.tag) {\n            data.tag = _options.tag;\n        }\n\n        this.trigger(type, data);\n\n        if (type === 'mediaError' || type === 'error') {\n            if (_array && _arrayIndex + 1 < _array.length) {\n                _loadNextItem();\n            }\n        }\n    }\n\n    function _instreamTime(evt) {\n        const { duration, position } = evt;\n        const mediaModel = _adProgram.model.mediaModel || _adProgram.model;\n        mediaModel.set('duration', duration);\n        mediaModel.set('position', position);\n\n        // Start background loading once the skip button is clickable\n        // If no skipoffset is set, default to background loading 5 seconds before the end\n        if (!_backgroundLoadStart) {\n            // Ensure background loading doesn't degrade ad performance by starting too early\n            _backgroundLoadStart = (offsetToSeconds(_skipOffset, duration) || duration) - BACKGROUND_LOAD_OFFSET;\n        }\n        if (!_backgroundLoadTriggered && position >= Math.max(_backgroundLoadStart, BACKGROUND_LOAD_MIN_OFFSET)) {\n            _controller.preloadNextItem();\n            _backgroundLoadTriggered = true;\n        }\n    }\n\n    function _instreamItemComplete(e) {\n        var data = {};\n        if (_options.tag) {\n            data.tag = _options.tag;\n        }\n        this.trigger(MEDIA_COMPLETE, data);\n        _instreamItemNext.call(this, e);\n    }\n\n    function _instreamItemNext(e) {\n        if (_array && _arrayIndex + 1 < _array.length) {\n            _loadNextItem();\n        } else {\n            if (e.type === MEDIA_COMPLETE) {\n                // Dispatch playlist complete event for ad pods\n                this.trigger(PLAYLIST_COMPLETE, {});\n            }\n            this.destroy();\n        }\n    }\n\n    this.loadItem = function(item, options) {\n        if (_destroyed || !_inited) {\n            return Promise.reject(new Error('Instream not setup'));\n        }\n        // Copy the playlist item passed in and make sure it's formatted as a proper playlist item\n        let playlist = item;\n        if (_.isArray(item)) {\n            _array = item;\n            _arrayOptions = options || _arrayOptions;\n            item = _array[_arrayIndex];\n            if (_arrayOptions) {\n                options = _arrayOptions[_arrayIndex];\n            }\n        } else {\n            playlist = [item];\n        }\n\n        const adModel = _adProgram.model;\n        adModel.set('playlist', playlist);\n\n        _model.set('hideAdsControls', false);\n\n        // Dispatch playlist item event for ad pods\n        _this.trigger(PLAYLIST_ITEM, {\n            index: _arrayIndex,\n            item: item\n        });\n\n        _options = Object.assign({}, _defaultOptions, options);\n\n        _this.addClickHandler();\n\n        adModel.set('skipButton', false);\n\n        const playPromise = _adProgram.setActiveItem(_arrayIndex);\n\n        _backgroundLoadTriggered = false;\n        _skipOffset = item.skipoffset || _options.skipoffset;\n        if (_skipOffset) {\n            _this.setupSkipButton(_skipOffset, _options);\n        }\n        return playPromise;\n    };\n\n    this.setupSkipButton = function(skipoffset, options, customNext) {\n        const adModel = _adProgram.model;\n        if (customNext) {\n            _skipAd = customNext;\n        } else {\n            _skipAd = _instreamItemNext;\n        }\n        adModel.set('skipMessage', options.skipMessage);\n        adModel.set('skipText', options.skipText);\n        adModel.set('skipOffset', skipoffset);\n        adModel.attributes.skipButton = false;\n        adModel.set('skipButton', true);\n    };\n\n    this.applyProviderListeners = function(provider) {\n        _adProgram.usePsuedoProvider(provider);\n\n        this.addClickHandler();\n    };\n\n    this.play = function() {\n        _adProgram.playVideo();\n    };\n\n    this.pause = function() {\n        _adProgram.pause();\n    };\n\n    this.addClickHandler = function() {\n        if (_destroyed) {\n            return;\n        }\n        // start listening for ad click\n        if (_view.clickHandler()) {\n            _view.clickHandler().setAlternateClickHandlers(_clickHandler, _doubleClickHandler);\n        }\n    };\n\n    this.skipAd = function(evt) {\n        var skipAdType = AD_SKIPPED;\n        this.trigger(skipAdType, evt);\n        _skipAd.call(this, {\n            type: skipAdType\n        });\n    };\n\n    function _instreamMeta(evt) {\n        // If we're getting video dimension metadata from the provider, allow the view to resize the media\n        if (evt.width && evt.height) {\n            _view.resizeMedia();\n        }\n    }\n\n    this.replacePlaylistItem = function(item) {\n        if (_destroyed) {\n            return;\n        }\n        _model.set('playlistItem', item);\n        _adProgram.srcReset();\n    };\n\n    this.destroy = function() {\n        if (_destroyed) {\n            return;\n        }\n        _destroyed = true;\n        this.trigger('destroyed');\n        this.off();\n\n        if (_view.clickHandler()) {\n            _view.clickHandler().revertAlternateClickHandlers();\n        }\n\n        _model.off(null, null, _adProgram);\n        _adProgram.off(null, null, _this);\n        _adProgram.destroy();\n\n        // Force player state with ad to pause for model \"change:state\" events to trigger\n        if (_inited && _adProgram.model) {\n            _model.attributes.state = STATE_PAUSED;\n        }\n\n        _model.set('instream', null);\n\n        _adProgram = null;\n\n        if (!_inited || _model.attributes._destroyed) {\n            return;\n        }\n\n        // Re-attach the controller & resume playback\n        // when instream was inited and the player was not destroyed\\\n        _controller.attachMedia(_oldpos);\n\n        if (this.noResume) {\n            return;\n        }\n\n        if (_oldpos === null) {\n            _controller.stopVideo();\n        } else {\n            _controller.playVideo();\n        }\n    };\n\n    this.getState = function() {\n        if (_destroyed) {\n            // api expects false to know we aren't in instreamMode\n            return false;\n        }\n        return _adProgram.model.get('state');\n    };\n\n    this.setText = function(text) {\n        if (_destroyed) {\n            return;\n        }\n        _view.setAltText(text || '');\n    };\n\n    // This method is triggered by plugins which want to hide player controls\n    this.hide = function() {\n        if (_destroyed) {\n            return;\n        }\n        _model.set('hideAdsControls', true);\n    };\n\n    /**\n     * Extracts the video tag in the foreground.\n     * @returns {Element|undefined} videoTag - the HTML <video> element in the foreground.\n     */\n    this.getMediaElement = function () {\n        if (_destroyed) {\n            return null;\n        }\n        return _adProgram.primedElement;\n    };\n\n    /**\n     * Sets the internal skip offset. Does not set the skip button.\n     * @param {Number} skipOffset - The number of seconds from the start where the ad becomes skippable.\n     * @returns {void}\n     */\n    this.setSkipOffset = function(skipOffset) {\n        // IMA will pass -1 if it doesn't know the skipoffset, or if the ad is unskippable\n        _skipOffset = skipOffset > 0 ? skipOffset : null;\n        if (_adProgram) {\n            _adProgram.model.set('skipOffset', _skipOffset);\n        }\n    };\n};\n\nObject.assign(InstreamAdapter.prototype, Events);\n\nexport default InstreamAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/controller/instream-adapter.js","import { Features } from 'environment/environment';\nimport { ERROR, FULLSCREEN, MEDIA_COMPLETE, PLAYER_STATE, STATE_PLAYING, STATE_PAUSED } from 'events/events';\nimport ProgramController from 'program/program-controller';\nimport Model from 'controller/model';\nimport changeStateEvent from 'events/change-state-event';\nimport SharedMediaPool from 'program/shared-media-pool';\n\nexport default class AdProgramController extends ProgramController {\n    constructor(model, mediaPool) {\n        super(model, mediaPool);\n        const adModel = this.model = new Model();\n        this.playerModel = model;\n        this.provider = null;\n\n        adModel.mediaModel.attributes.mediaType = 'video';\n\n        // Ad plugins must use only one element, and must use the same element during playback of an item\n        // (i.e. prerolls, midrolls, and postrolls must use the same tag)\n        let mediaElement;\n        if (Features.backgroundLoading) {\n            // The media pool has reserves an element for ads to use. It is reserved on setup and is not used by other media\n            mediaElement = mediaPool.getAdElement();\n        } else {\n            // Take the tag that we're using to play the current item. The tag has been freed before reaching this point\n            mediaElement = model.get('mediaElement');\n\n            adModel.attributes.mediaElement = mediaElement;\n            adModel.attributes.mediaSrc = mediaElement.src;\n\n            // Listen to media element for events that indicate src was reset or load() was called\n            const srcResetListener = this.srcResetListener = () => {\n                this.srcReset();\n            };\n            mediaElement.addEventListener('emptied', srcResetListener);\n            mediaElement.playbackRate = mediaElement.defaultPlaybackRate = 1;\n        }\n\n        this.mediaPool = SharedMediaPool(mediaElement, mediaPool);\n    }\n\n    setup() {\n        const { model, playerModel, primedElement } = this;\n        const playerAttributes = playerModel.attributes;\n        const mediaModelContext = playerModel.mediaModel;\n        model.setup({\n            id: playerAttributes.id,\n            volume: playerAttributes.volume,\n            instreamMode: true,\n            edition: playerAttributes.edition,\n            mediaContext: mediaModelContext,\n            mute: playerAttributes.mute,\n            streamType: 'VOD',\n            autostartMuted: playerAttributes.autostartMuted,\n            autostart: playerAttributes.autostart,\n            advertising: playerAttributes.advertising,\n            sdkplatform: playerAttributes.sdkplatform,\n            skipButton: false\n        });\n\n        model.on('fullscreenchange', this._nativeFullscreenHandler);\n        model.on('change:state', changeStateEvent, this);\n        model.on(ERROR, function(data) {\n            this.trigger(ERROR, data);\n        }, this);\n\n        if (!primedElement.paused) {\n            primedElement.pause();\n        }\n    }\n\n    setActiveItem(index) {\n        this.stopVideo();\n        this.provider = null;\n        super.setActiveItem(index)\n            .then((mediaController) => {\n                this._setProvider(mediaController.provider);\n            });\n        return this.playVideo();\n    }\n\n    usePsuedoProvider(provider) {\n        this.provider = provider;\n        if (!provider) {\n            return;\n        }\n        this._setProvider(provider);\n\n        // Match the main player's controls state\n        provider.off(ERROR);\n        provider.on(ERROR, function(data) {\n            this.trigger(ERROR, data);\n        }, this);\n    }\n\n    _setProvider(provider) {\n        // Clear current provider when applyProviderListeners(null) is called\n        if (!provider || !this.mediaPool) {\n            return;\n        }\n\n        const { model, playerModel } = this;\n        const isVpaidProvider = provider.type === 'vpaid';\n\n        provider.off();\n        provider.on('all', function(type, data) {\n            if (isVpaidProvider && (type === MEDIA_COMPLETE)) {\n                return;\n            }\n            this.trigger(type, Object.assign({}, data, { type: type }));\n        }, this);\n\n        const adMediaModelContext = model.mediaModel;\n        provider.on(PLAYER_STATE, (event) => {\n            adMediaModelContext.set('mediaState', event.newstate);\n        });\n        adMediaModelContext.on('change:mediaState', (changeAdModel, state) => {\n            this._stateHandler(state);\n        });\n        provider.attachMedia();\n        provider.volume(playerModel.get('volume'));\n        provider.mute(playerModel.getMute());\n        if (provider.setPlaybackRate) {\n            provider.setPlaybackRate(1);\n        }\n        playerModel.on('change:volume', function(data, value) {\n            this.volume = value;\n        }, this);\n        playerModel.on('change:mute', function(data, mute) {\n            this.mute = mute;\n            if (!mute) {\n                this.volume = playerModel.get('volume');\n            }\n        }, this);\n        playerModel.on('change:autostartMuted', function(data, value) {\n            if (!value) {\n                model.set('autostartMuted', value);\n                this.mute = playerModel.get('mute');\n            }\n        }, this);\n    }\n\n    destroy() {\n        const { model, mediaPool, playerModel } = this;\n        model.off();\n\n        // We only use one media element from ads; getPrimedElement will return it\n        const mediaElement = mediaPool.getPrimedElement();\n        if (!Features.backgroundLoading) {\n            if (mediaElement) {\n                mediaElement.removeEventListener('emptied', this.srcResetListener);\n                // Reset the player media model if the src was changed externally\n                if (mediaElement.src !== model.get('mediaSrc')) {\n                    this.srcReset();\n                }\n            }\n        } else {\n            mediaPool.clean();\n            const mediaContainer = playerModel.get('mediaContainer');\n            if (mediaElement.parentNode === mediaContainer) {\n                mediaContainer.removeChild(mediaElement);\n            }\n        }\n    }\n\n    srcReset() {\n        const { playerModel } = this;\n        const mediaModel = playerModel.get('mediaModel');\n        const provider = playerModel.getVideo();\n\n        mediaModel.srcReset();\n\n        // Set hlsjs.src to null so that it reloads it's item source\n        if (provider) {\n            provider.src = null;\n        }\n    }\n\n    _nativeFullscreenHandler(evt) {\n        const { model } = this;\n        model.trigger(evt.type, evt);\n        this.trigger(FULLSCREEN, {\n            fullscreen: evt.jwstate\n        });\n    }\n\n    _stateHandler(state) {\n        const { model } = this;\n        switch (state) {\n            case STATE_PLAYING:\n            case STATE_PAUSED:\n                model.set(PLAYER_STATE, state);\n                break;\n            default:\n                break;\n        }\n    }\n\n    set mute(mute) {\n        const { mediaController, model, provider } = this;\n        model.set('mute', mute);\n        super.mute = mute;\n        if (!mediaController) {\n            provider.mute(mute);\n        }\n    }\n\n    set volume(volume) {\n        const { mediaController, model, provider } = this;\n        model.set('volume', volume);\n        super.volume = volume;\n        if (!mediaController) {\n            provider.volume(volume);\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/program/ad-program-controller.js","import cancelable from 'utils/cancelable';\nimport Eventable from 'utils/eventable';\nimport ApiQueueDecorator from 'api/api-queue';\nimport { ProviderListener } from 'program/program-listeners';\nimport { resolved } from 'polyfills/promise';\nimport { MediaModel } from 'controller/model';\nimport { seconds } from 'utils/strings';\nimport {\n    MEDIA_PLAY_ATTEMPT, MEDIA_PLAY_ATTEMPT_FAILED, MEDIA_COMPLETE,\n    PLAYER_STATE, STATE_PAUSED, STATE_BUFFERING, STATE_COMPLETE,\n    MEDIA_VISUAL_QUALITY\n} from 'events/events';\n\nexport default class MediaController extends Eventable {\n    constructor(provider, model) {\n        super();\n        this.attached = true;\n        this.beforeComplete = false;\n        this.item = null;\n        this.mediaModel = new MediaModel();\n        this.model = model;\n        this.provider = provider;\n        this.providerListener = new ProviderListener(this);\n        this.thenPlayPromise = cancelable(() => {});\n        addProviderListeners(this);\n        this.eventQueue = new ApiQueueDecorator(this, ['trigger'],\n            () => !this.attached || this.background);\n    }\n\n    play(playReason) {\n        const { item, model, mediaModel, provider } = this;\n\n        if (!playReason) {\n            playReason = model.get('playReason');\n        }\n\n        model.set('playRejected', false);\n        let playPromise = resolved;\n        if (mediaModel.get('setup')) {\n            playPromise = provider.play();\n        } else {\n            mediaModel.set('setup', true);\n            playPromise = this._loadAndPlay(item, provider);\n            if (!mediaModel.get('started')) {\n                this._playAttempt(playPromise, playReason);\n            }\n        }\n        return playPromise;\n    }\n\n    stop() {\n        const { provider } = this;\n        provider.stop();\n    }\n\n    pause() {\n        const { provider } = this;\n        provider.pause();\n    }\n\n    preload() {\n        const { item, mediaModel, provider } = this;\n        if (!item || (item && item.preload === 'none')) {\n            return;\n        }\n        // The provider has a video tag, but has not started nor preloaded\n        if (this.attached && !this.setup && !this.preloaded) {\n            mediaModel.set('preloaded', true);\n            provider.preload(item);\n        }\n    }\n\n    destroy() {\n        const { provider, mediaModel } = this;\n        this.off();\n        mediaModel.off();\n        provider.off();\n        this.eventQueue.destroy();\n        this.detach();\n        if (provider.getContainer()) {\n            provider.remove();\n        }\n        delete provider.instreamMode;\n        this.provider = null;\n        this.item = null;\n    }\n\n    attach() {\n        const { model, provider } = this;\n\n        // Restore the playback rate to the provider in case it changed while detached and we reused a video tag.\n        model.setPlaybackRate(model.get('defaultPlaybackRate'));\n        provider.attachMedia();\n        this.attached = true;\n        model.set('attached', true);\n        this.eventQueue.flush();\n\n        if (this.beforeComplete) {\n            this._playbackComplete();\n        }\n    }\n\n    detach() {\n        const { model, provider } = this;\n        this.thenPlayPromise.cancel();\n        provider.detachMedia();\n        this.attached = false;\n        model.set('attached', false);\n    }\n\n    // Executes the playPromise\n    _playAttempt(playPromise, playReason) {\n        const { item, mediaModel, model, provider } = this;\n\n        this.trigger(MEDIA_PLAY_ATTEMPT, {\n            item,\n            playReason\n        });\n        // Immediately set player state to buffering if these conditions are met\n        if (provider && provider.video && !provider.video.paused) {\n            model.set(PLAYER_STATE, STATE_BUFFERING);\n        }\n\n        playPromise.then(() => {\n            if (!mediaModel.get('setup')) {\n                // Exit if model state was reset\n                return;\n            }\n            delete item.starttime;\n            mediaModel.set('started', true);\n            if (mediaModel === model.mediaModel) {\n                // Start firing visualQuality once playback has started\n                mediaModel.off(MEDIA_VISUAL_QUALITY, null, this);\n                mediaModel.change(MEDIA_VISUAL_QUALITY, (changedMediaModel, eventData) => {\n                    this.trigger(MEDIA_VISUAL_QUALITY, eventData);\n                }, this);\n                syncPlayerWithMediaModel(mediaModel);\n            }\n        }).catch(error => {\n            model.set('playRejected', true);\n            const videoTagPaused = provider && provider.video && provider.video.paused;\n            if (videoTagPaused) {\n                mediaModel.set('mediaState', STATE_PAUSED);\n            }\n            this.trigger(MEDIA_PLAY_ATTEMPT_FAILED, {\n                error,\n                item,\n                playReason\n            });\n        });\n    }\n\n    _playbackComplete() {\n        const { provider } = this;\n        this.beforeComplete = false;\n        provider.setState(STATE_COMPLETE);\n        this.trigger(MEDIA_COMPLETE, {});\n    }\n\n    _loadAndPlay() {\n        const { item, provider } = this;\n        // Calling load() on Shaka may return a player setup promise\n        const providerSetupPromise = provider.load(item);\n        if (providerSetupPromise) {\n            const thenPlayPromise = cancelable(() => {\n                return provider.play() || resolved;\n            });\n            this.thenPlayPromise = thenPlayPromise;\n            return providerSetupPromise.then(thenPlayPromise.async);\n        }\n        return provider.play() || resolved;\n    }\n\n    get audioTrack() {\n        return this.provider.getCurrentAudioTrack();\n    }\n\n    get quality() {\n        return this.provider.getCurrentQuality();\n    }\n\n    get audioTracks() {\n        return this.provider.getAudioTracks();\n    }\n\n    get background() {\n        const { container, provider } = this;\n        // A backgrounded provider is attached to a video tag\n        if (!this.attached) {\n            return false;\n        }\n        // A provider without a video tag cannot be backgrounded\n        if (!provider.video) {\n            return false;\n        }\n        // A backgrounded provider does not have a parent container, or has one, but without the media tag as a child\n        return !container || (container && !container.contains(provider.video));\n    }\n\n    get container() {\n        return this.provider.getContainer();\n    }\n\n    get mediaElement() {\n        return this.provider.video;\n    }\n\n    get preloaded() {\n        return this.mediaModel.get('preloaded');\n    }\n\n    get qualities() {\n        return this.provider.getQualityLevels();\n    }\n\n    get setup() {\n        return this.mediaModel.get('setup');\n    }\n\n    get started() {\n        return this.mediaModel.get('started');\n    }\n\n    set activeItem(item) {\n        const mediaModel = this.mediaModel = new MediaModel();\n        const position = item ? seconds(item.starttime) : 0;\n        const duration = item ? seconds(item.duration) : 0;\n        const mediaModelState = mediaModel.attributes;\n        mediaModel.srcReset();\n        mediaModelState.position = position;\n        mediaModelState.duration = duration;\n\n        this.item = item;\n        this.provider.init(item);\n    }\n\n    set audioTrack(index) {\n        this.provider.setCurrentAudioTrack(index);\n    }\n\n    set background(shouldBackground) {\n        const { container, provider } = this;\n        // A provider without a video tag must use attach and detach\n        if (!provider.video) {\n            if (shouldBackground) {\n                this.detach();\n            } else {\n                this.attach();\n            }\n            return;\n        }\n        if (!container) {\n            return;\n        }\n\n        if (shouldBackground) {\n            if (!this.background) {\n                this.thenPlayPromise.cancel();\n                this.pause();\n                container.removeChild(provider.video);\n                this.container = null;\n            }\n        } else {\n            this.eventQueue.flush();\n            if (this.beforeComplete) {\n                this._playbackComplete();\n            }\n        }\n    }\n\n    set container(element) {\n        const { provider } = this;\n        provider.setContainer(element);\n    }\n\n    set controls(mode) {\n        this.provider.setControls(mode);\n    }\n\n    set mute(mute) {\n        this.provider.mute(mute);\n    }\n\n    set position(pos) {\n        this.provider.seek(pos);\n    }\n\n    set quality(index) {\n        this.provider.setCurrentQuality(index);\n    }\n\n    set subtitles(index) {\n        if (this.provider.setSubtitlesTrack) {\n            this.provider.setSubtitlesTrack(index);\n        }\n    }\n\n    set volume(volume) {\n        this.provider.volume(volume);\n    }\n}\n\nfunction syncPlayerWithMediaModel(mediaModel) {\n    // Sync player state with mediaModel state\n    const mediaState = mediaModel.get('mediaState');\n    mediaModel.trigger('change:mediaState', mediaModel, mediaState, mediaState);\n}\n\nfunction addProviderListeners(mediaController) {\n    mediaController.provider.on('all', mediaController.providerListener, mediaController);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/program/media-controller.js","/**\n * A simple data structure for containing both of the background loading objects.\n * currentMedia is the currently active item which has been put into the background during ad playback.\n * nextMedia is an item which is preloading in the background which may be selected in the future. It is usually the\n * next item in the playlist, or the next up item in a recommendations feed.\n * @returns {BackgroundMedia}\n */\n/**\n * @typedef {Object} BackgroundMedia\n * @property {MediaController} currentMedia - The mediaController which has been placed into the background during playback.\n * @property {Item} nextItem - The playlist item loading in the background.\n * @property {Promise} nextMedia - A promise representing the media loading in the background. Resolves with the mediaController.\n * @constructor\n */\nexport default function BackgroundMedia() {\n    let currentMedia = null;\n    let nextMedia = null;\n\n    return Object.defineProperties({\n        setNext(item, loadPromise) {\n            nextMedia = { item, loadPromise };\n        },\n        isNext(item) {\n            return !!(nextMedia && JSON.stringify(nextMedia.item.sources[0]) === JSON.stringify(item.sources[0]));\n        },\n        clearNext() {\n            nextMedia = null;\n        }\n    }, {\n        nextLoadPromise: {\n            get() {\n                return nextMedia ? nextMedia.loadPromise : null;\n            }\n        },\n        currentMedia: {\n            get() {\n                return currentMedia;\n            },\n            set(mediaController) {\n                currentMedia = mediaController;\n            }\n        }\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/program/background-media.js","import { loadFile } from 'controller/tracks-loader';\nimport { createId, createLabel } from 'controller/tracks-helper';\nimport Events from 'utils/backbone.events';\nimport { ERROR } from 'events/events';\n\n/* Displays closed captions or subtitles on top of the video */\nconst Captions = function(_model) {\n\n    let _tracks = [];\n    let _tracksById = {};\n    let _unknownCount = 0;\n\n    // Reset and load external captions on playlist item\n    _model.on('change:playlistItem', (model) => {\n        _tracks = [];\n        _tracksById = {};\n        _unknownCount = 0;\n\n        // Update model without dispatching events\n        const attributes = model.attributes;\n        attributes.captionsIndex = 0;\n        attributes.captionsList = _captionsMenu();\n        model.set('captionsTrack', null);\n    }, this);\n\n    // Update tracks once we know \"renderCaptionsNatively\" based on provider\n    _model.on('change:itemReady', () => {\n        // Sideload tracks when not rendering natively\n        const item = _model.get('playlistItem');\n        const tracks = item.tracks;\n        const len = tracks && tracks.length;\n        if (len && !_model.get('renderCaptionsNatively')) {\n            for (let i = 0; i < len; i++) {\n                /* eslint-disable no-loop-func */\n                const track = tracks[i];\n                if (_kindSupported(track.kind) && !_tracksById[track._id]) {\n                    _addTrack(track);\n                    loadFile(track, (vttCues) => {\n                        _addVTTCuesToTrack(track, vttCues);\n                    }, (error) => {\n                        this.trigger(ERROR, {\n                            message: 'Captions failed to load',\n                            reason: error\n                        });\n                    });\n                }\n            }\n        }\n        _setCaptionsList();\n    }, this);\n\n    // Listen for captions menu index changes from the view\n    _model.on('change:captionsIndex', (model, captionsMenuIndex) => {\n        let track = null;\n        if (captionsMenuIndex !== 0) {\n            track = _tracks[captionsMenuIndex - 1];\n        }\n        model.set('captionsTrack', track);\n    }, this);\n\n    function _setSubtitlesTracks(tracks) {\n        if (!tracks.length) {\n            return;\n        }\n\n        for (let i = 0; i < tracks.length; i++) {\n            _addTrack(tracks[i]);\n        }\n\n        // To avoid duplicate tracks in the menu when we reuse an _id, regenerate the tracks array\n        _tracks = Object.keys(_tracksById).map(id => _tracksById[id]);\n\n        _setCaptionsList();\n    }\n\n    function _kindSupported(kind) {\n        return kind === 'subtitles' || kind === 'captions';\n    }\n\n    function _addVTTCuesToTrack(track, vttCues) {\n        track.data = vttCues;\n    }\n\n    function _addTrack(track) {\n        track.data = track.data || [];\n        track.name = track.label || track.name || track.language;\n        track._id = createId(track, _tracks.length);\n\n        if (!track.name) {\n            const labelInfo = createLabel(track, _unknownCount);\n            track.name = labelInfo.label;\n            _unknownCount = labelInfo.unknownCount;\n        }\n\n        // During the same playlist we may reu and readd tracks with the same _id; allow the new track to replace the old\n        _tracksById[track._id] = track;\n        _tracks.push(track);\n    }\n\n    function _captionsMenu() {\n        const list = [{\n            id: 'off',\n            label: 'Off'\n        }];\n        for (let i = 0; i < _tracks.length; i++) {\n            list.push({\n                id: _tracks[i]._id,\n                label: _tracks[i].name || 'Unknown CC'\n            });\n        }\n        return list;\n    }\n\n    function _selectDefaultIndex() {\n        let captionsMenuIndex = 0;\n        const label = _model.get('captionLabel');\n\n        // Because there is no explicit track for \"Off\"\n        //  it is the implied zeroth track\n        if (label === 'Off') {\n            _model.set('captionsIndex', 0);\n            return;\n        }\n\n        for (let i = 0; i < _tracks.length; i++) {\n            const track = _tracks[i];\n            if (label && label === track.name) {\n                captionsMenuIndex = i + 1;\n                break;\n            } else if (track.default || track.defaulttrack || track._id === 'default') {\n                captionsMenuIndex = i + 1;\n            } else if (track.autoselect) {\n                // TODO: auto select track by comparing track.language to system lang\n            }\n        }\n        // set the index without the side effect of storing the Off label in _selectCaptions\n        _setCurrentIndex(captionsMenuIndex);\n    }\n\n    function _setCurrentIndex(index) {\n        if (_tracks.length) {\n            _model.setVideoSubtitleTrack(index, _tracks);\n        } else {\n            _model.set('captionsIndex', index);\n        }\n    }\n\n    function _setCaptionsList() {\n        const captionsList = _captionsMenu();\n        if (listIdentity(captionsList) !== listIdentity(_model.get('captionsList'))) {\n            _selectDefaultIndex();\n            _model.set('captionsList', captionsList);\n        }\n    }\n\n    function listIdentity(list) {\n        return list.map(item => `${item.id}-${item.label}`).join(',');\n    }\n\n    this.setSubtitlesTracks = _setSubtitlesTracks;\n\n    this.getCurrentIndex = function() {\n        return _model.get('captionsIndex');\n    };\n\n    this.getCaptionsList = function() {\n        return _model.get('captionsList');\n    };\n\n    this.destroy = function() {\n        this.off(null, null, this);\n    };\n};\n\nObject.assign(Captions.prototype, Events);\n\nexport default Captions;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/controller/captions.js","import playerTemplate from 'templates/player';\nimport ErrorContainer from 'view/error-container';\nimport { isAudioMode, CONTROLBAR_ONLY_HEIGHT } from 'view/utils/audio-mode';\nimport viewsManager from 'view/utils/views-manager';\nimport getVisibility from 'view/utils/visibility';\nimport activeTab from 'utils/active-tab';\nimport { requestAnimationFrame, cancelAnimationFrame } from 'utils/request-animation-frame';\nimport { getBreakpoint, setBreakpoint } from 'view/utils/breakpoint';\nimport { normalizeSkin, handleColorOverrides } from 'view/utils/skin';\nimport { Browser, OS, Features } from 'environment/environment';\nimport * as ControlsLoader from 'controller/controls-loader';\nimport {\n    STATE_BUFFERING, STATE_IDLE, STATE_COMPLETE, STATE_PAUSED, STATE_PLAYING, STATE_ERROR,\n    RESIZE, BREAKPOINT, DISPLAY_CLICK, LOGO_CLICK, ERROR, NATIVE_FULLSCREEN, MEDIA_VISUAL_QUALITY, CONTROLS } from 'events/events';\nimport Events from 'utils/backbone.events';\nimport {\n    addClass,\n    hasClass,\n    removeClass,\n    replaceClass,\n    toggleClass,\n    createElement,\n    bounds,\n} from 'utils/dom';\nimport {\n    clearCss,\n    style,\n} from 'utils/css';\nimport _ from 'utils/underscore';\nimport requestFullscreenHelper from 'view/utils/request-fullscreen-helper';\nimport flagNoFocus from 'view/utils/flag-no-focus';\nimport ClickHandler from 'view/utils/clickhandler';\nimport CaptionsRenderer from 'view/captionsrenderer';\nimport Logo from 'view/logo';\nimport Preview from 'view/preview';\nimport Title from 'view/title';\n\nrequire('css/jwplayer.less');\n\nlet ControlsModule;\n\nconst _isMobile = OS.mobile;\nconst _isIE = Browser.ie;\n\nfunction View(_api, _model) {\n    const _this = Object.assign(this, Events, {\n        isSetup: false,\n        api: _api,\n        model: _model\n    });\n\n    const _playerElement = createElement(playerTemplate(_model.get('id'), _model.get('localization').player));\n    const _videoLayer = _playerElement.querySelector('.jw-media');\n\n    const _preview = new Preview(_model);\n    const _title = new Title(_model);\n\n    const _captionsRenderer = new CaptionsRenderer(_model);\n    _captionsRenderer.on('all', _this.trigger, _this);\n\n    let _logo;\n\n    let _lastWidth;\n    let _lastHeight;\n\n    let _resizeMediaTimeout = -1;\n    let _resizeContainerRequestId = -1;\n    let _stateClassRequestId = -1;\n\n    let displayClickHandler;\n    let fullscreenHelpers;\n    let focusHelper;\n\n    let _breakpoint = null;\n    let _controls;\n\n    function reasonInteraction() {\n        return { reason: 'interaction' };\n    }\n\n    this.updateBounds = function () {\n        cancelAnimationFrame(_resizeContainerRequestId);\n        const inDOM = document.body.contains(_playerElement);\n        const rect = bounds(_playerElement);\n        const containerWidth = Math.round(rect.width);\n        const containerHeight = Math.round(rect.height);\n\n        // If the container is the same size as before, return early\n        if (containerWidth === _lastWidth && containerHeight === _lastHeight) {\n            // Listen for player to be added to DOM\n            if (!_lastWidth || !_lastHeight) {\n                _responsiveListener();\n            }\n            _model.set('inDom', inDOM);\n            return;\n        }\n        // If we have bad values for either dimension, return early\n        if (!containerWidth || !containerHeight) {\n            // If we haven't established player size, try again\n            if (!_lastWidth || !_lastHeight) {\n                _responsiveListener();\n            }\n        }\n\n        // Don't update container dimensions to 0, 0 when not in DOM\n        if (containerWidth || containerHeight || inDOM) {\n            _model.set('containerWidth', containerWidth);\n            _model.set('containerHeight', containerHeight);\n        }\n        _model.set('inDom', inDOM);\n\n        if (inDOM) {\n            viewsManager.observe(_playerElement);\n        }\n    };\n\n    this.updateStyles = function() {\n        const containerWidth = _model.get('containerWidth');\n        const containerHeight = _model.get('containerHeight');\n\n        if (_model.get('controls')) {\n            updateContainerStyles(containerWidth, containerHeight);\n        }\n\n        if (_controls) {\n            _controls.resize(containerWidth, containerHeight);\n        }\n\n        _resizeMedia(containerWidth, containerHeight);\n        _captionsRenderer.resize();\n    };\n\n    this.checkResized = function() {\n        const containerWidth = _model.get('containerWidth');\n        const containerHeight = _model.get('containerHeight');\n        if (containerWidth !== _lastWidth || containerHeight !== _lastHeight) {\n            _lastWidth = containerWidth;\n            _lastHeight = containerHeight;\n            _this.trigger(RESIZE, {\n                width: containerWidth,\n                height: containerHeight\n            });\n            const breakpoint = getBreakpoint(containerWidth);\n            if (_breakpoint !== breakpoint) {\n                _breakpoint = breakpoint;\n                _this.trigger(BREAKPOINT, {\n                    breakpoint: _breakpoint\n                });\n            }\n        }\n    };\n\n    function _responsiveListener() {\n        cancelAnimationFrame(_resizeContainerRequestId);\n        _resizeContainerRequestId = requestAnimationFrame(_responsiveUpdate);\n    }\n\n    function _responsiveUpdate() {\n        if (!_this.isSetup) {\n            return;\n        }\n        _this.updateBounds();\n        _this.updateStyles();\n        _this.checkResized();\n    }\n\n    function updateContainerStyles(width, height) {\n        const audioMode = isAudioMode(_model);\n        // Set timeslider flags\n        if (_.isNumber(width) && _.isNumber(height)) {\n            const breakpoint = getBreakpoint(width);\n            setBreakpoint(_playerElement, breakpoint);\n\n            const smallPlayer = breakpoint < 2;\n            toggleClass(_playerElement, 'jw-flag-small-player', smallPlayer);\n            toggleClass(_playerElement, 'jw-orientation-portrait', (height > width));\n        }\n        toggleClass(_playerElement, 'jw-flag-audio-player', audioMode);\n        _model.set('audioMode', audioMode);\n    }\n\n    this.setup = function () {\n        _preview.setup(_playerElement.querySelector('.jw-preview'));\n        _title.setup(_playerElement.querySelector('.jw-title'));\n\n        _logo = new Logo(_model);\n        _logo.setup();\n        _logo.setContainer(_playerElement);\n        _logo.on(LOGO_CLICK, _logoClickHandler);\n\n        // captions rendering\n        _captionsRenderer.setup(_playerElement.id, _model.get('captions'));\n\n        // captions should be placed behind controls, and not hidden when controls are hidden\n        _playerElement.insertBefore(_captionsRenderer.element(), _title.element());\n\n        // Display Click and Double Click Handling\n        displayClickHandler = clickHandlerHelper(_api, _model, _videoLayer);\n\n        focusHelper = flagNoFocus(_playerElement);\n        fullscreenHelpers = requestFullscreenHelper(_playerElement, document, _fullscreenChangeHandler);\n\n        _model.on('change:hideAdsControls', function (model, val) {\n            toggleClass(_playerElement, 'jw-flag-ads-hide-controls', val);\n        });\n        _model.on('change:scrubbing', function (model, val) {\n            toggleClass(_playerElement, 'jw-flag-dragging', val);\n        });\n        _model.on('change:playRejected', function (model, val) {\n            toggleClass(_playerElement, 'jw-flag-play-rejected', val);\n        });\n\n        // Native fullscreen (coming through from the provider)\n        _model.on(NATIVE_FULLSCREEN, _fullscreenChangeHandler);\n\n        _model.on(`change:${MEDIA_VISUAL_QUALITY}`, () => {\n            _resizeMedia();\n        });\n\n        const playerViewModel = _model.player;\n        playerViewModel.on('change:errorEvent', _errorHandler);\n        \n        _model.change('stretching', onStretchChange);\n        _model.change('flashBlocked', onFlashBlockedChange);\n\n        const width = _model.get('width');\n        const height = _model.get('height');\n        _resizePlayer(width, height);\n        _model.change('aspectratio', onAspectRatioChange);\n        if (_model.get('controls')) {\n            updateContainerStyles(width, height);\n        } else {\n            addClass(_playerElement, 'jw-flag-controls-hidden');\n        }\n\n        if (_isIE) {\n            addClass(_playerElement, 'jw-ie');\n        }\n\n        const skin = _model.get('skin') || {};\n\n        if (skin.name) {\n            replaceClass(_playerElement, /jw-skin-\\S+/, 'jw-skin-' + skin.name);\n        }\n\n        const skinColors = normalizeSkin(skin);\n        handleColorOverrides(_model.get('id'), skinColors);\n\n        // adds video tag to video layer\n        _model.set('mediaContainer', _videoLayer);\n        _model.set('iFrame', Features.iframe);\n        _model.set('activeTab', activeTab());\n        _model.set('touchMode', _isMobile && (typeof height === 'string' || height >= CONTROLBAR_ONLY_HEIGHT));\n\n        viewsManager.add(this);\n\n        this.isSetup = true;\n        _model.trigger('viewSetup', _playerElement);\n\n        const inDOM = document.body.contains(_playerElement);\n        if (inDOM) {\n            viewsManager.observe(_playerElement);\n        }\n        _model.set('inDom', inDOM);\n    };\n\n    function updateVisibility() {\n        _model.set('visibility', getVisibility(_model, _playerElement));\n    }\n\n    this.init = function() {\n        this.updateBounds();\n\n        _model.on('change:fullscreen', _fullscreen);\n        _model.on('change:activeTab', updateVisibility);\n        _model.on('change:fullscreen', updateVisibility);\n        _model.on('change:intersectionRatio', updateVisibility);\n        _model.on('change:visibility', redraw);\n        _model.on('instreamMode', (instreamMode) => {\n            if (instreamMode) {\n                setupInstream();\n            } else {\n                destroyInstream();\n            }\n        });\n\n        updateVisibility();\n\n        // Always draw first player for icons to load\n        if (viewsManager.size() === 1 && !_model.get('visibility')) {\n            redraw(_model, 1, 0);\n        }\n\n        const playerViewModel = _model.player;\n\n        _model.change('state', _stateHandler);\n        playerViewModel.change('controls', changeControls);\n        playerViewModel.change('streamType', _setLiveMode);\n        _model.change('mediaType', _onMediaTypeChange);\n        playerViewModel.change('playlistItem', onPlaylistItem);\n        // Triggering 'resize' resulting in player 'ready'\n        _lastWidth = _lastHeight = null;\n        this.checkResized();\n    };\n\n    function changeControls(model, enable) {\n        const controlsEvent = {\n            controls: enable\n        };\n        if (enable) {\n            ControlsModule = ControlsLoader.module.controls;\n            if (!ControlsModule) {\n                controlsEvent.loadPromise = ControlsLoader.load()\n                    .then(function (Controls) {\n                        ControlsModule = Controls;\n                        // Check that controls is still true after the loader promise resolves\n                        const enabledState = model.get('controls');\n                        if (enabledState) {\n                            addControls();\n                        }\n                        return enabledState;\n                    });\n                controlsEvent.loadPromise.catch(function (reason) {\n                    _this.trigger(ERROR, {\n                        message: 'Controls failed to load',\n                        reason: reason\n                    });\n                });\n            } else {\n                addControls();\n            }\n        } else {\n            _this.removeControls();\n        }\n        // Only trigger controls events after the player and view are set up (and has width/height)\n        if (_lastWidth && _lastHeight) {\n            _this.trigger(CONTROLS, controlsEvent);\n        }\n    }\n\n    function addControls() {\n        const controls = new ControlsModule(document, _this.element());\n        _this.addControls(controls);\n    }\n\n    function redraw(model, visibility, lastVisibility) {\n        if (visibility && !lastVisibility) {\n            _stateHandler(model, model.get('state'));\n            _this.updateStyles();\n        }\n    }\n\n    function clickHandlerHelper(api, model, videoLayer) {\n        const clickHandler = new ClickHandler(model, videoLayer);\n        const controls = model.get('controls');\n        clickHandler.on({\n            click: () => {\n                _this.trigger(DISPLAY_CLICK);\n\n                if (_controls) {\n                    if (settingsMenuVisible()) {\n                        _controls.settingsMenu.close();\n                    } else {\n                        api.playToggle(reasonInteraction());\n                    }\n                }\n            },\n            tap: () => {\n                _playerElement.removeEventListener('mousemove', moveHandler);\n                _playerElement.removeEventListener('mouseout', outHandler);\n                _playerElement.removeEventListener('mouseover', overHandler);\n                _this.trigger(DISPLAY_CLICK);\n                if (settingsMenuVisible()) {\n                    _controls.settingsMenu.close();\n                }\n                const state = model.get('state');\n\n                if (controls &&\n                    ((state === STATE_IDLE || state === STATE_COMPLETE) ||\n                    (model.get('instream') && state === STATE_PAUSED))) {\n                    api.playToggle(reasonInteraction());\n                }\n\n                if (controls && state === STATE_PAUSED) {\n                    // Toggle visibility of the controls when tapping the media\n                    // Do not add mobile toggle \"jw-flag-controls-hidden\" in these cases\n                    if (model.get('instream') || model.get('castActive') || (model.get('mediaType') === 'audio')) {\n                        return;\n                    }\n                    toggleClass(_playerElement, 'jw-flag-controls-hidden');\n                    _captionsRenderer.renderCues(true);\n                } else if (_controls) {\n                    if (!_controls.showing) {\n                        _controls.userActive();\n                    } else {\n                        _controls.userInactive();\n                    }\n                }\n            },\n            doubleClick: () => _controls && api.setFullscreen()\n        });\n\n        _playerElement.addEventListener('mousemove', moveHandler);\n        _playerElement.addEventListener('mouseover', overHandler);\n        _playerElement.addEventListener('mouseout', outHandler);\n\n        return clickHandler;\n    }\n\n    function moveHandler(event) {\n        if (_controls) {\n            _controls.mouseMove(event);\n        }\n    }\n\n    function overHandler(event) {\n        if (_controls && !_controls.showing && event.target.nodeName === 'IFRAME') {\n            _controls.userActive();\n        }\n    }\n\n    function outHandler(event) {\n        if (_controls && _controls.showing && event.relatedTarget && !_playerElement.contains(event.relatedTarget)) {\n            _controls.userActive();\n        }\n    }\n\n    function onStretchChange(model, newVal) {\n        replaceClass(_playerElement, /jw-stretch-\\S+/, 'jw-stretch-' + newVal);\n    }\n\n    function onAspectRatioChange(model, aspectratio) {\n        toggleClass(_playerElement, 'jw-flag-aspect-mode', !!aspectratio);\n        const aspectRatioContainer = _playerElement.querySelector('.jw-aspect');\n        style(aspectRatioContainer, {\n            paddingTop: aspectratio || null\n        });\n    }\n\n    function onFlashBlockedChange(model, isBlocked) {\n        toggleClass(_playerElement, 'jw-flag-flash-blocked', isBlocked);\n    }\n\n    function _logoClickHandler(evt) {\n        if (!evt.link) {\n            if (_model.get('controls')) {\n                _api.playToggle(reasonInteraction());\n            }\n        } else {\n            _api.pause(reasonInteraction());\n            _api.setFullscreen(false);\n            window.open(evt.link, evt.linktarget);\n        }\n    }\n\n    this.addControls = function (controls) {\n        _controls = controls;\n\n        removeClass(_playerElement, 'jw-flag-controls-hidden');\n\n        controls.enable(_api, _model);\n\n        // refresh breakpoint and timeslider classes\n        if (_lastHeight) {\n            updateContainerStyles(_lastWidth, _lastHeight);\n            controls.resize(_lastWidth, _lastHeight);\n            _captionsRenderer.renderCues(true);\n        }\n\n        controls.on('userActive userInactive', function() {\n            const state = _model.get('state');\n            if (state === STATE_PLAYING || state === STATE_BUFFERING) {\n                _captionsRenderer.renderCues(true);\n            }\n        });\n\n        controls.on('all', _this.trigger, _this);\n\n        if (_model.get('instream')) {\n            _controls.setupInstream();\n        }\n    };\n\n    this.removeControls = function () {\n        if (_controls) {\n            _controls.disable(_model);\n            _controls = null;\n        }\n\n        addClass(_playerElement, 'jw-flag-controls-hidden');\n    };\n\n    // Perform the switch to fullscreen\n    const _fullscreen = function (model, state) {\n\n        // Unmute the video so volume can be adjusted with native controls in fullscreen\n        if (state && _controls && model.get('autostartMuted')) {\n            _controls.unmuteAutoplay(_api, model);\n        }\n\n        if (fullscreenHelpers.supportsDomFullscreen()) {\n            if (state) {\n                fullscreenHelpers.requestFullscreen();\n            } else {\n                fullscreenHelpers.exitFullscreen();\n            }\n            _toggleDOMFullscreen(_playerElement, state);\n        } else if (_isIE) {\n            _toggleDOMFullscreen(_playerElement, state);\n        } else {\n            // Request media element fullscreen (iOS)\n            const provider = model.getVideo();\n            provider.setFullscreen(state);\n        }\n    };\n\n    function _resizePlayer(playerWidth, playerHeight, resetAspectMode) {\n        const widthSet = playerWidth !== undefined;\n        const heightSet = playerHeight !== undefined;\n        const playerStyle = {\n            width: playerWidth\n        };\n\n        // when jwResize is called remove aspectMode and force layout\n        if (heightSet && resetAspectMode) {\n            _model.set('aspectratio', null);\n        }\n        if (!_model.get('aspectratio')) {\n            // If the height is a pixel value (number) greater than 0, snap it to the minimum supported height\n            // Allow zero to mean \"hide the player\"\n            let height = playerHeight;\n            if (_.isNumber(height) && height !== 0) {\n                height = Math.max(height, CONTROLBAR_ONLY_HEIGHT);\n            }\n            playerStyle.height = height;\n        }\n\n        if (widthSet && heightSet) {\n            _model.set('width', playerWidth);\n            _model.set('height', playerHeight);\n        }\n\n        style(_playerElement, playerStyle);\n    }\n\n    function _resizeMedia(containerWidth, containerHeight) {\n        if (!containerWidth || isNaN(1 * containerWidth)) {\n            containerWidth = _model.get('containerWidth');\n            if (!containerWidth) {\n                return;\n            }\n        }\n        if (!containerHeight || isNaN(1 * containerHeight)) {\n            containerHeight = _model.get('containerHeight');\n            if (!containerHeight) {\n                return;\n            }\n        }\n\n        if (_preview) {\n            _preview.resize(containerWidth, containerHeight, _model.get('stretching'));\n        }\n\n        const provider = _model.getVideo();\n        if (!provider) {\n            return;\n        }\n        provider.resize(containerWidth, containerHeight, _model.get('stretching'));\n    }\n\n    this.resize = function (playerWidth, playerHeight) {\n        const resetAspectMode = true;\n        _resizePlayer(playerWidth, playerHeight, resetAspectMode);\n        _responsiveUpdate();\n    };\n    this.resizeMedia = _resizeMedia;\n\n    function _isNativeFullscreen() {\n        // Return whether or not we're in native fullscreen\n        if (fullscreenHelpers.supportsDomFullscreen()) {\n            const fsElement = fullscreenHelpers.fullscreenElement();\n            return !!(fsElement && fsElement === _playerElement);\n        }\n        // If native fullscreen is not available, return video fullscreen state\n        const provider = _model.getVideo();\n        return provider.getFullScreen();\n    }\n\n\n    function _fullscreenChangeHandler(event) {\n        const modelState = _model.get('fullscreen');\n        const newState = (event.jwstate !== undefined) ? event.jwstate : _isNativeFullscreen();\n\n        // If fullscreen was triggered by something other than the player\n        //  then we want to sync up our internal state\n        if (modelState !== newState) {\n            _model.set('fullscreen', newState);\n        }\n\n        _responsiveListener();\n        clearTimeout(_resizeMediaTimeout);\n        _resizeMediaTimeout = setTimeout(_resizeMedia, 200);\n    }\n\n    function _toggleDOMFullscreen(playerElement, fullscreenState) {\n        toggleClass(playerElement, 'jw-flag-fullscreen', fullscreenState);\n        style(document.body, { overflowY: (fullscreenState) ? 'hidden' : '' });\n\n        if (fullscreenState && _controls) {\n            // When going into fullscreen, we want the control bar to fade after a few seconds\n            _controls.userActive();\n        }\n\n        _resizeMedia();\n        _responsiveListener();\n    }\n\n    function _setLiveMode(model, streamType) {\n        const live = (streamType === 'LIVE');\n        toggleClass(_playerElement, 'jw-flag-live', live);\n    }\n\n    function _onMediaTypeChange(model, val) {\n        const isAudioFile = (val === 'audio');\n        const provider = model.get('provider');\n\n        toggleClass(_playerElement, 'jw-flag-media-audio', isAudioFile);\n\n        const isFlash = (provider && provider.name.indexOf('flash') === 0);\n        const element = (isAudioFile && !isFlash) ? _videoLayer : _videoLayer.nextSibling;\n        // Put the preview element before the media element in order to display browser captions\n        // otherwise keep it on top of the media element to display captions with the captions renderer\n        _playerElement.insertBefore(_preview.el, element);\n    }\n\n    function _errorHandler(model, evt) {\n        if (!evt) {\n            _title.playlistItem(model, model.get('playlistItem'));\n            return;\n        }\n        const errorContainer = ErrorContainer(model, evt.message);\n        if (ErrorContainer.cloneIcon) {\n            errorContainer.querySelector('.jw-icon').appendChild(ErrorContainer.cloneIcon('error'));\n        }\n        _title.hide();\n        _playerElement.appendChild(errorContainer.firstChild);\n        toggleClass(_playerElement, 'jw-flag-audio-player', !!model.get('audioMode'));\n    }\n\n    function _stateHandler(model, newState, oldState) {\n        if (!_this.isSetup) {\n            return;\n        }\n\n        if (oldState === STATE_ERROR) {\n            const errorContainer = _playerElement.querySelector('.jw-error-msg');\n            if (errorContainer) {\n                errorContainer.parentNode.removeChild(errorContainer);\n            }\n        }\n\n        cancelAnimationFrame(_stateClassRequestId);\n        if (newState === STATE_PLAYING) {\n            _stateUpdate(newState);\n        } else {\n            _stateClassRequestId = requestAnimationFrame(() => _stateUpdate(newState));\n        }\n    }\n\n    function _stateUpdate(state) {\n        if (_model.get('controls') && state !== STATE_PAUSED && hasClass(_playerElement, 'jw-flag-controls-hidden')) {\n            removeClass(_playerElement, 'jw-flag-controls-hidden');\n        }\n        replaceClass(_playerElement, /jw-state-\\S+/, 'jw-state-' + state);\n\n        switch (state) {\n            case STATE_IDLE:\n            case STATE_ERROR:\n            case STATE_COMPLETE:\n                if (_captionsRenderer) {\n                    _captionsRenderer.hide();\n                }\n                break;\n            default:\n                if (_captionsRenderer) {\n                    _captionsRenderer.show();\n                    if (state === STATE_PAUSED && _controls && !_controls.showing) {\n                        _captionsRenderer.renderCues(true);\n                    }\n                }\n                break;\n        }\n    }\n\n    function setMediaTitleAttribute(model, playlistItem) {\n        const videotag = model.get('mediaElement');\n        // chromecast and flash providers do no support video tags\n        if (!videotag) {\n            return;\n        }\n\n        // Writing a string to innerHTML completely decodes multiple-encoded strings\n        const dummyDiv = document.createElement('div');\n        dummyDiv.innerHTML = playlistItem.title || '';\n        videotag.setAttribute('title', dummyDiv.textContent);\n    }\n\n    function setPosterImage(item) {\n        _preview.setImage(item && item.image);\n    }\n\n    function onPlaylistItem(model, item) {\n        setPosterImage(item);\n        // Set the title attribute of the video tag to display background media information on mobile devices\n        if (_isMobile) {\n            setMediaTitleAttribute(model, item);\n        }\n    }\n\n    const settingsMenuVisible = () => {\n        const settingsMenu = _controls && _controls.settingsMenu;\n        return !!(settingsMenu && settingsMenu.visible);\n    };\n\n    const setupInstream = function() {\n        addClass(_playerElement, 'jw-flag-ads');\n\n        if (_controls) {\n            _controls.setupInstream();\n        }\n    };\n\n    const destroyInstream = function() {\n        if (!displayClickHandler) {\n            // view was destroyed\n            return;\n        }\n        if (_controls) {\n            _controls.destroyInstream(_model);\n        }\n\n        _this.setAltText('');\n        removeClass(_playerElement, ['jw-flag-ads', 'jw-flag-ads-hide-controls']);\n        _model.set('hideAdsControls', false);\n\n        // Make sure that the provider's media element is returned to the DOM after instream mode\n        const provider = _model.getVideo();\n        if (provider) {\n            provider.setContainer(_videoLayer);\n        }\n\n        // reset display click handler\n        displayClickHandler.revertAlternateClickHandlers();\n    };\n\n    this.setAltText = function (text) {\n        _model.set('altText', text);\n    };\n\n    this.clickHandler = function () {\n        return displayClickHandler;\n    };\n\n    this.getContainer = this.element = function () {\n        return _playerElement;\n    };\n\n    this.controlsContainer = function() {\n        if (_controls) {\n            return _controls.element();\n        }\n        return null;\n    };\n\n    this.getSafeRegion = function (excludeControlbar = true) {\n        const safeRegion = {\n            x: 0,\n            y: 0,\n            width: _lastWidth || 0,\n            height: _lastHeight || 0\n        };\n        if (_controls) {\n            // Subtract controlbar from the bottom when using one\n            if (excludeControlbar) {\n                safeRegion.height -= _controls.controlbarHeight();\n            }\n        }\n        return safeRegion;\n    };\n\n    this.setCaptions = function (captionsStyle) {\n        _captionsRenderer.clear();\n        _captionsRenderer.setup(_model.get('id'), captionsStyle);\n        _captionsRenderer.resize();\n    };\n\n    this.destroy = function () {\n        _model.destroy();\n        viewsManager.unobserve(_playerElement);\n        viewsManager.remove(this);\n        this.isSetup = false;\n        this.off();\n        cancelAnimationFrame(_resizeContainerRequestId);\n        clearTimeout(_resizeMediaTimeout);\n        if (focusHelper) {\n            focusHelper.destroy();\n            focusHelper = null;\n        }\n        if (fullscreenHelpers) {\n            fullscreenHelpers.destroy();\n            fullscreenHelpers = null;\n        }\n        if (_controls) {\n            _controls.disable(_model);\n        }\n        if (displayClickHandler) {\n            displayClickHandler.destroy();\n            _playerElement.removeEventListener('mousemove', moveHandler);\n            _playerElement.removeEventListener('mouseout', outHandler);\n            _playerElement.removeEventListener('mouseover', overHandler);\n            displayClickHandler = null;\n        }\n        _captionsRenderer.destroy();\n        if (_logo) {\n            _logo.destroy();\n            _logo = null;\n        }\n        clearCss(_model.get('id'));\n    };\n}\n\nexport default View;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/view.js","export default (id, ariaLabel = '') => {\n    return (\n        `<div id=\"${id}\" class=\"jwplayer jw-reset jw-state-setup\" tabindex=\"0\" aria-label=\"${ariaLabel}\">` +\n            `<div class=\"jw-aspect jw-reset\"></div>` +\n            `<div class=\"jw-media jw-reset\"></div>` +\n            `<div class=\"jw-preview jw-reset\"></div>` +\n            `<div class=\"jw-title jw-reset\">` +\n                `<div class=\"jw-title-primary jw-reset\"></div>` +\n                `<div class=\"jw-title-secondary jw-reset\"></div>` +\n            `</div>` +\n            `<div class=\"jw-overlays jw-reset\"></div>` +\n        `</div>`\n    );\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/templates/player.js","export const CONTROLBAR_ONLY_HEIGHT = 44;\n\nexport const isAudioMode = function(model) {\n    const playerHeight = model.get('height');\n    if (model.get('aspectratio')) {\n        return false;\n    }\n    if (typeof playerHeight === 'string' && playerHeight.indexOf('%') > -1) {\n        return false;\n    }\n\n    // Coerce into Number (don't parse out CSS units)\n    let verticalPixels = (playerHeight * 1) || NaN;\n    verticalPixels = (!isNaN(verticalPixels) ? verticalPixels : model.get('containerHeight'));\n    if (!verticalPixels) {\n        return false;\n    }\n\n    return verticalPixels && verticalPixels <= CONTROLBAR_ONLY_HEIGHT;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/utils/audio-mode.js","import activeTab from 'utils/active-tab';\nimport { requestAnimationFrame, cancelAnimationFrame } from 'utils/request-animation-frame';\n\nconst views = [];\nconst observed = {};\n\nlet intersectionObserver;\nlet responsiveRepaintRequestId = -1;\n\nfunction lazyInitIntersectionObserver() {\n    const IntersectionObserver = window.IntersectionObserver;\n    if (!intersectionObserver) {\n        // Fire the callback every time 25% of the player comes in/out of view\n        intersectionObserver = new IntersectionObserver((entries) => {\n            if (entries && entries.length) {\n                for (let i = entries.length; i--;) {\n                    const entry = entries[i];\n                    for (let j = views.length; j--;) {\n                        let view = views[j];\n                        if (entry.target === view.getContainer()) {\n                            view.model.set('intersectionRatio', entry.intersectionRatio);\n                            break;\n                        }\n                    }\n                }\n            }\n        }, { threshold: [0, 0.25, 0.5, 0.75, 1] });\n    }\n}\n\nfunction scheduleResponsiveRedraw() {\n    cancelAnimationFrame(responsiveRepaintRequestId);\n    responsiveRepaintRequestId = requestAnimationFrame(function responsiveRepaint() {\n        views.forEach(view => {\n            view.updateBounds();\n        });\n        views.forEach(view => {\n            if (view.model.get('visibility')) {\n                view.updateStyles();\n            }\n        });\n        views.forEach(view => {\n            view.checkResized();\n        });\n    });\n}\n\nfunction onVisibilityChange() {\n    views.forEach(view => {\n        view.model.set('activeTab', activeTab());\n    });\n}\n\ndocument.addEventListener('visibilitychange', onVisibilityChange);\ndocument.addEventListener('webkitvisibilitychange', onVisibilityChange);\nwindow.addEventListener('resize', scheduleResponsiveRedraw);\nwindow.addEventListener('orientationchange', scheduleResponsiveRedraw);\n\nwindow.addEventListener('beforeunload', () => {\n    document.removeEventListener('visibilitychange', onVisibilityChange);\n    document.removeEventListener('webkitvisibilitychange', onVisibilityChange);\n    window.removeEventListener('resize', scheduleResponsiveRedraw);\n    window.removeEventListener('orientationchange', scheduleResponsiveRedraw);\n});\n\nexport default {\n    add: function(view) {\n        views.push(view);\n    },\n    remove: function(view) {\n        const index = views.indexOf(view);\n        if (index !== -1) {\n            views.splice(index, 1);\n        }\n    },\n    size: function() {\n        return views.length;\n    },\n    observe(container) {\n        lazyInitIntersectionObserver();\n\n        if (observed[container.id]) {\n            return;\n        }\n\n        observed[container.id] = true;\n        intersectionObserver.observe(container);\n    },\n    unobserve(container) {\n        if (intersectionObserver && observed[container.id]) {\n            delete observed[container.id];\n            intersectionObserver.unobserve(container);\n        }\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/utils/views-manager.js","export default function getVisibility(model, element) {\n    // Set visibility to 1 if we're in fullscreen\n    if (model.get('fullscreen')) {\n        return 1;\n    }\n\n    // Set visibility to 0 if we're not in the active tab\n    if (!model.get('activeTab')) {\n        return 0;\n    }\n    // Otherwise, set it to the intersection ratio reported from the intersection observer\n    let intersectionRatio = model.get('intersectionRatio');\n\n    if (intersectionRatio === undefined) {\n        // Get intersectionRatio through brute force\n        intersectionRatio = computeVisibility(element);\n    }\n\n    return intersectionRatio;\n}\n\nfunction computeVisibility(target) {\n    const html = document.documentElement;\n    const body = document.body;\n    const rootRect = {\n        top: 0,\n        left: 0,\n        right: html.clientWidth || body.clientWidth,\n        width: html.clientWidth || body.clientWidth,\n        bottom: html.clientHeight || body.clientHeight,\n        height: html.clientHeight || body.clientHeight\n    };\n\n    if (!body.contains(target)) {\n        return 0;\n    }\n    // If the element isn't displayed, an intersection can't happen.\n    if (window.getComputedStyle(target).display === 'none') {\n        return 0;\n    }\n\n    const targetRect = getBoundingClientRect(target);\n    if (!targetRect) {\n        return 0;\n    }\n\n    let intersectionRect = targetRect;\n    let parent = target.parentNode;\n    let atRoot = false;\n\n    while (!atRoot) {\n        let parentRect = null;\n        if (parent === body || parent === html || parent.nodeType !== 1) {\n            atRoot = true;\n            parentRect = rootRect;\n        } else if (window.getComputedStyle(parent).overflow !== 'visible') {\n            parentRect = getBoundingClientRect(parent);\n        }\n        if (parentRect) {\n            intersectionRect = computeRectIntersection(parentRect, intersectionRect);\n            if (!intersectionRect) {\n                return 0;\n            }\n        }\n        parent = parent.parentNode;\n    }\n    const targetArea = targetRect.width * targetRect.height;\n    const intersectionArea = intersectionRect.width * intersectionRect.height;\n    return targetArea ? (intersectionArea / targetArea) : 0;\n}\n\nfunction getBoundingClientRect(el) {\n    try {\n        return el.getBoundingClientRect();\n    } catch (e) {/* ignore Windows 7 IE11 \"Unspecified error\" */}\n}\n\nfunction computeRectIntersection(rect1, rect2) {\n    const top = Math.max(rect1.top, rect2.top);\n    const bottom = Math.min(rect1.bottom, rect2.bottom);\n    const left = Math.max(rect1.left, rect2.left);\n    const right = Math.min(rect1.right, rect2.right);\n    const width = right - left;\n    const height = bottom - top;\n    return (width >= 0 && height >= 0) && {\n        top: top,\n        bottom: bottom,\n        left: left,\n        right: right,\n        width: width,\n        height: height\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/utils/visibility.js","import { prefix } from 'utils/strings';\nimport { css, getRgba } from 'utils/css';\n\nexport function normalizeSkin(skinConfig) {\n    if (!skinConfig) {\n        skinConfig = {};\n    }\n\n    const active = skinConfig.active;\n    const inactive = skinConfig.inactive;\n    const background = skinConfig.background;\n\n    const colors = {};\n\n    colors.controlbar = getControlBar(skinConfig.controlbar);\n\n    colors.timeslider = getTimeSlider(skinConfig.timeslider);\n\n    colors.menus = getMenus(skinConfig.menus);\n\n    colors.tooltips = getTooltips(skinConfig.tooltips);\n\n    function getControlBar(controlBarConfig) {\n        if (controlBarConfig || active || inactive || background) {\n            const config = {};\n\n            controlBarConfig = controlBarConfig || {};\n            config.iconsActive = controlBarConfig.iconsActive || active;\n            config.icons = controlBarConfig.icons || inactive;\n            config.text = controlBarConfig.text || inactive;\n            config.background = controlBarConfig.background || background;\n\n            return config;\n        }\n    }\n\n    function getTimeSlider(timesliderConfig) {\n        if (timesliderConfig || active) {\n            const config = {};\n\n            timesliderConfig = timesliderConfig || {};\n            config.progress = timesliderConfig.progress || active;\n            config.rail = timesliderConfig.rail;\n\n            return config;\n        }\n    }\n\n    function getMenus(menusConfig) {\n        if (menusConfig || active || inactive || background) {\n            const config = {};\n\n            menusConfig = menusConfig || {};\n            config.text = menusConfig.text || inactive;\n            config.textActive = menusConfig.textActive || active;\n            config.background = menusConfig.background || background;\n\n            return config;\n        }\n    }\n\n    function getTooltips(tooltipsConfig) {\n        if (tooltipsConfig || inactive || background) {\n            const config = {};\n\n            tooltipsConfig = tooltipsConfig || {};\n            config.text = tooltipsConfig.text || inactive;\n            config.background = tooltipsConfig.background || background;\n\n            return config;\n        }\n    }\n\n    return colors;\n}\n\nexport function handleColorOverrides(playerId, skin) {\n    if (!skin) {\n        return;\n    }\n\n    function addStyle(elements, attr, value, extendParent) {\n        if (!value) {\n            return;\n        }\n        /* if extendParent is true, bundle the first selector of\n         element string to the player element instead of defining it as a\n         child of the player element (default). i.e. #player.sel-1 .sel-2 vs. #player .sel-1 .sel-2 */\n        elements = prefix(elements, '#' + playerId + (extendParent ? '' : ' '));\n\n        const o = {};\n        o[attr] = value;\n        css(elements.join(', '), o, playerId);\n    }\n\n    // These will use standard style names for CSS since they are added directly to a style sheet\n    // Using background instead of background-color so we don't have to clear gradients with background-image\n\n    if (skin.controlbar) {\n        styleControlbar(skin.controlbar);\n    }\n    if (skin.timeslider) {\n        styleTimeslider(skin.timeslider);\n    }\n    if (skin.menus) {\n        styleMenus(skin.menus);\n    }\n    if (skin.tooltips) {\n        styleTooltips(skin.tooltips);\n    }\n    if (skin.menus) {\n        insertGlobalColorClasses(skin.menus);\n    }\n\n    function styleControlbar(config) {\n\n        addStyle([\n            // controlbar text colors\n            '.jw-controlbar .jw-icon-inline.jw-text',\n            '.jw-title-primary',\n            '.jw-title-secondary',\n        ], 'color', config.text);\n\n        if (config.icons) {\n            addStyle([\n                // controlbar button colors\n                '.jw-button-color:not(.jw-icon-cast)',\n                '.jw-button-color.jw-toggle.jw-off:not(.jw-icon-cast)',\n            ], 'color', config.icons);\n\n            addStyle([\n                '.jw-display-icon-container .jw-button-color',\n            ], 'color', config.icons);\n\n            // Chromecast overrides\n            // Can't use addStyle since it will camel case the style name\n            css(`#${playerId} .jw-icon-cast button.jw-off`, `{--disconnected-color: ${config.icons}}`, playerId);\n        }\n        if (config.iconsActive) {\n            addStyle([\n                '.jw-display-icon-container .jw-button-color:hover',\n                '.jw-display-icon-container .jw-button-color:focus',\n            ], 'color', config.iconsActive);\n\n            // Apply active color\n            addStyle([\n                // Toggle and menu button active colors\n                '.jw-button-color.jw-toggle:not(.jw-icon-cast)',\n                '.jw-button-color:hover:not(.jw-icon-cast)',\n                '.jw-button-color:focus:not(.jw-icon-cast)',\n                '.jw-button-color.jw-toggle.jw-off:hover:not(.jw-icon-cast)'\n            ], 'color', config.iconsActive);\n\n            addStyle([\n                '.jw-svg-icon-buffer',\n            ], 'fill', config.icons);\n\n            // Chromecast overrides\n            // Can't use addStyle since it will camel case the style name\n            css(`#${playerId} .jw-icon-cast:hover button.jw-off`, `{--disconnected-color: ${config.iconsActive}}`, playerId);\n            css(`#${playerId} .jw-icon-cast:focus button.jw-off`, `{--disconnected-color: ${config.iconsActive}}`, playerId);\n            css(`#${playerId} .jw-icon-cast button.jw-off:focus`, `{--disconnected-color: ${config.iconsActive}}`, playerId);\n\n            css(`#${playerId} .jw-icon-cast button`, `{--connected-color: ${config.iconsActive}}`, playerId);\n            css(`#${playerId} .jw-icon-cast button:focus`, `{--connected-color: ${config.iconsActive}}`, playerId);\n            css(`#${playerId} .jw-icon-cast:hover button`, `{--connected-color: ${config.iconsActive}}`, playerId);\n            css(`#${playerId} .jw-icon-cast:focus button`, `{--connected-color: ${config.iconsActive}}`, playerId);\n        }\n\n        // A space is purposefully left before '.jw-settings-topbar' since extendParent is set to true in order to append ':not(.jw-state-idle)'\n        addStyle([\n            ' .jw-settings-topbar',\n            ':not(.jw-state-idle) .jw-controlbar',\n            '.jw-flag-audio-player .jw-controlbar'\n        ], 'background', config.background, true);\n    }\n\n    function styleTimeslider(config) {\n\n        addStyle([\n            '.jw-progress',\n            '.jw-knob'\n        ], 'background-color', config.progress);\n\n        addStyle([\n            '.jw-buffer',\n        ], 'background-color', getRgba(config.progress, 50));\n\n        addStyle([\n            '.jw-rail'\n        ], 'background-color', config.rail);\n\n        addStyle([\n            '.jw-background-color.jw-slider-time',\n            '.jw-slider-time .jw-cue'\n        ], 'background-color', config.background);\n    }\n\n    function styleMenus(config) {\n\n        addStyle([\n            '.jw-option',\n            '.jw-toggle.jw-off',\n            '.jw-skip .jw-skip-icon',\n            '.jw-nextup-tooltip',\n            '.jw-nextup-close',\n            '.jw-settings-content-item',\n            '.jw-related-title'\n        ], 'color', config.text);\n\n        addStyle([\n            '.jw-option.jw-active-option',\n            '.jw-option:not(.jw-active-option):hover',\n            '.jw-option:not(.jw-active-option):focus',\n            '.jw-settings-item-active',\n            '.jw-settings-content-item:hover',\n            '.jw-settings-content-item:focus',\n            '.jw-nextup-tooltip:hover',\n            '.jw-nextup-tooltip:focus',\n            '.jw-nextup-close:hover'\n        ], 'color', config.textActive);\n\n        addStyle([\n            '.jw-nextup',\n            '.jw-settings-menu',\n        ], 'background', config.background);\n    }\n\n    function styleTooltips(config) {\n\n        addStyle([\n            '.jw-skip',\n            '.jw-tooltip .jw-text',\n            '.jw-time-tip .jw-text'\n        ], 'background-color', config.background);\n\n        addStyle([\n            '.jw-time-tip',\n            '.jw-tooltip'\n        ], 'color', config.background);\n\n        addStyle([\n            '.jw-skip',\n        ], 'border', 'none');\n\n        addStyle([\n            '.jw-skip .jw-text',\n            '.jw-skip .jw-icon',\n            '.jw-time-tip .jw-text',\n            '.jw-tooltip .jw-text'\n        ], 'color', config.text);\n    }\n\n    // Set global colors, used by related plugin\n    // If a color is undefined simple-style-loader won't add their styles to the dom\n    function insertGlobalColorClasses(config) {\n        if (config.textActive) {\n            const activeColorSet = {\n                color: config.textActive,\n                borderColor: config.textActive,\n                stroke: config.textActive\n            };\n            css(`#${playerId} .jw-color-active`, activeColorSet, playerId);\n            css(`#${playerId} .jw-color-active-hover:hover`, activeColorSet, playerId);\n        }\n        if (config.text) {\n            const inactiveColorSet = {\n                color: config.text,\n                borderColor: config.text,\n                stroke: config.text\n            };\n            css(`#${playerId} .jw-color-inactive`, inactiveColorSet, playerId);\n            css(`#${playerId} .jw-color-inactive-hover:hover`, inactiveColorSet, playerId);\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/utils/skin.js","const DOCUMENT_FULLSCREEN_EVENTS = [\n    'fullscreenchange',\n    'webkitfullscreenchange',\n    'mozfullscreenchange',\n    'MSFullscreenChange'\n];\n\nexport default function(elementContext, documentContext, changeCallback) {\n    const requestFullscreen = elementContext.requestFullscreen ||\n        elementContext.webkitRequestFullscreen ||\n        elementContext.webkitRequestFullScreen ||\n        elementContext.mozRequestFullScreen ||\n        elementContext.msRequestFullscreen;\n\n    const exitFullscreen = documentContext.exitFullscreen ||\n        documentContext.webkitExitFullscreen ||\n        documentContext.webkitCancelFullScreen ||\n        documentContext.mozCancelFullScreen ||\n        documentContext.msExitFullscreen;\n\n    const supportsDomFullscreen = !!(requestFullscreen && exitFullscreen);\n\n    for (let i = DOCUMENT_FULLSCREEN_EVENTS.length; i--;) {\n        documentContext.addEventListener(DOCUMENT_FULLSCREEN_EVENTS[i], changeCallback);\n    }\n\n    return {\n        events: DOCUMENT_FULLSCREEN_EVENTS,\n        supportsDomFullscreen: function() {\n            return supportsDomFullscreen;\n        },\n        requestFullscreen: function() {\n            requestFullscreen.apply(elementContext);\n        },\n        exitFullscreen: function() {\n            exitFullscreen.apply(documentContext);\n        },\n        fullscreenElement: function() {\n            return documentContext.fullscreenElement ||\n                documentContext.webkitCurrentFullScreenElement ||\n                documentContext.mozFullScreenElement ||\n                documentContext.msFullscreenElement;\n        },\n        destroy: function() {\n            for (let i = DOCUMENT_FULLSCREEN_EVENTS.length; i--;) {\n                documentContext.removeEventListener(DOCUMENT_FULLSCREEN_EVENTS[i], changeCallback);\n            }\n        }\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/utils/request-fullscreen-helper.js","import { addClass, removeClass } from 'utils/dom';\n\n\nexport default function (elementContext) {\n    var _focusFromClick = false;\n\n    const onBlur = function () {\n        _focusFromClick = false;\n        removeClass(elementContext, 'jw-no-focus');\n    };\n\n    const onMouseDown = function () {\n        _focusFromClick = true;\n        addClass(elementContext, 'jw-no-focus');\n    };\n\n    const onFocus = function () {\n        if (!_focusFromClick) {\n            onBlur();\n        }\n    };\n\n    elementContext.addEventListener('focus', onFocus);\n    elementContext.addEventListener('blur', onBlur);\n    elementContext.addEventListener('mousedown', onMouseDown);\n\n    return {\n        destroy: function() {\n            elementContext.removeEventListener('focus', onFocus);\n            elementContext.removeEventListener('blur', onBlur);\n            elementContext.removeEventListener('mousedown', onMouseDown);\n        }\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/utils/flag-no-focus.js","import { CLICK } from 'events/events';\nimport UI from 'utils/ui';\nimport Events from 'utils/backbone.events';\n\nexport default class ClickHandler {\n    constructor(model, element) {\n        Object.assign(this, Events);\n\n        this.revertAlternateClickHandlers();\n        this.domElement = element;\n        this.model = model;\n\n        this.ui = new UI(element, { enableDoubleTap: true, useMove: true }).on({\n            'click tap': this.clickHandler,\n            'doubleClick doubleTap': function() {\n                if (this.alternateDoubleClickHandler) {\n                    this.alternateDoubleClickHandler();\n                    return;\n                }\n                this.trigger('doubleClick');\n            }\n        }, this);\n    }\n\n    destroy() {\n        if (this.ui) {\n            this.ui.destroy();\n            this.ui = this.domElement = this.model = null;\n            this.revertAlternateClickHandlers();\n        }\n    }\n\n    clickHandler(evt) {\n        if (this.model.get('flashBlocked')) {\n            return;\n        }\n        if (this.alternateClickHandler) {\n            this.alternateClickHandler(evt);\n            return;\n        }\n        this.trigger((evt.type === CLICK) ? 'click' : 'tap');\n    }\n\n    element() {\n        return this.domElement;\n    }\n\n    setAlternateClickHandlers(clickHandler, doubleClickHandler) {\n        this.alternateClickHandler = clickHandler;\n        this.alternateDoubleClickHandler = doubleClickHandler || null;\n    }\n\n    revertAlternateClickHandlers() {\n        this.alternateClickHandler = null;\n        this.alternateDoubleClickHandler = null;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/utils/clickhandler.js","import { Browser } from 'environment/environment';\nimport { chunkLoadErrorHandler } from '../api/core-loader';\nimport Events from 'utils/backbone.events';\nimport { ERROR } from 'events/events';\nimport { css, style, getRgba } from 'utils/css';\nimport { addClass, removeClass, empty } from 'utils/dom';\nimport _ from 'utils/underscore';\nimport { MEDIA_SEEK, MEDIA_TIME } from 'events/events';\n\nlet _WebVTT;\n\nconst _defaults = {\n    back: true,\n    backgroundOpacity: 50,\n    edgeStyle: null,\n    fontSize: 14,\n    fontOpacity: 100,\n    fontScale: 0.05, // Default captions font size = 1/20th of the video's height\n    preprocessor: _.identity,\n    windowOpacity: 0\n};\n\n/**\n * Component that renders the actual captions on screen.\n * param {ViewModel} viewModel - The player's ViewModel instance.\n */\n\nconst CaptionsRenderer = function (viewModel) {\n\n    const _model = viewModel.player;\n\n    let _options;\n    let _captionsTrack;\n    let _currentCues;\n    let _timeEvent;\n    let _display;\n    let _captionsWindow;\n    let _textContainer;\n    let _fontScale;\n    let _windowStyle;\n\n    _display = document.createElement('div');\n    _display.className = 'jw-captions jw-reset';\n\n    this.show = function () {\n        addClass(_display, 'jw-captions-enabled');\n    };\n\n    this.hide = function () {\n        removeClass(_display, 'jw-captions-enabled');\n    };\n\n    // Assign list of captions to the renderer\n    this.populate = function (captions) {\n        if (_model.get('renderCaptionsNatively')) {\n            return;\n        }\n\n        _currentCues = [];\n        _captionsTrack = captions;\n        if (!captions) {\n            this.renderCues();\n            return;\n        }\n        this.selectCues(captions, _timeEvent);\n    };\n\n    this.resize = function () {\n        _setFontSize();\n        this.renderCues(true);\n    };\n\n    this.renderCues = function (updateBoxPosition) {\n        updateBoxPosition = !!updateBoxPosition;\n        if (_WebVTT) {\n            _WebVTT.processCues(window, _currentCues, _display, updateBoxPosition);\n        }\n    };\n\n    this.selectCues = function (track, timeEvent) {\n        if (!track || !track.data || !timeEvent || _model.get('renderCaptionsNatively')) {\n            return;\n        }\n\n        const pos = this.getAlignmentPosition(track, timeEvent);\n        if (pos === false) {\n            return;\n        }\n\n        const cues = this.getCurrentCues(track.data, pos);\n\n        this.updateCurrentCues(cues);\n        this.renderCues(true);\n    };\n\n    this.getCurrentCues = function (allCues, pos) {\n        return _.filter(allCues, function (cue) {\n            return pos >= (cue.startTime) && (!cue.endTime || pos <= cue.endTime);\n        });\n    };\n\n    this.updateCurrentCues = function (cues) {\n        // Render with vtt.js if there are cues, clear if there are none\n        if (!cues.length) {\n            _currentCues = [];\n        } else if (_.difference(cues, _currentCues).length) {\n            addClass(_captionsWindow, 'jw-captions-window-active');\n            _currentCues = cues;\n        }\n\n        return _currentCues;\n    };\n\n    this.getAlignmentPosition = function (track, timeEvent) {\n        const source = track.source;\n        const metadata = timeEvent.metadata;\n\n        // subtitles with \"source\" time must be synced with \"metadata[source]\"\n        if (source) {\n            if (metadata && _.isNumber(metadata[source])) {\n                return metadata[source];\n            }\n            return;\n        } else if (timeEvent.duration < 0) {\n            // When the duration is negative (DVR mode), need to make alignmentPosition positive for captions to work\n            return timeEvent.position - timeEvent.duration;\n        }\n\n        // Default to syncing with current position\n        return timeEvent.position;\n    };\n\n    this.clear = function () {\n        empty(_display);\n    };\n\n    /**\n     * Initialize the captions renderer\n     * @param {string} playerElementId - The player container's DOM id\n     * @param {object} options - The captions styling configuration\n     * @returns {void}\n     */\n    this.setup = function (playerElementId, options) {\n        _captionsWindow = document.createElement('div');\n        _textContainer = document.createElement('span');\n        _captionsWindow.className = 'jw-captions-window jw-reset';\n        _textContainer.className = 'jw-captions-text jw-reset';\n\n        _options = Object.assign({}, _defaults, options);\n\n        _fontScale = _defaults.fontScale;\n        _setFontScale(_options.fontSize);\n\n        const windowColor = _options.windowColor;\n        const windowOpacity = _options.windowOpacity;\n        const edgeStyle = _options.edgeStyle;\n        _windowStyle = {};\n        const textStyle = {};\n\n        _addTextStyle(textStyle, _options);\n\n        if (windowColor || windowOpacity !== _defaults.windowOpacity) {\n            _windowStyle.backgroundColor = getRgba(windowColor || '#000000', windowOpacity);\n        }\n\n        _addEdgeStyle(edgeStyle, textStyle, _options.fontOpacity);\n\n        if (!_options.back && edgeStyle === null) {\n            _addEdgeStyle('uniform', textStyle);\n        }\n\n        style(_captionsWindow, _windowStyle);\n        style(_textContainer, textStyle);\n        _setupCaptionStyles(playerElementId, textStyle);\n\n        _captionsWindow.appendChild(_textContainer);\n        _display.appendChild(_captionsWindow);\n\n        _model.change('captionsTrack', function (model, captionsTrack) {\n            this.populate(captionsTrack);\n        }, this);\n\n        _model.set('captions', _options);\n    };\n\n    this.element = function () {\n        return _display;\n    };\n\n    this.destroy = function() {\n        _model.off(null, null, this);\n        this.off();\n    };\n\n    function _setFontScale() {\n        if (!_.isFinite(_options.fontSize)) {\n            return;\n        }\n\n        const height = _model.get('containerHeight');\n\n        if (!height) {\n            _model.once('change:containerHeight', _setFontScale, this);\n            return;\n        }\n\n        // Adjust scale based on font size relative to the default\n        _fontScale = _defaults.fontScale * _options.fontSize / _defaults.fontSize;\n    }\n\n    function _setFontSize() {\n        const height = _model.get('containerHeight');\n\n        if (!height) {\n            return;\n        }\n\n        const fontSize = Math.round(height * _fontScale);\n\n        if (_model.get('renderCaptionsNatively')) {\n            _setShadowDOMFontSize(_model.get('id'), fontSize);\n        } else {\n            style(_display, {\n                fontSize: fontSize + 'px'\n            });\n        }\n    }\n\n    function _setupCaptionStyles(playerId, textStyle) {\n        _setFontSize();\n        _styleNativeCaptions(playerId, textStyle);\n        _stylePlayerCaptions(playerId, textStyle);\n    }\n\n    function _stylePlayerCaptions(playerId, textStyle) {\n        // VTT.js DOM window and text styles\n        css('#' + playerId + ' .jw-text-track-display', _windowStyle, playerId);\n        css('#' + playerId + ' .jw-text-track-cue', textStyle, playerId);\n    }\n\n    function _styleNativeCaptions(playerId, textStyle) {\n        if (Browser.safari) {\n            // Only Safari uses a separate element for styling text background\n            css('#' + playerId + ' .jw-video::-webkit-media-text-track-display-backdrop', {\n                backgroundColor: textStyle.backgroundColor\n            }, playerId, true);\n        }\n\n        css('#' + playerId + ' .jw-video::-webkit-media-text-track-display', _windowStyle, playerId, true);\n        css('#' + playerId + ' .jw-video::cue', textStyle, playerId, true);\n    }\n\n    function _setShadowDOMFontSize(playerId, fontSize) {\n        // Set Shadow DOM font size (needs to be important to override browser's in line style)\n        _windowStyle.fontSize = fontSize + 'px';\n        css('#' + playerId + ' .jw-video::-webkit-media-text-track-display', _windowStyle, playerId, true);\n    }\n\n    function _addTextStyle(textStyle, options) {\n        const color = options.color;\n        const fontOpacity = options.fontOpacity;\n        if (color || fontOpacity !== _defaults.fontOpacity) {\n            textStyle.color = getRgba(color || '#ffffff', fontOpacity);\n        }\n\n        if (options.back) {\n            const bgColor = options.backgroundColor;\n            const bgOpacity = options.backgroundOpacity;\n            if (bgColor !== _defaults.backgroundColor || bgOpacity !== _defaults.backgroundOpacity) {\n                textStyle.backgroundColor = getRgba(bgColor, bgOpacity);\n            }\n        } else {\n            textStyle.background = 'transparent';\n        }\n\n        if (options.fontFamily) {\n            textStyle.fontFamily = options.fontFamily;\n        }\n\n        if (options.fontStyle) {\n            textStyle.fontStyle = options.fontStyle;\n        }\n\n        if (options.fontWeight) {\n            textStyle.fontWeight = options.fontWeight;\n        }\n\n        if (options.textDecoration) {\n            textStyle.textDecoration = options.textDecoration;\n        }\n    }\n\n    function _addEdgeStyle(option, styles, fontOpacity) {\n        const color = getRgba('#000000', fontOpacity);\n        if (option === 'dropshadow') { // small drop shadow\n            styles.textShadow = '0 2px 1px ' + color;\n        } else if (option === 'raised') { // larger drop shadow\n            styles.textShadow = '0 0 5px ' + color + ', 0 1px 5px ' + color + ', 0 2px 5px ' + color;\n        } else if (option === 'depressed') { // top down shadow\n            styles.textShadow = '0 -2px 1px ' + color;\n        } else if (option === 'uniform') { // outline\n            styles.textShadow = '-2px 0 1px ' + color + ',2px 0 1px ' + color +\n                ',0 -2px 1px ' + color + ',0 2px 1px ' + color + ',-1px 1px 1px ' +\n                color + ',1px 1px 1px ' + color + ',1px -1px 1px ' + color +\n                ',1px 1px 1px ' + color;\n        }\n    }\n\n    const _timeChange = (e) => {\n        _timeEvent = e;\n        this.selectCues(_captionsTrack, _timeEvent);\n    };\n\n    function _captionsListHandler(model, captionsList) {\n        if (captionsList.length === 1) {\n            // captionsList only contains 'off'\n            return;\n        }\n\n        // don't load the polyfill or do unnecessary work if rendering natively\n        if (!model.get('renderCaptionsNatively') && !_WebVTT) {\n            loadWebVttPolyfill().catch((error) => {\n                this.trigger(ERROR, {\n                    message: 'Captions renderer failed to load',\n                    reason: error\n                });\n            });\n            model.off('change:captionsList', _captionsListHandler, this);\n        }\n    }\n\n    function loadWebVttPolyfill() {\n        return require.ensure(['polyfills/webvtt'], function (require) {\n            _WebVTT = require('polyfills/webvtt').default;\n        }, chunkLoadErrorHandler, 'polyfills.webvtt');\n    }\n\n    _model.on('change:playlistItem', function () {\n        _timeEvent = null;\n        _currentCues = [];\n    }, this);\n\n    _model.on(MEDIA_SEEK, function (e) {\n        _currentCues = [];\n        _timeChange(e);\n    }, this);\n\n    _model.on(MEDIA_TIME, _timeChange, this);\n\n    _model.on('subtitlesTrackData', function () {\n        // update captions after a provider's subtitle track changes\n        this.selectCues(_captionsTrack, _timeEvent);\n    }, this);\n\n    _model.on('change:captionsList', _captionsListHandler, this);\n};\n\nObject.assign(CaptionsRenderer.prototype, Events);\n\nexport default CaptionsRenderer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/captionsrenderer.js","import logoTemplate from 'templates/logo';\nimport { LOGO_CLICK } from 'events/events';\nimport UI from 'utils/ui';\nimport { style } from 'utils/css';\nimport { createElement } from 'utils/dom';\nimport Events from 'utils/backbone.events';\n\nconst LogoDefaults = {\n    linktarget: '_blank',\n    margin: 8,\n    hide: false,\n    position: 'top-right'\n};\n\nexport default function Logo(_model) {\n    Object.assign(this, Events);\n\n    var _logo;\n    var _settings;\n    const _img = new Image();\n\n    this.setup = function() {\n        _settings = Object.assign({}, LogoDefaults, _model.get('logo'));\n        _settings.position = _settings.position || LogoDefaults.position;\n        _settings.hide = (_settings.hide.toString() === 'true');\n\n        // We should only create a logo in the display container when\n        // it is not supposed to be in the control bar, as it will\n        // handle the creation in that case\n        if (!_settings.file || _settings.position === 'control-bar') {\n            return;\n        }\n\n        if (!_logo) {\n            _logo = createElement(logoTemplate(_settings.position, _settings.hide));\n        }\n\n        _model.set('logo', _settings);\n\n        // apply styles onload when image width and height are known\n        _img.onload = function () {\n            // update logo style\n            let height = this.height;\n            let width = this.width;\n            const styles = {\n                backgroundImage: 'url(\"' + this.src + '\")'\n            };\n            if (_settings.margin !== LogoDefaults.margin) {\n                const positions = (/(\\w+)-(\\w+)/).exec(_settings.position);\n                if (positions.length === 3) {\n                    styles['margin-' + positions[1]] = _settings.margin;\n                    styles['margin-' + positions[2]] = _settings.margin;\n                }\n            }\n\n            // Constraint logo size to 15% of their respective player dimension\n            const maxHeight = _model.get('containerHeight') * 0.15;\n            const maxWidth = _model.get('containerWidth') * 0.15;\n\n            if (height > maxHeight || width > maxWidth) {\n                const logoAR = width / height;\n                const videoAR = maxWidth / maxHeight;\n\n                if (videoAR > logoAR) {\n                    // height = max dimension\n                    height = maxHeight;\n                    width = maxHeight * logoAR;\n                } else {\n                    // width = max dimension\n                    width = maxWidth;\n                    height = maxWidth / logoAR;\n                }\n            }\n\n            styles.width = Math.round(width);\n            styles.height = Math.round(height);\n\n            style(_logo, styles);\n\n            // update title\n            _model.set('logoWidth', styles.width);\n        };\n\n        _img.src = _settings.file;\n\n        const logoInteractHandler = new UI(_logo);\n\n        if (_settings.link) {\n            _logo.setAttribute('tabindex', '0');\n            _logo.setAttribute('aria-label', 'Logo');\n        }\n\n        logoInteractHandler.on('click tap enter', function (evt) {\n            if (evt && evt.stopPropagation) {\n                evt.stopPropagation();\n            }\n\n            this.trigger(LOGO_CLICK, {\n                link: _settings.link,\n                linktarget: _settings.linktarget\n            });\n\n        }, this);\n    };\n\n    this.setContainer = function(container) {\n        if (_logo) {\n            container.appendChild(_logo);\n        }\n    };\n\n    this.element = function() {\n        return _logo;\n    };\n\n    this.position = function() {\n        return _settings.position;\n    };\n\n    this.destroy = function() {\n        _img.onload = null;\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/logo.js","export default (position, hide) => {\n    const jwhide = hide ? ' jw-hide' : '';\n    return `<div class=\"jw-logo jw-logo-${position}${jwhide} jw-reset\"></div>`;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/templates/logo.js","import { style } from 'utils/css';\n\nconst Preview = function(_model) {\n    this.model = _model;\n    this.image = null;\n};\n\nfunction validState(state) {\n    return state === 'complete' || state === 'idle' || state === 'error' || state === 'buffering';\n}\n\nObject.assign(Preview.prototype, {\n    setup: function(element) {\n        this.el = element;\n    },\n    setImage: function(img) {\n        // Remove onload function from previous image\n        var image = this.image;\n        if (image) {\n            image.onload = null;\n        }\n        this.image = null;\n        var backgroundImage = '';\n        if (typeof img === 'string') {\n            backgroundImage = 'url(\"' + img + '\")';\n            image = this.image = new Image();\n            image.src = img;\n        }\n        style(this.el, {\n            backgroundImage: backgroundImage\n        });\n    },\n    resize: function(width, height, stretching) {\n        if (stretching === 'uniform') {\n            if (width) {\n                this.playerAspectRatio = width / height;\n            }\n            if (!this.playerAspectRatio ||\n                !this.image ||\n                !validState(this.model.get('state'))) {\n                return;\n            }\n            // snap image to edges when the difference in aspect ratio is less than 9%\n            var image = this.image;\n            var backgroundSize = null;\n            if (image) {\n                if (image.width === 0) {\n                    var _this = this;\n                    image.onload = function() {\n                        _this.resize(width, height, stretching);\n                    };\n                    return;\n                }\n                var imageAspectRatio = image.width / image.height;\n                if (Math.abs(this.playerAspectRatio - imageAspectRatio) < 0.09) {\n                    backgroundSize = 'cover';\n                }\n            }\n            style(this.el, {\n                backgroundSize: backgroundSize\n            });\n        }\n    },\n    element: function() {\n        return this.el;\n    }\n});\n\nexport default Preview;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/preview.js","import { style } from 'utils/css';\n\nconst Title = function(_model) {\n    this.model = _model.player;\n};\n\nObject.assign(Title.prototype, {\n    // This is normally shown/hidden by states\n    //   these are only used for when no title exists\n    hide: function() {\n        style(this.el, { display: 'none' });\n    },\n    show: function() {\n        style(this.el, { display: '' });\n    },\n\n    setup: function(titleEl) {\n        this.el = titleEl;\n\n        // Perform the DOM search only once\n        var arr = this.el.getElementsByTagName('div');\n        this.title = arr[0];\n        this.description = arr[1];\n\n        this.model.on('change:logoWidth', this.update, this);\n        this.model.change('playlistItem', this.playlistItem, this);\n    },\n\n    update: function(model) {\n        var titleStyle = {};\n        var logo = model.get('logo');\n        if (logo) {\n            // Only use Numeric or pixel (\"Npx\") margin values\n            var margin = 1 * ('' + logo.margin).replace('px', '');\n            var padding = model.get('logoWidth') + (isNaN(margin) ? 0 : margin + 10);\n            if (logo.position === 'top-left') {\n                titleStyle.paddingLeft = padding;\n            } else if (logo.position === 'top-right') {\n                titleStyle.paddingRight = padding;\n            }\n        }\n        style(this.el, titleStyle);\n    },\n\n    playlistItem: function(model, item) {\n        if (!item) {\n            return;\n        }\n        if (model.get('displaytitle') || model.get('displaydescription')) {\n            var title = '';\n            var description = '';\n\n            if (item.title && model.get('displaytitle')) {\n                title = item.title;\n            }\n            if (item.description && model.get('displaydescription')) {\n                description = item.description;\n            }\n\n            this.updateText(title, description);\n        } else {\n            this.hide();\n        }\n    },\n\n    updateText: function(title, description) {\n        this.title.innerHTML = title;\n        this.description.innerHTML = description;\n\n        if (this.title.firstChild || this.description.firstChild) {\n            this.show();\n        } else {\n            this.hide();\n        }\n    },\n\n    element: function() {\n        return this.el;\n    }\n});\n\nexport default Title;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/title.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/postcss-loader/lib/index.js!../../node_modules/less-loader/dist/cjs.js??ref--0-3!./jwplayer.less\");\nif(typeof content === 'string') content = [['all-players', content, '']];\n// add the styles to the DOM\nrequire(\"!../../node_modules/simple-style-loader/addStyles.js\").style(content,'all-players');\nif(content.locals) module.exports = content.locals;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/css/jwplayer.less\n// module id = 169\n// module chunks = 0 1 2 3 5","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".jw-reset{color:inherit;background-color:transparent;padding:0;margin:0;float:none;font-family:Arial,Helvetica,sans-serif;font-size:1em;line-height:1em;list-style:none;text-align:left;text-transform:none;vertical-align:baseline;border:0;direction:ltr;font-variant:inherit;font-stretch:inherit;-webkit-tap-highlight-color:rgba(255,255,255,0)}body .jw-error,body .jwplayer.jw-state-error{height:100%;width:100%}.jw-title{position:absolute;top:0}.jw-background-color{background:rgba(0,0,0,0.4)}.jw-text{color:rgba(255,255,255,0.8)}.jw-knob{color:rgba(255,255,255,0.8);background-color:#fff}.jw-button-color{color:rgba(255,255,255,0.8)}:not(.jw-flag-touch) .jw-button-color:not(.jw-logo-button):focus,:not(.jw-flag-touch) .jw-button-color:not(.jw-logo-button):hover{outline:none;color:#fff}.jw-toggle{color:#fff}.jw-toggle.jw-off{color:rgba(255,255,255,0.8)}.jw-toggle.jw-off:focus{color:#fff}.jw-toggle:focus{outline:none}:not(.jw-flag-touch) .jw-toggle.jw-off:hover{color:#fff}.jw-rail{background:rgba(255,255,255,0.3)}.jw-buffer{background:rgba(255,255,255,0.3)}.jw-progress{background:#f2f2f2}.jw-time-tip,.jw-volume-tip{border:0}.jw-slider-volume.jw-volume-tip.jw-background-color.jw-slider-vertical{background:none}.jw-skip{padding:.5em;outline:none}.jw-skip .jw-skiptext,.jw-skip .jw-skip-icon{color:rgba(255,255,255,0.8)}.jw-skip.jw-skippable:hover .jw-skip-icon,.jw-skip.jw-skippable:focus .jw-skip-icon{color:#fff}.jw-icon-cast button{--connected-color:#fff;--disconnected-color:rgba(255,255,255,0.8)}.jw-icon-cast button:focus{outline:none}.jw-icon-cast button.jw-off{--connected-color:rgba(255,255,255,0.8)}.jw-icon-cast:focus button{--connected-color:#fff;--disconnected-color:#fff}.jw-icon-cast:hover button{--connected-color:#fff;--disconnected-color:#fff}.jw-nextup-container{bottom:2.5em;padding:5px .5em}.jw-nextup{border-radius:0}.jw-color-active{color:#fff;stroke:#fff;border-color:#fff}:not(.jw-flag-touch) .jw-color-active-hover:hover,:not(.jw-flag-touch) .jw-color-active-hover:focus{color:#fff;stroke:#fff;border-color:#fff}.jw-color-inactive{color:rgba(255,255,255,0.8);stroke:rgba(255,255,255,0.8);border-color:rgba(255,255,255,0.8)}:not(.jw-flag-touch) .jw-color-inactive-hover:hover{color:rgba(255,255,255,0.8);stroke:rgba(255,255,255,0.8);border-color:rgba(255,255,255,0.8)}.jw-option{color:rgba(255,255,255,0.8)}.jw-option.jw-active-option{color:#fff;background-color:rgba(255,255,255,0.1)}:not(.jw-flag-touch) .jw-option:hover{color:#fff}.jwplayer{width:100%;font-size:16px;position:relative;display:block;min-height:0;overflow:hidden;box-sizing:border-box;font-family:Arial,Helvetica,sans-serif;background-color:#000;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jwplayer *{box-sizing:inherit}.jwplayer.jw-flag-aspect-mode{height:auto !important}.jwplayer.jw-flag-aspect-mode .jw-aspect{display:block}.jwplayer .jw-aspect{display:none}.jwplayer.jw-no-focus:focus,.jwplayer .jw-swf{outline:none}.jwplayer.jw-ie:focus{outline:#585858 dotted 1px}.jw-media,.jw-preview{position:absolute;width:100%;height:100%;top:0;left:0;bottom:0;right:0}.jw-media{overflow:hidden;cursor:pointer}.jw-plugin{position:absolute;bottom:66px}.jw-plugin .jw-banner{max-width:100%;opacity:0;cursor:pointer;position:absolute;margin:auto auto 0;left:0;right:0;bottom:0;display:block}.jw-preview,.jw-captions,.jw-title{pointer-events:none}.jw-media,.jw-logo{pointer-events:all}.jwplayer video{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;margin:auto;background:transparent}.jwplayer video::-webkit-media-controls-start-playback-button{display:none}.jwplayer.jw-stretch-uniform video{object-fit:contain}.jwplayer.jw-stretch-none video{object-fit:none}.jwplayer.jw-stretch-fill video{object-fit:cover}.jwplayer.jw-stretch-exactfit video{object-fit:fill}.jw-preview{position:absolute;display:none;opacity:1;visibility:visible;width:100%;height:100%;background:#000 no-repeat 50% 50%}.jwplayer .jw-preview,.jw-error .jw-preview{background-size:contain}.jw-stretch-none .jw-preview{background-size:auto auto}.jw-stretch-fill .jw-preview{background-size:cover}.jw-stretch-exactfit .jw-preview{background-size:100% 100%}.jw-title{display:none;padding-top:20px;width:100%;z-index:1}.jw-title-primary,.jw-title-secondary{color:#fff;padding-left:20px;padding-right:20px;padding-bottom:.5em;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}.jw-title-primary{font-size:1.625em}.jw-breakpoint-2 .jw-title-primary,.jw-breakpoint-3 .jw-title-primary{font-size:1.5em}.jw-flag-small-player .jw-title-primary{font-size:1.25em}.jw-flag-small-player .jw-title-secondary,.jw-title-secondary:empty{display:none}.jw-captions{position:absolute;width:100%;height:100%;text-align:center;display:none;max-height:calc(100% - 60px);letter-spacing:normal;word-spacing:normal;text-transform:none;text-indent:0;text-decoration:none;pointer-events:none;overflow:hidden;top:0}.jw-captions.jw-captions-enabled{display:block}.jw-captions-window{display:none;padding:.25em;border-radius:.25em}.jw-captions-window.jw-captions-window-active{display:inline-block}.jw-captions-text{display:inline-block;color:#fff;background-color:#000;word-wrap:normal;word-break:normal;white-space:pre-line;font-style:normal;font-weight:normal;text-align:center;text-decoration:none}.jw-text-track-display{font-size:inherit;line-height:1.5}.jw-text-track-cue{background-color:rgba(0,0,0,0.5);color:#fff;padding:.1em .3em}.jwplayer video::-webkit-media-controls{display:none;justify-content:flex-start}.jwplayer video::-webkit-media-text-track-container{max-height:calc(100% - 60px);line-height:normal}.jwplayer video::-webkit-media-text-track-display{min-width:-webkit-min-content}.jwplayer video::cue{background-color:rgba(0,0,0,0.5)}.jwplayer video::-webkit-media-controls-panel-container{display:none}.jw-logo{position:absolute;margin:20px;cursor:pointer;pointer-events:all;background-repeat:no-repeat;background-size:contain;top:auto;right:auto;left:auto;bottom:auto}.jw-flag-audio-player .jw-logo{display:none}.jw-logo-top-right{top:0;right:0}.jw-logo-top-left{top:0;left:0}.jw-logo-bottom-left{left:0}.jw-logo-bottom-right{right:0}.jw-logo-bottom-left,.jw-logo-bottom-right{bottom:44px;transition:bottom 150ms cubic-bezier(0, -0.25, .25, 1)}.jw-state-idle .jw-logo{z-index:1}.jw-state-setup{background-color:transparent}.jw-state-setup .jw-logo,.jw-state-setup .jw-controls,.jw-state-setup .jw-controls-backdrop{visibility:hidden}body .jw-error,body .jwplayer.jw-state-error{background-color:#333;color:#fff;font-size:16px;display:table;opacity:1;overflow:hidden;position:relative}body .jw-error .jw-display,body .jwplayer.jw-state-error .jw-display{display:none}body .jw-error .jw-media,body .jwplayer.jw-state-error .jw-media{cursor:default}body .jw-error .jw-preview,body .jwplayer.jw-state-error .jw-preview{background-color:#333}body .jw-error .jw-error-msg,body .jwplayer.jw-state-error .jw-error-msg{top:50%;position:absolute;left:50%;align-items:center;background-color:#000;border-radius:2px;display:flex;padding:20px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%)}body .jw-error .jw-error-msg .jw-icon,body .jwplayer.jw-state-error .jw-error-msg .jw-icon{height:30px;width:30px;margin-right:20px;flex:0 0 auto}body .jw-error .jw-error-msg .jw-icon:empty,body .jwplayer.jw-state-error .jw-error-msg .jw-icon:empty{display:none}body .jw-error .jw-error-msg .jw-title,body .jwplayer.jw-state-error .jw-error-msg .jw-title{display:block;position:static}body .jw-error .jw-error-msg .jw-title,body .jwplayer.jw-state-error .jw-error-msg .jw-title,body .jw-error .jw-error-msg .jw-title-primary,body .jwplayer.jw-state-error .jw-error-msg .jw-title-primary,body .jw-error .jw-error-msg .jw-title-secondary,body .jwplayer.jw-state-error .jw-error-msg .jw-title-secondary{font-size:14px;line-height:1.35;padding:0}body .jw-error .jw-error-msg .jw-title-primary,body .jwplayer.jw-state-error .jw-error-msg .jw-title-primary{font-weight:600;white-space:normal}.jwplayer.jw-state-error.jw-flag-audio-player .jw-error-msg{height:100%;width:100%;top:0;position:absolute;left:0;background:#000;-webkit-transform:none;transform:none;padding:0 16px;z-index:1}body .jwplayer.jw-state-error .jw-title,body .jw-error .jw-title,.jw-state-idle .jw-title,.jwplayer.jw-state-complete:not(.jw-flag-casting):not(.jw-flag-audio-player):not(.jw-flag-overlay-open-related) .jw-title{display:block}body .jwplayer.jw-state-error .jw-preview,body .jw-error .jw-preview,.jw-state-idle .jw-preview,.jwplayer.jw-state-complete:not(.jw-flag-casting):not(.jw-flag-audio-player):not(.jw-flag-overlay-open-related) .jw-preview{display:block}.jw-state-idle .jw-captions,.jwplayer.jw-state-complete .jw-captions,body .jwplayer.jw-state-error .jw-captions{display:none}.jw-state-idle video::-webkit-media-text-track-container,.jwplayer.jw-state-complete video::-webkit-media-text-track-container,body .jwplayer.jw-state-error video::-webkit-media-text-track-container{display:none}.jwplayer.jw-flag-fullscreen{width:100% !important;height:100% !important;top:0;right:0;bottom:0;left:0;z-index:1000;margin:0;position:fixed}body .jwplayer.jw-flag-flash-blocked .jw-title{display:block}.jwplayer.jw-flag-controls-hidden .jw-captions{max-height:none}.jwplayer.jw-flag-controls-hidden video::-webkit-media-text-track-container{max-height:none}.jwplayer.jw-flag-controls-hidden .jw-media{cursor:default}.jw-flag-audio-player:not(.jw-flag-flash-blocked) .jw-media{visibility:hidden}.jw-flag-audio-player .jw-title{background:none}.jw-flag-audio-player object{min-height:45px}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/postcss-loader/lib!./node_modules/less-loader/dist/cjs.js?{\"compress\":true,\"strictMath\":true,\"noIeCompat\":true}!./src/css/jwplayer.less\n// module id = 170\n// module chunks = 0 1 2 3 5","import SimpleModel from 'model/simplemodel';\n\nclass SimpleModelExtendable {}\nSimpleModelExtendable.prototype = Object.assign({}, SimpleModel);\n\nconst changeEventRegEx = /^change:(.+)$/;\n\nfunction dispatchDiffChangeEvents(viewModel, newAttributes, oldAttributes) {\n    Object.keys(newAttributes).forEach((attr) => {\n        if (attr in newAttributes && newAttributes[attr] !== oldAttributes[attr]) {\n            viewModel.trigger(`change:${attr}`, viewModel, newAttributes[attr], oldAttributes[attr]);\n        }\n    });\n}\n\nfunction removeListeners(instance, viewModel) {\n    if (instance) {\n        instance.off(null, null, viewModel);\n    }\n}\n\nclass PlayerViewModel extends SimpleModelExtendable {\n\n    constructor(playerModel, eventFilter) {\n        super();\n\n        this._model = playerModel;\n        this._mediaModel = null;\n\n        Object.assign(playerModel.attributes, {\n            altText: '',\n            fullscreen: false,\n            logoWidth: 0,\n            scrubbing: false\n        });\n\n        playerModel.on('all', (type, objectOrEvent, value, previousValue) => {\n            if (objectOrEvent === playerModel) {\n                objectOrEvent = this;\n            }\n            if (!eventFilter || eventFilter(type, objectOrEvent, value, previousValue)) {\n                this.trigger(type, objectOrEvent, value, previousValue);\n            }\n        }, this);\n\n        playerModel.on('change:mediaModel', (model, mediaModel) => {\n            this.mediaModel = mediaModel;\n        }, this);\n    }\n\n    set mediaModel(mediaModel) {\n        const previousMediaModel = this._mediaModel;\n        removeListeners(previousMediaModel, this);\n\n        this._mediaModel = mediaModel;\n\n        mediaModel.on('all', (type, objectOrEvent, value, previousValue) => {\n            if (objectOrEvent === mediaModel) {\n                objectOrEvent = this;\n            }\n            this.trigger(type, objectOrEvent, value, previousValue);\n        }, this);\n\n        if (previousMediaModel) {\n            dispatchDiffChangeEvents(this, mediaModel.attributes, previousMediaModel.attributes);\n        }\n    }\n\n    get(attr) {\n        const mediaModel = this._mediaModel;\n        if (mediaModel && attr in mediaModel.attributes) {\n            return mediaModel.get(attr);\n        }\n        return this._model.get(attr);\n    }\n\n    set(attr, val) {\n        return this._model.set(attr, val);\n    }\n\n    getVideo() {\n        return this._model.getVideo();\n    }\n\n    destroy() {\n        removeListeners(this._model, this);\n        removeListeners(this._mediaModel, this);\n        this.off();\n    }\n}\n\nexport default class ViewModel extends PlayerViewModel {\n    constructor(playerModel) {\n        super(playerModel, (type) => {\n            // Do not propagate attribute changes from the player model for attributes present in instream\n            const instreamModel = this._instreamModel;\n            if (instreamModel) {\n                const match = changeEventRegEx.exec(type);\n                if (match) {\n                    const attr = match[1];\n                    if (attr in instreamModel.attributes) {\n                        return false;\n                    }\n                }\n            }\n            return true;\n        });\n\n        this._instreamModel = null;\n        this._playerViewModel = new PlayerViewModel(this._model);\n\n        playerModel.on('change:instream', (model, instream) => {\n            this.instreamModel = instream ? instream.model : null;\n        }, this);\n    }\n\n    get player() {\n        return this._playerViewModel;\n    }\n\n    set instreamModel(instreamModel) {\n        const previousInstream = this._instreamModel;\n        removeListeners(previousInstream, this);\n\n        this._model.off('change:mediaModel', null, this);\n\n        this._instreamModel = instreamModel;\n\n        this.trigger('instreamMode', !!instreamModel);\n\n        if (instreamModel) {\n            instreamModel.on('all', (type, objectOrEvent, value, previousValue) => {\n                if (objectOrEvent === instreamModel) {\n                    objectOrEvent = this;\n                }\n                this.trigger(type, objectOrEvent, value, previousValue);\n            }, this);\n\n            instreamModel.change('mediaModel', (model, mediaModel) => {\n                this.mediaModel = mediaModel;\n            }, this);\n\n            dispatchDiffChangeEvents(this, instreamModel.attributes, this._model.attributes);\n        } else if (previousInstream) {\n            this._model.change('mediaModel', (model, mediaModel) => {\n                this.mediaModel = mediaModel;\n            }, this);\n\n            const mergedAttributes = Object.assign({}, this._model.attributes, previousInstream.attributes);\n            dispatchDiffChangeEvents(this, this._model.attributes, mergedAttributes);\n        }\n    }\n\n    get(attr) {\n        const mediaModel = this._mediaModel;\n        if (mediaModel && attr in mediaModel.attributes) {\n            return mediaModel.get(attr);\n        }\n        const instreamModel = this._instreamModel;\n        if (instreamModel && attr in instreamModel.attributes) {\n            return instreamModel.get(attr);\n        }\n        return this._model.get(attr);\n    }\n\n    getVideo() {\n        const instreamModel = this._instreamModel;\n        if (instreamModel && instreamModel.getVideo()) {\n            return instreamModel.getVideo();\n        }\n        return super.getVideo();\n    }\n\n    destroy() {\n        super.destroy();\n        removeListeners(this._instreamModel, this);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/view-model.js","export default function middleware(model, type, currentState) {\n    let newState = currentState;\n\n    switch (type) {\n        case 'time':\n        case 'beforePlay':\n        case 'pause':\n        case 'play':\n        case 'ready': {\n            const viewable = model.get('viewable');\n            // Don't add viewable to events if we don't know we're viewable\n            if (viewable !== undefined) {\n                // Emit viewable as 0 or 1\n                newState = Object.assign({}, currentState, { viewable: viewable });\n            }\n            break;\n        }\n        default: {\n            break;\n        }\n    }\n\n    return newState;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/controller/events-middleware.js","// https://github.com/video-dev/can-autoplay/tree/v3.0.0 (modified)\n//\n// MIT License\n\n// Copyright (c) 2017 video-dev\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n\nimport createPlayPromise from '../providers/utils/play-promise';\nimport Promise from '../polyfills/promise';\n\n/**\n * Small video file with audio.\n * Source: https://github.com/mathiasbynens/small\n *\n * @constant\n * @default\n * @type {String}\n */\nconst VIDEO = new Blob([new Uint8Array([0, 0, 0, 28, 102, 116, 121, 112, 105, 115, 111, 109, 0, 0, 2, 0, 105, 115, 111, 109, 105, 115, 111, 50, 109, 112, 52, 49, 0, 0, 0, 8, 102, 114, 101, 101, 0, 0, 2, 239, 109, 100, 97, 116, 33, 16, 5, 32, 164, 27, 255, 192, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 55, 167, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 112, 33, 16, 5, 32, 164, 27, 255, 192, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 55, 167, 128, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 112, 0, 0, 2, 194, 109, 111, 111, 118, 0, 0, 0, 108, 109, 118, 104, 100, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 232, 0, 0, 0, 47, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 1, 236, 116, 114, 97, 107, 0, 0, 0, 92, 116, 107, 104, 100, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 47, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 36, 101, 100, 116, 115, 0, 0, 0, 28, 101, 108, 115, 116, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 47, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 100, 109, 100, 105, 97, 0, 0, 0, 32, 109, 100, 104, 100, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 172, 68, 0, 0, 8, 0, 85, 196, 0, 0, 0, 0, 0, 45, 104, 100, 108, 114, 0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 83, 111, 117, 110, 100, 72, 97, 110, 100, 108, 101, 114, 0, 0, 0, 1, 15, 109, 105, 110, 102, 0, 0, 0, 16, 115, 109, 104, 100, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 36, 100, 105, 110, 102, 0, 0, 0, 28, 100, 114, 101, 102, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 12, 117, 114, 108, 32, 0, 0, 0, 1, 0, 0, 0, 211, 115, 116, 98, 108, 0, 0, 0, 103, 115, 116, 115, 100, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 87, 109, 112, 52, 97, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 16, 0, 0, 0, 0, 172, 68, 0, 0, 0, 0, 0, 51, 101, 115, 100, 115, 0, 0, 0, 0, 3, 128, 128, 128, 34, 0, 2, 0, 4, 128, 128, 128, 20, 64, 21, 0, 0, 0, 0, 1, 244, 0, 0, 1, 243, 249, 5, 128, 128, 128, 2, 18, 16, 6, 128, 128, 128, 1, 2, 0, 0, 0, 24, 115, 116, 116, 115, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 4, 0, 0, 0, 0, 28, 115, 116, 115, 99, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 1, 0, 0, 0, 28, 115, 116, 115, 122, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 1, 115, 0, 0, 1, 116, 0, 0, 0, 20, 115, 116, 99, 111, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 44, 0, 0, 0, 98, 117, 100, 116, 97, 0, 0, 0, 90, 109, 101, 116, 97, 0, 0, 0, 0, 0, 0, 0, 33, 104, 100, 108, 114, 0, 0, 0, 0, 0, 0, 0, 0, 109, 100, 105, 114, 97, 112, 112, 108, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 45, 105, 108, 115, 116, 0, 0, 0, 37, 169, 116, 111, 111, 0, 0, 0, 29, 100, 97, 116, 97, 0, 0, 0, 1, 0, 0, 0, 0, 76, 97, 118, 102, 53, 54, 46, 52, 48, 46, 49, 48, 49])], { type: 'video/mp4' });\n\nfunction startPlayback (element, { muted }) {\n    // Configure element.\n    element.muted = muted;\n    element.src = URL.createObjectURL(VIDEO);\n\n    // Start playback.\n    return element.play() || createPlayPromise(element);\n}\n\nexport const AUTOPLAY_ENABLED = 'autoplayEnabled';\nexport const AUTOPLAY_MUTED = 'autoplayMuted';\nexport const AUTOPLAY_DISABLED = 'autoplayDisabled';\n\nconst autoplayPagePromises = {};\n\nexport function canAutoplay(mediaPool, { cancelable, muted = false, allowMuted = false, timeout = 10000 }) {\n    const element = mediaPool.getTestElement();\n    const key = muted ? 'muted' : `${allowMuted}`;\n\n    // Skip test if it is currently running, or test previously evaluated to AUTOPLAY_ENABLED.\n    if (!autoplayPagePromises[key]) {\n        // Run the first test: autoplay with specified muted setting.\n        autoplayPagePromises[key] = startPlayback(element, { muted }).catch((e) => {\n            // Second optional test: autoplay muted.\n            if (!cancelable.cancelled() && muted === false && allowMuted) {\n                muted = true;\n                return startPlayback(element, { muted });\n            }\n            throw e;\n        }).then(() => {\n            if (muted) {\n                autoplayPagePromises[key] = null; // Clear cache.\n                return AUTOPLAY_MUTED;\n            }\n            return AUTOPLAY_ENABLED;\n        }).catch(error => {\n            clearTimeout(timeoutId);\n            autoplayPagePromises[key] = null; // Clear cache.\n            error.reason = AUTOPLAY_DISABLED;\n            throw error;\n        });\n    }\n\n    // If the cancelable was canceled, abort the test.\n    const promise = autoplayPagePromises[key].then(result => {\n        clearTimeout(timeoutId);\n        if (cancelable.cancelled()) {\n            const error = new Error('Autoplay test was cancelled');\n            error.reason = 'cancelled';\n            throw error;\n        }\n        return result;\n    });\n\n    // Return playback promise, or timeout.\n    let timeoutId;\n    const timer = new Promise((resolve, reject) => {\n        timeoutId = setTimeout(() => {\n            autoplayPagePromises[key] = null; // Clear cache.\n            const error = new Error('Autoplay test timed out');\n            error.reason = 'timeout';\n            reject(error);\n        }, timeout);\n    });\n    return Promise.race([ promise, timer ]);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/can-autoplay.js","\n// It's DVR if the duration is above the minDvrWindow, Live otherwise\nexport function isDvr(duration, minDvrWindow) {\n    return Math.abs(duration) >= Math.max(minDvrWindow, 0);\n}\n\n// Determine the adaptive type - Live, DVR, or VOD\n// Duration can be positive or negative, but minDvrWindow should always be positive\nexport function streamType(duration, minDvrWindow) {\n    const _minDvrWindow = (minDvrWindow === undefined) ? 120 : minDvrWindow;\n    let type = 'VOD';\n\n    if (duration === Infinity) {\n        // Live streams are always Infinity duration\n        type = 'LIVE';\n    } else if (duration < 0) {\n        type = isDvr(duration, _minDvrWindow) ? 'DVR' : 'LIVE';\n    }\n\n    // Default option is VOD (i.e. positive or non-infinite)\n    return type;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/providers/utils/stream-type.js","import { PLAYLIST_ITEM, MEDIA_PLAY_ATTEMPT, PROVIDER_FIRST_FRAME, MEDIA_TIME, MEDIA_FIRST_FRAME } from 'events/events';\nimport Timer from 'api/timer';\n\nconst TAB_HIDDEN = 'tabHidden';\nconst TAB_VISIBLE = 'tabVisible';\n\n// This is to provide a first frame event even when\n//  a provider does not give us one.\nconst onTimeIncreasesGenerator = (function(callback) {\n    let lastVal = 0;\n    return function (evt) {\n        const pos = evt.position;\n        if (pos > lastVal) {\n            callback();\n        }\n        // sometimes the number will wrap around (ie 100 down to 0)\n        //  so always update\n        lastVal = pos;\n    };\n});\n\nfunction unbindFirstFrameEvents(model, programController) {\n    programController.off(MEDIA_PLAY_ATTEMPT, model._onPlayAttempt);\n    programController.off(PROVIDER_FIRST_FRAME, model._triggerFirstFrame);\n    programController.off(MEDIA_TIME, model._onTime);\n    model.off('change:activeTab', model._onTabVisible);\n}\n\nfunction trackFirstFrame(model, programController) {\n    if (model._onTabVisible) {\n        unbindFirstFrameEvents(model, programController);\n    }\n\n    // When it occurs, send the event, and unbind all listeners\n    let once = false;\n    model._triggerFirstFrame = function() {\n        if (once) {\n            return;\n        }\n        once = true;\n        const qoeItem = model._qoeItem;\n        qoeItem.tick(MEDIA_FIRST_FRAME);\n\n        const time = qoeItem.getFirstFrame();\n        programController.trigger(MEDIA_FIRST_FRAME, { loadTime: time });\n        unbindFirstFrameEvents(model, programController);\n    };\n\n    model._onTime = onTimeIncreasesGenerator(model._triggerFirstFrame);\n\n    model._onPlayAttempt = function() {\n        model._qoeItem.tick(MEDIA_PLAY_ATTEMPT);\n    };\n\n    // track visibility change\n    model._onTabVisible = function(modelChanged, activeTab) {\n        if (activeTab) {\n            model._qoeItem.tick(TAB_VISIBLE);\n        } else {\n            model._qoeItem.tick(TAB_HIDDEN);\n        }\n    };\n\n    model.on('change:activeTab', model._onTabVisible);\n    programController.on(MEDIA_PLAY_ATTEMPT, model._onPlayAttempt);\n    programController.once(PROVIDER_FIRST_FRAME, model._triggerFirstFrame);\n    programController.on(MEDIA_TIME, model._onTime);\n}\n\nconst initQoe = function(initialModel, programController) {\n    function onMediaModel(model, mediaModel, oldMediaModel) {\n        // finish previous item\n        if (model._qoeItem && oldMediaModel) {\n            model._qoeItem.end(oldMediaModel.get('mediaState'));\n        }\n        // reset item level qoe\n        model._qoeItem = new Timer();\n        model._qoeItem.getFirstFrame = function() {\n            const time = this.between(MEDIA_PLAY_ATTEMPT, MEDIA_FIRST_FRAME);\n            // If time between the tab becoming visible and first frame is valid\n            // and less than the time since play attempt, play was not attempted until the tab became visible\n            const timeActive = this.between(TAB_VISIBLE, MEDIA_FIRST_FRAME);\n            if (timeActive > 0 && timeActive < time) {\n                return timeActive;\n            }\n            return time;\n        };\n        model._qoeItem.tick(PLAYLIST_ITEM);\n        model._qoeItem.start(mediaModel.get('mediaState'));\n\n        trackFirstFrame(model, programController);\n\n        mediaModel.on('change:mediaState', function (changeMediaModel, newstate, oldstate) {\n            if (newstate !== oldstate) {\n                model._qoeItem.end(oldstate);\n                model._qoeItem.start(newstate);\n            }\n        });\n    }\n\n    initialModel.change('mediaModel', onMediaModel);\n};\n\nexport default initQoe;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/controller/qoe.js"],"sourceRoot":""}