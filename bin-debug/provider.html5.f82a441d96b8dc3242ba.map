{"version":3,"sources":["webpack:///./src/js/utils/time-ranges.js","webpack:///./src/js/providers/data-normalizer.js","webpack:///./src/js/providers/video-listener-mixin.js","webpack:///./src/js/providers/video-actions-mixin.js","webpack:///./src/js/providers/video-attached-mixin.js","webpack:///./src/js/providers/tracks-mixin.js","webpack:///./src/js/providers/utils/id3Parser.js","webpack:///./src/js/parsers/captions/srt.js","webpack:///./src/js/providers/html5.js","webpack:///./src/js/controller/tracks-loader.js","webpack:///./src/js/controller/tracks-helper.js","webpack:///./src/js/providers/utils/play-promise.js","webpack:///./src/js/parsers/captions/vttcue.js","webpack:///./src/js/parsers/captions/dfxp.js"],"names":["endOfRange","timeRanges","length","end","qualityLevel","level","bitrate","label","width","height","VideoListenerMixin","canplay","trigger","play","stallTime","video","paused","state","setState","loadedmetadata","metadata","duration","getDuration","videoHeight","videoWidth","drmUsed","drm","timeupdate","_helperLastVideoHeight","adaptation","size","position","getCurrentTime","isNaN","seeking","timeEventObject","currentTime","getPtsOffset","ptsOffset","mpegts","click","evt","volumechange","volume","Math","round","mute","muted","seeked","playing","pause","ended","error","progress","dur","Infinity","buf","buffered","between","bufferPercent","ratechange","playbackRate","loadeddata","renderNatively","setTextTracks","textTracks","code","message","VideoActionsMixin","container","vol","max","min","removeAttribute","resize","stretching","playerAspectRatio","videoAspectRatio","objectFit","abs","getContainer","setContainer","element","parentNode","appendChild","remove","stop","destroy","removeChild","atEdgeOfLiveStream","isLive","timeFudge","VideoAttachedMixin","attachMedia","eventsOn_","detachMedia","eventsOff_","Tracks","_itemTracks","_textTracks","_tracksById","_cuesByTrackId","_cachedVTTCues","_metaCuesByTextTime","_currentTextTrackIndex","_unknownCount","_activeCuePosition","_initTextTracks","addTracksListener","clearTracks","clearCueData","disableTextTrack","enableTextTrack","getSubtitlesTrack","removeTracksListener","addTextTracks","setupSideloadedTracks","setSubtitlesTrack","textTrackChangeHandler","addTrackHandler","addCuesToTrack","addCaptionsCue","addVTTCue","addVTTCuesToTrack","tracks","reject","track","trackId","_id","indexOf","name","nativemetadata","i","len","kind","labelInfo","unknownCount","inuse","mode","oncuechange","_cueChangeHandler","bind","_kindSupported","cue","cues","embedded","loaded","shift","_addCueToTrack","_addTrackToList","call","edge","firefox","safari","itemTracks","alreadyLoaded","_clearSideloadedTextTracks","menuIndex","setCurrentSubtitleTrack","each","currentTrack","cueData","text","begin","trackid","toString","data","cueId","useDTS","source","vttCue","push","type","itemTrack","_createTrack","_cacheVTTCue","captions","cuesToConvert","sort","a","b","vttCues","Array","prototype","apply","eventType","handler","instreamMode","addEventListener","removeEventListener","metadataTrack","_removeCues","cachedVTTCues","inUseTracks","filter","_tracksModified","selectedTextTrackIndex","tracksArray","forEach","textTrackAny","file","reason","textTrack","ie","window","TextTrackCue","addCue","textTrackCue","startTime","endTime","test","removeCue","findWhere","addTextTrack","language","default","nonSideloadedTracks","groupid","e","activeCues","currentTarget","dataCues","value","metadataTime","JSON","parse","id3Data","trackKind","cachedCues","cacheKeyTime","floor","cacheLine","line","cacheValue","cueExists","Uint8Array","join","utf8ArrayToStr","syncSafeInt","parseID3","friendlyNames","TIT2","TT2","WXXX","TPE1","TP1","TALB","TAL","array","startingIndex","c","char2","char3","out","String","fromCharCode","utf16BigEndianArrayToStr","lastDoubleByte","sizeArray","arrayToInt","sizeString","parseInt","reduce","ArrayBuffer","oldCue","arrayLength","key","startPos","firstByte","infoDelimiterPosition","j","info","subarray","ptsIs33Bit","transportStreamTimestamp","encoding","hasOwnProperty","collection","Object","Srt","_captions","list","split","entry","_entry","idx","index","substr","slice","clearTimeout","MIN_DVR_DURATION","_name","_setupListeners","eventsHash","videoTag","keys","eventName","_removeListeners","VideoProvider","_playerId","_playerConfig","mediaElement","configRenderNatively","iOS","chrome","_this","MediaEvents","checkStaleStream","_positionBeforeSeek","_videotag","_setPositionBeforeSeek","checkVisualQuality","_currentQuality","clearTimeouts","_androidHls","durationchange","_setAudioTracks","audioTracks","_checkDelayedSeek","_canSeek","_setMediaType","version","major","offset","_seekOffset","_delayedSeek","waiting","setPlaybackRate","webkitbeginfullscreen","_fullscreenState","_sendFullscreen","webkitendfullscreen","mixinEventHandler","renderCaptionsNatively","loop","visualQuality","_staleStreamDuration","liveTimeout","_levels","_beforeResumeHandler","noop","_audioTracks","_currentAudioTrackIndex","_staleStreamTimeout","_stale","_lastEndOfBuffer","isSDK","sdkplatform","supportsPlaybackRate","_convertTime","_getSeekableEnd","seekableDuration","_getSeekableStart","seek","_getPublicLevels","levels","publicLevels","typeOf","map","_setLevels","_pickInitialQuality","currentQuality","qualityLabel","_play","_completeLoad","previousSource","src","sourceElement","document","createElement","sourceChanged","_setVideotagSource","load","sendMediaType","_clearVideotagSource","msie","seekable","start","_audioTrackChangeHandler","off","init","item","sources","preload","setAttribute","starttime","unpausing","isLiveNotDvr","behindLiveEdge","seekPos","_selectedAudioTrackIndex","enabled","_setCurrentAudioTrack","target","jwstate","setVisibility","android","visibility","opacity","styles","fitVideoUsingTransforms","androidNative","x","y","scaleX","ceil","scaleY","top","left","margin","toFixed","setFullscreen","status","tryCatch","enterFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","Error","getFullScreen","exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitDisplayingFullscreen","setCurrentQuality","quality","time","defaultPlaybackRate","getPlaybackRate","getCurrentQuality","getQualityLevels","getName","setCurrentAudioTrack","getAudioTracks","_getAudioTracks","getCurrentAudioTrack","_getCurrentAudioTrack","_track","mediaType","readyState","endOfBuffer","live","setTimeout","checkStreamEnded","loadFile","cancelXhr","convertToVTTCues","successHandler","errorHandler","xhr","ajax","xhrSuccess","onload","onreadystatechange","onerror","abort","xmlRoot","responseXML","firstChild","nextSibling","nodeType","COMMENT_NODE","responseText","loadVttParser","then","parser","VTTParser","oncue","onflush","catch","require","createId","createLabel","tracksCount","prefix","defaulttrack","createPlayPromise","resolve","removeEventListeners","listener","VTTCue","findDirectionSetting","directionSetting","lr","rl","dir","toLowerCase","findAlignSetting","alignSetting","middle","right","align","autoKeyword","hasBeenReset","_pauseOnExit","_startTime","_endTime","_text","_region","_vertical","_snapToLines","_line","_lineAlign","_position","_size","_align","defineProperty","enumerable","get","set","TypeError","setting","SyntaxError","displayState","undefined","getCueAsHTML","WebVTT","convertCueToDOMTree","Dfxp","xmlDoc","validate","paragraphs","getElementsByTagName","frameRate","tt","parsedFrameRate","parseFloat","getAttribute","p","breaks","replaceChild","createTextNode","rawText","innerHTML","textContent","replace","parseError","object"],"mappings":"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","file":"provider.html5.js","sourcesContent":["export default function endOfRange(timeRanges) {\n    if (!timeRanges || !timeRanges.length) {\n        return 0;\n    }\n\n    return timeRanges.end(timeRanges.length - 1);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/time-ranges.js","export function qualityLevel(level) {\n    return {\n        bitrate: level.bitrate,\n        label: level.label,\n        width: level.width,\n        height: level.height\n    };\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/providers/data-normalizer.js","import { STATE_IDLE, STATE_COMPLETE, STATE_STALLED, STATE_LOADING, STATE_PLAYING, STATE_PAUSED,\n    PROVIDER_FIRST_FRAME, CLICK, MEDIA_BUFFER_FULL, MEDIA_RATE_CHANGE, MEDIA_ERROR,\n    MEDIA_BUFFER, MEDIA_META, MEDIA_TIME, MEDIA_SEEKED, MEDIA_VOLUME, MEDIA_MUTE, MEDIA_COMPLETE\n} from 'events/events';\nimport utils from 'utils/helpers';\n\n// This will trigger the events required by jwplayer model to\n//  properly follow the state of the video tag\n//\n// Assumptions\n//  1. All functions are bound to the \"this\" of the provider\n//  2. The provider has an attribute \"video\" which is the video tag\n\nconst VideoListenerMixin = {\n    canplay() {\n        this.trigger(MEDIA_BUFFER_FULL);\n    },\n\n    play() {\n        this.stallTime = -1;\n        if (!this.video.paused && this.state !== STATE_PLAYING) {\n            this.setState(STATE_LOADING);\n        }\n    },\n\n    loadedmetadata() {\n        var metadata = {\n            duration: this.getDuration(),\n            height: this.video.videoHeight,\n            width: this.video.videoWidth\n        };\n        var drmUsed = this.drmUsed;\n        if (drmUsed) {\n            metadata.drm = drmUsed;\n        }\n        this.trigger(MEDIA_META, metadata);\n    },\n\n    timeupdate() {\n        var height = this.video.videoHeight;\n        if (height !== this._helperLastVideoHeight) {\n            if (this.adaptation) {\n                this.adaptation({\n                    size: {\n                        width: this.video.videoWidth,\n                        height: height\n                    }\n                });\n            }\n        }\n        this._helperLastVideoHeight = height;\n\n        const position = this.getCurrentTime();\n        const duration = this.getDuration();\n        if (isNaN(duration)) {\n            return;\n        }\n\n        if (!this.seeking && !this.video.paused &&\n            (this.state === STATE_STALLED || this.state === STATE_LOADING) &&\n            this.stallTime !== this.getCurrentTime()) {\n            this.stallTime = -1;\n            this.setState(STATE_PLAYING);\n        }\n\n        var timeEventObject = {\n            position,\n            duration,\n            currentTime: this.video.currentTime,\n            metadata: {\n                currentTime: this.video.currentTime\n            }\n        };\n        if (this.getPtsOffset) {\n            var ptsOffset = this.getPtsOffset();\n            if (ptsOffset >= 0) {\n                timeEventObject.metadata.mpegts = ptsOffset + position;\n            }\n        }\n\n        // only emit time events when playing or seeking\n        if (this.state === STATE_PLAYING || this.seeking) {\n            this.trigger(MEDIA_TIME, timeEventObject);\n        }\n    },\n\n    click(evt) {\n        this.trigger(CLICK, evt);\n    },\n\n    volumechange() {\n        var video = this.video;\n\n        this.trigger(MEDIA_VOLUME, {\n            volume: Math.round(video.volume * 100)\n        });\n\n        this.trigger(MEDIA_MUTE, {\n            mute: video.muted\n        });\n    },\n\n    seeked() {\n        if (!this.seeking) {\n            return;\n        }\n        this.seeking = false;\n        this.trigger(MEDIA_SEEKED);\n    },\n\n    playing() {\n        // When stalling, STATE_PLAYING is only set on timeupdate\n        // because Safari and Firefox will fire \"playing\" before playback recovers from stalling\n        if (this.stallTime === -1) {\n            // Here setting STATE_PLAYING ensures a quick recovery from STATE_LOADING after seeking\n            this.setState(STATE_PLAYING);\n        }\n        this.trigger(PROVIDER_FIRST_FRAME);\n    },\n\n    pause() {\n        // Sometimes the browser will fire \"complete\" and then a \"pause\" event\n        if (this.state === STATE_COMPLETE) {\n            return;\n        }\n        if (this.video.ended) {\n            return;\n        }\n        if (this.video.error) {\n            return;\n        }\n        // If \"pause\" fires before \"complete\", we still don't want to propagate it\n        if (this.video.currentTime === this.video.duration) {\n            return;\n        }\n        this.setState(STATE_PAUSED);\n    },\n\n    progress() {\n        var dur = this.getDuration();\n        if (dur <= 0 || dur === Infinity) {\n            return;\n        }\n        var buf = this.video.buffered;\n        if (!buf || buf.length === 0) {\n            return;\n        }\n\n        var buffered = utils.between(buf.end(buf.length - 1) / dur, 0, 1);\n        this.trigger(MEDIA_BUFFER, {\n            bufferPercent: buffered * 100,\n            position: this.getCurrentTime(),\n            duration: dur\n        });\n    },\n\n    ratechange() {\n        this.trigger(MEDIA_RATE_CHANGE, { playbackRate: this.video.playbackRate });\n    },\n\n    ended() {\n        this._helperLastVideoHeight = 0;\n        if (this.state !== STATE_IDLE && this.state !== STATE_COMPLETE) {\n            this.trigger(MEDIA_COMPLETE);\n        }\n    },\n    loadeddata () {\n        // If we're not rendering natively text tracks will be provided from another source - don't duplicate them here\n        if (this.renderNatively) {\n            this.setTextTracks(this.video.textTracks);\n        }\n    },\n    error() {\n        var code = (this.video.error && this.video.error.code) || -1;\n        var message = ({\n            1: 'Unknown operation aborted',\n            2: 'Unknown network error',\n            3: 'Unknown decode error',\n            4: 'File could not be played'\n        }[code] || 'Unknown');\n        this.trigger(MEDIA_ERROR, {\n            code: code,\n            message: 'Error loading media: ' + message\n        });\n    }\n};\n\nexport default VideoListenerMixin;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/providers/video-listener-mixin.js","import { style } from 'utils/css';\nimport endOfRange from 'utils/time-ranges';\n\nconst VideoActionsMixin = {\n    container: null,\n\n    volume(vol) {\n        vol = Math.max(Math.min(vol / 100, 1), 0);\n        this.video.volume = vol;\n    },\n\n    mute(state) {\n        this.video.muted = !!state;\n        if (!this.video.muted) {\n            // Remove muted attribute once user unmutes so the video element doesn't get\n            // muted by the browser when the src changes or on replay\n            this.video.removeAttribute('muted');\n        }\n    },\n\n    resize(width, height, stretching) {\n        if (!width || !height || !this.video.videoWidth || !this.video.videoHeight) {\n            return false;\n        }\n        if (stretching === 'uniform') {\n            // snap video to edges when the difference in aspect ratio is less than 9%\n            var playerAspectRatio = width / height;\n            var videoAspectRatio = this.video.videoWidth / this.video.videoHeight;\n            var objectFit = null;\n            if (Math.abs(playerAspectRatio - videoAspectRatio) < 0.09) {\n                objectFit = 'fill';\n            }\n            style(this.video, {\n                objectFit,\n                width: null,\n                height: null\n            });\n        }\n        return false;\n    },\n\n    getContainer() {\n        return this.container;\n    },\n\n    setContainer(element) {\n        this.container = element;\n        if (this.video.parentNode !== element) {\n            element.appendChild(this.video);\n        }\n    },\n\n    remove() {\n        this.stop();\n        this.destroy();\n        const container = this.container;\n        if (container && container === this.video.parentNode) {\n            container.removeChild(this.video);\n        }\n    },\n\n    atEdgeOfLiveStream() {\n        if (!this.isLive()) {\n            return false;\n        }\n\n        // currentTime doesn't always get to the end of the buffered range\n        const timeFudge = 2;\n        return (endOfRange(this.video.buffered) - this.video.currentTime) <= timeFudge;\n    }\n};\n\nexport default VideoActionsMixin;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/providers/video-actions-mixin.js","\nconst VideoAttachedMixin = {\n\n    attachMedia() {\n        this.eventsOn_();\n    },\n\n    detachMedia() {\n        this.eventsOff_();\n\n        return this.video;\n    }\n};\n\nexport default VideoAttachedMixin;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/providers/video-attached-mixin.js","import { loadFile, cancelXhr, convertToVTTCues } from 'controller/tracks-loader';\nimport { createId, createLabel } from 'controller/tracks-helper';\nimport { parseID3 } from 'providers/utils/id3Parser';\nimport { Browser } from 'environment/environment';\nimport { ERROR } from 'events/events';\nimport _ from 'utils/underscore';\n\n// Used across all providers for loading tracks and handling browser track-related events\nconst Tracks = {\n    _itemTracks: null,\n    _textTracks: null,\n    _tracksById: null,\n    _cuesByTrackId: null,\n    _cachedVTTCues: null,\n    _metaCuesByTextTime: null,\n    _currentTextTrackIndex: -1,\n    _unknownCount: 0,\n    _activeCuePosition: null,\n    _initTextTracks: _initTextTracks,\n    addTracksListener: addTracksListener,\n    clearTracks: clearTracks,\n    clearCueData: clearCueData,\n    disableTextTrack: disableTextTrack,\n    enableTextTrack: enableTextTrack,\n    getSubtitlesTrack: getSubtitlesTrack,\n    removeTracksListener: removeTracksListener,\n    addTextTracks: addTextTracks,\n    setTextTracks: setTextTracks,\n    setupSideloadedTracks: setupSideloadedTracks,\n    setSubtitlesTrack: setSubtitlesTrack,\n    textTrackChangeHandler: null,\n    addTrackHandler: null,\n    addCuesToTrack: addCuesToTrack,\n    addCaptionsCue: addCaptionsCue,\n    addVTTCue: addVTTCue,\n    addVTTCuesToTrack: addVTTCuesToTrack,\n    renderNatively: false\n};\n\nfunction setTextTracks(tracks) {\n    this._currentTextTrackIndex = -1;\n    if (!tracks) {\n        return;\n    }\n\n    if (!this._textTracks) {\n        this._initTextTracks();\n    } else {\n        // Remove the 608 captions track that was mutated by the browser\n        this._unknownCount = 0;\n        this._textTracks = _.reject(this._textTracks, function(track) {\n            const trackId = track._id;\n            if (this.renderNatively && trackId && trackId.indexOf('nativecaptions') === 0) {\n                delete this._tracksById[trackId];\n                return true;\n            } else if (track.name && track.name.indexOf('Unknown') === 0) {\n                this._unknownCount++;\n            }\n        }, this);\n\n        // Remove the ID3 track from the cache\n        delete this._tracksById.nativemetadata;\n    }\n\n    // filter for 'subtitles' or 'captions' tracks\n    if (tracks.length) {\n        var i = 0;\n        var len = tracks.length;\n\n        for (i; i < len; i++) {\n            var track = tracks[i];\n            if (!track._id) {\n                if (track.kind === 'captions' || track.kind === 'metadata') {\n                    track._id = 'native' + track.kind + i;\n                    if (!track.label && track.kind === 'captions') {\n                        // track label is read only in Safari\n                        // 'captions' tracks without a label need a name in order for the cc menu to work\n                        var labelInfo = createLabel(track, this._unknownCount);\n                        track.name = labelInfo.label;\n                        this._unknownCount = labelInfo.unknownCount;\n                    }\n                } else {\n                    track._id = createId(track, this._textTracks.length);\n                }\n                if (this._tracksById[track._id]) {\n                    // tracks without unique ids must not be marked as \"inuse\"\n                    continue;\n                }\n                track.inuse = true;\n            }\n            if (!track.inuse || this._tracksById[track._id]) {\n                continue;\n            }\n            // setup TextTrack\n            if (track.kind === 'metadata') {\n                // track mode needs to be \"hidden\", not \"showing\", so that cues don't display as captions in Firefox\n                track.mode = 'hidden';\n                track.oncuechange = _cueChangeHandler.bind(this);\n                this._tracksById[track._id] = track;\n            } else if (_kindSupported(track.kind)) {\n                var mode = track.mode;\n                var cue;\n\n                // By setting the track mode to 'hidden', we can determine if the track has cues\n                track.mode = 'hidden';\n\n                if (!track.cues.length && track.embedded) {\n                    // There's no method to remove tracks added via: video.addTextTrack.\n                    // This ensures the 608 captions track isn't added to the CC menu until it has cues\n                    continue;\n                }\n\n                track.mode = mode;\n\n                // Parsed cues may not have been added to this track yet\n                if (this._cuesByTrackId[track._id] && !this._cuesByTrackId[track._id].loaded) {\n                    var cues = this._cuesByTrackId[track._id].cues;\n                    while ((cue = cues.shift())) {\n                        _addCueToTrack(this.renderNatively, track, cue);\n                    }\n                    track.mode = mode;\n                    this._cuesByTrackId[track._id].loaded = true;\n                }\n\n                _addTrackToList.call(this, track);\n            }\n        }\n    }\n\n    if (this.renderNatively) {\n        // Only bind and set this.textTrackChangeHandler once so that removeEventListener works\n        this.textTrackChangeHandler = this.textTrackChangeHandler || textTrackChangeHandler.bind(this);\n        this.addTracksListener(this.video.textTracks, 'change', this.textTrackChangeHandler);\n\n        if (Browser.edge || Browser.firefox || Browser.safari) {\n            // Listen for TextTracks added to the videotag after the onloadeddata event in Edge and Firefox\n            this.addTrackHandler = this.addTrackHandler || addTrackHandler.bind(this);\n            this.addTracksListener(this.video.textTracks, 'addtrack', this.addTrackHandler);\n        }\n    }\n\n    if (this._textTracks.length) {\n        this.trigger('subtitlesTracks', { tracks: this._textTracks });\n    }\n}\n\nfunction setupSideloadedTracks(itemTracks) {\n    // Add tracks if we're starting playback or resuming after a midroll\n\n    if (!this.renderNatively) {\n        return;\n    }\n    // Determine if the tracks are the same and the embedded + sideloaded count = # of tracks in the controlbar\n    var alreadyLoaded = itemTracks === this._itemTracks;\n    if (!alreadyLoaded) {\n        cancelXhr(this._itemTracks);\n    }\n    this._itemTracks = itemTracks;\n    if (!itemTracks) {\n        return;\n    }\n\n    if (!alreadyLoaded) {\n        this.disableTextTrack();\n        _clearSideloadedTextTracks.call(this);\n        this.addTextTracks(itemTracks);\n    }\n}\n\nfunction getSubtitlesTrack() {\n    return this._currentTextTrackIndex;\n}\n\nfunction setSubtitlesTrack(menuIndex) {\n    if (!this.renderNatively) {\n        if (this.setCurrentSubtitleTrack) {\n            this.setCurrentSubtitleTrack(menuIndex - 1);\n        }\n        return;\n    }\n\n    if (!this._textTracks) {\n        return;\n    }\n\n    // 0 = 'Off'\n    if (menuIndex === 0) {\n        _.each(this._textTracks, function (track) {\n            track.mode = track.embedded ? 'hidden' : 'disabled';\n        });\n    }\n\n    // Track index is 1 less than controlbar index to account for 'Off' = 0.\n    // Prevent unnecessary track change events\n    if (this._currentTextTrackIndex === menuIndex - 1) {\n        return;\n    }\n\n    // Turn off current track\n    this.disableTextTrack();\n\n    // Set the provider's index to the model's index, then show the selected track if it exists\n    this._currentTextTrackIndex = menuIndex - 1;\n\n    if (this._textTracks[this._currentTextTrackIndex]) {\n        this._textTracks[this._currentTextTrackIndex].mode = 'showing';\n    }\n\n    // Update the model index since the track change may have come from a browser event\n    this.trigger('subtitlesTrackChanged', {\n        currentTrack: this._currentTextTrackIndex + 1,\n        tracks: this._textTracks\n    });\n}\n\nfunction addCaptionsCue(cueData) {\n    if (!cueData.text || !cueData.begin || !cueData.end) {\n        return;\n    }\n    var trackId = cueData.trackid.toString();\n    var track = this._tracksById && this._tracksById[trackId];\n    if (!track) {\n        track = {\n            kind: 'captions',\n            _id: trackId,\n            data: []\n        };\n        this.addTextTracks([track]);\n        this.trigger('subtitlesTracks', { tracks: this._textTracks });\n    }\n\n    var cueId;\n\n    if (cueData.useDTS) {\n        // There may not be any 608 captions when the track is first created\n        // Need to set the source so position is determined from metadata\n        if (!track.source) {\n            track.source = cueData.source || 'mpegts';\n        }\n\n    }\n    cueId = cueData.begin + '_' + cueData.text;\n\n    var cue = this._metaCuesByTextTime[cueId];\n    if (!cue) {\n        cue = {\n            begin: cueData.begin,\n            end: cueData.end,\n            text: cueData.text\n        };\n        this._metaCuesByTextTime[cueId] = cue;\n        var vttCue = convertToVTTCues([cue])[0];\n        track.data.push(vttCue);\n    }\n}\n\nfunction addVTTCue(cueData) {\n    if (!this._tracksById) {\n        this._initTextTracks();\n    }\n\n    var trackId = cueData.track ? cueData.track : 'native' + cueData.type;\n    var track = this._tracksById[trackId];\n    var label = cueData.type === 'captions' ? 'Unknown CC' : 'ID3 Metadata';\n    var vttCue = cueData.cue;\n\n    if (!track) {\n        var itemTrack = {\n            kind: cueData.type,\n            _id: trackId,\n            label: label,\n            embedded: true\n        };\n\n        track = _createTrack.call(this, itemTrack);\n\n        if (this.renderNatively || track.kind === 'metadata') {\n            this.setTextTracks(this.video.textTracks);\n        } else {\n            addTextTracks.call(this, [track]);\n        }\n    }\n    if (_cacheVTTCue.call(this, track, vttCue)) {\n        if (this.renderNatively || track.kind === 'metadata') {\n            _addCueToTrack(this.renderNatively, track, vttCue);\n        } else {\n            track.data.push(vttCue);\n        }\n    }\n}\n\nfunction addCuesToTrack(cueData) {\n    // convert cues coming from the flash provider into VTTCues, then append them to track\n    var track = this._tracksById[cueData.name];\n    if (!track) {\n        return;\n    }\n\n    track.source = cueData.source;\n    var cues = cueData.captions || [];\n    var cuesToConvert = [];\n    var sort = false;\n\n    for (var i = 0; i < cues.length; i++) {\n        var cue = cues[i];\n        var cueId = cueData.name + '_' + cue.begin + '_' + cue.end;\n        if (!this._metaCuesByTextTime[cueId]) {\n            this._metaCuesByTextTime[cueId] = cue;\n            cuesToConvert.push(cue);\n            sort = true;\n        }\n    }\n    if (sort) {\n        cuesToConvert.sort(function(a, b) {\n            return a.begin - b.begin;\n        });\n    }\n    var vttCues = convertToVTTCues(cuesToConvert);\n    Array.prototype.push.apply(track.data, vttCues);\n}\n\nfunction addTracksListener(tracks, eventType, handler) {\n    if (!tracks) {\n        return;\n    }\n    // Always remove existing listener\n    removeTracksListener(tracks, eventType, handler);\n\n    if (this.instreamMode) {\n        return;\n    }\n\n    if (tracks.addEventListener) {\n        tracks.addEventListener(eventType, handler);\n    } else {\n        tracks['on' + eventType] = handler;\n    }\n}\n\nfunction removeTracksListener(tracks, eventType, handler) {\n    if (!tracks) {\n        return;\n    }\n    if (tracks.removeEventListener) {\n        tracks.removeEventListener(eventType, handler);\n    } else {\n        tracks['on' + eventType] = null;\n    }\n}\n\nfunction clearTracks() {\n    cancelXhr(this._itemTracks);\n    var metadataTrack = this._tracksById && this._tracksById.nativemetadata;\n    if (this.renderNatively || metadataTrack) {\n        _removeCues(this.renderNatively, this.video.textTracks);\n        if (metadataTrack) {\n            metadataTrack.oncuechange = null;\n        }\n    }\n\n    this._itemTracks = null;\n    this._textTracks = null;\n    this._tracksById = null;\n    this._cuesByTrackId = null;\n    this._metaCuesByTextTime = null;\n    this._unknownCount = 0;\n    this._currentTextTrackIndex = -1;\n    this._activeCuePosition = null;\n    if (this.renderNatively) {\n        // Removing listener first to ensure that removing cues does not trigger it unnecessarily\n        this.removeTracksListener(this.video.textTracks, 'change', this.textTrackChangeHandler);\n        _removeCues(this.renderNatively, this.video.textTracks);\n    }\n}\n\n// Clear track cues to prevent duplicates\nfunction clearCueData(trackId) {\n    const cachedVTTCues = this._cachedVTTCues;\n    if (cachedVTTCues && cachedVTTCues[trackId]) {\n        cachedVTTCues[trackId] = {};\n        if (this._tracksById) {\n            this._tracksById[trackId].data = [];\n        }\n    }\n}\n\nfunction disableTextTrack() {\n    if (this._textTracks) {\n        var track = this._textTracks[this._currentTextTrackIndex];\n        if (track) {\n            // FF does not remove the active cue from the dom when the track is hidden, so we must disable it\n            track.mode = 'disabled';\n            const trackId = track._id;\n            if (trackId && trackId.indexOf('nativecaptions') === 0) {\n                track.mode = 'hidden';\n            }\n        }\n    }\n}\n\nfunction enableTextTrack() {\n    if (this._textTracks) {\n        var track = this._textTracks[this._currentTextTrackIndex];\n        if (track) {\n            track.mode = 'showing';\n        }\n    }\n}\n\nfunction textTrackChangeHandler() {\n    var textTracks = this.video.textTracks;\n    var inUseTracks = _.filter(textTracks, function (track) {\n        return (track.inuse || !track._id) && _kindSupported(track.kind);\n    });\n    if (!this._textTracks || _tracksModified.call(this, inUseTracks)) {\n        this.setTextTracks(textTracks);\n        return;\n    }\n    // If a caption/subtitle track is showing, find its index\n    var selectedTextTrackIndex = -1;\n    for (var i = 0; i < this._textTracks.length; i++) {\n        if (this._textTracks[i].mode === 'showing') {\n            selectedTextTrackIndex = i;\n            break;\n        }\n    }\n\n    // Notifying the model when the index changes keeps the current index in sync in iOS Fullscreen mode\n    if (selectedTextTrackIndex !== this._currentTextTrackIndex) {\n        this.setSubtitlesTrack(selectedTextTrackIndex + 1);\n    }\n}\n\n// Used in MS Edge to get tracks from the videotag as they're added\nfunction addTrackHandler() {\n    this.setTextTracks(this.video.textTracks);\n}\n\nfunction addTextTracks(tracksArray) {\n    if (!tracksArray) {\n        return;\n    }\n\n    if (!this._textTracks) {\n        this._initTextTracks();\n    }\n\n    tracksArray.forEach(itemTrack => {\n        // only add valid and supported kinds https://developer.mozilla.org/en-US/docs/Web/HTML/Element/track\n        if (itemTrack.kind && !_kindSupported(itemTrack.kind)) {\n            return;\n        }\n        var textTrackAny = _createTrack.call(this, itemTrack);\n        _addTrackToList.call(this, textTrackAny);\n        if (itemTrack.file) {\n            itemTrack.data = [];\n            loadFile(itemTrack,\n                (vttCues) => {\n                    this.addVTTCuesToTrack(textTrackAny, vttCues);\n                },\n                (error) => {\n                    this.trigger(ERROR, {\n                        message: 'Captions failed to load',\n                        reason: error\n                    });\n                });\n        }\n    });\n\n    if (this._textTracks && this._textTracks.length) {\n        this.trigger('subtitlesTracks', { tracks: this._textTracks });\n    }\n}\n\nfunction addVTTCuesToTrack(track, vttCues) {\n    if (!this.renderNatively) {\n        return;\n    }\n\n    var textTrack = this._tracksById[track._id];\n    // the track may not be on the video tag yet\n    if (!textTrack) {\n\n        if (!this._cuesByTrackId) {\n            this._cuesByTrackId = {};\n        }\n        this._cuesByTrackId[track._id] = { cues: vttCues, loaded: false };\n        return;\n    }\n    // Cues already added\n    if (this._cuesByTrackId[track._id] && this._cuesByTrackId[track._id].loaded) {\n        return;\n    }\n\n    var cue;\n    this._cuesByTrackId[track._id] = { cues: vttCues, loaded: true };\n\n    while ((cue = vttCues.shift())) {\n        _addCueToTrack(this.renderNatively, textTrack, cue);\n    }\n}\n\n// ////////////////////\n// //// PRIVATE METHODS\n// ////////////////////\n\nfunction _addCueToTrack(renderNatively, track, vttCue) {\n    if (!(Browser.ie && renderNatively) || !window.TextTrackCue) {\n        track.addCue(vttCue);\n        return;\n    }\n    // There's no support for the VTTCue interface in IE/Edge.\n    // We need to convert VTTCue to TextTrackCue before adding them to the TextTrack\n    // This unfortunately removes positioning properties from the cues\n    var textTrackCue = new window.TextTrackCue(vttCue.startTime, vttCue.endTime, vttCue.text);\n    track.addCue(textTrackCue);\n}\n\nfunction _removeCues(renderNatively, tracks) {\n    if (tracks && tracks.length) {\n        _.each(tracks, function(track) {\n            // Let IE & Edge handle cleanup of non-sideloaded text tracks for native rendering\n            if (Browser.ie && renderNatively && /^(native|subtitle|cc)/.test(track._id)) {\n                return;\n            }\n\n            // Cues are inaccessible if the track is disabled. While hidden,\n            // we can remove cues while the track is in a non-visible state\n            // Set to disabled before hidden to ensure active cues disappear\n            track.mode = 'disabled';\n            track.mode = 'hidden';\n            for (var i = track.cues.length; i--;) {\n                track.removeCue(track.cues[i]);\n            }\n            if (!track.embedded) {\n                track.mode = 'disabled';\n            }\n            track.inuse = false;\n        });\n    }\n}\n\nfunction _kindSupported(kind) {\n    return kind === 'subtitles' || kind === 'captions';\n}\n\nfunction _initTextTracks() {\n    this._textTracks = [];\n    this._tracksById = {};\n    this._metaCuesByTextTime = {};\n    this._cuesByTrackId = {};\n    this._cachedVTTCues = {};\n    this._unknownCount = 0;\n}\n\nfunction _createTrack(itemTrack) {\n    var track;\n    var labelInfo = createLabel(itemTrack, this._unknownCount);\n    var label = labelInfo.label;\n    this._unknownCount = labelInfo.unknownCount;\n\n    if (this.renderNatively || itemTrack.kind === 'metadata') {\n        var tracks = this.video.textTracks;\n        // TextTrack label is read only, so we'll need to create a new track if we don't\n        // already have one with the same label\n        track = _.findWhere(tracks, { label: label });\n\n        if (!track) {\n            track = this.video.addTextTrack(itemTrack.kind, label, itemTrack.language || '');\n        }\n\n        track.default = itemTrack.default;\n        track.mode = 'disabled';\n        track.inuse = true;\n    } else {\n        track = itemTrack;\n        track.data = track.data || [];\n    }\n\n    if (!track._id) {\n        track._id = createId(itemTrack, this._textTracks.length);\n    }\n\n    return track;\n}\n\nfunction _addTrackToList(track) {\n    this._textTracks.push(track);\n    this._tracksById[track._id] = track;\n}\n\nfunction _clearSideloadedTextTracks() {\n    // Clear VTT textTracks\n    if (!this._textTracks) {\n        return;\n    }\n    var nonSideloadedTracks = _.filter(this._textTracks, function (track) {\n        return track.embedded || track.groupid === 'subs';\n    });\n    this._initTextTracks();\n    _.each(nonSideloadedTracks, function (track) {\n        this._tracksById[track._id] = track;\n    });\n    this._textTracks = nonSideloadedTracks;\n}\n\nfunction _cueChangeHandler(e) {\n    var activeCues = e.currentTarget.activeCues;\n    if (!activeCues || !activeCues.length) {\n        return;\n    }\n\n    // Get the most recent start time. Cues are sorted by start time in ascending order by the browser\n    var startTime = activeCues[activeCues.length - 1].startTime;\n    // Prevent duplicate meta events for the same list of cues since the cue change handler fires once\n    // for each activeCue in Safari\n    if (this._activeCuePosition === startTime) {\n        return;\n    }\n    var dataCues = [];\n\n    _.each(activeCues, function(cue) {\n        if (cue.startTime < startTime) {\n            return;\n        }\n        if (cue.data || cue.value) {\n            dataCues.push(cue);\n        } else if (cue.text) {\n            this.trigger('meta', {\n                metadataTime: startTime,\n                metadata: JSON.parse(cue.text)\n            });\n        }\n    }, this);\n\n    if (dataCues.length) {\n        var id3Data = parseID3(dataCues);\n        this.trigger('meta', {\n            metadataTime: startTime,\n            metadata: id3Data\n        });\n    }\n    this._activeCuePosition = startTime;\n}\n\nfunction _cacheVTTCue(track, vttCue) {\n    var trackKind = track.kind;\n    if (!this._cachedVTTCues[track._id]) {\n        this._cachedVTTCues[track._id] = {};\n    }\n    var cachedCues = this._cachedVTTCues[track._id];\n    var cacheKeyTime;\n\n    switch (trackKind) {\n        case 'captions':\n        case 'subtitles':\n            // VTTCues should have unique start and end times, even in cases where there are multiple\n            // active cues. This is safer than ensuring text is unique, which may be violated on seek.\n            // Captions within .05s of each other are treated as unique to account for\n            // quality switches where start/end times are slightly different.\n            cacheKeyTime = Math.floor(vttCue.startTime * 20);\n            var cacheLine = '_' + vttCue.line;\n            var cacheValue = Math.floor(vttCue.endTime * 20);\n            var cueExists = cachedCues[cacheKeyTime + cacheLine] || cachedCues[(cacheKeyTime + 1) + cacheLine] || cachedCues[(cacheKeyTime - 1) + cacheLine];\n\n            if (cueExists && Math.abs(cueExists - cacheValue) <= 1) {\n                return false;\n            }\n\n            cachedCues[cacheKeyTime + cacheLine] = cacheValue;\n            return true;\n        case 'metadata':\n            var text = vttCue.data ? new Uint8Array(vttCue.data).join('') : vttCue.text;\n            cacheKeyTime = vttCue.startTime + text;\n            if (cachedCues[cacheKeyTime]) {\n                return false;\n            }\n\n            cachedCues[cacheKeyTime] = vttCue.endTime;\n            return true;\n        default:\n            return false;\n    }\n}\n\nfunction _tracksModified(inUseTracks) {\n    // Need to add new textTracks coming from the video tag\n    if (inUseTracks.length > this._textTracks.length) {\n        return true;\n    }\n\n    // Tracks may have changed in Safari after an ad\n    for (var i = 0; i < inUseTracks.length; i++) {\n        var track = inUseTracks[i];\n        if (!track._id || !this._tracksById[track._id]) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport default Tracks;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/providers/tracks-mixin.js","\nconst friendlyNames = {\n    TIT2: 'title',\n    TT2: 'title',\n    WXXX: 'url',\n    TPE1: 'artist',\n    TP1: 'artist',\n    TALB: 'album',\n    TAL: 'album'\n};\n\nexport function utf8ArrayToStr(array, startingIndex) {\n    // Based on code by Masanao Izumo <iz@onicos.co.jp>\n    // posted at http://www.onicos.com/staff/iz/amuse/javascript/expert/utf.txt\n\n    const len = array.length;\n    let c;\n    let char2;\n    let char3;\n    let out = '';\n    let i = startingIndex || 0;\n    while (i < len) {\n        c = array[i++];\n        // If the character is 3 (END_OF_TEXT) or 0 (NULL) then skip it\n        if (c === 0x00 || c === 0x03) {\n            continue;\n        }\n        switch (c >> 4) {\n            case 0: case 1: case 2: case 3: case 4: case 5: case 6: case 7:\n            // 0xxxxxxx\n                out += String.fromCharCode(c);\n                break;\n            case 12: case 13:\n            // 110x xxxx   10xx xxxx\n                char2 = array[i++];\n                out += String.fromCharCode(((c & 0x1F) << 6) | (char2 & 0x3F));\n                break;\n            case 14:\n                // 1110 xxxx  10xx xxxx  10xx xxxx\n                char2 = array[i++];\n                char3 = array[i++];\n                out += String.fromCharCode(((c & 0x0F) << 12) |\n                    ((char2 & 0x3F) << 6) |\n                    ((char3 & 0x3F) << 0));\n                break;\n            default:\n        }\n    }\n    return out;\n}\n\nfunction utf16BigEndianArrayToStr(array, startingIndex) {\n    const lastDoubleByte = array.length - 1;\n    let out = '';\n    let i = startingIndex || 0;\n    while (i < lastDoubleByte) {\n        if (array[i] === 254 && array[i + 1] === 255) {\n            // Byte order mark\n        } else {\n            out += String.fromCharCode((array[i] << 8) + array[i + 1]);\n        }\n        i += 2;\n    }\n    return out;\n}\n    \nexport function syncSafeInt(sizeArray) {\n    const size = arrayToInt(sizeArray);\n    return (size & 0x0000007F) |\n        ((size & 0x00007F00) >> 1) |\n        ((size & 0x007F0000) >> 2) |\n        ((size & 0x7F000000) >> 3);\n}\n\nfunction arrayToInt(array) {\n    let sizeString = '0x';\n    for (let i = 0; i < array.length; i++) {\n        if (array[i] < 16) {\n            sizeString += '0';\n        }\n        sizeString += array[i].toString(16);\n    }\n    return parseInt(sizeString);\n}\n    \nexport function parseID3(activeCues = []) {\n    return activeCues.reduce(function(data, cue) {\n        if (!('value' in cue)) {\n            // Cue is not in Safari's key/data format\n            if ('data' in cue && cue.data instanceof ArrayBuffer) {\n                // EdgeHTML 13.10586 cue point format - contains raw data in an ArrayBuffer.\n\n                const oldCue = cue;\n                const array = new Uint8Array(oldCue.data);\n                let arrayLength = array.length;\n\n                cue = { value: { key: '', data: '' } };\n\n                let i = 10;\n                while (i < 14 && i < array.length) {\n                    if (array[i] === 0) {\n                        break;\n                    }\n                    cue.value.key += String.fromCharCode(array[i]);\n                    i++;\n                }\n\n                // If the first byte is 3 (END_OF_TEXT) or 0 (NULL) then skip it\n                let startPos = 19;\n                let firstByte = array[startPos];\n                if (firstByte === 0x03 || firstByte === 0x00) {\n                    firstByte = array[++startPos];\n                    arrayLength--;\n                }\n\n                let infoDelimiterPosition = 0;\n                // Find info/value pair delimiter if present.\n                // If first byte shows theres utf 16 encoding, there is no info since info cannot be utf 16 encoded\n                if (firstByte !== 0x01 && firstByte !== 0x02) {\n                    for (let j = startPos + 1; j < arrayLength; j++) {\n                        if (array[j] === 0x00) {\n                            infoDelimiterPosition = j - startPos;\n                            break;\n                        }\n                    }\n                }\n\n                if (infoDelimiterPosition > 0) {\n                    const info = utf8ArrayToStr(array.subarray(startPos, startPos += infoDelimiterPosition), 0);\n                    if (cue.value.key === 'PRIV') {\n                        if (info === 'com.apple.streaming.transportStreamTimestamp') {\n                            const ptsIs33Bit = syncSafeInt(array.subarray(startPos, startPos += 4)) & 0x00000001;\n                            const transportStreamTimestamp = syncSafeInt(array.subarray(startPos, startPos += 4)) +\n                                (ptsIs33Bit ? 0x100000000 : 0);\n                            cue.value.data = transportStreamTimestamp;\n                        } else {\n                            cue.value.data = utf8ArrayToStr(array, startPos + 1);\n                        }\n                        cue.value.info = info;\n                    } else {\n                        cue.value.info = info;\n                        cue.value.data = utf8ArrayToStr(array, startPos + 1);\n                    }\n                } else {\n                    const encoding = array[startPos];\n                    if (encoding === 1 || encoding === 2) {\n                        cue.value.data = utf16BigEndianArrayToStr(array, startPos + 1);\n                    } else {\n                        cue.value.data = utf8ArrayToStr(array, startPos + 1);\n                    }\n                }\n            }\n        }\n\n        // These friendly names mapping provides compatibility with our implementation prior to 7.3\n        if (friendlyNames.hasOwnProperty(cue.value.key)) {\n            data[friendlyNames[cue.value.key]] = cue.value.data;\n        }\n        /* The meta event includes a metadata object with flattened cue key/data pairs\n         * If a cue also includes an info field, then create a collection of info/data pairs for the cue key\n         *   TLEN: 03:50                                        // key: \"TLEN\", data: \"03:50\"\n         *   WXXX: {\"artworkURL\":\"http://domain.com/cover.jpg\"} // key: \"WXXX\", info: \"artworkURL\" ...\n         */\n        if (cue.value.info) {\n            let collection = data[cue.value.key];\n            if (collection !== Object(collection)) {\n                collection = {};\n                data[cue.value.key] = collection;\n            }\n            collection[cue.value.info] = cue.value.data;\n        } else {\n            data[cue.value.key] = cue.value.data;\n        }\n        return data;\n    }, {});\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/providers/utils/id3Parser.js","import { seconds, trim } from 'utils/strings';\n\n// Component that loads and parses an SRT file\n\nexport default function Srt(data) {\n    // Trim whitespace and split the list by returns.\n    var _captions = [];\n    data = trim(data);\n    var list = data.split('\\r\\n\\r\\n');\n    if (list.length === 1) {\n        list = data.split('\\n\\n');\n    }\n\n    for (var i = 0; i < list.length; i++) {\n        if (list[i] === 'WEBVTT') {\n            continue;\n        }\n        // Parse each entry\n        var entry = _entry(list[i]);\n        if (entry.text) {\n            _captions.push(entry);\n        }\n    }\n\n    return _captions;\n}\n\n\n/* Parse a single captions entry. */\nfunction _entry(data) {\n    var entry = {};\n    var array = data.split('\\r\\n');\n    if (array.length === 1) {\n        array = data.split('\\n');\n    }\n    var idx = 1;\n    if (array[0].indexOf(' --> ') > 0) {\n        idx = 0;\n    }\n    if (array.length > idx + 1 && array[idx + 1]) {\n        // This line contains the start and end.\n        var line = array[idx];\n        var index = line.indexOf(' --> ');\n        if (index > 0) {\n            entry.begin = seconds(line.substr(0, index));\n            entry.end = seconds(line.substr(index + 5));\n            // Remaining lines contain the text\n            entry.text = array.slice(idx + 1).join('\\r\\n');\n        }\n    }\n    return entry;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/parsers/captions/srt.js","import { qualityLevel } from 'providers/data-normalizer';\nimport { Browser, OS } from 'environment/environment';\nimport { isAndroidHls } from 'providers/html5-android-hls';\nimport { STATE_IDLE, STATE_PLAYING, STATE_STALLED, MEDIA_META, MEDIA_ERROR, MEDIA_VISUAL_QUALITY, MEDIA_TYPE,\n    MEDIA_LEVELS, MEDIA_LEVEL_CHANGED, MEDIA_SEEK, STATE_LOADING } from 'events/events';\nimport VideoEvents from 'providers/video-listener-mixin';\nimport VideoAction from 'providers/video-actions-mixin';\nimport VideoAttached from 'providers/video-attached-mixin';\nimport { style, transform } from 'utils/css';\nimport utils from 'utils/helpers';\nimport { emptyElement } from 'utils/dom';\nimport _ from 'utils/underscore';\nimport DefaultProvider from 'providers/default';\nimport Events from 'utils/backbone.events';\nimport Tracks from 'providers/tracks-mixin';\nimport endOfRange from 'utils/time-ranges';\nimport createPlayPromise from 'providers/utils/play-promise';\n\nconst clearTimeout = window.clearTimeout;\nconst MIN_DVR_DURATION = 120;\nconst _name = 'html5';\n\nfunction _setupListeners(eventsHash, videoTag) {\n    Object.keys(eventsHash).forEach(eventName => {\n        videoTag.removeEventListener(eventName, eventsHash[eventName]);\n        videoTag.addEventListener(eventName, eventsHash[eventName]);\n    });\n}\n\nfunction _removeListeners(eventsHash, videoTag) {\n    Object.keys(eventsHash).forEach(eventName => {\n        videoTag.removeEventListener(eventName, eventsHash[eventName]);\n    });\n}\n\nfunction VideoProvider(_playerId, _playerConfig, mediaElement) {\n    // Current media state\n    this.state = STATE_IDLE;\n\n    // Are we buffering due to seek, or due to playback?\n    this.seeking = false;\n\n    // Always render natively in iOS and Safari, where HLS is supported.\n    // Otherwise, use native rendering when set in the config for browsers that have adequate support.\n    // FF, IE & Edge are excluded due to styling/positioning drawbacks.\n    // The following issues need to be addressed before we enable native rendering in Edge:\n    // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/8120475/\n    // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/12079271/\n    function renderNatively (configRenderNatively) {\n        if (OS.iOS || Browser.safari) {\n            return true;\n        }\n        return configRenderNatively && Browser.chrome;\n    }\n\n    const _this = this;\n\n    const MediaEvents = {\n        progress() {\n            VideoEvents.progress.call(_this);\n            checkStaleStream();\n        },\n        \n        timeupdate() {\n            if (_positionBeforeSeek !== _videotag.currentTime) {\n                _setPositionBeforeSeek(_videotag.currentTime);\n                VideoEvents.timeupdate.call(_this);\n            }\n            checkStaleStream();\n            if (Browser.ie) {\n                checkVisualQuality();\n            }\n        },\n\n        resize: checkVisualQuality,\n\n        ended() {\n            _currentQuality = -1;\n            clearTimeouts();\n            VideoEvents.ended.call(_this);\n        },\n\n        loadedmetadata() {\n            let duration = _this.getDuration();\n            if (_androidHls && duration === Infinity) {\n                duration = 0;\n            }\n            var metadata = {\n                duration: duration,\n                height: _videotag.videoHeight,\n                width: _videotag.videoWidth\n            };\n            _this.trigger(MEDIA_META, metadata);\n            checkVisualQuality();\n        },\n\n        durationchange() {\n            if (_androidHls) {\n                return;\n            }\n            VideoEvents.progress.call(_this);\n        },\n\n        loadeddata() {\n            VideoEvents.loadeddata.call(_this);\n            _setAudioTracks(_videotag.audioTracks);\n            _checkDelayedSeek(_this.getDuration());\n        },\n\n        canplay() {\n            _canSeek = true;\n            if (!_androidHls) {\n                _setMediaType();\n            }\n            if (Browser.ie && Browser.version.major === 9) {\n                // In IE9, set tracks here since they are not ready\n                // on load\n                _this.setTextTracks(_this._textTracks);\n            }\n            VideoEvents.canplay.call(_this);\n        },\n\n        seeking() {\n            const offset = _seekOffset !== null ? _seekOffset : _this.getCurrentTime();\n            const position = _positionBeforeSeek;\n            _setPositionBeforeSeek(offset);\n            _seekOffset = null;\n            _delayedSeek = 0;\n            _this.seeking = true;\n            _this.trigger(MEDIA_SEEK, {\n                position,\n                offset\n            });\n        },\n\n        seeked() {\n            VideoEvents.seeked.call(_this);\n        },\n\n        waiting() {\n            if (_this.seeking) {\n                _this.setState(STATE_LOADING);\n            } else if (_this.state === STATE_PLAYING) {\n                if (_this.atEdgeOfLiveStream()) {\n                    _this.setPlaybackRate(1);\n                }\n                _this.stallTime = _this.getCurrentTime();\n                _this.setState(STATE_STALLED);\n            }\n        },\n\n        webkitbeginfullscreen(e) {\n            _fullscreenState = true;\n            _sendFullscreen(e);\n        },\n\n        webkitendfullscreen(e) {\n            _fullscreenState = false;\n            _sendFullscreen(e);\n        }\n    };\n    Object.keys(VideoEvents).forEach(eventName => {\n        if (!MediaEvents[eventName]) {\n            const mixinEventHandler = VideoEvents[eventName];\n            MediaEvents[eventName] = (e) => {\n                mixinEventHandler.call(_this, e);\n            };\n        }\n    });\n\n    Object.assign(this, Events, VideoAction, VideoAttached, Tracks, {\n        renderNatively: renderNatively(_playerConfig.renderCaptionsNatively),\n        eventsOn_() {\n            _setupListeners(MediaEvents, _videotag);\n        },\n        eventsOff_() {\n            _removeListeners(MediaEvents, _videotag);\n        },\n        detachMedia() {\n            VideoAttached.detachMedia.call(_this);\n            clearTimeouts();\n            // Stop listening to track changes so disabling the current track doesn't update the model\n            this.removeTracksListener(_videotag.textTracks, 'change', this.textTrackChangeHandler);\n            // Prevent tracks from showing during ad playback\n            this.disableTextTrack();\n            return _videotag;\n        },\n        attachMedia() {\n            VideoAttached.attachMedia.call(_this);\n            _canSeek = false;\n            // If we were mid-seek when detached, we want to allow it to resume\n            this.seeking = false;\n            // In case the video tag was modified while we shared it\n            _videotag.loop = false;\n            // If there was a showing track, re-enable it\n            this.enableTextTrack();\n            if (this.renderNatively) {\n                this.setTextTracks(this.video.textTracks);\n            }\n            this.addTracksListener(_videotag.textTracks, 'change', this.textTrackChangeHandler);\n        },\n        isLive() {\n            return _videotag.duration === Infinity;\n        }\n    });\n\n    const _videotag = mediaElement;\n    const visualQuality = { level: {} };\n    // Prefer the config timeout, which is allowed to be 0 and null by default\n    const _staleStreamDuration =\n        _playerConfig.liveTimeout !== null\n            ? _playerConfig.liveTimeout\n            : 3 * 10 * 1000;\n\n    let _canSeek = false; // true on valid time event\n    let _delayedSeek = 0;\n    let _seekOffset = null;\n    let _positionBeforeSeek = null;\n    let _levels;\n    let _currentQuality = -1;\n    let _fullscreenState = false;\n    let _beforeResumeHandler = utils.noop;\n    let _audioTracks = null;\n    let _currentAudioTrackIndex = -1;\n    let _staleStreamTimeout = -1;\n    let _stale = false;\n    let _lastEndOfBuffer = null;\n    let _androidHls = false;\n\n    this.isSDK = !!_playerConfig.sdkplatform;\n    this.video = _videotag;\n    this.supportsPlaybackRate = true;\n\n    function checkVisualQuality() {\n        const level = visualQuality.level;\n        if (level.width !== _videotag.videoWidth || level.height !== _videotag.videoHeight) {\n            level.width = _videotag.videoWidth;\n            level.height = _videotag.videoHeight;\n            _setMediaType();\n            if (!level.width || !level.height || _currentQuality === -1) {\n                return;\n            }\n            visualQuality.reason = visualQuality.reason || 'auto';\n            visualQuality.mode = _levels[_currentQuality].type === 'hls' ? 'auto' : 'manual';\n            visualQuality.bitrate = 0;\n            level.index = _currentQuality;\n            level.label = _levels[_currentQuality].label;\n            _this.trigger(MEDIA_VISUAL_QUALITY, visualQuality);\n            visualQuality.reason = '';\n        }\n    }\n\n    function _setPositionBeforeSeek(position) {\n        _positionBeforeSeek = _convertTime(position);\n    }\n\n    _this.getCurrentTime = function() {\n        return _convertTime(_videotag.currentTime);\n    };\n\n    function _convertTime(position) {\n        if (_this.getDuration() < 0) {\n            position -= _getSeekableEnd();\n        }\n        return position;\n    }\n\n    _this.getDuration = function() {\n        var duration = _videotag.duration;\n        // Don't sent time event on Android before real duration is known\n        if (_androidHls && (duration === Infinity && _videotag.currentTime === 0) || isNaN(duration)) {\n            return 0;\n        }\n        var end = _getSeekableEnd();\n        if (_this.isLive() && end) {\n            var seekableDuration = end - _getSeekableStart();\n            if (seekableDuration !== Infinity && seekableDuration > MIN_DVR_DURATION) {\n                // Player interprets negative duration as DVR\n                duration = -seekableDuration;\n            }\n        }\n        return duration;\n    };\n\n    function _checkDelayedSeek(duration) {\n        // Don't seek when _delayedSeek is set to -1 in _completeLoad\n        if (_delayedSeek && _delayedSeek !== -1 && duration && duration !== Infinity) {\n            _this.seek(_delayedSeek);\n        }\n    }\n\n    function _getPublicLevels(levels) {\n        var publicLevels;\n        if (utils.typeOf(levels) === 'array' && levels.length > 0) {\n            publicLevels = _.map(levels, function(level, i) {\n                return {\n                    label: level.label || i\n                };\n            });\n        }\n        return publicLevels;\n    }\n\n    function _setLevels(levels) {\n        _levels = levels;\n        _currentQuality = _pickInitialQuality(levels);\n    }\n\n    function _pickInitialQuality(levels) {\n        var currentQuality = Math.max(0, _currentQuality);\n        var label = _playerConfig.qualityLabel;\n        if (levels) {\n            for (var i = 0; i < levels.length; i++) {\n                if (levels[i].default) {\n                    currentQuality = i;\n                }\n                if (label && levels[i].label === label) {\n                    return i;\n                }\n            }\n        }\n        visualQuality.reason = 'initial choice';\n\n        if (!visualQuality.level.width || !visualQuality.level.height) {\n            visualQuality.level = {};\n        }\n\n        return currentQuality;\n    }\n\n    function _play() {\n        return _videotag.play() || createPlayPromise(_videotag);\n    }\n\n    function _completeLoad(startTime) {\n        _delayedSeek = 0;\n        clearTimeouts();\n\n        const previousSource = _videotag.src;\n        const sourceElement = document.createElement('source');\n        sourceElement.src = _levels[_currentQuality].file;\n        const sourceChanged = (sourceElement.src !== previousSource);\n\n        if (sourceChanged) {\n            _setVideotagSource(_levels[_currentQuality]);\n            // Do not call load if src was not set. load() will cancel any active play promise.\n            if (previousSource) {\n                _videotag.load();\n            }\n        } else if (startTime === 0 && _videotag.currentTime > 0) {\n            // Load event is from the same video as before\n            // restart video without dispatching seek event\n            _delayedSeek = -1;\n            _this.seek(startTime);\n        }\n\n        if (startTime > 0) {\n            _this.seek(startTime);\n        }\n\n        var publicLevels = _getPublicLevels(_levels);\n        if (publicLevels) {\n            _this.trigger(MEDIA_LEVELS, {\n                levels: publicLevels,\n                currentQuality: _currentQuality\n            });\n        }\n        if (_levels.length && _levels[0].type !== 'hls') {\n            _this.sendMediaType(_levels);\n        }\n    }\n\n    function _setVideotagSource(source) {\n        _audioTracks = null;\n        _currentAudioTrackIndex = -1;\n        if (!visualQuality.reason) {\n            visualQuality.reason = 'initial choice';\n            visualQuality.level = {};\n        }\n        _canSeek = false;\n\n        var sourceElement = document.createElement('source');\n        sourceElement.src = source.file;\n        var sourceChanged = (_videotag.src !== sourceElement.src);\n        if (sourceChanged) {\n            _videotag.src = source.file;\n        }\n    }\n\n    function _clearVideotagSource() {\n        if (_videotag) {\n            _this.disableTextTrack();\n            _videotag.removeAttribute('preload');\n            _videotag.removeAttribute('src');\n            emptyElement(_videotag);\n            style(_videotag, {\n                objectFit: ''\n            });\n            _currentQuality = -1;\n            // Don't call load in iE9/10 and check for load in PhantomJS\n            if (!Browser.msie && 'load' in _videotag) {\n                _videotag.load();\n            }\n        }\n    }\n\n    function _getSeekableStart() {\n        var index = _videotag.seekable ? _videotag.seekable.length : 0;\n        var start = Infinity;\n\n        while (index--) {\n            start = Math.min(start, _videotag.seekable.start(index));\n        }\n        return start;\n    }\n\n    function _getSeekableEnd() {\n        var index = _videotag.seekable ? _videotag.seekable.length : 0;\n        var end = 0;\n\n        while (index--) {\n            end = Math.max(end, _videotag.seekable.end(index));\n        }\n        return end;\n    }\n\n    this.stop = function() {\n        clearTimeouts();\n        _clearVideotagSource();\n        this.clearTracks();\n        // IE/Edge continue to play a video after changing video.src and calling video.load()\n        // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/5383483/ (not fixed in Edge 14)\n        if (Browser.ie) {\n            _videotag.pause();\n        }\n        this.setState(STATE_IDLE);\n    };\n\n    this.destroy = function() {\n        _beforeResumeHandler = utils.noop;\n        _removeListeners(MediaEvents, _videotag);\n        this.removeTracksListener(_videotag.audioTracks, 'change', _audioTrackChangeHandler);\n        this.removeTracksListener(_videotag.textTracks, 'change', _this.textTrackChangeHandler);\n        this.off();\n    };\n\n    this.init = function(item) {\n        _setLevels(item.sources);\n        const source = _levels[_currentQuality];\n        _androidHls = isAndroidHls(source);        \n        if (_androidHls) {\n            // Playback rate is broken on Android HLS\n            _this.supportsPlaybackRate = false;\n            // Android HLS doesnt update its times correctly so it always falls in here.  Do not allow it to stall.\n            MediaEvents.waiting = utils.noop;\n        }\n        _this.eventsOn_();\n        // the loadeddata event determines the mediaType for HLS sources\n        if (_levels.length && _levels[0].type !== 'hls') {\n            this.sendMediaType(_levels);\n        }\n        visualQuality.reason = '';\n    };\n\n    this.preload = function(item) {\n        _setLevels(item.sources);\n        const source = _levels[_currentQuality];\n        const preload = source.preload || 'metadata';\n        if (preload !== 'none') {\n            _videotag.setAttribute('preload', preload);\n            _setVideotagSource(source);\n        }\n    };\n\n    this.load = function(item) {\n        _setLevels(item.sources);\n        _completeLoad(item.starttime, item.duration || 0);\n        this.setupSideloadedTracks(item.tracks);        \n    };\n\n    this.play = function() {\n        _beforeResumeHandler();\n        return _play();\n    };\n\n    this.pause = function() {\n        clearTimeouts();\n        _beforeResumeHandler = function() {\n            var unpausing = _videotag.paused && _videotag.currentTime;\n            if (unpausing && _this.isLive()) {\n                var end = _getSeekableEnd();\n                var seekableDuration = end - _getSeekableStart();\n                var isLiveNotDvr = seekableDuration < MIN_DVR_DURATION;\n                var behindLiveEdge = end - _videotag.currentTime;\n                if (isLiveNotDvr && end && (behindLiveEdge > 15 || behindLiveEdge < 0)) {\n                    // resume playback at edge of live stream\n                    _seekOffset = Math.max(end - 10, end - seekableDuration);\n                    _setPositionBeforeSeek(_videotag.currentTime);\n                    _videotag.currentTime = _seekOffset;\n                }\n\n            }\n        };\n        _videotag.pause();\n    };\n\n    this.seek = function(seekPos) {\n        if (seekPos < 0) {\n            seekPos += _getSeekableStart() + _getSeekableEnd();\n        }\n        if (!_canSeek) {\n            _canSeek = !!_getSeekableEnd();\n        }\n        if (_canSeek) {\n            _delayedSeek = 0;\n            // setting currentTime can throw an invalid DOM state exception if the video is not ready\n            try {\n                _this.seeking = true;\n                _seekOffset = seekPos;\n                _setPositionBeforeSeek(_videotag.currentTime);\n                _videotag.currentTime = seekPos;\n            } catch (e) {\n                _this.seeking = false;\n                _delayedSeek = seekPos;\n            }\n        } else {\n            _delayedSeek = seekPos;\n            // Firefox isn't firing canplay event when in a paused state\n            // https://bugzilla.mozilla.org/show_bug.cgi?id=1194624\n            if (Browser.firefox && _videotag.paused) {\n                _play();\n            }\n        }\n    };\n\n    function _audioTrackChangeHandler() {\n        var _selectedAudioTrackIndex = -1;\n        for (var i = 0; i < _videotag.audioTracks.length; i++) {\n            if (_videotag.audioTracks[i].enabled) {\n                _selectedAudioTrackIndex = i;\n                break;\n            }\n        }\n        _setCurrentAudioTrack(_selectedAudioTrackIndex);\n    }\n\n    function _sendFullscreen(e) {\n        _this.trigger('fullscreenchange', {\n            target: e.target,\n            jwstate: _fullscreenState\n        });\n    }\n\n    this.setVisibility = function(state) {\n        state = !!state;\n        if (state || OS.android) {\n            // Changing visibility to hidden on Android < 4.2 causes\n            // the pause event to be fired. This causes audio files to\n            // become unplayable. Hence the video tag is always kept\n            // visible on Android devices.\n            style(_this.container, {\n                visibility: 'visible',\n                opacity: 1\n            });\n        } else {\n            style(_this.container, {\n                visibility: '',\n                opacity: 0\n            });\n        }\n    };\n\n    this.resize = function(width, height, stretching) {\n        if (!width || !height || !_videotag.videoWidth || !_videotag.videoHeight) {\n            return;\n        }\n        const styles = {\n            objectFit: '',\n            width: '',\n            height: ''\n        };\n        if (stretching === 'uniform') {\n            // snap video to edges when the difference in aspect ratio is less than 9%\n            const playerAspectRatio = width / height;\n            const videoAspectRatio = _videotag.videoWidth / _videotag.videoHeight;\n            if (Math.abs(playerAspectRatio - videoAspectRatio) < 0.09) {\n                styles.objectFit = 'fill';\n                stretching = 'exactfit';\n            }\n        }\n        // Prior to iOS 9, object-fit worked poorly\n        // object-fit is not implemented in IE or Android Browser in 4.4 and lower\n        // http://caniuse.com/#feat=object-fit\n        // feature detection may work for IE but not for browsers where object-fit works for images only\n        const fitVideoUsingTransforms = Browser.ie || (OS.iOS && OS.version.major < 9) || Browser.androidNative;\n        if (fitVideoUsingTransforms) {\n            // Use transforms to center and scale video in container\n            const x = -Math.floor(_videotag.videoWidth / 2 + 1);\n            const y = -Math.floor(_videotag.videoHeight / 2 + 1);\n            let scaleX = Math.ceil(width * 100 / _videotag.videoWidth) / 100;\n            let scaleY = Math.ceil(height * 100 / _videotag.videoHeight) / 100;\n            if (stretching === 'none') {\n                scaleX = scaleY = 1;\n            } else if (stretching === 'fill') {\n                scaleX = scaleY = Math.max(scaleX, scaleY);\n            } else if (stretching === 'uniform') {\n                scaleX = scaleY = Math.min(scaleX, scaleY);\n            }\n            styles.width = _videotag.videoWidth;\n            styles.height = _videotag.videoHeight;\n            styles.top = styles.left = '50%';\n            styles.margin = 0;\n            transform(_videotag,\n                'translate(' + x + 'px, ' + y + 'px) scale(' + scaleX.toFixed(2) + ', ' + scaleY.toFixed(2) + ')');\n        }\n        style(_videotag, styles);\n    };\n\n    this.setFullscreen = function(state) {\n        state = !!state;\n\n        // This implementation is for iOS and Android WebKit only\n        // This won't get called if the player container can go fullscreen\n        if (state) {\n            var status = utils.tryCatch(function() {\n                var enterFullscreen =\n                    _videotag.webkitEnterFullscreen ||\n                    _videotag.webkitEnterFullScreen;\n                if (enterFullscreen) {\n                    enterFullscreen.apply(_videotag);\n                }\n\n            });\n\n            if (status instanceof utils.Error) {\n                // object can't go fullscreen\n                return false;\n            }\n            return _this.getFullScreen();\n        }\n\n        var exitFullscreen =\n            _videotag.webkitExitFullscreen ||\n            _videotag.webkitExitFullScreen;\n        if (exitFullscreen) {\n            exitFullscreen.apply(_videotag);\n        }\n\n        return state;\n    };\n\n    _this.getFullScreen = function() {\n        return _fullscreenState || !!_videotag.webkitDisplayingFullscreen;\n    };\n\n    this.setCurrentQuality = function(quality) {\n        if (_currentQuality === quality) {\n            return;\n        }\n        if (quality >= 0) {\n            if (_levels && _levels.length > quality) {\n                _currentQuality = quality;\n                visualQuality.reason = 'api';\n                visualQuality.level = {};\n                this.trigger(MEDIA_LEVEL_CHANGED, {\n                    currentQuality: quality,\n                    levels: _getPublicLevels(_levels)\n                });\n\n                // The playerConfig is not updated automatically, because it is a clone\n                // from when the provider was first initialized\n                _playerConfig.qualityLabel = _levels[quality].label;\n\n                const time = _videotag.currentTime || 0;\n                const duration = _this.getDuration();\n                _completeLoad(time, duration);\n                _play();\n            }\n        }\n    };\n\n    this.setPlaybackRate = function(playbackRate) {\n        // Set defaultPlaybackRate so that we do not send ratechange events when setting src\n        _videotag.playbackRate = _videotag.defaultPlaybackRate = playbackRate;\n    };\n\n    this.getPlaybackRate = function() {\n        return _videotag.playbackRate;\n    };\n\n    this.getCurrentQuality = function() {\n        return _currentQuality;\n    };\n\n    this.getQualityLevels = function() {\n        return _.map(_levels, level => qualityLevel(level));\n    };\n\n    this.getName = function() {\n        return { name: _name };\n    };\n    this.setCurrentAudioTrack = _setCurrentAudioTrack;\n\n    this.getAudioTracks = _getAudioTracks;\n\n    this.getCurrentAudioTrack = _getCurrentAudioTrack;\n\n    function _setAudioTracks(tracks) {\n        _audioTracks = null;\n        if (!tracks) {\n            return;\n        }\n        if (tracks.length) {\n            for (var i = 0; i < tracks.length; i++) {\n                if (tracks[i].enabled) {\n                    _currentAudioTrackIndex = i;\n                    break;\n                }\n            }\n            if (_currentAudioTrackIndex === -1) {\n                _currentAudioTrackIndex = 0;\n                tracks[_currentAudioTrackIndex].enabled = true;\n            }\n            _audioTracks = _.map(tracks, function(track) {\n                var _track = {\n                    name: track.label || track.language,\n                    language: track.language\n                };\n                return _track;\n            });\n        }\n        _this.addTracksListener(tracks, 'change', _audioTrackChangeHandler);\n        if (_audioTracks) {\n            _this.trigger('audioTracks', { currentTrack: _currentAudioTrackIndex, tracks: _audioTracks });\n        }\n    }\n\n    function _setCurrentAudioTrack(index) {\n        if (_videotag && _videotag.audioTracks && _audioTracks &&\n            index > -1 && index < _videotag.audioTracks.length && index !== _currentAudioTrackIndex) {\n            _videotag.audioTracks[_currentAudioTrackIndex].enabled = false;\n            _currentAudioTrackIndex = index;\n            _videotag.audioTracks[_currentAudioTrackIndex].enabled = true;\n            _this.trigger('audioTrackChanged', { currentTrack: _currentAudioTrackIndex,\n                tracks: _audioTracks });\n        }\n    }\n\n    function _getAudioTracks() {\n        return _audioTracks || [];\n    }\n\n    function _getCurrentAudioTrack() {\n        return _currentAudioTrackIndex;\n    }\n\n    function _setMediaType() {\n        // Send mediaType when format is HLS. Other types are handled earlier by default.js.\n        if (_levels[0].type === 'hls') {\n            var mediaType = 'video';\n            if (_videotag.videoHeight === 0) {\n                // Safari will report videoHeight as 0 for HLS streams until readyState indicates that the browser has data\n                if ((OS.iOS || Browser.safari) && _videotag.readyState < 2) {\n                    return;\n                }\n                mediaType = 'audio';\n            }\n            _this.trigger(MEDIA_TYPE, { mediaType: mediaType });\n        }\n    }\n\n    // If we're live and the buffer end has remained the same for some time, mark the stream as stale and check if the stream is over\n    function checkStaleStream() {\n        // Never kill a stale live stream if the timeout was configured to 0\n        if (_staleStreamDuration === 0) {\n            return;\n        }\n        var endOfBuffer = endOfRange(_videotag.buffered);\n        var live = _this.isLive();\n\n        // Don't end if we have noting buffered yet, or cannot get any information about the buffer\n        if (live && endOfBuffer && _lastEndOfBuffer === endOfBuffer) {\n            if (_staleStreamTimeout === -1) {\n                _staleStreamTimeout = setTimeout(function () {\n                    _stale = true;\n                    checkStreamEnded();\n                }, _staleStreamDuration);\n            }\n        } else {\n            clearTimeouts();\n            _stale = false;\n        }\n\n        _lastEndOfBuffer = endOfBuffer;\n    }\n\n    function checkStreamEnded() {\n        if (_stale && _this.atEdgeOfLiveStream()) {\n            _this.trigger(MEDIA_ERROR, {\n                message: 'The live stream is either down or has ended'\n            });\n            return true;\n        }\n\n        return false;\n    }\n\n    function clearTimeouts() {\n        clearTimeout(_staleStreamTimeout);\n        _staleStreamTimeout = -1;\n    }\n}\n\nObject.assign(VideoProvider.prototype, DefaultProvider);\n\nVideoProvider.getName = function() {\n    return { name: 'html5' };\n};\n\nexport default VideoProvider;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/providers/html5.js","import VTTCue from 'parsers/captions/vttcue';\nimport { chunkLoadErrorHandler } from '../api/core-loader';\nimport utils from 'utils/helpers';\nimport { localName } from 'parsers/parsers';\nimport srt from 'parsers/captions/srt';\nimport dfxp from 'parsers/captions/dfxp';\n\nexport function loadFile(track, successHandler, errorHandler) {\n    track.xhr = utils.ajax(track.file, function(xhr) {\n        xhrSuccess(xhr, track, successHandler, errorHandler);\n    }, errorHandler);\n}\n\nexport function cancelXhr(tracks) {\n    if (tracks) {\n        tracks.forEach(track => {\n            var xhr = track.xhr;\n            if (xhr) {\n                xhr.onload = null;\n                xhr.onreadystatechange = null;\n                xhr.onerror = null;\n                if ('abort' in xhr) {\n                    xhr.abort();\n                }\n            }\n            delete track.xhr;\n        });\n    }\n}\n\nexport function convertToVTTCues(cues) {\n    // VTTCue is available natively or polyfilled where necessary\n    return cues.map(cue => new VTTCue(cue.begin, cue.end, cue.text));\n}\n\nfunction xhrSuccess(xhr, track, successHandler, errorHandler) {\n    var xmlRoot = xhr.responseXML ? xhr.responseXML.firstChild : null;\n    var cues;\n    var vttCues;\n\n    // IE9 sets the firstChild element to the root <xml> tag\n    if (xmlRoot) {\n        if (localName(xmlRoot) === 'xml') {\n            xmlRoot = xmlRoot.nextSibling;\n        }\n        // Ignore all comments\n        while (xmlRoot.nodeType === xmlRoot.COMMENT_NODE) {\n            xmlRoot = xmlRoot.nextSibling;\n        }\n    }\n\n    try {\n        if (xmlRoot && localName(xmlRoot) === 'tt') {\n            // parse dfxp track\n            cues = dfxp(xhr.responseXML);\n            vttCues = convertToVTTCues(cues);\n            delete track.xhr;\n            successHandler(vttCues);\n        } else {\n            // parse VTT/SRT track\n            var responseText = xhr.responseText;\n            if (responseText.indexOf('WEBVTT') >= 0) {\n                // make VTTCues from VTT track\n                loadVttParser().then(VTTParser => {\n                    var parser = new VTTParser(window);\n                    vttCues = [];\n                    parser.oncue = function(cue) {\n                        vttCues.push(cue);\n                    };\n\n                    parser.onflush = function() {\n                        delete track.xhr;\n                        successHandler(vttCues);\n                    };\n\n                    // Parse calls onflush internally\n                    parser.parse(responseText);\n                }).catch(error => {\n                    delete track.xhr;\n                    errorHandler(error);\n                });\n            } else {\n                // make VTTCues from SRT track\n                cues = srt(responseText);\n                vttCues = convertToVTTCues(cues);\n                delete track.xhr;\n                successHandler(vttCues);\n            }\n        }\n    } catch (error) {\n        delete track.xhr;\n        errorHandler(error);\n    }\n}\n\nfunction loadVttParser() {\n    return require.ensure(['parsers/captions/vttparser'], function (require) {\n        return require('parsers/captions/vttparser').default;\n    }, chunkLoadErrorHandler, 'vttparser');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/controller/tracks-loader.js","export function createId(track, tracksCount) {\n    var trackId;\n    var prefix = track.kind || 'cc';\n    if (track.default || track.defaulttrack) {\n        trackId = 'default';\n    } else {\n        trackId = track._id || track.file || (prefix + tracksCount);\n    }\n    return trackId;\n}\n\nexport function createLabel(track, unknownCount) {\n    var label = track.label || track.name || track.language;\n    if (!label) {\n        label = 'Unknown CC';\n        unknownCount += 1;\n        if (unknownCount > 1) {\n            label += ' [' + unknownCount + ']';\n        }\n    }\n    return { label: label, unknownCount: unknownCount };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/controller/tracks-helper.js","import Promise from 'polyfills/promise';\n\nexport default function createPlayPromise(video) {\n    return new Promise(function(resolve, reject) {\n        if (video.paused) {\n            return reject(new Error('Play refused.'));\n        }\n        const removeEventListeners = function() {\n            video.removeEventListener('playing', listener);\n            video.removeEventListener('pause', listener);\n            video.removeEventListener('abort', listener);\n            video.removeEventListener('error', listener);\n        };\n        const listener = function(e) {\n            removeEventListeners();\n            if (e.type === 'playing') {\n                resolve();\n            } else {\n                reject(new Error('The play() request was interrupted by a \"' + e.type + '\" event.'));\n            }\n        };\n\n        video.addEventListener('playing', listener);\n        video.addEventListener('abort', listener);\n        video.addEventListener('error', listener);\n        video.addEventListener('pause', listener);\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/providers/utils/play-promise.js","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n*/\n\nlet VTTCue = window.VTTCue;\n\nfunction findDirectionSetting(value) {\n    if (typeof value !== 'string') {\n        return false;\n    }\n    const directionSetting = {\n        '': true,\n        lr: true,\n        rl: true\n    };\n    const dir = directionSetting[value.toLowerCase()];\n    return dir ? value.toLowerCase() : false;\n}\n\nfunction findAlignSetting(value) {\n    if (typeof value !== 'string') {\n        return false;\n    }\n    const alignSetting = {\n        start: true,\n        middle: true,\n        end: true,\n        left: true,\n        right: true\n    };\n    const align = alignSetting[value.toLowerCase()];\n    return align ? value.toLowerCase() : false;\n}\n\nif (!VTTCue) {\n    const autoKeyword = 'auto';\n\n    VTTCue = function(startTime, endTime, text) {\n        const cue = this;\n\n        /**\n         * Shim implementation specific properties. These properties are not in\n         * the spec.\n         */\n\n        // Lets us know when the VTTCue's data has changed in such a way that we need\n        // to recompute its display state. This lets us compute its display state\n        // lazily.\n        cue.hasBeenReset = false;\n\n        /**\n         * VTTCue and TextTrackCue properties\n         * http://dev.w3.org/html5/webvtt/#vttcue-interface\n         */\n\n        let _id = '';\n        let _pauseOnExit = false;\n        let _startTime = startTime;\n        let _endTime = endTime;\n        let _text = text;\n        let _region = null;\n        let _vertical = '';\n        let _snapToLines = true;\n        let _line = autoKeyword;\n        let _lineAlign = 'start';\n        let _position = autoKeyword;\n        let _size = 100;\n        let _align = 'middle';\n\n        Object.defineProperty(cue, 'id', {\n            enumerable: true,\n            get: function () {\n                return _id;\n            },\n            set: function (value) {\n                _id = '' + value;\n            }\n        });\n\n        Object.defineProperty(cue, 'pauseOnExit', {\n            enumerable: true,\n            get: function () {\n                return _pauseOnExit;\n            },\n            set: function (value) {\n                _pauseOnExit = !!value;\n            }\n        });\n\n        Object.defineProperty(cue, 'startTime', {\n            enumerable: true,\n            get: function () {\n                return _startTime;\n            },\n            set: function (value) {\n                if (typeof value !== 'number') {\n                    throw new TypeError('Start time must be set to a number.');\n                }\n                _startTime = value;\n                this.hasBeenReset = true;\n            }\n        });\n\n        Object.defineProperty(cue, 'endTime', {\n            enumerable: true,\n            get: function () {\n                return _endTime;\n            },\n            set: function (value) {\n                if (typeof value !== 'number') {\n                    throw new TypeError('End time must be set to a number.');\n                }\n                _endTime = value;\n                this.hasBeenReset = true;\n            }\n        });\n\n        Object.defineProperty(cue, 'text', {\n            enumerable: true,\n            get: function () {\n                return _text;\n            },\n            set: function (value) {\n                _text = '' + value;\n                this.hasBeenReset = true;\n            }\n        });\n\n        Object.defineProperty(cue, 'region', {\n            enumerable: true,\n            get: function () {\n                return _region;\n            },\n            set: function (value) {\n                _region = value;\n                this.hasBeenReset = true;\n            }\n        });\n\n        Object.defineProperty(cue, 'vertical', {\n            enumerable: true,\n            get: function () {\n                return _vertical;\n            },\n            set: function (value) {\n                const setting = findDirectionSetting(value);\n                // Have to check for false because the setting an be an empty string.\n                if (setting === false) {\n                    throw new SyntaxError('An invalid or illegal string was specified.');\n                }\n                _vertical = setting;\n                this.hasBeenReset = true;\n            }\n        });\n\n        Object.defineProperty(cue, 'snapToLines', {\n            enumerable: true,\n            get: function () {\n                return _snapToLines;\n            },\n            set: function (value) {\n                _snapToLines = !!value;\n                this.hasBeenReset = true;\n            }\n        });\n\n        Object.defineProperty(cue, 'line', {\n            enumerable: true,\n            get: function () {\n                return _line;\n            },\n            set: function (value) {\n                if (typeof value !== 'number' && value !== autoKeyword) {\n                    throw new SyntaxError('An invalid number or illegal string was specified.');\n                }\n                _line = value;\n                this.hasBeenReset = true;\n            }\n        });\n\n        Object.defineProperty(cue, 'lineAlign', {\n            enumerable: true,\n            get: function () {\n                return _lineAlign;\n            },\n            set: function (value) {\n                const setting = findAlignSetting(value);\n                if (!setting) {\n                    throw new SyntaxError('An invalid or illegal string was specified.');\n                }\n                _lineAlign = setting;\n                this.hasBeenReset = true;\n            }\n        });\n\n        Object.defineProperty(cue, 'position', {\n            enumerable: true,\n            get: function () {\n                return _position;\n            },\n            set: function (value) {\n                if (value < 0 || value > 100) {\n                    throw new Error('Position must be between 0 and 100.');\n                }\n                _position = value;\n                this.hasBeenReset = true;\n            }\n        });\n\n        Object.defineProperty(cue, 'size', {\n            enumerable: true,\n            get: function () {\n                return _size;\n            },\n            set: function (value) {\n                if (value < 0 || value > 100) {\n                    throw new Error('Size must be between 0 and 100.');\n                }\n                _size = value;\n                this.hasBeenReset = true;\n            }\n        });\n\n        Object.defineProperty(cue, 'align', {\n            enumerable: true,\n            get: function () {\n                return _align;\n            },\n            set: function (value) {\n                const setting = findAlignSetting(value);\n                if (!setting) {\n                    throw new SyntaxError('An invalid or illegal string was specified.');\n                }\n                _align = setting;\n                this.hasBeenReset = true;\n            }\n        });\n\n        /**\n         * Other <track> spec defined properties\n         */\n\n        // http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#text-track-cue-display-state\n        cue.displayState = undefined;\n    };\n\n    /**\n     * VTTCue methods\n     */\n\n    VTTCue.prototype.getCueAsHTML = function () {\n        // Assume WebVTT.convertCueToDOMTree is on the global.\n        const WebVTT = window.WebVTT;\n        return WebVTT.convertCueToDOMTree(window, this.text);\n    };\n}\n\nexport default VTTCue;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/parsers/captions/vttcue.js","import { seconds, trim } from 'utils/strings';\n\n// Component that loads and parses an DFXP file\n\nexport default function Dfxp(xmlDoc) {\n    validate(xmlDoc);\n    var _captions = [];\n    var paragraphs = xmlDoc.getElementsByTagName('p');\n    // Default frameRate is 30\n    var frameRate = 30;\n    var tt = xmlDoc.getElementsByTagName('tt');\n    if (tt && tt[0]) {\n        var parsedFrameRate = parseFloat(tt[0].getAttribute('ttp:frameRate'));\n        if (!isNaN(parsedFrameRate)) {\n            frameRate = parsedFrameRate;\n        }\n    }\n    validate(paragraphs);\n    if (!paragraphs.length) {\n        paragraphs = xmlDoc.getElementsByTagName('tt:p');\n        if (!paragraphs.length) {\n            paragraphs = xmlDoc.getElementsByTagName('tts:p');\n        }\n    }\n\n    for (var i = 0; i < paragraphs.length; i++) {\n        var p = paragraphs[i];\n\n        var breaks = p.getElementsByTagName('br');\n        for (var j = 0; j < breaks.length; j++) {\n            var b = breaks[j];\n            b.parentNode.replaceChild(xmlDoc.createTextNode('\\r\\n'), b);\n        }\n\n        var rawText = (p.innerHTML || p.textContent || p.text || '');\n        var text = trim(rawText).replace(/>\\s+</g, '><').replace(/(<\\/?)tts?:/g, '$1').replace(/<br.*?\\/>/g, '\\r\\n');\n        if (text) {\n            var begin = p.getAttribute('begin');\n            var dur = p.getAttribute('dur');\n            var end = p.getAttribute('end');\n\n            var entry = {\n                begin: seconds(begin, frameRate),\n                text: text\n            };\n            if (end) {\n                entry.end = seconds(end, frameRate);\n            } else if (dur) {\n                entry.end = entry.begin + seconds(dur, frameRate);\n            }\n            _captions.push(entry);\n        }\n    }\n    if (!_captions.length) {\n        parseError();\n    }\n    return _captions;\n}\n\nfunction validate(object) {\n    if (!object) {\n        parseError();\n    }\n}\n\nfunction parseError() {\n    throw new Error('Invalid DFXP file');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/parsers/captions/dfxp.js"],"sourceRoot":""}